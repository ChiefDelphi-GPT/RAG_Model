{"data":"{\"post_stream\":{\"posts\":[{\"id\":3669858,\"name\":\"Reese Farinas\",\"username\":\"refari\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/bcef8e/{size}.png\",\"created_at\":\"2025-06-30T02:49:31.422Z\",\"cooked\":\"\\u003cp\\u003eHello everyone,\\u003c/p\\u003e\\n\\u003cp\\u003eSince I’ve graduated high school and I have a good month or two until I have to actually start college, I’ve decided to go with a speedrun sort of project and I thought making a motor controller would be fun. The rules are very simple: I have two months or until I can’t continue, and whatever I end up with gets open sourced for anyone to experiment with. You are welcome to follow along and give feedback, though I can’t guarantee that any particular contribution gets used.\\u003cbr\\u003e\\nThe overall strategy I’ve devised to minimize hiccups (magic smoke) and delays is to start with a low current prototype, create some software, repeat as needed, then modify the design to handle progressively more power. Since PCBs take ages to get made in the context of ~8 weeks, I’ll save them for the end and use various breadboards in the meantime. The goal is to support the 3 phase \\u003cspan class=\\\"abbreviation\\\"\\u003eBLDC\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"brushless direct current motor\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e motors that we’re all familiar with, trapezoidal commutation, a few sensor options, current sensing, and if I’m feeling fancy, \\u003cspan class=\\\"abbreviation\\\"\\u003eFOC\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Field Oriented Control\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e.\\u003c/p\\u003e\\n\\u003cp\\u003eWhy do it? Because it’s fun, and more importantly I hope it inspires people to go on and do their own shenanigans with electronics.\\u003c/p\\u003e\\n\\u003cp\\u003eAnyways, it’s June 29 and the plan is to construct an H-bridge circuit using MOSFETs, an STM32 board, and a gate driver IC (DRV8300). I wasn’t originally planning on using a gate driver but eventually realized that this is fairly tricky.\\u003c/p\\u003e\\n\\u003cdetails\\u003e\\n\\u003csummary\\u003e\\nWhy?\\u003c/summary\\u003e\\n\\u003cp\\u003eHere’s a diagram of an H-bridge cell.\\u003cbr\\u003e\\n\\u003cdiv class=\\\"lightbox-wrapper\\\"\\u003e\\u003ca class=\\\"lightbox\\\" href=\\\"https://www.chiefdelphi.com/uploads/default/original/4X/f/6/8/f681234e6677320f73287f59c811e018f8bbe306.png\\\" data-download-href=\\\"https://www.chiefdelphi.com/uploads/default/f681234e6677320f73287f59c811e018f8bbe306\\\" title=\\\"Image of an a single section of an H-bridge circuit\\\"\\u003e\\u003cimg src=\\\"https://www.chiefdelphi.com/uploads/default/optimized/4X/f/6/8/f681234e6677320f73287f59c811e018f8bbe306_2_213x375.png\\\" alt=\\\"Image of an a single section of an H-bridge circuit\\\" data-base62-sha1=\\\"zaG8kMcAZE6V6O144YavMrgCT0W\\\" width=\\\"213\\\" height=\\\"375\\\" srcset=\\\"https://www.chiefdelphi.com/uploads/default/optimized/4X/f/6/8/f681234e6677320f73287f59c811e018f8bbe306_2_213x375.png, https://www.chiefdelphi.com/uploads/default/optimized/4X/f/6/8/f681234e6677320f73287f59c811e018f8bbe306_2_319x562.png 1.5x, https://www.chiefdelphi.com/uploads/default/original/4X/f/6/8/f681234e6677320f73287f59c811e018f8bbe306.png 2x\\\" data-dominant-color=\\\"FAFAF9\\\"\\u003e\\u003cdiv class=\\\"meta\\\"\\u003e\\u003csvg class=\\\"fa d-icon d-icon-far-image svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#far-image\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003cspan class=\\\"filename\\\"\\u003eImage of an a single section of an H-bridge circuit\\u003c/span\\u003e\\u003cspan class=\\\"informations\\\"\\u003e379×664 15.9 KB\\u003c/span\\u003e\\u003csvg class=\\\"fa d-icon d-icon-discourse-expand svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#discourse-expand\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003c/div\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eMOSFETs switch to their closed state when the voltage between the gate (pin 1) and source (pin 3) is higher than a known threshold voltage (~2v). Assume a microcontroller is grounded to GND and uses 3.3v as a logic voltage. You can turn on A_L with the microcontroller because its source is at 0v and its gate will be at 3.3v. Turning on A_H is more difficult because its source could be at any voltage between 0v and 12v. In theory, if it is higher than around 1.3 volts, you might not be able to turn it on with 3.3v at the gate. Even worse, current can flow backwards from the source through the gate into the microcontroller, which can hurt it. DRV8300 handles all this for you and even prevents “shoot-through” by never allowing the high and low side to be on at the same time. It also takes strain off the microcontroller in general.\\u003c/p\\u003e\\n\\u003c/details\\u003e\\n\\u003cp\\u003eThe test subject motor will be whatever I find at home or at the surplus store as I get almost zero access to NEOs during the summer. I’ve ordered a bunch of relevant parts from Digikey and once they arrive I’ll get started. Once again, feel free to share your thoughts, I’m looking forward to this project.\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-06-30T02:51:33.116Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1744,\"reads\":758,\"readers_count\":757,\"score\":9081.6,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Reese Farinas\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":14}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53209,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/1\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":14}],\"current_user_reaction\":null,\"reaction_users_count\":14,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":3669879,\"name\":\"joel truher\",\"username\":\"truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"created_at\":\"2025-06-30T02:55:59.980Z\",\"cooked\":\"\\u003cp\\u003eare you aware of \\u003ca href=\\\"https://simplefoc.com/\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ehttps://simplefoc.com/\\u003c/a\\u003e ?\\u003c/p\\u003e\\n\\u003cp\\u003ethat might get you going quickly.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-06-30T02:55:59.980Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":7,\"reads\":698,\"readers_count\":697,\"score\":324.6,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"joel truher\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://simplefoc.com/\",\"internal\":false,\"reflection\":false,\"title\":\"SimpleFOCproject | Home\",\"clicks\":371}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":10}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53190,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/2\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":10}],\"current_user_reaction\":null,\"reaction_users_count\":10,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3670140,\"name\":\"Zach Hoegberg\",\"username\":\"Zaque\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/zaque/{size}/257827_2.png\",\"created_at\":\"2025-06-30T04:40:46.360Z\",\"cooked\":\"\\u003cp\\u003eYou might also find some resources from ODrive useful as reference for your project, most (all?) of their current boards are closed source but the older boards as well as software is open source and should be available I believe.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-06-30T04:40:46.360Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":679,\"readers_count\":678,\"score\":240.8,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Zach Hoegberg\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":6}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":20681,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"112 Drive Coach | 111\\u0026112 Mentor\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/3\",\"custom_user_title\":\"112 Drive Coach | 111\\u0026112 Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":6}],\"current_user_reaction\":null,\"reaction_users_count\":6,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3670144,\"name\":\"Max Morehead\",\"username\":\"Max_Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\",\"created_at\":\"2025-06-30T04:59:59.940Z\",\"cooked\":\"\\u003cp\\u003eThis is a fantastic project that I’ve always wanted to attempt but have never taken on. Here’s some thoughts on resources off the top of my head:\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eIn addition to the already mentioned Odroid, I would look into VESC as well. I believe both projects have some schematics, at least of older versions. IIRC one of them uses some driver in the DRV83xx family.\\u003c/li\\u003e\\n\\u003cli\\u003eI found the videos from Great Scott! to be incredibly educational in this context. Here’s a video I remember being relevant, and he has a wealth of other videos that will probably be helpful.\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cdiv class=\\\"youtube-onebox lazy-video-container\\\" data-video-id=\\\"W9IHEqlGG1s\\\" data-video-title=\\\"Make your own ESC || BLDC Motor Driver (Part 1)\\\" data-video-start-time=\\\"\\\" data-provider-name=\\\"youtube\\\"\\u003e\\n  \\u003ca href=\\\"https://www.youtube.com/watch?v=W9IHEqlGG1s\\\" target=\\\"_blank\\\" class=\\\"video-thumbnail\\\" rel=\\\"noopener\\\"\\u003e\\n    \\u003cimg class=\\\"youtube-thumbnail\\\" src=\\\"https://img.youtube.com/vi/W9IHEqlGG1s/maxresdefault.jpg\\\" title=\\\"Make your own ESC || BLDC Motor Driver (Part 1)\\\" width=\\\"690\\\" height=\\\"388\\\"\\u003e\\n  \\u003c/a\\u003e\\n\\u003c/div\\u003e\\n\",\"post_number\":4,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-06-30T16:18:52.889Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":17,\"reads\":655,\"readers_count\":654,\"score\":261.0,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Max Morehead\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.youtube.com/watch?v=W9IHEqlGG1s\",\"internal\":false,\"reflection\":false,\"clicks\":1}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53784,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/4\",\"custom_user_title\":\"Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3670190,\"name\":\"Chadfrom7226\",\"username\":\"Chadfrom7226\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/chadfrom7226/{size}/113429_2.png\",\"created_at\":\"2025-06-30T12:46:26.093Z\",\"cooked\":\"\\u003cp\\u003eDepending on the ST chip you select, some of them have a brushless motor library you can use that will help you a lot\\u003c/p\\u003e\\n\\u003cp\\u003eThere are also motor controller MCUs. I think Rev uses the STM32F407 family in the spark max and I think \\u003cspan class=\\\"abbreviation\\\"\\u003eCTRE\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Cross The Road Electronics\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e uses some version of Microchip’s dsPIC\\u003c/p\\u003e\\n\\u003cp\\u003eYou don’t have to totally reinvent the wheel here, although I understand that sometimes is the fun part\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-06-30T12:46:26.093Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":7,\"reads\":538,\"readers_count\":537,\"score\":187.6,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Chadfrom7226\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":20021,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/5\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3670390,\"name\":\"Ada T\",\"username\":\"cmdada\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cmdada/{size}/230870_2.png\",\"created_at\":\"2025-06-30T16:59:59.027Z\",\"cooked\":\"\\u003caside class=\\\"onebox githubblob\\\" data-onebox-src=\\\"https://github.com/Team1157/aESC/blob/main/firmware/firmware.ino\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://github.com/Team1157/aESC/blob/main/firmware/firmware.ino\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch4\\u003e\\u003ca href=\\\"https://github.com/Team1157/aESC/blob/main/firmware/firmware.ino\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003eTeam1157/aESC/blob/main/firmware/firmware.ino\\u003c/a\\u003e\\u003c/h4\\u003e\\n\\n\\n      \\u003cpre\\u003e\\u003ccode class=\\\"lang-ino\\\"\\u003e#include \\u0026lt;SPI.h\\u0026gt;\\n#include \\u0026lt;mcp2515.h\\u0026gt;\\n#include \\u0026lt;EEPROM.h\\u0026gt;\\n\\n// MOSFET control pins\\n#define MOSFET_AH 0  // Phase A High\\n#define MOSFET_AL 2  // Phase A Low\\n#define MOSFET_BH 1  // Phase B High\\n#define MOSFET_BL 4  // Phase B Low\\n#define MOSFET_CH 3  // Phase C High\\n#define MOSFET_CL 5  // Phase C Low\\n\\n// EEPROM address for CAN ID\\n#define CAN_ID_ADDRESS 0\\n\\n// CAN bus setup\\nMCP2515 mcp2515(7);\\n\\n// Motor parameters\\n#define POLE_PAIRS 7\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\n\\n\\n  This file has been truncated. \\u003ca href=\\\"https://github.com/Team1157/aESC/blob/main/firmware/firmware.ino\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003eshow original\\u003c/a\\u003e\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eHere’s some Arduino code I wrote for a custom esc if it’s helpful\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-06-30T16:59:59.027Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":10,\"reads\":486,\"readers_count\":485,\"score\":162.2,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Ada T\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/Team1157/aESC/blob/main/firmware/firmware.ino\",\"internal\":false,\"reflection\":false,\"title\":\"aESC/firmware/firmware.ino at main · Team1157/aESC · GitHub\",\"clicks\":51}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":60586,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"1157 team captain, 2036 electrical lead 2024\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/6\",\"custom_user_title\":\"1157 team captain, 2036 electrical lead 2024\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3670392,\"name\":\"Ada T\",\"username\":\"cmdada\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cmdada/{size}/230870_2.png\",\"created_at\":\"2025-06-30T17:03:09.228Z\",\"cooked\":\"\\u003cp\\u003e\\u003ca href=\\\"https://www.chiefdelphi.com/t/designing-an-frc-style-brushless-motor-controller/443366\\\"\\u003eThis thread\\u003c/a\\u003e may also be of use to you\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-06-30T17:03:09.228Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":427,\"readers_count\":426,\"score\":125.4,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Ada T\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/designing-an-frc-style-brushless-motor-controller/443366\",\"internal\":true,\"reflection\":false,\"title\":\"Designing an FRC style brushless motor controller\",\"clicks\":17}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":60586,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"1157 team captain, 2036 electrical lead 2024\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/7\",\"custom_user_title\":\"1157 team captain, 2036 electrical lead 2024\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3670552,\"name\":\"Reese Farinas\",\"username\":\"refari\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/bcef8e/{size}.png\",\"created_at\":\"2025-06-30T20:16:56.930Z\",\"cooked\":\"\\u003cp\\u003eJust took at look at the resources everyone has posted. Minus SimpleFOC I haven’t seen any of it before so thanks for sharing it. VESC and Odrive were really neat and I’ll probably use them as inspiration later.\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-06-30T20:16:56.930Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":420,\"readers_count\":419,\"score\":119.0,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Reese Farinas\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53209,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/8\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3670568,\"name\":\"Clay\",\"username\":\"63hz\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/63hz/{size}/262762_2.png\",\"created_at\":\"2025-06-30T20:44:22.922Z\",\"cooked\":\"\\u003cp\\u003eI’ll add to the list of recommendations.  Have a look at the AM32 firmware project.  It’s an open source \\u003cspan class=\\\"abbreviation\\\"\\u003eBLDC\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"brushless direct current motor\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e motor control firmware for ARM processors.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003ca href=\\\"https://Github.com/am32-firmware/am32\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eAM32 ESC Firmware\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-06-30T20:44:22.922Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":414,\"readers_count\":413,\"score\":127.8,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Clay\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://Github.com/am32-firmware/am32\",\"internal\":false,\"reflection\":false,\"title\":\"GitHub - am32-firmware/AM32\",\"clicks\":10}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":63308,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2491 NoMythic - Mentor\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/9\",\"custom_user_title\":\"2491 NoMythic - Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3670571,\"name\":\"wyatt\",\"username\":\"stormsj28\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/a3d4f5/{size}.png\",\"created_at\":\"2025-06-30T20:50:31.779Z\",\"cooked\":\"\\u003cp\\u003eReally excited to see how this turns out, I’ve looked into a brushed one might work on that over the summer break. Keep going you got this!\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-06-30T20:50:31.779Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":412,\"readers_count\":411,\"score\":107.4,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"wyatt\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":76247,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"3218 CAD\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/10\",\"custom_user_title\":\"3218 CAD\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3671623,\"name\":\"philso\",\"username\":\"philso\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/p/e68b1a/{size}.png\",\"created_at\":\"2025-07-01T15:56:03.007Z\",\"cooked\":\"\\u003cp\\u003eSince you do not have access to NEOs from your team, you may want to get some small,low-power, and inexpensive BLDCs from a \\u003ca href=\\\"https://hobbyking.com/en_us/power-systems/electric-motors/brushless-motors.html#q=\\u0026amp;idx=hbk_live_magento_en_us_products_hbk_price_stock_2_group_0_asc\\u0026amp;dFR%5Bwarehouses%5D%5B0%5D=USA\\u0026amp;dFR%5Bwarehouses%5D%5B1%5D=USA_LA\\u0026amp;dFR%5Bwarehouses%5D%5B2%5D=Global\\u0026amp;dFR%5Bwarehouses%5D%5B3%5D=BRANDS_DIRECT\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B0%5D=USA%7C1\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B1%5D=USA%7C2\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B10%5D=BRANDS_DIRECT%7C2\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B11%5D=BRANDS_DIRECT%7C3\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B2%5D=USA%7C3\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B3%5D=USA_LA%7C1\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B4%5D=USA_LA%7C2\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B5%5D=USA_LA%7C3\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B6%5D=Global%7C1\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B7%5D=Global%7C2\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B8%5D=Global%7C3\\u0026amp;dFR%5Bwarehouses_stock_data%5D%5B9%5D=BRANDS_DIRECT%7C1\\u0026amp;hFR%5Bcategories.level0%5D%5B0%5D=Power%20Systems%20%2F%2F%2F%20Electric%20Motors%20%2F%2F%2F%20Brushless%20Motors\\u0026amp;is_v=1\\\" rel=\\\"noopener nofollow ugc\\\"\\u003esupplier to the hobby market\\u003c/a\\u003e and design your motor controller around it. These would be easier to build a controller for since they do not rely on encoder feedback. The parts you have already ordered may or may not be usable for this.\\u003c/p\\u003e\\n\\u003cp\\u003eOther people have provided you with many links to good resources relating to the software aspects.\\u003c/p\\u003e\\n\\u003cp\\u003eFor the hardware, it is easy to underestimate the difficulty of getting the hardware right, especially at higher power levels, and especially if one has no prior experience working with power electronics. That is why I suggested starting with a small, low-power motor. This is based on working on the development of 3-phase motor controller circuitry for a few decades.\\u003c/p\\u003e\\n\\u003cp\\u003eThe physical layout of the components and the conductor paths is very important and will be difficult to get right without a PCB. At low power levels, you are more likely to get away with using a breadboard.\\u003c/p\\u003e\\n\\u003cp\\u003eSince this is likely to be your first such project, it would be best to use slower edge rates when turning the MOSFETs on and off, regardless of the switching frequency, to avoid oscillations, ringing, and other such phenomena that can lead to destruction of the switching devices. It would also be best to mount the MOSFETs on a heatsink that is bigger than you think will be necessary. Be  sure to use insulators between the MOSFETs and the heatsink.\\u003c/p\\u003e\\n\\u003cp\\u003eAcquiring a simple oscilloscope and learning how to use it will be helpful.\\u003c/p\\u003e\\n\\u003cp\\u003eBest of luck and enjoy the journey.\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-07-01T15:56:23.638Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":394,\"readers_count\":393,\"score\":118.8,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"philso\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://hobbyking.com/en_us/power-systems/electric-motors/brushless-motors.html#q=\\u0026idx=hbk_live_magento_en_us_products_hbk_price_stock_2_group_0_asc\\u0026dFR%5Bwarehouses%5D%5B0%5D=USA\\u0026dFR%5Bwarehouses%5D%5B1%5D=USA_LA\\u0026dFR%5Bwarehouses%5D%5B2%5D=Global\\u0026dFR%5Bwarehouses%5D%5B3%5D=BRANDS_DIRECT\\u0026dFR%5Bwarehouses_stock_data%5D%5B0%5D=USA%7C1\\u0026dFR%5Bwarehouses_stock_data%5D%5B1%5D=USA%7C2\\u0026dFR%5Bwarehouses_stock_data%5D%5B10%5D=BRANDS_DIRECT%7C2\\u0026dFR%5Bwarehouses_stock_data%5D%5B11%5D=BRANDS_DIRECT%7C3\\u0026dFR%5\",\"internal\":false,\"reflection\":false,\"clicks\":12}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":15467,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/11\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3671820,\"name\":\"Anand Rajamani\",\"username\":\"asid61\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/asid61/{size}/7179_2.png\",\"created_at\":\"2025-07-01T17:47:09.735Z\",\"cooked\":\"\\u003cp\\u003eI have a big post about this here:\\u003c/p\\u003e\\u003caside class=\\\"quote quote-modified\\\" data-post=\\\"11\\\" data-topic=\\\"443366\\\"\\u003e\\n  \\u003cdiv class=\\\"title\\\"\\u003e\\n    \\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n    \\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/asid61/48/7179_2.png\\\" class=\\\"avatar\\\"\\u003e\\n    \\u003ca href=\\\"https://www.chiefdelphi.com/t/designing-an-frc-style-brushless-motor-controller/443366/11\\\"\\u003eDesigning an FRC style brushless motor controller\\u003c/a\\u003e \\u003ca class=\\\"badge-category__wrapper \\\" href=\\\"/c/technical/control-system/72\\\"\\u003e\\u003cspan data-category-id=\\\"72\\\" style=\\\"--category-badge-color: #F1592A; --category-badge-text-color: #FFF; --parent-category-badge-color: #3AB54A;\\\" data-parent-category-id=\\\"9\\\" data-drop-close=\\\"true\\\" class=\\\"badge-category --has-parent\\\"\\u003e\\u003cspan class=\\\"badge-category__name\\\"\\u003eControl System\\u003c/span\\u003e\\u003c/span\\u003e\\u003c/a\\u003e\\n  \\u003c/div\\u003e\\n  \\u003cblockquote\\u003e\\n    I’ve done a lot in this area, so I feel qualified to comment. \\nFirst of all, you will definitely need to separate the three primary components of your controller: the microcontroller (MCU), gate driver, and MOSFETs. Nothing integrated will get even close to the 12V 40A drive current that FRC expects. I recommend starting with the DRV8323SR, as it is very configurable over SPI to suit your needs. If you don’t care about FOC, something cheap like an EG2133 or DRV8300 can work just fine, you just n…\\n  \\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eFeel free to ask me for a schematic or layout review. I also recommend using an STM32G474 as your processor, as it is both powerful and common enough to have docs on motor controller applications. If you can use an integrated power stage from TI, that will help even more at the cost of power output (I think they max out at 8A?). There’s 3-phase mosfet inverter stages on JLCPCB that cost like $10 and will do 600V 20A with a heatsink if you are okay with it being a larger. Not that you should run 600V, but it means a 50V ESC will be extremely unlikely to break on you.\\u003c/p\\u003e\\n\\u003cp\\u003eDon’t underestimate the importance of a good power stage layout/routing. It’s the difference between a 40A and 150A motor controller (ask me how I know…).\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-07-01T18:28:03.342Z\",\"reply_count\":4,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":345,\"readers_count\":344,\"score\":139.0,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Anand Rajamani\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/designing-an-frc-style-brushless-motor-controller/443366/11\",\"internal\":true,\"reflection\":false,\"title\":\"Designing an FRC style brushless motor controller\",\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":21715,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/12\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3672098,\"name\":\"philso\",\"username\":\"philso\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/p/e68b1a/{size}.png\",\"created_at\":\"2025-07-01T23:26:55.456Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"asid61\\\" data-post=\\\"12\\\" data-topic=\\\"503756\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/asid61/48/7179_2.png\\\" class=\\\"avatar\\\"\\u003e asid61:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eDon’t underestimate the importance of a good power stage layout/routing.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eA significant part of my career was spent fixing issues like this.\\u003c/p\\u003e\\n\\u003cp\\u003eIf you are really serious about doing work on circuitry like this, it would be very worthwhile to get a current probe for your oscilloscope that will cover your expected output current and a lower current one (15A) for checking your MOSFET gate currents. It is much easier to verify that you don’t have undesirable behavior (oscillation and ringing) with a current probe, especially in the upper switching devices.\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-07-01T23:26:55.456Z\",\"reply_count\":0,\"reply_to_post_number\":12,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":303,\"readers_count\":302,\"score\":105.6,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"philso\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":15467,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/13\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3672102,\"name\":\"Ada T\",\"username\":\"cmdada\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cmdada/{size}/230870_2.png\",\"created_at\":\"2025-07-01T23:29:26.292Z\",\"cooked\":\"\\u003cp\\u003eIt seems like the code google drive link for your esc broke, do you still have it and if so would you send it to me? Thank you for this amazing resource\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-07-01T23:29:26.292Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":289,\"readers_count\":288,\"score\":87.8,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Ada T\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":21715,\"username\":\"asid61\",\"name\":\"Anand Rajamani\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/asid61/{size}/7179_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":60586,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"1157 team captain, 2036 electrical lead 2024\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/14\",\"custom_user_title\":\"1157 team captain, 2036 electrical lead 2024\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3672858,\"name\":\"Reese Farinas\",\"username\":\"refari\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/bcef8e/{size}.png\",\"created_at\":\"2025-07-02T22:27:05.214Z\",\"cooked\":\"\\u003cp\\u003eAll the parts I mentioned have arrived! I’ve started putting together the H-bridge portion and I’ll be working a bit more on putting together an actual design.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"philso\\\" data-post=\\\"11\\\" data-topic=\\\"503756\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/p/e68b1a/48.png\\\" class=\\\"avatar\\\"\\u003e philso:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eFor the hardware, it is easy to underestimate the difficulty of getting the hardware right, especially at higher power levels\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eYeah, that is a can of worms I’m going to try to avoid for the moment. I would like to give it a shot later but definitely not right now…\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"philso\\\" data-post=\\\"11\\\" data-topic=\\\"503756\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/p/e68b1a/48.png\\\" class=\\\"avatar\\\"\\u003e philso:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eit would be best to use slower edge rates when turning the MOSFETs on and off\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eLooks like the most popular way to do this is with a large(r) gate resistor, is this what you were thinking?\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"philso\\\" data-post=\\\"11\\\" data-topic=\\\"503756\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/p/e68b1a/48.png\\\" class=\\\"avatar\\\"\\u003e philso:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eAcquiring a simple oscilloscope and learning how to use it will be helpful.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eNo need to worry, I have one at home and there’s more advanced ones at my local makerspace (plus current probes) \\u003cimg src=\\\"https://www.chiefdelphi.com/images/emoji/google/wink.png?v=12\\\" title=\\\":wink:\\\" class=\\\"emoji\\\" alt=\\\":wink:\\\" loading=\\\"lazy\\\" width=\\\"20\\\" height=\\\"20\\\"\\u003e.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"asid61\\\" data-post=\\\"12\\\" data-topic=\\\"503756\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/asid61/48/7179_2.png\\\" class=\\\"avatar\\\"\\u003e asid61:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eask me how I know…\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI would love to hear this story.\\u003c/p\\u003e\\n\\u003cp\\u003eOnce again I really appreciate all the resources everyone has shared. And yes, I will probably watch the 8 hours of Rick Hartley…\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-07-02T22:27:05.214Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":2,\"incoming_link_count\":0,\"reads\":292,\"readers_count\":291,\"score\":128.4,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Reese Farinas\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":4}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53209,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/15\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":4}],\"current_user_reaction\":null,\"reaction_users_count\":4,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3672908,\"name\":\"Ada T\",\"username\":\"cmdada\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cmdada/{size}/230870_2.png\",\"created_at\":\"2025-07-02T23:31:56.201Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group quote-modified\\\" data-username=\\\"refari\\\" data-post=\\\"15\\\" data-topic=\\\"503756\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/r/bcef8e/48.png\\\" class=\\\"avatar\\\"\\u003e refari:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"asid61\\\" data-post=\\\"12\\\" data-topic=\\\"503756\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/asid61/48/7179_2.png\\\" class=\\\"avatar\\\"\\u003e asid61:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eask me how I know…\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI would love to hear this story.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI have a similar story that ended with a very temporary candle\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-07-02T23:31:56.201Z\",\"reply_count\":0,\"reply_to_post_number\":15,\"quote_count\":2,\"incoming_link_count\":0,\"reads\":260,\"readers_count\":259,\"score\":67.0,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Ada T\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":60586,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"1157 team captain, 2036 electrical lead 2024\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/16\",\"custom_user_title\":\"1157 team captain, 2036 electrical lead 2024\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3672955,\"name\":\"philso\",\"username\":\"philso\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/p/e68b1a/{size}.png\",\"created_at\":\"2025-07-03T00:47:07.321Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"refari\\\" data-post=\\\"15\\\" data-topic=\\\"503756\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/r/bcef8e/48.png\\\" class=\\\"avatar\\\"\\u003e refari:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eLooks like the most popular way to do this is with a large(r) gate resistor, is this what you were thinking?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eUse two resistors and two ultra-fast recovery diodes. Each resistor is in series with one diode. The gate of the MOSFET cathode of one diode and the  anode of the second diode so they are in anti-parallel. The other end of the two resistors are both connected to the output of the gate driver circuit. This allows adjusting the turn-on resistance independently of the turn-off resistance.\\u003c/p\\u003e\\n\\u003cp\\u003eBeware of gate resistances that are too high. It can lead to device oscillations due to the Miller Capacitance of the MOSFET and excessive power dissipation.\\u003c/p\\u003e\\n\\u003cp\\u003eGate resistances that are too low can cause large spikes on the Drain-Source voltage. One should be able to adjust the gate resistances so that the spike is 10% of the output voltage. If the spike amplitude cannot be reduced without going to gate resistances that are too high, it means the inductance is too high in the loop from your power supply to the MOSFETs and back. You will need a differential probe to monitor the VDS of the upper MOSFETs.\\u003c/p\\u003e\\n\\u003cp\\u003eMake sure you are using some sort of gate driver chip so that there is a low impedance drive for charging the MOSFET gate capacitance and for discharging it. A “passive” drive circuit can also lead to device oscillation and excessive power dissipation.\\u003c/p\\u003e\\n\\u003cp\\u003eYou are likely to have to add very short ON pulses for all of the lower MOSFETs when the output is inactive or if the output frequency is very low. These pulses charge the bootstrap capacitor that powers the gate drive circuitry for the upper MOSFET.\\u003c/p\\u003e\\n\\u003cp\\u003eYes. I have encountered and fixed all of these issues in real products.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"refari\\\" data-post=\\\"15\\\" data-topic=\\\"503756\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/r/bcef8e/48.png\\\" class=\\\"avatar\\\"\\u003e refari:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eNo need to worry, I have one at home and there’s more advanced ones at my local makerspace (plus current probes)\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eBe sure to design and build your breadboards and PCBs so that you can add a short length of wire to go through the current probe and so that there is sufficient space among the components for the current probe.\\u003c/p\\u003e\\n\\u003cp\\u003eYou will also want to remove the probe tips to expose the round ground ring at the end of the probe. You can then use short lengths of solid wire to make a coil around the ring and solder it to a ground reference point near the point you want to probe. This eliminates the need for the ground clip wire and the spurious ringing that it introduces.\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-07-03T00:47:07.321Z\",\"reply_count\":1,\"reply_to_post_number\":15,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":274,\"readers_count\":273,\"score\":124.8,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"philso\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":4}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":15467,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/17\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":4}],\"current_user_reaction\":null,\"reaction_users_count\":4,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3673687,\"name\":\"Reese Farinas\",\"username\":\"refari\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/bcef8e/{size}.png\",\"created_at\":\"2025-07-04T03:08:27.191Z\",\"cooked\":\"\\u003cp\\u003eGot it working with manual switching, I’m going to start adding the gate drivers and Nucleo soon. The thermal performance is obviously atrocious but it can handle enough current to make this hard driver “spin” (twitch).\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003cdiv class=\\\"lightbox-wrapper\\\"\\u003e\\u003ca class=\\\"lightbox\\\" href=\\\"https://www.chiefdelphi.com/uploads/default/original/4X/6/a/5/6a526407ec18c3480f7d94831e06b9968b01d45b.jpeg\\\" data-download-href=\\\"https://www.chiefdelphi.com/uploads/default/6a526407ec18c3480f7d94831e06b9968b01d45b\\\" title=\\\"signal-2025-07-03-213838_002\\\"\\u003e\\u003cimg src=\\\"https://www.chiefdelphi.com/uploads/default/optimized/4X/6/a/5/6a526407ec18c3480f7d94831e06b9968b01d45b_2_332x249.jpeg\\\" alt=\\\"signal-2025-07-03-213838_002\\\" data-base62-sha1=\\\"faz8g7CeXOKYTISQhU5w2VSYXaz\\\" width=\\\"332\\\" height=\\\"249\\\" srcset=\\\"https://www.chiefdelphi.com/uploads/default/optimized/4X/6/a/5/6a526407ec18c3480f7d94831e06b9968b01d45b_2_332x249.jpeg, https://www.chiefdelphi.com/uploads/default/optimized/4X/6/a/5/6a526407ec18c3480f7d94831e06b9968b01d45b_2_498x373.jpeg 1.5x, https://www.chiefdelphi.com/uploads/default/optimized/4X/6/a/5/6a526407ec18c3480f7d94831e06b9968b01d45b_2_664x498.jpeg 2x\\\" data-dominant-color=\\\"534839\\\"\\u003e\\u003cdiv class=\\\"meta\\\"\\u003e\\u003csvg class=\\\"fa d-icon d-icon-far-image svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#far-image\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003cspan class=\\\"filename\\\"\\u003esignal-2025-07-03-213838_002\\u003c/span\\u003e\\u003cspan class=\\\"informations\\\"\\u003e2048×1538 364 KB\\u003c/span\\u003e\\u003csvg class=\\\"fa d-icon d-icon-discourse-expand svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#discourse-expand\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003c/div\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"philso\\\" data-post=\\\"17\\\" data-topic=\\\"503756\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/p/e68b1a/48.png\\\" class=\\\"avatar\\\"\\u003e philso:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eA “passive” drive circuit can also lead to device oscillation and excessive power dissipation.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI almost immediately caught it oscillating at ~3.3 MHz, that’s how the decoupling capacitor ended up there. Current also kept flowing backwards through gates, very rude.\\u003c/p\\u003e\\n\\u003cp\\u003eSide note, I’ve been experimenting with the Nucleo board and I have to say, STM32CubeIDE is up there with certain \\u003cspan class=\\\"abbreviation\\\"\\u003eFRC\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"FIRST Robotics Competition\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e software in terms of sheer jank. It will happily delete your code without telling you. And it doesn’t want to follow my indentation rules half the time. It is actually pretty good though. Still, the name is atrocious.\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-07-04T03:08:27.191Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":258,\"readers_count\":257,\"score\":131.6,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Reese Farinas\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":5}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53209,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/18\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":5}],\"current_user_reaction\":null,\"reaction_users_count\":5,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3673711,\"name\":\"philso\",\"username\":\"philso\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/p/e68b1a/{size}.png\",\"created_at\":\"2025-07-04T03:35:54.577Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"refari\\\" data-post=\\\"18\\\" data-topic=\\\"503756\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/r/bcef8e/48.png\\\" class=\\\"avatar\\\"\\u003e refari:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eI almost immediately caught it oscillating at ~3.3 MHz, that’s how the decoupling capacitor ended up there. Current also kept flowing backwards through gates, very rude.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThat type of prototyping board does very poorly with high frequency circuits. There is a lot of capacitance and inductance that make things worse than they would be on a real PCB. The solder type of prototyping board is better but the layout would still need to be done well to avoid oscillations and other undesirable behaviors.\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-07-04T03:35:54.577Z\",\"reply_count\":0,\"reply_to_post_number\":18,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":260,\"readers_count\":259,\"score\":112.0,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"philso\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":4}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":15467,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/19\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3},{\"id\":\"point_up\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":4,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3676075,\"name\":\"Reese Farinas\",\"username\":\"refari\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/bcef8e/{size}.png\",\"created_at\":\"2025-07-07T17:37:04.169Z\",\"cooked\":\"\\u003cp\\u003eUpdate for July 7: I managed to fry my Nucleo board, though I suspect it was more from bad handling and ESD than from the circuit itself. The gate driver is installed and works fine. Before the Nucleo got fried I was able to get the motor to spin around slowly with variable speed and a fairly satisfactory amount of torque. However, there’s currently no feedback so the driver constantly runs at full power. Once I get a new board I am going to try using the back-EMF method for syncing.\\u003c/p\\u003e\\n\\u003cp\\u003eAlso, I’ve created some schematics for the project here:\\u003c/p\\u003e\\u003caside class=\\\"onebox pdf\\\" data-onebox-src=\\\"https://github.com/biggeryetbetter/bldc-driver/blob/master/drawing_out/bldc_motor_controller_1.pdf\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://github.com/biggeryetbetter/bldc-driver/blob/master/drawing_out/bldc_motor_controller_1.pdf\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ca href=\\\"https://github.com/biggeryetbetter/bldc-driver/blob/master/drawing_out/bldc_motor_controller_1.pdf\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003e\\u003cspan class=\\\"pdf-onebox-logo\\\"\\u003e\\u003c/span\\u003e\\u003c/a\\u003e\\n\\n\\u003ch3\\u003e\\u003ca href=\\\"https://github.com/biggeryetbetter/bldc-driver/blob/master/drawing_out/bldc_motor_controller_1.pdf\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ebldc_motor_controller_1.pdf\\u003c/a\\u003e\\u003c/h3\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eThe original KiCad project is also in the Github repo. Let me know if there are any changes or improvements that you recommend.\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2025-07-07T17:37:04.169Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":242,\"readers_count\":241,\"score\":123.4,\"yours\":false,\"topic_id\":503756,\"topic_slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"display_username\":\"Reese Farinas\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/biggeryetbetter/bldc-driver/blob/master/drawing_out/bldc_motor_controller_1.pdf\",\"internal\":false,\"reflection\":false,\"title\":\"bldc-driver/drawing_out/bldc_motor_controller_1.pdf at master · biggeryetbetter/bldc-driver · GitHub\",\"clicks\":22}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":4}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53209,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/project-developing-a-bldc-motor-driver-mostly-from-scratch/503756/20\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":4}],\"current_user_reaction\":null,\"reaction_users_count\":4,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3669858,3669879,3670140,3670144,3670190,3670390,3670392,3670552,3670568,3670571,3671623,3671820,3672098,3672102,3672858,3672908,3672955,3673687,3673711,3676075,3676085,3676148,3686975,3688432,3689822,3696256,3696611,3702596,3717426,3717861,3726325,3726839]},\"timeline_lookup\":[[1,104],[5,103],[11,102],[15,101],[18,100],[20,96],[23,82],[24,80],[25,78],[26,72],[28,68],[29,55],[30,54],[31,42]],\"tags\":[\"motorcontroller\",\"doityourself\"],\"tags_descriptions\":{},\"fancy_title\":\"[Project] Developing a BLDC motor driver (mostly) from scratch\",\"id\":503756,\"title\":\"[Project] Developing a BLDC motor driver (mostly) from scratch\",\"posts_count\":32,\"created_at\":\"2025-06-30T02:49:31.352Z\",\"views\":3960,\"reply_count\":15,\"like_count\":97,\"last_posted_at\":\"2025-08-31T01:46:43.046Z\",\"visible\":true,\"closed\":false,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"project-developing-a-bldc-motor-driver-mostly-from-scratch\",\"category_id\":32,\"word_count\":3829,\"deleted_at\":null,\"user_id\":53209,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":\"https://www.chiefdelphi.com/uploads/default/original/4X/f/6/8/f681234e6677320f73287f59c811e018f8bbe306.png\",\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_503756\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":32,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":{\"id\":47834,\"execute_at\":\"2026-08-31T01:46:43.046Z\",\"duration_minutes\":525600,\"based_on_last_post\":true,\"status_type\":\"close\",\"category_id\":null},\"message_bus_last_id\":0,\"participant_count\":12,\"show_read_indicator\":false,\"thumbnails\":[{\"max_width\":null,\"max_height\":null,\"width\":379,\"height\":664,\"url\":\"https://www.chiefdelphi.com/uploads/default/original/4X/f/6/8/f681234e6677320f73287f59c811e018f8bbe306.png\"}],\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":15467,\"username\":\"philso\",\"name\":\"philso\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/p/e68b1a/{size}.png\",\"post_count\":9,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":53209,\"username\":\"refari\",\"name\":\"Reese Farinas\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/bcef8e/{size}.png\",\"post_count\":6,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":1},{\"id\":60586,\"username\":\"cmdada\",\"name\":\"Ada T\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cmdada/{size}/230870_2.png\",\"post_count\":6,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":76562,\"username\":\"DJAY\",\"name\":\"David\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/d/ccd318/{size}.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":0},{\"id\":21715,\"username\":\"asid61\",\"name\":\"Anand Rajamani\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/asid61/{size}/7179_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":53190,\"username\":\"truher\",\"name\":\"joel truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":20021,\"username\":\"Chadfrom7226\",\"name\":\"Chadfrom7226\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/chadfrom7226/{size}/113429_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":53784,\"username\":\"Max_Morehead\",\"name\":\"Max Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":63308,\"username\":\"63hz\",\"name\":\"Clay\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/63hz/{size}/262762_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":76247,\"username\":\"stormsj28\",\"name\":\"wyatt\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/a3d4f5/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":20681,\"username\":\"Zaque\",\"name\":\"Zach Hoegberg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/zaque/{size}/257827_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":49892,\"username\":\"nobody5690\",\"name\":\"Levi\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/nobody5690/{size}/203585_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":53209,\"username\":\"refari\",\"name\":\"Reese Farinas\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/bcef8e/{size}.png\"},\"last_poster\":{\"id\":15467,\"username\":\"philso\",\"name\":\"philso\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/p/e68b1a/{size}.png\"},\"links\":[{\"url\":\"https://simplefoc.com/\",\"title\":\"SimpleFOCproject | Home\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":371,\"user_id\":53190,\"domain\":\"simplefoc.com\",\"root_domain\":\"simplefoc.com\"},{\"url\":\"https://github.com/Team1157/aESC/blob/main/firmware/firmware.ino\",\"title\":\"aESC/firmware/firmware.ino at main · Team1157/aESC · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":51,\"user_id\":60586,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/biggeryetbetter/bldc-driver/blob/master/drawing_out/bldc_motor_controller_1.pdf\",\"title\":\"bldc-driver/drawing_out/bldc_motor_controller_1.pdf at master · biggeryetbetter/bldc-driver · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":22,\"user_id\":53209,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://www.chiefdelphi.com/t/designing-an-frc-style-brushless-motor-controller/443366\",\"title\":\"Designing an FRC style brushless motor controller\",\"internal\":true,\"attachment\":false,\"reflection\":false,\"clicks\":17,\"user_id\":60586,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://github.com/asid61/MCL/tree/main\",\"title\":\"GitHub - asid61/MCL: Motor controller code\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":15,\"user_id\":21715,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://hobbyking.com/en_us/power-systems/electric-motors/brushless-motors.html#q=\\u0026idx=hbk_live_magento_en_us_products_hbk_price_stock_2_group_0_asc\\u0026dFR%5Bwarehouses%5D%5B0%5D=USA\\u0026dFR%5Bwarehouses%5D%5B1%5D=USA_LA\\u0026dFR%5Bwarehouses%5D%5B2%5D=Global\\u0026dFR%5Bwarehouses%5D%5B3%5D=BRANDS_DIRECT\\u0026dFR%5Bwarehouses_stock_data%5D%5B0%5D=USA%7C1\\u0026dFR%5Bwarehouses_stock_data%5D%5B1%5D=USA%7C2\\u0026dFR%5Bwarehouses_stock_data%5D%5B10%5D=BRANDS_DIRECT%7C2\\u0026dFR%5Bwarehouses_stock_data%5D%5B11%5D=BRANDS_DIRECT%7C3\\u0026dFR%5\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":12,\"user_id\":15467,\"domain\":\"hobbyking.com\",\"root_domain\":\"hobbyking.com\"},{\"url\":\"https://Github.com/am32-firmware/am32\",\"title\":\"GitHub - am32-firmware/AM32\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":10,\"user_id\":63308,\"domain\":\"Github.com\",\"root_domain\":\"Github.com\"},{\"url\":\"https://github.com/DJAY101/Dynamiq_BLDC_Controller?tab=readme-ov-file\",\"title\":\"GitHub - DJAY101/Dynamiq_BLDC_Controller: Bringing brushless motor control to the masses\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":9,\"user_id\":76562,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://hobbyking.com/en_us/our-best-power-system-products.html\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":6,\"user_id\":15467,\"domain\":\"hobbyking.com\",\"root_domain\":\"hobbyking.com\"},{\"url\":\"https://www.youtube.com/watch?v=W9IHEqlGG1s\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":53784,\"domain\":\"www.youtube.com\",\"root_domain\":\"youtube.com\"}]},\"bookmarks\":[]}"}
