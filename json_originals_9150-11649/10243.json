{"data":"{\"post_stream\":{\"posts\":[{\"id\":3230014,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-07T12:17:20.457Z\",\"cooked\":\"\\u003cp\\u003eI’d like to create a DCMotorSim object but all I have are SysID values for a simple motor for kS, kV, and kA.  Is there a way to generate a LinearSystemSim using these values that works like DCMotorSim just without the moment of inertia and everything else.\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-07T12:17:20.457Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":162,\"reads\":226,\"readers_count\":225,\"score\":855.2,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/1\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":3230015,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-07T12:17:59.728Z\",\"cooked\":\"\\u003cp\\u003eJust to clarify these values were obtained with the mechanism attached to the motor so I’m just factoring all of those into the “motor” sim\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-07T12:17:59.728Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":226,\"readers_count\":225,\"score\":45.2,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/2\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230283,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-07T21:59:16.254Z\",\"cooked\":\"\\u003cp\\u003eSample Code.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003ca class=\\\"attachment\\\" href=\\\"/uploads/short-url/8ODN6Jw009dnVaIfNib6UEWC3AH.java\\\"\\u003eSimMotorSimple.java\\u003c/a\\u003e (1.4 KB)\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-07T21:59:16.254Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":206,\"readers_count\":205,\"score\":41.2,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"/uploads/short-url/8ODN6Jw009dnVaIfNib6UEWC3AH.java\",\"internal\":true,\"reflection\":false,\"clicks\":0}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/3\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230339,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2023-09-08T01:38:27.583Z\",\"cooked\":\"\\u003cp\\u003eThe model for just \\u003cspan class=\\\"math\\\"\\u003eK_v\\u003c/span\\u003e and \\u003cspan class=\\\"math\\\"\\u003eK_a\\u003c/span\\u003e would be \\u003cspan class=\\\"math\\\"\\u003e\\\\frac{dx}{dt} = \\\\mathbf{A}\\\\mathbf{x} + \\\\mathbf{B}\\\\mathbf{u}\\u003c/span\\u003e where\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003cspan class=\\\"math\\\"\\u003e\\n\\\\mathbf{x} =\\n\\\\begin{bmatrix}\\n\\\\text{position} \\\\\\\\\\n\\\\text{velocity}\\n\\\\end{bmatrix}\\n\\\\quad\\n\\\\mathbf{u} =\\n\\\\begin{bmatrix}\\n\\\\text{voltage}\\n\\\\end{bmatrix}\\n\\\\\\\\\\n\\\\mathbf{A} =\\n\\\\begin{bmatrix}\\n0 \\u0026amp; 1 \\\\\\\\\\n0 \\u0026amp; -\\\\frac{K_v}{K_a}\\n\\\\end{bmatrix} \\\\quad\\n\\\\mathbf{B} = \\\\begin{bmatrix}\\n0 \\\\\\\\\\n\\\\frac{1}{K_a}\\n\\\\end{bmatrix}\\n\\u003c/span\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eYou can use \\u003ca href=\\\"https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/system/plant/LinearSystemId.html#identifyPositionSystem(double,double)\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eLinearSystemId.identifyPositionSystem()\\u003c/a\\u003e to make that.\\u003c/p\\u003e\\n\\u003cp\\u003eThe model including \\u003cspan class=\\\"math\\\"\\u003eK_s\\u003c/span\\u003e would be \\u003cspan class=\\\"math\\\"\\u003e\\\\frac{dx}{dt} = \\\\mathbf{A}\\\\mathbf{x} + \\\\mathbf{B}\\\\mathbf{u} + \\\\mathbf{c}\\u003c/span\\u003e where\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003cspan class=\\\"math\\\"\\u003e\\n\\\\mathbf{A} =\\n\\\\begin{bmatrix}\\n0 \\u0026amp; 1 \\\\\\\\\\n0 \\u0026amp; -\\\\frac{K_v}{K_a}\\n\\\\end{bmatrix}\\n\\\\quad\\n\\\\mathbf{B} =\\n\\\\begin{bmatrix}\\n0 \\\\\\\\\\n\\\\frac{1}{K_a}\\n\\\\end{bmatrix}\\n\\\\quad\\n\\\\mathbf{c} =\\n\\\\begin{bmatrix}\\n0 \\\\\\\\\\n-\\\\frac{K_s}{K_a}\\\\text{sgn}(v)\\n\\\\end{bmatrix}\\n\\u003c/span\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eThat’s an affine system instead of a linear one tho (ignoring the cross-over point for \\u003cspan class=\\\"math\\\"\\u003ev\\u003c/span\\u003e), so you’d have to add \\u003cspan class=\\\"math\\\"\\u003eK_s\\u003c/span\\u003e to a custom sim.\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T01:39:29.443Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":186,\"readers_count\":185,\"score\":52.2,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/system/plant/LinearSystemId.html#identifyPositionSystem(double,double)\",\"internal\":false,\"reflection\":false,\"title\":\"LinearSystemId (WPILib API 2023.4.3)\",\"clicks\":2}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/4\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230342,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-08T01:45:06.087Z\",\"cooked\":\"\\u003cp\\u003eI had a thought about that.  So basically I would have to construct my own LinearSystemSim class.\\u003c/p\\u003e\\n\\u003cp\\u003eAny changes  on the Cx + Du side of things in terms of kS?\\u003c/p\\u003e\\n\\u003cp\\u003eI’ll work on that.  I’ll probably use LinearSystemSim as a template.\\u003c/p\\u003e\\n\\u003cp\\u003eAlso I’m using Subsystem and CommandScheduler to “run” the motor when I set an input.  Any thing I should worry or care about doing that.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T01:45:06.087Z\",\"reply_count\":1,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":161,\"readers_count\":160,\"score\":37.2,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/5\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230343,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2023-09-08T01:54:30.723Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"narmstro\\\" data-post=\\\"5\\\" data-topic=\\\"440603\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/n/5e9695/48.png\\\" class=\\\"avatar\\\"\\u003e narmstro:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eSo basically I would have to construct my own LinearSystemSim class.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eWell, it would be an AffineSystemSim class, but yes.\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T01:54:30.723Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":1,\"incoming_link_count\":2,\"reads\":153,\"readers_count\":152,\"score\":45.6,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/6\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230346,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-08T02:01:49.053Z\",\"cooked\":\"\\u003cp\\u003efor the sgn(v) component I would assume I would use the current v for the system as I’m inputting voltage.\\u003c/p\\u003e\\n\\u003cp\\u003eIf I were to expand this to elevators and arms, subtract kG / kA and kG/Ka cos(theta) respectively?\\u003c/p\\u003e\\n\\u003cp\\u003eAlso do I need to do anything with the offset angle arrived from SysID for arms or is that just what was used internally by SysID\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T02:01:49.053Z\",\"reply_count\":1,\"reply_to_post_number\":6,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":142,\"readers_count\":141,\"score\":33.4,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/7\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230349,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2023-09-08T02:15:30.662Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"narmstro\\\" data-post=\\\"7\\\" data-topic=\\\"440603\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/n/5e9695/48.png\\\" class=\\\"avatar\\\"\\u003e narmstro:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003efor the sgn(v) component I would assume I would use the current v for the system as I’m inputting voltage.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eYes. Simulating that properly is going to be annoying.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"narmstro\\\" data-post=\\\"7\\\" data-topic=\\\"440603\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/n/5e9695/48.png\\\" class=\\\"avatar\\\"\\u003e narmstro:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eIf I were to expand this to elevators and arms, subtract kG / kA and kG/Ka cos(theta) respectively?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eYes.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"narmstro\\\" data-post=\\\"7\\\" data-topic=\\\"440603\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/n/5e9695/48.png\\\" class=\\\"avatar\\\"\\u003e narmstro:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eAlso do I need to do anything with the offset angle arrived from SysID for arms or is that just what was used internally by SysID\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eIt’s a measurement offset to make the model work. You can assume users apply that themselves.\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T02:15:30.662Z\",\"reply_count\":0,\"reply_to_post_number\":7,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":142,\"readers_count\":141,\"score\":28.4,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/8\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230350,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-08T02:24:30.926Z\",\"cooked\":\"\\u003cp\\u003eI’m also assuming that I’ll have to discretize little c?\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T02:24:30.926Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":116,\"readers_count\":115,\"score\":28.2,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/9\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230354,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-08T02:42:12.290Z\",\"cooked\":\"\\u003cp\\u003eIn the Discretization class would I have to alter the M and phi values to incorporate little c.  If so how would that be accomplished.\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T02:42:12.290Z\",\"reply_count\":2,\"reply_to_post_number\":9,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":118,\"readers_count\":117,\"score\":33.6,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":48345,\"username\":\"narmstro\",\"name\":\"Nicholas Armstrong\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/10\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230356,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-08T02:47:12.908Z\",\"cooked\":\"\\u003cp\\u003eNevermind.  I just caught my mistake in thinking.  I just now noticed that c is not multiplied by u.\\u003c/p\\u003e\\n\\u003cp\\u003eTherefore it shouldn’t have any bearing on the discretization process from my understanding.\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T02:47:12.908Z\",\"reply_count\":0,\"reply_to_post_number\":10,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":114,\"readers_count\":113,\"score\":22.8,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":48345,\"username\":\"narmstro\",\"name\":\"Nicholas Armstrong\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/11\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230358,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2023-09-08T02:55:44.219Z\",\"cooked\":\"\\u003ch2\\u003e\\u003ca name=\\\"linear-system-discretization-1\\\" class=\\\"anchor\\\" href=\\\"#linear-system-discretization-1\\\"\\u003e\\u003c/a\\u003eLinear system discretization\\u003c/h2\\u003e\\n\\u003cp\\u003e\\u003cspan class=\\\"math\\\"\\u003e\\n\\\\frac{dx}{dt} = \\\\mathbf{A}\\\\mathbf{x} + \\\\mathbf{B}\\\\mathbf{u}\\n\\u003c/span\\u003e\\u003cbr\\u003e\\n\\u003cspan class=\\\"math\\\"\\u003e\\n\\\\mathbf{x}_{k+1} = e^{\\\\mathbf{A}T}\\\\mathbf{x}_k + \\\\mathbf{A}^{-1}(e^{\\\\mathbf{A}T} - \\\\mathbf{I})\\\\mathbf{B}\\\\mathbf{u}_k \\\\\\\\\\n\\\\mathbf{x}_{k+1} = \\\\mathbf{A}_d\\\\mathbf{x}_k + \\\\mathbf{B}_d\\\\mathbf{u}_k\\n\\u003c/span\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eSee appendix D.1 of \\u003ca href=\\\"https://file.tavsys.net/control/controls-engineering-in-frc.pdf\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ehttps://file.tavsys.net/control/controls-engineering-in-frc.pdf\\u003c/a\\u003e for a more complete derivation.\\u003c/p\\u003e\\n\\u003ch2\\u003e\\u003ca name=\\\"affine-system-discretization-2\\\" class=\\\"anchor\\\" href=\\\"#affine-system-discretization-2\\\"\\u003e\\u003c/a\\u003eAffine system discretization\\u003c/h2\\u003e\\n\\u003cp\\u003e\\u003cspan class=\\\"math\\\"\\u003e\\n\\\\frac{dx}{dt} = \\\\mathbf{A}\\\\mathbf{x} + \\\\mathbf{B}\\\\mathbf{u} + \\\\mathbf{c} \\\\\\\\\\n\\\\frac{dx}{dt} = \\\\mathbf{A}\\\\mathbf{x} + \\\\mathbf{B}(\\\\mathbf{u} + \\\\mathbf{B}^+\\\\mathbf{c})\\n\\u003c/span\\u003e\\u003cbr\\u003e\\n\\u003cspan class=\\\"math\\\"\\u003e\\n\\\\mathbf{x}_{k+1} = e^{\\\\mathbf{A}T}\\\\mathbf{x}_k + \\\\mathbf{A}^{-1}(e^{\\\\mathbf{A}T} - \\\\mathbf{I})\\\\mathbf{B}(\\\\mathbf{u}_k + \\\\mathbf{B}^+\\\\mathbf{c}_k) \\\\\\\\\\n\\\\mathbf{x}_{k+1} = e^{\\\\mathbf{A}T}\\\\mathbf{x}_k + \\\\mathbf{B}_d(\\\\mathbf{u}_k + \\\\mathbf{B}^+\\\\mathbf{c}_k) \\\\\\\\\\n\\\\mathbf{x}_{k+1} = \\\\mathbf{A}_d\\\\mathbf{x}_k + \\\\mathbf{B}_d\\\\mathbf{u}_k + \\\\mathbf{B}_d\\\\mathbf{B}^+ \\\\mathbf{c}_k\\n\\u003c/span\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003ewhere \\u003cspan class=\\\"math\\\"\\u003e\\\\mathbf{B}^+\\u003c/span\\u003e is the pseudoinverse of \\u003cspan class=\\\"math\\\"\\u003e\\\\mathbf{B}\\u003c/span\\u003e.\\u003c/p\\u003e\\n\\u003cp\\u003eYou can discretize A and B like usual, then just use those in the equation above.\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T03:20:32.255Z\",\"reply_count\":2,\"reply_to_post_number\":10,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":113,\"readers_count\":112,\"score\":32.6,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://file.tavsys.net/control/controls-engineering-in-frc.pdf\",\"internal\":false,\"reflection\":false,\"clicks\":2}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48345,\"username\":\"narmstro\",\"name\":\"Nicholas Armstrong\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/12\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230361,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-08T02:58:48.820Z\",\"cooked\":\"\\u003cp\\u003eThank you.  I guess I was wrong about not needing to discretize little c.  One last question (for now \\u003cimg src=\\\"https://www.chiefdelphi.com/images/emoji/google/grin.png?v=12\\\" title=\\\":grin:\\\" class=\\\"emoji\\\" alt=\\\":grin:\\\" loading=\\\"lazy\\\" width=\\\"20\\\" height=\\\"20\\\"\\u003e)  Is there a pseudoinverse function in the matrix class or elsewhere in the API\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T02:58:48.820Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":104,\"readers_count\":103,\"score\":25.8,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/13\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230362,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2023-09-08T03:02:53.570Z\",\"cooked\":\"\\u003cp\\u003eIt’s more efficient to use a linear system solver than to form the pseudoinverse directly.\\u003c/p\\u003e\\u003caside class=\\\"onebox githubblob\\\" data-onebox-src=\\\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/native/include/frc/controller/LinearPlantInversionFeedforward.h#L140-L144\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/native/include/frc/controller/LinearPlantInversionFeedforward.h#L140-L144\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch4\\u003e\\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/native/include/frc/controller/LinearPlantInversionFeedforward.h#L140-L144\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ewpilibsuite/allwpilib/blob/main/wpimath/src/main/native/include/frc/controller/LinearPlantInversionFeedforward.h#L140-L144\\u003c/a\\u003e\\u003c/h4\\u003e\\n\\n\\n\\n    \\u003cpre class=\\\"onebox\\\"\\u003e\\u003ccode class=\\\"lang-h\\\"\\u003e\\n      \\u003col class=\\\"start lines\\\" start=\\\"140\\\" style=\\\"counter-reset: li-counter 139 ;\\\"\\u003e\\n          \\u003cli\\u003eInputVector Calculate(const StateVector\\u0026amp; r, const StateVector\\u0026amp; nextR) {\\u003c/li\\u003e\\n          \\u003cli\\u003e  m_uff = m_B.householderQr().solve(nextR - (m_A * r));\\u003c/li\\u003e\\n          \\u003cli\\u003e  m_r = nextR;\\u003c/li\\u003e\\n          \\u003cli\\u003e  return m_uff;\\u003c/li\\u003e\\n          \\u003cli\\u003e}\\u003c/li\\u003e\\n      \\u003c/ol\\u003e\\n    \\u003c/code\\u003e\\u003c/pre\\u003e\\n\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003caside class=\\\"onebox githubblob\\\" data-onebox-src=\\\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/java/edu/wpi/first/math/controller/LinearPlantInversionFeedforward.java#L141-L146\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/java/edu/wpi/first/math/controller/LinearPlantInversionFeedforward.java#L141-L146\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch4\\u003e\\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/java/edu/wpi/first/math/controller/LinearPlantInversionFeedforward.java#L141-L146\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ewpilibsuite/allwpilib/blob/main/wpimath/src/main/java/edu/wpi/first/math/controller/LinearPlantInversionFeedforward.java#L141-L146\\u003c/a\\u003e\\u003c/h4\\u003e\\n\\n\\n\\n    \\u003cpre class=\\\"onebox\\\"\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003e\\n      \\u003col class=\\\"start lines\\\" start=\\\"141\\\" style=\\\"counter-reset: li-counter 140 ;\\\"\\u003e\\n          \\u003cli\\u003epublic Matrix\\u0026lt;Inputs, N1\\u0026gt; calculate(Matrix\\u0026lt;States, N1\\u0026gt; r, Matrix\\u0026lt;States, N1\\u0026gt; nextR) {\\u003c/li\\u003e\\n          \\u003cli\\u003e  m_uff = new Matrix\\u0026lt;\\u0026gt;(m_B.solve(nextR.minus(m_A.times(r))));\\u003c/li\\u003e\\n          \\u003cli\\u003e\\u003c/li\\u003e\\n          \\u003cli\\u003e  m_r = nextR;\\u003c/li\\u003e\\n          \\u003cli\\u003e  return m_uff;\\u003c/li\\u003e\\n          \\u003cli\\u003e}\\u003c/li\\u003e\\n      \\u003c/ol\\u003e\\n    \\u003c/code\\u003e\\u003c/pre\\u003e\\n\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\",\"post_number\":14,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T03:02:53.570Z\",\"reply_count\":1,\"reply_to_post_number\":13,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":106,\"readers_count\":105,\"score\":26.2,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/java/edu/wpi/first/math/controller/LinearPlantInversionFeedforward.java#L141-L146\",\"internal\":false,\"reflection\":false,\"clicks\":2},{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/native/include/frc/controller/LinearPlantInversionFeedforward.h#L140-L144\",\"internal\":false,\"reflection\":false,\"clicks\":2}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48345,\"username\":\"narmstro\",\"name\":\"Nicholas Armstrong\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/14\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230363,\"name\":\"Richard Wallace\",\"username\":\"Richard_Wallace\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/richard_wallace/{size}/110760_2.png\",\"created_at\":\"2023-09-08T03:03:24.838Z\",\"cooked\":\"\\u003cp\\u003eI am beginning to suspect you guys have gone a little ways beyond high school math here…\\u003c/p\\u003e\\n\\u003cp\\u003eDidn’t see this stuff myself until first year EE grad school.\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T03:09:43.429Z\",\"reply_count\":0,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":95,\"readers_count\":94,\"score\":34.0,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Richard Wallace\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":1549,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"I live for the details.\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/15\",\"custom_user_title\":\"I live for the details.\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1},{\"id\":\"laughing\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230372,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-08T03:50:08.029Z\",\"cooked\":\"\\u003cp\\u003eSo using the linear system solver to find the pseudoinverse.  “The .solve method” as illustrated in your code snippet.  I would use Bd for m_B , what would I use for nextR and m_A?\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T03:50:08.029Z\",\"reply_count\":1,\"reply_to_post_number\":14,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":93,\"readers_count\":92,\"score\":23.6,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/16\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230374,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2023-09-08T04:06:11.368Z\",\"cooked\":\"\\u003cp\\u003eLike this:\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003epublic Matrix\\u0026lt;States, 1\\u0026gt; calculateX(\\n    Matrix\\u0026lt;States, States\\u0026gt; A,\\n    Matrix\\u0026lt;States, Inputs\\u0026gt; B,\\n    Matrix\\u0026lt;States, 1\\u0026gt; c,\\n    Matrix\\u0026lt;States, 1\\u0026gt; x,\\n    Matrix\\u0026lt;Inputs, 1\\u0026gt; u,\\n    double dt) {\\n    var discABPair = Discretization.discretizeAB(A, B, dt);\\n    var discA = discABPair.getFirst();\\n    var discB = discABPair.getSecond();\\n\\n    return discA.times(x).plus(discB.times(u)).plus(discB.times(B.solve(c)));\\n}\\n\\u003c/code\\u003e\\u003c/pre\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T04:06:11.368Z\",\"reply_count\":0,\"reply_to_post_number\":16,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":103,\"readers_count\":102,\"score\":25.6,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48345,\"username\":\"narmstro\",\"name\":\"Nicholas Armstrong\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/17\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230483,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-08T12:13:22.673Z\",\"cooked\":\"\\u003cp\\u003eThanks once again.  Any way of creating a Matrix\\u0026lt;States, N1\\u0026gt; set to nothing for testing purposes.  I can’t seem to get Matrix.mat to work for this.\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T12:13:22.673Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":99,\"readers_count\":98,\"score\":24.8,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/18\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230520,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2023-09-08T15:51:41.434Z\",\"cooked\":\"\\u003cp\\u003eDefine nothing. Do you mean not assigning an object to it, or initializing it to the zero vector? The no-arg constructor will do the latter.\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T15:53:11.884Z\",\"reply_count\":1,\"reply_to_post_number\":18,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":91,\"readers_count\":90,\"score\":23.2,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48345,\"username\":\"narmstro\",\"name\":\"Nicholas Armstrong\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/19\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3230539,\"name\":\"Nicholas Armstrong\",\"username\":\"narmstro\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"created_at\":\"2023-09-08T16:35:04.319Z\",\"cooked\":\"\\u003cp\\u003eI got it.  Almost done with both an AffineSystem and an AffineSystemSim.  I used a Supplier to handle passing in a function like signum\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":41,\"updated_at\":\"2023-09-08T16:35:04.319Z\",\"reply_count\":1,\"reply_to_post_number\":19,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":95,\"readers_count\":94,\"score\":24.0,\"yours\":false,\"topic_id\":440603,\"topic_slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"display_username\":\"Nicholas Armstrong\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48345,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/dcmotorsim-but-from-ks-kv-and-ka/440603/20\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3230014,3230015,3230283,3230339,3230342,3230343,3230346,3230349,3230350,3230354,3230356,3230358,3230361,3230362,3230363,3230372,3230374,3230483,3230520,3230539,3230548,3230552,3230556,3230570,3230584,3230600,3230605,3230611,3236345,3236346,3236347,3236348,3236349,3236351,3236353,3236354,3236357,3236358,3236391,3236616,3429304]},\"timeline_lookup\":[[1,766],[3,765],[19,764],[29,742],[40,741],[41,376]],\"tags\":[],\"tags_descriptions\":{},\"fancy_title\":\"DCMotorSim but from kS, kV, and kA\",\"id\":440603,\"title\":\"DCMotorSim but from kS, kV, and kA\",\"posts_count\":41,\"created_at\":\"2023-09-07T12:17:20.400Z\",\"views\":1259,\"reply_count\":31,\"like_count\":3,\"last_posted_at\":\"2024-10-01T02:05:34.078Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"dcmotorsim-but-from-ks-kv-and-ka\",\"category_id\":30,\"word_count\":1898,\"deleted_at\":null,\"user_id\":48345,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_440603\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":41,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":4,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":48345,\"username\":\"narmstro\",\"name\":\"Nicholas Armstrong\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"post_count\":25,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"post_count\":10,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":1549,\"username\":\"Richard_Wallace\",\"name\":\"Richard Wallace\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/richard_wallace/{size}/110760_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":48345,\"username\":\"narmstro\",\"name\":\"Nicholas Armstrong\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://github.com/wpilibsuite/sysid/blob/main/sysid-application/src/main/native/cpp/analysis/ElevatorSim.cpp\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":10,\"user_id\":16846,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://file.tavsys.net/control/controls-engineering-in-frc.pdf\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":16846,\"domain\":\"file.tavsys.net\",\"root_domain\":\"tavsys.net\"},{\"url\":\"https://github.com/narmstro2020/AffineSystemSim\",\"title\":\"GitHub - narmstro2020/AffineSystemSim\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":48345,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/java/edu/wpi/first/math/controller/LinearPlantInversionFeedforward.java#L141-L146\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":16846,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/native/include/frc/controller/LinearPlantInversionFeedforward.h#L140-L144\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":16846,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/system/plant/LinearSystemId.html#identifyPositionSystem(double,double)\",\"title\":\"LinearSystemId (WPILib API 2023.4.3)\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":16846,\"domain\":\"github.wpilib.org\",\"root_domain\":\"wpilib.org\"}]},\"bookmarks\":[]}"}
