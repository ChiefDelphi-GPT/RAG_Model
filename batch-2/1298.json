{"data":"{\"post_stream\":{\"posts\":[{\"id\":3462932,\"name\":\"Matthew Milunic\",\"username\":\"mathum\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/8baadc/{size}.png\",\"created_at\":\"2024-12-23T21:21:52.439Z\",\"cooked\":\"\\u003cp\\u003eWhen using a Kalman Filter like for combining your odometry measurements from your wheels with your pose estimates from your vision measurements, does the filter take into account how long it has been since the last vision measurement?\\u003c/p\\u003e\\n\\u003cp\\u003eIn other words, if I were to tell my robot its position with an april tag at t=0, drive around, and then update its position with an april tag, would it trust that tag more if it saw it at t=10 as opposed to t=2?\\u003c/p\\u003e\\n\\u003cp\\u003eI think that would make sense logically at least, as your robot has had more time to build up odometry error and therefore the vision measurement would be comparatively more accurate compared to your odometry if it was longer between seeing april tags. Is this how the Kalman Filters in WPILib work?\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-23T21:21:52.439Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":180,\"reads\":385,\"readers_count\":384,\"score\":977.0,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Matthew Milunic\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":59542,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Lead Bug Writer\"},\"post_url\":\"/t/kalman-filter-question/477269/1\",\"custom_user_title\":\"Lead Bug Writer\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":3462956,\"name\":\"\",\"username\":\"KfirNeuman\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/k/d07c76/{size}.png\",\"created_at\":\"2024-12-23T23:48:39.807Z\",\"cooked\":\"\\u003cp\\u003eThe short answer is yes. As time goes on without a measurement you trust measurements more and more.\\u003c/p\\u003e\\n\\u003cp\\u003eI ended up writing a lot more than I originally though I would so I hope this helps. If you have any questions about something I wrote or something else feel free to ask. I haven’t done any college courses or something on the topic so I might not know everything but I will answer to the best of my ability.\\u003c/p\\u003e\\n\\u003cp\\u003eThe kalman filter has a model which it uses to calculate where it is given the inputs you gave to it (in this case the model is odometry). On top of that you can add measurements to correct errors created by the model.\\u003c/p\\u003e\\n\\u003cp\\u003eThe kalman filter has a number P (technically this is a matrix) which tells it how much to trust the model (odometry). If P is 0 that means you can trust the model completely and it’s position is completely correct. If P is small that means we can trust the model relatively well because the position it tells us reflects or real position pretty well. If P is large then that means we cannot trust the model a lot and because it is far away from our position. What is important to understand is that P is a representation of how far away our model is from our actual position.\\u003c/p\\u003e\\n\\u003cp\\u003eNow the kalman filter can do 2 things\\u003c/p\\u003e\\n\\u003col\\u003e\\n\\u003cli\\u003eUse our model to predict where we will be given certain inputs\\u003c/li\\u003e\\n\\u003cli\\u003eCorrect our model using certain measurements\\u003cbr\\u003e\\nWe will try to understand how each of these is affected by P and how each of these affects P\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cp\\u003ePrediction\\u003cbr\\u003e\\nWhen we predict where our system is going to be we use our model to calculate where we are going to be in the future. In a world where we had a perfect model we would only need to do this because the model could calculate exactly where we are. Unfortunately we are not on a perfect world and so our model cannot calculate exactly where we will be. There are 2 contributing factors two this. First, the actual model for our system is very complex so we use a simplified one that can predict our system pretty well but not perfectly. Second there is process noise (disturbances we cannot model such as friction or air resistance) in our system and that causes our model to be worse as well. So in the end our model can predict where we will be in the future (in the case of code the next code cycle) but not with perfect accuracy.\\u003c/p\\u003e\\n\\u003cp\\u003eTherefore each time we predict statistically the distance between where the model thinks we are and where we actually are grows. Now remember the relationship we said there is between P and this distance between the model and our real position. When we predicted, the distance grew, and therefore P must also grow.\\u003c/p\\u003e\\n\\u003cp\\u003eIn summary each time we predict our next position P grows and therefore we trust our model less.\\u003c/p\\u003e\\n\\u003cp\\u003eMeasurement\\u003cbr\\u003e\\nWhen we add a measurement we are telling our system were it should actually be. Effectively we are telling our system that it’s model may be incorrect and this new externally measured position may be more correct. Of course the measurement is also not necessarily completely correct and so we should not trust it entirely either. Therefore we need to find some way to combine the position the system thinks it is in and the external measurement based on how much we trust each of them.\\u003c/p\\u003e\\n\\u003cp\\u003eSo how much do we trust actually trust each of them? Well earlier we said that P represents how much we trust our model, and so we will use it to combine the measurements. We also need to know how much we trust the measurement, but this changes based on the type of measurement (Camera, Lidar, etc.) and the situation of the measurement (How fast we were moving when we took the frame, distance from the target, etc.). So to take this into account along with every measurement we add a number R (Technically this is also a matrix) which tells us how much we trust the measurement. Now you probably know this as standard deviation which you put in the code because standard deviation is a slightly simplified version of R (They still work very well for what we are doing).\\u003c/p\\u003e\\n\\u003cp\\u003eSo how do we combine these two measurements. There is some math behind this but the easiest way to think about this is as a weighted average. We say that\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003cspan class=\\\"math\\\"\\u003ex_{corrected} = \\\\frac{x_{model} * P + x_{measurement} * R}{P + R}\\u003c/span\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eNow this isn’t exactly correct because it assumes that we trust P and R more if they are larger which is the opposite of what is true. Therefore it would be closer to the truth if it was 1 / P and 1 / R in the equations but the point is that you combine the two values using P and R as weights.\\u003c/p\\u003e\\n\\u003cp\\u003eNow that we have combined the two we can plug the corrected X into the model and continue any other calculations (such as predicting and using this value in our code) using this new X. On top of this because we have now added a measurement this new X should statistically be closer to our real position and therefore P gets smaller.\\u003c/p\\u003e\\n\\u003cp\\u003eIn summary when we add a measurement we do 2 things\\u003c/p\\u003e\\n\\u003col\\u003e\\n\\u003cli\\u003eWe find a more correct position based off a combination of our model and measurement. We know how much to trust each of these based off of P and our standard deviations for the measurement.\\u003c/li\\u003e\\n\\u003cli\\u003eBecause we know trust our position more as we have more data for it we decrease P and trust our model more from now on.\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cp\\u003eSo in general we have 2 things we can do\\u003c/p\\u003e\\n\\u003col\\u003e\\n\\u003cli\\u003ePredict where we our going to be which increases P and decreases how much we trust the model\\u003c/li\\u003e\\n\\u003cli\\u003eAdd a measurement which changes our position based off of P and decreases P causing us to trust our model more.\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cp\\u003eSo now to answer your initial question. We are periodically predicting where we will be to keep our model up to date. The more we predict P gets larger, we trust our model less and we trust measurements more. Therefore if we went 0.1 seconds since the last measurement P will be relatively small and therefore we won’t trust our measurement very much compared to our model. If we get 2 seconds since the last measurement P will be large and therefore we will trust our measurements more. if we have 10 seconds since the last measurement then P will be very large as we have predicted a lot and therefore we will trust our measurements almost completely.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-23T23:48:39.807Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":326,\"readers_count\":325,\"score\":195.2,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":7}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":62573,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"3075 Code Lead\"},\"post_url\":\"/t/kalman-filter-question/477269/2\",\"custom_user_title\":\"3075 Code Lead\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":7}],\"current_user_reaction\":null,\"reaction_users_count\":7,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3462964,\"name\":\"joel truher\",\"username\":\"truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"created_at\":\"2024-12-24T00:28:12.726Z\",\"cooked\":\"\\u003cp\\u003eI think this thread has what you want.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote quote-modified\\\" data-post=\\\"1\\\" data-topic=\\\"459755\\\"\\u003e\\n  \\u003cdiv class=\\\"title\\\"\\u003e\\n    \\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n    \\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/phrogz/48/217285_2.png\\\" class=\\\"avatar\\\"\\u003e\\n    \\u003ca href=\\\"https://www.chiefdelphi.com/t/odometry-fusion-simpler-than-kalman/459755/\\\"\\u003eOdometry Fusion Simpler than Kalman\\u003c/a\\u003e \\u003ca class=\\\"badge-category__wrapper \\\" href=\\\"/c/technical/programming/30\\\"\\u003e\\u003cspan data-category-id=\\\"30\\\" style=\\\"--category-badge-color: #F7941D; --category-badge-text-color: #FFF; --parent-category-badge-color: #3AB54A;\\\" data-parent-category-id=\\\"9\\\" data-drop-close=\\\"true\\\" class=\\\"badge-category --has-parent\\\" title=\\\"Discussion of any ideas, algorithms, etc.\\\"\\u003e\\u003cspan class=\\\"badge-category__name\\\"\\u003eProgramming\\u003c/span\\u003e\\u003c/span\\u003e\\u003c/a\\u003e\\n  \\u003c/div\\u003e\\n  \\u003cblockquote\\u003e\\n    Our team has odometry self-tracking our swerve location. The team believes it’s pretty good. But we know it will drift, or jump with the wrong collisions. \\nSo we added AprilTag detection, hoping it would simply give us perfect localization. Suprise (to no-one here): it is imperfect. Noisy, unreliable. So, we want to fuse our self-tracking with AprilTags, in the “right” way. People say Kalman filters are the right way, and they’re probably right. But they’re also hard. \\nSo, instead of putting in …\\n  \\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eTLDR: State uncertainty is constant, pending a faster controller.\\u003c/p\\u003e\\n\\u003cp\\u003ebut vision uncertainty is easy to adjust, and everybody does.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T00:28:12.726Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":212,\"readers_count\":211,\"score\":57.4,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"joel truher\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/odometry-fusion-simpler-than-kalman/459755\",\"internal\":true,\"reflection\":false,\"title\":\"Odometry Fusion Simpler than Kalman\",\"clicks\":0}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53190,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/kalman-filter-question/477269/3\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463021,\"name\":\"Matthew Milunic\",\"username\":\"mathum\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/8baadc/{size}.png\",\"created_at\":\"2024-12-24T04:06:38.996Z\",\"cooked\":\"\\u003cp\\u003eI think that would definitely be the ideal implementation. This post however says that at least the way the Kalman filter is implemented now, it doesn’t build up uncertainty or P.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote quote-modified\\\" data-post=\\\"10\\\" data-topic=\\\"459755\\\"\\u003e\\n  \\u003cdiv class=\\\"title\\\"\\u003e\\n    \\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n    \\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/jared_russell/48/399_2.png\\\" class=\\\"avatar\\\"\\u003e\\n    \\u003ca href=\\\"https://www.chiefdelphi.com/t/odometry-fusion-simpler-than-kalman/459755/10\\\"\\u003eOdometry Fusion Simpler than Kalman\\u003c/a\\u003e \\u003ca class=\\\"badge-category__wrapper \\\" href=\\\"/c/technical/programming/30\\\"\\u003e\\u003cspan data-category-id=\\\"30\\\" style=\\\"--category-badge-color: #F7941D; --category-badge-text-color: #FFF; --parent-category-badge-color: #3AB54A;\\\" data-parent-category-id=\\\"9\\\" data-drop-close=\\\"true\\\" class=\\\"badge-category --has-parent\\\" title=\\\"Discussion of any ideas, algorithms, etc.\\\"\\u003e\\u003cspan class=\\\"badge-category__name\\\"\\u003eProgramming\\u003c/span\\u003e\\u003c/span\\u003e\\u003c/a\\u003e\\n  \\u003c/div\\u003e\\n  \\u003cblockquote\\u003e\\n    A factor graph would be great, but I think before doing that it would make sense to fix a bigger issue with the WPIlib pose estimators: treating odometry as a direct predictor of pose rather than a differential measurement that gets integrated to obtain pose. \\nRight now if you drive around without a vision update for a lot of time / distance, your state variance never grows. But that’s not how odometry actually works (if it was, we wouldn’t need vision!). Instead, we should expect uncertainty to…\\n  \\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eOn another note, thank you for the amazing explanation of Kalman filters!\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T04:07:11.804Z\",\"reply_count\":1,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":6,\"reads\":201,\"readers_count\":200,\"score\":75.2,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Matthew Milunic\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/odometry-fusion-simpler-than-kalman/459755/10\",\"internal\":true,\"reflection\":false,\"title\":\"Odometry Fusion Simpler than Kalman\",\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":62573,\"username\":\"KfirNeuman\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/k/d07c76/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":59542,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Lead Bug Writer\"},\"post_url\":\"/t/kalman-filter-question/477269/4\",\"custom_user_title\":\"Lead Bug Writer\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463048,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2024-12-24T07:15:54.951Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"mathum\\\" data-post=\\\"4\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/m/8baadc/48.png\\\" class=\\\"avatar\\\"\\u003e mathum:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eThis post however says that at least the way the Kalman filter is implemented now, it doesn’t build up uncertainty or P.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eWPILib’s \\u003ca href=\\\"https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/estimator/KalmanFilter.html\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eKalmanFilter\\u003c/a\\u003e class does, but the pose estimator classes don’t because the roboRIO is a potato. Also, a linear Kalman filter is the wrong kind of filter for the true probability distribution of this problem anyway, so we just went with what’s simple and Good Enough™ instead of chasing high accuracy the roboRIO can’t achieve.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T07:20:30.084Z\",\"reply_count\":2,\"reply_to_post_number\":4,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":168,\"readers_count\":167,\"score\":58.6,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/estimator/KalmanFilter.html\",\"internal\":false,\"reflection\":false,\"title\":\"KalmanFilter (WPILib API 2024.3.2)\",\"clicks\":8},{\"url\":\"https://www.chiefdelphi.com/t/swervedriveposeestimator-no-odometry-stddevs/483055/6\",\"internal\":true,\"reflection\":true,\"title\":\"SwerveDrivePoseEstimator - No Odometry Stddevs?\",\"clicks\":2}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/kalman-filter-question/477269/5\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463050,\"name\":\"Lidor Kaplan\",\"username\":\"Lidor51\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/lidor51/{size}/65522_2.png\",\"created_at\":\"2024-12-24T07:32:29.959Z\",\"cooked\":\"\\u003cp\\u003eUntil the new robot controller is out, any disrecommendation against decreasing vision stds over time (as long you don’t see targets, and reset stds after you see targets)?\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T07:33:35.831Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":157,\"readers_count\":156,\"score\":36.4,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Lidor Kaplan\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":18348,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"1577 Drive Coach \\u0026 Mentor\"},\"post_url\":\"/t/kalman-filter-question/477269/6\",\"custom_user_title\":\"1577 Drive Coach \\u0026 Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463051,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2024-12-24T07:38:21.062Z\",\"cooked\":\"\\u003cp\\u003eDon’t do that; the vision stddevs are time invariant. The proper way to model it is via the error covariance P increasing over time (Pₖ₊₁ = APₖAᵀ + Qₖ). The problem is applying laggy vision measurements at the proper place in a pose backlog and replaying the odometry measurements gets prohibitively expensive.\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T07:40:06.009Z\",\"reply_count\":1,\"reply_to_post_number\":6,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":152,\"readers_count\":151,\"score\":50.4,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":18348,\"username\":\"Lidor51\",\"name\":\"Lidor Kaplan\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/lidor51/{size}/65522_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/kalman-filter-question/477269/7\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463067,\"name\":\"Lidor Kaplan\",\"username\":\"Lidor51\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/lidor51/{size}/65522_2.png\",\"created_at\":\"2024-12-24T08:05:15.629Z\",\"cooked\":\"\\u003cp\\u003eI’m aware that’s not the proper way to do it, but not sure from your explanation what you assume will happen if the stddevs are scaled by time without a target? (as we already scale them based on distance, etc.).\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T08:05:15.629Z\",\"reply_count\":2,\"reply_to_post_number\":7,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":143,\"readers_count\":142,\"score\":38.6,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Lidor Kaplan\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":18348,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"1577 Drive Coach \\u0026 Mentor\"},\"post_url\":\"/t/kalman-filter-question/477269/8\",\"custom_user_title\":\"1577 Drive Coach \\u0026 Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463070,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2024-12-24T08:30:26.420Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Lidor51\\\" data-post=\\\"8\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/lidor51/48/65522_2.png\\\" class=\\\"avatar\\\"\\u003e Lidor51:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003ebut not sure from your explanation what you assume will happen if the stddevs are scaled by time without a target\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThat method will give you an answer regardless because math is math, but it violates assumptions the Kalman filter makes (namely, a linear measurement model with additive noise with a constant spectral density), so there’s no guarantee the answer will be good. Outside those assumptions, a nonlinear filter likely offers better performance.\\u003c/p\\u003e\\n\\u003cp\\u003eThe main reason to use a Kalman filter is mathematically rigorous optimal filtering, so if that’s not your goal, it’s probably the wrong tool for your use case. As for what the exact behavior is, you’d have to run some simulations.\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T08:45:43.964Z\",\"reply_count\":0,\"reply_to_post_number\":8,\"quote_count\":1,\"incoming_link_count\":3,\"reads\":133,\"readers_count\":132,\"score\":41.6,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":3,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/kalman-filter-question/477269/9\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463072,\"name\":\"Eric Ward\",\"username\":\"bathtubed\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bathtubed/{size}/220364_2.png\",\"created_at\":\"2024-12-24T08:49:09.501Z\",\"cooked\":\"\\u003cp\\u003eWhat if a pose estimator just stored a single Covariance state that represents the present covariance, even though the vision measurements are likely corresponding with a state which is a few odometry updates older, circumventing the need for propagation, while still measuring uncertainty in 3 axes to some extent.\\u003cbr\\u003e\\nIt wouldn’t be totally accurate, but I would imagine this would be “Good (better?) Enough” as well, no?\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T08:49:09.501Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":126,\"readers_count\":125,\"score\":30.2,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Eric Ward\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":35208,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"3637 Mentor\"},\"post_url\":\"/t/kalman-filter-question/477269/10\",\"custom_user_title\":\"3637 Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463075,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2024-12-24T08:57:27.105Z\",\"cooked\":\"\\u003cp\\u003eI’m having trouble understanding your suggestion because it doesn’t follow the standard terminology.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"bathtubed\\\" data-post=\\\"10\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/bathtubed/48/220364_2.png\\\" class=\\\"avatar\\\"\\u003e bathtubed:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003ea single Covariance state\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eIs it a covariance or a state? Those are mutually exclusive terms in Kalman filters.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"bathtubed\\\" data-post=\\\"10\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/bathtubed/48/220364_2.png\\\" class=\\\"avatar\\\"\\u003e bathtubed:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003ethe present covariance\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThe covariance of what? There’s error covariance, process noise covariance, and measurement noise covariance.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"bathtubed\\\" data-post=\\\"10\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/bathtubed/48/220364_2.png\\\" class=\\\"avatar\\\"\\u003e bathtubed:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eeven though the vision measurements are likely corresponding with a state which is a few odometry updates older, circumventing the need for propagation\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eIf you correct an old state estimate with an old vision measurement, you still have to propagate that forward to the current state estimate somehow if you don’t want the robot acting on laggy state estimates. The WPILib pose estimators do this by finding a delta with respect to the old pose estimate, then applying that delta to the latest pose estimate (or at least they used to; it changes every year).\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"bathtubed\\\" data-post=\\\"10\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/bathtubed/48/220364_2.png\\\" class=\\\"avatar\\\"\\u003e bathtubed:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003ewhile still measuring uncertainty in 3 axes to some extent\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThat doesn’t make sense to me. If you only have one covariance, the only way that can apply to 3 axes is if the uncertainty is always the same for some states (e.g., x-y-z translation or rotation, with the appropriate measurement model), and it’s unclear which states you mean.\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T19:31:06.094Z\",\"reply_count\":2,\"reply_to_post_number\":10,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":130,\"readers_count\":129,\"score\":41.0,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/kalman-filter-question/477269/11\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463078,\"name\":\"Eric Ward\",\"username\":\"bathtubed\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bathtubed/{size}/220364_2.png\",\"created_at\":\"2024-12-24T10:15:45.980Z\",\"cooked\":\"\\u003cp\\u003eApologies, I’ll do my best to use proper/consistent terminology as I can definitely see why my post was confusing.\\u003c/p\\u003e\\n\\u003cp\\u003eThe base premise is that state (pose estimate) propagation is done via a simple transform rather than replaying odometry.\\u003cbr\\u003e\\nThis is effectively the paradigm \\u003cspan class=\\\"abbreviation\\\"\\u003eROS\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Robot Operating System\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e uses in localization. There’s an Odometry “frame”, where odometry is tracked independent of sensors. So if odometry says the robot has moved 10 meters forward and 3 meters to the right at \\u003cspan class=\\\"math\\\"\\u003et=2\\u003c/span\\u003e then the \\u003ccode\\u003eodom-\\u0026gt;base_link\\u003c/code\\u003e transform is \\u003cspan class=\\\"math\\\"\\u003e(10, 5)\\u003c/span\\u003e (at \\u003cspan class=\\\"math\\\"\\u003et=2\\u003c/span\\u003e). Even when a sensor measurement correcting that comes in, we don’t modify this.\\u003c/p\\u003e\\n\\u003cp\\u003eThen there’s a “map” or “world” frame which is where we make external measurements (apriltags with known poses). This transform is from \\u003ccode\\u003emap-\\u0026gt;base_frame\\u003c/code\\u003e. So at \\u003cspan class=\\\"math\\\"\\u003et=2\\u003c/span\\u003e we measure that we’re at pose \\u003cspan class=\\\"math\\\"\\u003e(11, 4.5)\\u003c/span\\u003e instead. We use this to determine our total odometry drift/error to be the difference, \\u003cspan class=\\\"math\\\"\\u003e(1, -0.5)\\u003c/span\\u003e. This can be thought of as the \\u003ccode\\u003eodom-\\u0026gt;map\\u003c/code\\u003e transform, completing the loop.\\u003c/p\\u003e\\n\\u003cp\\u003eHowever, we might not receive this measurement until t=5.\\u003cbr\\u003e\\nThe trick is that we assume the odometry drift (\\u003ccode\\u003eodom-\\u0026gt;map\\u003c/code\\u003e) has 0-mean noise. So we estimate the current \\u003cspan class=\\\"math\\\"\\u003et=5\\u003c/span\\u003e \\u003ccode\\u003emap-\\u0026gt;base_link\\u003c/code\\u003e pose to be the \\u003cspan class=\\\"math\\\"\\u003et=5\\u003c/span\\u003e \\u003ccode\\u003eodom-\\u0026gt;base_link\\u003c/code\\u003e pose added to the \\u003cspan class=\\\"math\\\"\\u003et=2\\u003c/span\\u003e (most recent) \\u003ccode\\u003emap-\\u0026gt;odom\\u003c/code\\u003e “offset/error/drift” value.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003cdiv class=\\\"lightbox-wrapper\\\"\\u003e\\u003ca class=\\\"lightbox\\\" href=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/9/d/9d0ffe292be74a78dcabf676b331b31f1fc08089.png\\\" data-download-href=\\\"https://www.chiefdelphi.com/uploads/default/9d0ffe292be74a78dcabf676b331b31f1fc08089\\\" title=\\\"http://wiki.ros.org/amcl\\\"\\u003e\\u003cimg src=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/9/d/9d0ffe292be74a78dcabf676b331b31f1fc08089.png\\\" alt=\\\"http://wiki.ros.org/amcl\\\" data-base62-sha1=\\\"mpre5MnsAVbi0MirsKSn2mi26cV\\\" width=\\\"666\\\" height=\\\"500\\\" data-dominant-color=\\\"DFE7F1\\\"\\u003e\\u003cdiv class=\\\"meta\\\"\\u003e\\u003csvg class=\\\"fa d-icon d-icon-far-image svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#far-image\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003cspan class=\\\"filename\\\"\\u003ehttp://wiki.ros.org/amcl\\u003c/span\\u003e\\u003cspan class=\\\"informations\\\"\\u003e960×720 19.9 KB\\u003c/span\\u003e\\u003csvg class=\\\"fa d-icon d-icon-discourse-expand svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#discourse-expand\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003c/div\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eSo no replay of odometry required. However, I’ve made no mention of uncertainty yet. I believe in \\u003cspan class=\\\"abbreviation\\\"\\u003eROS\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Robot Operating System\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e, this is usually calculated at the pose estimator which is incorporating the odometry in real time, as opposed to our paradigm in \\u003cspan class=\\\"abbreviation\\\"\\u003eFRC\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"FIRST Robotics Competition\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e where limelight and photonvision are providing people global pose estimates without incorporating odometry on its end.\\u003cbr\\u003e\\nThe problem there is that compounding the prediction uncertainty step and measurement step do need to be done in order to be accurate.\\u003c/p\\u003e\\n\\u003cp\\u003eSo lets say in the example I mentioned above we performed odometry at \\u003cspan class=\\\"math\\\"\\u003et={1, 2, 3, 4, 5}\\u003c/span\\u003e, we would then have state error covariance \\u003cspan class=\\\"math\\\"\\u003eP\\u003c/span\\u003e at those times as well \\u003cspan class=\\\"math\\\"\\u003eP_1, P_2, P_3, P_4, P_5\\u003c/span\\u003e. Where \\u003cspan class=\\\"math\\\"\\u003eP_t = F_t P_{t-1} F_t^T + Q_t\\u003c/span\\u003e where \\u003cspan class=\\\"math\\\"\\u003eF_t\\u003c/span\\u003e is the linearized process evolution matrix at \\u003cspan class=\\\"math\\\"\\u003et\\u003c/span\\u003e and \\u003cspan class=\\\"math\\\"\\u003eQ_t\\u003c/span\\u003e is the process noise matrix based on some model at \\u003cspan class=\\\"math\\\"\\u003et\\u003c/span\\u003e.\\u003c/p\\u003e\\n\\u003cp\\u003eUpon receiving the measurement for \\u003cspan class=\\\"math\\\"\\u003et=2\\u003c/span\\u003e, you now have a \\u003cspan class=\\\"math\\\"\\u003eP_2'\\u003c/span\\u003e which is calculated using the Kalman gain \\u003cspan class=\\\"math\\\"\\u003eK_t\\u003c/span\\u003e and incorporates the measurement noise \\u003cspan class=\\\"math\\\"\\u003eR_t\\u003c/span\\u003e.\\u003cbr\\u003e\\n\\u003cspan class=\\\"math\\\"\\u003eP_t' = (I - K_t) P_t (I - K_t)^T + K_t R_t K_t^T\\u003c/span\\u003e\\u003cbr\\u003e\\n\\u003cspan class=\\\"math\\\"\\u003eK_t = P_t (P_t + R_t)^{-1}\\u003c/span\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eI believe for fusing pose estimates from other sources, the observation matrix \\u003cspan class=\\\"math\\\"\\u003eH\\u003c/span\\u003e is just identity so it’s omitted.\\u003c/p\\u003e\\n\\u003cp\\u003eBut now you have to do \\u003cspan class=\\\"math\\\"\\u003eP_3' = F_2 P_2 F_2^T + Q_2\\u003c/span\\u003e and perform those error covariance updates up to the present up to \\u003cspan class=\\\"math\\\"\\u003eP_5'\\u003c/span\\u003e which is a lot of matrix operations at once which is expensive (this is my understanding for the rationale against this currently).\\u003c/p\\u003e\\n\\u003cp\\u003eBut I’m wondering if it would be “Good Enough,” to simply apply the measurement covariance update on \\u003cspan class=\\\"math\\\"\\u003eP_5\\u003c/span\\u003e and \\u003cspan class=\\\"math\\\"\\u003eR_2\\u003c/span\\u003e. The Kalman gain would then be applied to the error found at \\u003cspan class=\\\"math\\\"\\u003et=2\\u003c/span\\u003e to determine the offset to apply to the current state.\\u003cbr\\u003e\\nThis is what I meant by only tracking the up-to-date estimate covariance instead of maintaining the full backlog of them. To me that seems like a very simple algorithm to implement for the basic pose estimator class which still expresses the growing of uncertainty as the robot moves without a sensor measurement.\\u003c/p\\u003e\\n\\u003cp\\u003eIt’s possible you even disagree with the initial premise of tracking pose errors using a transform like this, as I know the current wpilib pose estimator does not do it this way, but I’m curious on your thoughts on both parts.\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T11:57:53.960Z\",\"reply_count\":1,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":123,\"readers_count\":122,\"score\":34.6,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Eric Ward\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":35208,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"3637 Mentor\"},\"post_url\":\"/t/kalman-filter-question/477269/12\",\"custom_user_title\":\"3637 Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463103,\"name\":\"Lidor Kaplan\",\"username\":\"Lidor51\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/lidor51/{size}/65522_2.png\",\"created_at\":\"2024-12-24T15:33:05.457Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Lidor51\\\" data-post=\\\"8\\\" data-topic=\\\"477269\\\" data-full=\\\"true\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/lidor51/48/65522_2.png\\\" class=\\\"avatar\\\"\\u003e Lidor51:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eI’m aware that’s not the proper way to do it, but not sure from your explanation what you assume will happen if the stddevs are scaled by time without a target? (as we already scale them based on distance, etc.).\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003e\\u003ca class=\\\"mention\\\" href=\\\"/u/jared_russell\\\"\\u003e@Jared_Russell\\u003c/a\\u003e I saw you also talked on the need to reflect growing odometry uncertainty over time, yet I saw in your team’s code you didn’t account for that. Have you experienced with time-based stddevs scaling? Are you joining Tyler’s concerns against it?\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T15:33:05.457Z\",\"reply_count\":0,\"reply_to_post_number\":8,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":96,\"readers_count\":95,\"score\":69.2,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Lidor Kaplan\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":18348,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"1577 Drive Coach \\u0026 Mentor\"},\"post_url\":\"/t/kalman-filter-question/477269/13\",\"custom_user_title\":\"1577 Drive Coach \\u0026 Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463171,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2024-12-24T19:13:21.908Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"bathtubed\\\" data-post=\\\"12\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/bathtubed/48/220364_2.png\\\" class=\\\"avatar\\\"\\u003e bathtubed:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eBut now you have to do \\u003cspan class=\\\"math\\\"\\u003eP_3' = F_2 P_2 F_2^T + Q_2\\u003c/span\\u003e and perform those error covariance updates up to the present up to \\u003cspan class=\\\"math\\\"\\u003eP_5'\\u003c/span\\u003e which is a lot of matrix operations at once which is expensive (this is my understanding for the rationale against this currently).\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eYea, that’s what \\u003ca href=\\\"https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/estimator/KalmanFilterLatencyCompensator.html\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eKalmanFilterLatencyCompensator\\u003c/a\\u003e does, which was way too slow.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"bathtubed\\\" data-post=\\\"12\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/bathtubed/48/220364_2.png\\\" class=\\\"avatar\\\"\\u003e bathtubed:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eBut I’m wondering if it would be “Good Enough,” to simply apply the measurement covariance update on \\u003cspan class=\\\"math\\\"\\u003eP_5\\u003c/span\\u003e and \\u003cspan class=\\\"math\\\"\\u003eR_2\\u003c/span\\u003e. The Kalman gain would then be applied to the error found at \\u003cspan class=\\\"math\\\"\\u003et=2\\u003c/span\\u003e to determine the offset to apply to the current state.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eYou mean the error covariance update? R isn’t updated by this process. Assuming that, the suggested process would underestimate the true value of \\u003cspan class=\\\"math\\\"\\u003eP_5\\u003c/span\\u003e since the replay from \\u003cspan class=\\\"math\\\"\\u003eP_2\\u003c/span\\u003e would normally cause growth. This means K would be underestimated and the measurement wouldn’t correct the state estimate as much: \\u003ca href=\\\"https://www.wolframalpha.com/input?i=plot+p%2F%28p%2B5%29+from+p+%3D+0+to+100\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eplot p/(p+5) from p = 0 to 100 - Wolfram|Alpha\\u003c/a\\u003e.\\u003c/p\\u003e\\n\\u003cp\\u003eThe transform graph thing \\u003cspan class=\\\"abbreviation\\\"\\u003eROS\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Robot Operating System\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e does sounds more complicated than what we do now. I’m of the opinion that if we’re not going to be mathematically rigorous, we shouldn’t bother overcomplicating the pose estimator, because that makes it harder to maintain. Every time we touch the current pose estimator implementation becomes a major operation that takes months to review and merge because (1) it’s complex, and (2) subtle bugs creep in that are hard to find and fix.\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T19:29:30.050Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":94,\"readers_count\":93,\"score\":23.8,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/estimator/KalmanFilterLatencyCompensator.html\",\"internal\":false,\"reflection\":false,\"title\":\"KalmanFilterLatencyCompensator (WPILib API 2024.3.2)\",\"clicks\":5},{\"url\":\"https://www.wolframalpha.com/input?i=plot+p%2F%28p%2B5%29+from+p+%3D+0+to+100\",\"internal\":false,\"reflection\":false,\"title\":\"plot p/(p+5) from p = 0 to 100 - Wolfram|Alpha\",\"clicks\":2}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/kalman-filter-question/477269/14\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463185,\"name\":\"Eric Ward\",\"username\":\"bathtubed\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bathtubed/{size}/220364_2.png\",\"created_at\":\"2024-12-24T19:59:02.804Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"calcmogul\\\" data-post=\\\"14\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/calcmogul/48/128045_2.png\\\" class=\\\"avatar\\\"\\u003e calcmogul:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eR isn’t updated by this process.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eYes, I meant calculating \\u003cspan class=\\\"math\\\"\\u003eP_5'\\u003c/span\\u003e in terms of the prior prediction \\u003cspan class=\\\"math\\\"\\u003eP_5\\u003c/span\\u003e and the sensor covariance for that measurement \\u003cspan class=\\\"math\\\"\\u003eR_2\\u003c/span\\u003e (which you may decide to model as a function of your distance to apriltag, skew, whatever).\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group quote-modified\\\" data-username=\\\"calcmogul\\\" data-post=\\\"14\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/calcmogul/48/128045_2.png\\\" class=\\\"avatar\\\"\\u003e calcmogul:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003ereplay from P_2P2P_2 would normally cause growth.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThis growth would already be incorporated in the prior estimate of \\u003cspan class=\\\"math\\\"\\u003eP_5\\u003c/span\\u003e.\\u003c/p\\u003e\\n\\u003cp\\u003eIn a naive simplification, if we imagine the prediction step grows your variance by 10% each step, and the measurement update shrinks it by 20%, then either way you have \\u003cspan class=\\\"math\\\"\\u003e1.1^5 * 0.8\\u003c/span\\u003e in this example, we applied the same transformations on the covariance matrix, just out of order.\\u003cbr\\u003e\\nHowever the order of these operations likely do matter, my question is by how much.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"calcmogul\\\" data-post=\\\"14\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/calcmogul/48/128045_2.png\\\" class=\\\"avatar\\\"\\u003e calcmogul:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eThe transform graph thing \\u003cspan class=\\\"abbreviation\\\"\\u003eROS\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Robot Operating System\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e does sounds more complicated than what we do now.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eBy my memory, the pose estimator was replaying odometry updates in the past since the vision update to catch up to real time in a for loop, which to me felt very complicated from what is needed.\\u003cbr\\u003e\\nHowever it seems that code has changed to actually do exactly what I’m describing, which is to just apply the Kalman gained innovation twist to the latest odometry estimate.\\u003c/p\\u003e\\n\\u003caside class=\\\"onebox githubcommit\\\" data-onebox-src=\\\"https://github.com/wpilibsuite/allwpilib/commit/512a4bfc125ec3c08e1ba19d37c52a43b37cdda4\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/commit/512a4bfc125ec3c08e1ba19d37c52a43b37cdda4\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003egithub.com/wpilibsuite/allwpilib\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003cdiv class=\\\"github-row\\\"\\u003e\\n  \\u003cdiv class=\\\"github-icon-container\\\" title=\\\"Commit\\\"\\u003e\\n    \\u003csvg width=\\\"60\\\" height=\\\"60\\\" class=\\\"github-icon\\\" viewBox=\\\"0 0 14 16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath fill-rule=\\\"evenodd\\\" d=\\\"M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv class=\\\"github-info-container\\\"\\u003e\\n    \\u003ch4\\u003e\\n      \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/commit/512a4bfc125ec3c08e1ba19d37c52a43b37cdda4\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003e[wpimath] Simplify pose estimator (#6705)\\u003c/a\\u003e\\n    \\u003c/h4\\u003e\\n\\n    \\u003cdiv class=\\\"github-info\\\"\\u003e\\n      \\u003cdiv class=\\\"date\\\"\\u003e\\n        committed \\u003cspan class=\\\"discourse-local-date\\\" data-format=\\\"ll\\\" data-date=\\\"2024-06-29\\\" data-time=\\\"03:12:12\\\" data-timezone=\\\"UTC\\\"\\u003e03:12AM - 29 Jun 24 UTC\\u003c/span\\u003e\\n      \\u003c/div\\u003e\\n\\n      \\u003cdiv class=\\\"user\\\"\\u003e\\n        \\u003ca href=\\\"https://github.com/KangarooKoala\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003e\\n          \\u003cimg alt=\\\"KangarooKoala\\\" src=\\\"https://avatars.githubusercontent.com/u/91924258?v=4\\\" class=\\\"onebox-avatar-inline\\\" width=\\\"20\\\" height=\\\"20\\\"\\u003e\\n          KangarooKoala\\n        \\u003c/a\\u003e\\n      \\u003c/div\\u003e\\n\\n      \\u003cdiv class=\\\"lines\\\" title=\\\"changed 4 files with 278 additions and 207 deletions\\\"\\u003e\\n        \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/commit/512a4bfc125ec3c08e1ba19d37c52a43b37cdda4\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003e\\n          \\u003cspan class=\\\"added\\\"\\u003e+278\\u003c/span\\u003e\\n          \\u003cspan class=\\\"removed\\\"\\u003e-207\\u003c/span\\u003e\\n        \\u003c/a\\u003e\\n      \\u003c/div\\u003e\\n    \\u003c/div\\u003e\\n  \\u003c/div\\u003e\\n\\u003c/div\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eIn that case I think I agree that anything I’m suggesting would be adding unneeded complication from where it is.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"calcmogul\\\" data-post=\\\"11\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/calcmogul/48/128045_2.png\\\" class=\\\"avatar\\\"\\u003e calcmogul:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eThe WPILib pose estimators do this by finding a delta with respect to the old pose estimate, then applying that delta to the latest pose estimate\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI missed this the first time I read your post, I think this is the source of my confusion as it doesn’t seem it worked this way when I read the code last season. I was under the impression Odometry updates were being replayed without covariance propagation.\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T19:59:55.178Z\",\"reply_count\":2,\"reply_to_post_number\":14,\"quote_count\":2,\"incoming_link_count\":2,\"reads\":87,\"readers_count\":86,\"score\":37.4,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Eric Ward\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/commit/512a4bfc125ec3c08e1ba19d37c52a43b37cdda4\",\"internal\":false,\"reflection\":false,\"title\":\"[wpimath] Simplify pose estimator (#6705) · wpilibsuite/allwpilib@512a4bf · GitHub\",\"clicks\":10}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":35208,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"3637 Mentor\"},\"post_url\":\"/t/kalman-filter-question/477269/15\",\"custom_user_title\":\"3637 Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463188,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2024-12-24T20:02:08.269Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"bathtubed\\\" data-post=\\\"15\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/bathtubed/48/220364_2.png\\\" class=\\\"avatar\\\"\\u003e bathtubed:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eI was under the impression Odometry updates were being replayed without covariance propagation.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThere’s no covariance involved in the current implementation. The covariance stuff was in the 2020 implementation, then removed later. Like I said earlier, we’ve had rewrites almost every year.\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T20:04:02.529Z\",\"reply_count\":1,\"reply_to_post_number\":15,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":77,\"readers_count\":76,\"score\":20.4,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/kalman-filter-question/477269/16\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463190,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2024-12-24T20:07:16.153Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group quote-modified\\\" data-username=\\\"bathtubed\\\" data-post=\\\"15\\\" data-topic=\\\"477269\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/bathtubed/48/220364_2.png\\\" class=\\\"avatar\\\"\\u003e bathtubed:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eIn a naive simplification, if we imagine the prediction step grows your variance by 10% each step, and the measurement update shrinks it by 20%, then either way you have 1.1^5 * 0.81.15∗0.81.1^5 * 0.8 in this example, we applied the same transformations on the covariance matrix, just out of order.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThat simplification isn’t valid though, so you can’t draw conclusions from it. Firstly, the error covariance experiences quadratic growth, not exponential growth. Secondly, this doesn’t accurately describe the predict and correct steps of the Kalman filter. I’d recommend writing a small Python script to simulate the two scenarios.\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T20:09:07.705Z\",\"reply_count\":0,\"reply_to_post_number\":15,\"quote_count\":1,\"incoming_link_count\":3,\"reads\":77,\"readers_count\":76,\"score\":60.4,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/kalman-filter-question/477269/17\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3463196,\"name\":\"Eric Ward\",\"username\":\"bathtubed\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bathtubed/{size}/220364_2.png\",\"created_at\":\"2024-12-24T20:30:17.949Z\",\"cooked\":\"\\u003cp\\u003eRight, thats exactly what I said, \\u003cem\\u003e“without”\\u003c/em\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eUp until the PR I linked from 6 months ago, step 7 of add vision measurement replayed Odometry inputs in a loop \\u003cem\\u003edespite\\u003c/em\\u003e not needing to do so to propagate an error covariance.\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":18,\"updated_at\":\"2024-12-24T20:30:17.949Z\",\"reply_count\":0,\"reply_to_post_number\":16,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":68,\"readers_count\":67,\"score\":18.6,\"yours\":false,\"topic_id\":477269,\"topic_slug\":\"kalman-filter-question\",\"display_username\":\"Eric Ward\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":35208,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"3637 Mentor\"},\"post_url\":\"/t/kalman-filter-question/477269/18\",\"custom_user_title\":\"3637 Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3462932,3462956,3462964,3463021,3463048,3463050,3463051,3463067,3463070,3463072,3463075,3463078,3463103,3463171,3463185,3463188,3463190,3463196]},\"timeline_lookup\":[[1,292],[13,291]],\"suggested_topics\":[{\"fancy_title\":\"Roborio death error\",\"id\":497852,\"title\":\"Roborio death error\",\"slug\":\"roborio-death-error\",\"posts_count\":5,\"reply_count\":1,\"highest_post_number\":5,\"image_url\":null,\"created_at\":\"2025-04-02T19:25:09.939Z\",\"last_posted_at\":\"2025-04-09T13:25:02.639Z\",\"bumped\":true,\"bumped_at\":\"2025-04-09T13:25:02.639Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Hey, this following error is shown in the driver station. There is comms but no robot Exception thrown by the agent : Unable to resolve hostname or get va…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":2,\"views\":348,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3578278,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":63521,\"username\":\"Yehuda\",\"name\":\"Yehudan Rothstein\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yehuda/{size}/265645_2.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":63521,\"username\":\"Yehuda\",\"name\":\"Yehudan Rothstein\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yehuda/{size}/265645_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":55065,\"username\":\"Xactlysharp\",\"name\":\"Anderson Hall\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/xactlysharp/{size}/186572_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":69912,\"username\":\"micahL\",\"name\":\"Micah\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/micahl/{size}/240235_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"YAGSL slow driving\",\"id\":481879,\"title\":\"YAGSL slow driving\",\"slug\":\"yagsl-slow-driving\",\"posts_count\":7,\"reply_count\":5,\"highest_post_number\":8,\"image_url\":null,\"created_at\":\"2025-01-15T14:29:58.425Z\",\"last_posted_at\":\"2025-01-16T13:22:42.660Z\",\"bumped\":true,\"bumped_at\":\"2025-01-16T13:22:42.660Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Try with beta3\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":2,\"views\":150,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":true,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3483438,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":6,\"topic_post_user\":{\"id\":51887,\"username\":\"nstrike\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/nstrike/{size}/167038_2.png\"},\"posters\":[{\"extras\":\"latest\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":60651,\"username\":\"enishangck\",\"name\":\"Enishan Eren Gücük \",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/a4c791/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster, Accepted Answer\",\"user\":{\"id\":51887,\"username\":\"nstrike\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/nstrike/{size}/167038_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"Multi-Limelight global localization\",\"id\":491125,\"title\":\"Multi-Limelight global localization\",\"slug\":\"multi-limelight-global-localization\",\"posts_count\":3,\"reply_count\":1,\"highest_post_number\":3,\"image_url\":null,\"created_at\":\"2025-02-11T01:41:08.326Z\",\"last_posted_at\":\"2025-02-12T19:49:53.938Z\",\"bumped\":true,\"bumped_at\":\"2025-02-12T19:49:53.938Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Does anyone have successful examples of combining pose estimation from two Limelights? We are looking to integrate this with YAGSL and I am unsure of which direction to go with regard to fusing the da…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"drivetrain\",\"limelight\",\"vision\",\"apriltags\",\"localization\"],\"tags_descriptions\":{},\"like_count\":3,\"views\":254,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3522946,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":true,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":60512,\"username\":\"four\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/four/{size}/199902_2.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":60512,\"username\":\"four\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/four/{size}/199902_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":53032,\"username\":\"Traptricker\",\"name\":\"Jackson Elia\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/traptricker/{size}/215403_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":51887,\"username\":\"nstrike\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/nstrike/{size}/167038_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"YAGSL motor overshooting\",\"id\":482696,\"title\":\"YAGSL motor overshooting\",\"slug\":\"yagsl-motor-overshooting\",\"posts_count\":9,\"reply_count\":3,\"highest_post_number\":9,\"image_url\":\"https://www.chiefdelphi.com/uploads/default/optimized/3X/4/2/42283bab352d547866a24e554d1e8ef598767254_2_1024x768.jpeg\",\"created_at\":\"2025-01-19T23:50:26.549Z\",\"last_posted_at\":\"2025-01-20T01:58:11.549Z\",\"bumped\":true,\"bumped_at\":\"2025-01-20T01:58:11.549Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"We are trying to implement YAGSL running neos with sparkmaxes and we have an issue where the robot “recoils”. When we move the joystick forward and then let go, it stops normally. However, when we try…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":0,\"views\":130,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3487774,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":71561,\"username\":\"Pranav9097\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/p/d2c977/{size}.png\"},\"posters\":[{\"extras\":\"latest\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":71561,\"username\":\"Pranav9097\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/p/d2c977/{size}.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":51417,\"username\":\"CuteRedpandas\",\"name\":\"Jared Van Horn\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cuteredpandas/{size}/243322_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":25951,\"username\":\"Technologyman00\",\"name\":\"Technologyman00\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/technologyman00/{size}/178178_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":25118,\"username\":\"prensing\",\"name\":\"Paul Rensing\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/prensing/{size}/65820_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"Switching languages: Python to Java\",\"id\":498192,\"title\":\"Switching languages: Python to Java\",\"slug\":\"switching-languages-python-to-java\",\"posts_count\":59,\"reply_count\":51,\"highest_post_number\":59,\"image_url\":null,\"created_at\":\"2025-04-07T00:03:13.732Z\",\"last_posted_at\":\"2025-04-11T17:38:02.489Z\",\"bumped\":true,\"bumped_at\":\"2025-04-11T17:38:02.489Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Hello, I am new on chief delphi and I’ve heard that this is the main place to go for getting info from the public so happy to be here for once. Not too familiar with how formal or what community custo…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"java\",\"programming\",\"python\"],\"tags_descriptions\":{},\"like_count\":81,\"views\":1232,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3581823,\"topic_post_liked\":false,\"topic_post_like_count\":5,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":74933,\"username\":\"loftyy_o\",\"name\":\"Chima Okafor\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/l/8dc957/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":74933,\"username\":\"loftyy_o\",\"name\":\"Chima Okafor\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/l/8dc957/{size}.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":60779,\"username\":\"rktut-frc2881\",\"name\":\"Robert Tuttle\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/a88e57/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":54372,\"username\":\"krylez\",\"name\":\"Riley Brewer\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/krylez/{size}/176730_2.png\",\"trust_level\":2}}]}],\"tags\":[],\"tags_descriptions\":{},\"fancy_title\":\"Kalman Filter Question\",\"id\":477269,\"title\":\"Kalman Filter Question\",\"posts_count\":18,\"created_at\":\"2024-12-23T21:21:52.390Z\",\"views\":935,\"reply_count\":15,\"like_count\":12,\"last_posted_at\":\"2024-12-24T20:30:17.949Z\",\"visible\":true,\"closed\":false,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"kalman-filter-question\",\"category_id\":30,\"word_count\":3615,\"deleted_at\":null,\"user_id\":59542,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_477269\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":18,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":{\"id\":38426,\"execute_at\":\"2025-12-24T20:30:17.949Z\",\"duration_minutes\":525600,\"based_on_last_post\":true,\"status_type\":\"close\",\"category_id\":null},\"message_bus_last_id\":0,\"participant_count\":6,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"post_count\":7,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":35208,\"username\":\"bathtubed\",\"name\":\"Eric Ward\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bathtubed/{size}/220364_2.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":18348,\"username\":\"Lidor51\",\"name\":\"Lidor Kaplan\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/lidor51/{size}/65522_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":59542,\"username\":\"mathum\",\"name\":\"Matthew Milunic\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/8baadc/{size}.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":53190,\"username\":\"truher\",\"name\":\"joel truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":62573,\"username\":\"KfirNeuman\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/k/d07c76/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":59542,\"username\":\"mathum\",\"name\":\"Matthew Milunic\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/8baadc/{size}.png\"},\"last_poster\":{\"id\":35208,\"username\":\"bathtubed\",\"name\":\"Eric Ward\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bathtubed/{size}/220364_2.png\"},\"links\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/commit/512a4bfc125ec3c08e1ba19d37c52a43b37cdda4\",\"title\":\"[wpimath] Simplify pose estimator (#6705) · wpilibsuite/allwpilib@512a4bf · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":10,\"user_id\":35208,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/estimator/KalmanFilter.html\",\"title\":\"KalmanFilter (WPILib API 2024.3.2)\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":8,\"user_id\":16846,\"domain\":\"github.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.wpilib.org/allwpilib/docs/release/java/edu/wpi/first/math/estimator/KalmanFilterLatencyCompensator.html\",\"title\":\"KalmanFilterLatencyCompensator (WPILib API 2024.3.2)\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":5,\"user_id\":16846,\"domain\":\"github.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://www.chiefdelphi.com/t/swervedriveposeestimator-no-odometry-stddevs/483055/6\",\"title\":\"SwerveDrivePoseEstimator - No Odometry Stddevs?\",\"internal\":true,\"attachment\":false,\"reflection\":true,\"clicks\":2,\"user_id\":16846,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://www.wolframalpha.com/input?i=plot+p%2F%28p%2B5%29+from+p+%3D+0+to+100\",\"title\":\"plot p/(p+5) from p = 0 to 100 - Wolfram|Alpha\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":16846,\"domain\":\"www.wolframalpha.com\",\"root_domain\":\"wolframalpha.com\"}]},\"bookmarks\":[]}"}
