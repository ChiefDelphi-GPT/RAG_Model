{"data":"{\"post_stream\":{\"posts\":[{\"id\":3455414,\"name\":\"Matthew Milunic\",\"username\":\"mathum\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/8baadc/{size}.png\",\"created_at\":\"2024-12-05T21:19:06.573Z\",\"cooked\":\"\\u003cp\\u003eHi, we are using a machine learning model with a pinhole model for estimating note positions on the field. This works perfectly well for finding an absolute note position relative to the field while the robot is not moving. Due to the latency of the machine learning on our \\u003cspan class=\\\"abbreviation\\\"\\u003eLL\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Limelight, an integrated vision coprocessor\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e, our position is significantly less accurate when moving, as we are adding an old translation to the piece to a current robot pose.\\u003c/p\\u003e\\n\\u003cp\\u003eTo fix this we have tried maintaining a CircularBuffer of the last few poses so we can look back and see where we were in the past. The code we use that does this looks a little like this:\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003eprivate CircularBuffer\\u0026lt;Pose2d\\u0026gt; previousSwervePoses = new CircularBuffer\\u0026lt;Pose2d\\u0026gt;(50);\\nprivate CircularBuffer\\u0026lt;Double\\u0026gt; previousSwervePosesTimestamps = new CircularBuffer\\u0026lt;Double\\u0026gt;(50);\\n\\npublic Pose2d getPoseAtTimestamp(double timestamp) {\\n    for (int i = 0; i \\u0026lt; previousSwervePosesTimestamps.size(); i++) {\\n        if (previousSwervePosesTimestamps.get(i) \\u0026lt;= timestamp) {\\n            return previousSwervePoses.get(i);\\n        }\\n    }\\n    return previousSwervePoses.getLast();\\n}\\n\\n@Override\\npublic void periodic() {\\n    previousSwervePoses.addFirst(currentState.Pose);\\n    previousSwervePosesTimestamps.addFirst(Timer.getFPGATimestamp());\\n}\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eWe can then add an old transform to an old pose.\\u003c/p\\u003e\\n\\u003cp\\u003eI understand also that if you update your pose estimator using vision, this can cause some jumps. Therefore, it may also make sense to use a separate pose estimator that still takes regular odometry updates but does not use vision for \\u003cem\\u003ethis\\u003c/em\\u003e string of previous poses, and then calculate a transform in the robot pose over the duration of the latency.\\u003c/p\\u003e\\n\\u003cp\\u003eI’m mostly asking for a sanity check over\\u003cbr\\u003e\\nA: Does this make sense?\\u003cbr\\u003e\\nand B: Is there a simpler way to do this?\\u003c/p\\u003e\\n\\u003cp\\u003eThanks!\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":7,\"updated_at\":\"2024-12-05T21:19:06.573Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":21,\"reads\":146,\"readers_count\":145,\"score\":139.2,\"yours\":false,\"topic_id\":476127,\"topic_slug\":\"how-to-compensate-for-pose-latency\",\"display_username\":\"Matthew Milunic\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":59542,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Lead Bug Writer\"},\"post_url\":\"/t/how-to-compensate-for-pose-latency/476127/1\",\"custom_user_title\":\"Lead Bug Writer\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true,\"can_vote\":false},{\"id\":3455463,\"name\":\"SLAB-Mr.Thomas\",\"username\":\"SLAB-Mr.Thomas\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/slab-mr.thomas/{size}/182153_2.png\",\"created_at\":\"2024-12-05T22:23:33.414Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"mathum\\\" data-post=\\\"1\\\" data-topic=\\\"476127\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/m/8baadc/48.png\\\" class=\\\"avatar\\\"\\u003e mathum:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eIs there a simpler way to do this?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThat depends on the assumptions that you are willing to make, the accuracy required, and the CPU time you need to save or have to burn.\\u003c/p\\u003e\\n\\u003cp\\u003eIf the latency is fairly constant and the poses added to the buffer with consistent timing then you could just access the (approximately correct) pose directly - if the latency is 5 iterations behind, just \\u003ccode\\u003eget(4 or 5)\\u003c/code\\u003e.\\u003c/p\\u003e\\n\\u003cp\\u003eThe opposite of this simple scheme is you could add interpolation between two points.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"mathum\\\" data-post=\\\"1\\\" data-topic=\\\"476127\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/m/8baadc/48.png\\\" class=\\\"avatar\\\"\\u003e mathum:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003esome jumps\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eIdeally these are to correct to the truth. Or maybe you are being vexed by algorithms that aren’t living up to their hype (some filtering required by the user!).\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":7,\"updated_at\":\"2024-12-05T22:26:48.608Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":119,\"readers_count\":118,\"score\":28.8,\"yours\":false,\"topic_id\":476127,\"topic_slug\":\"how-to-compensate-for-pose-latency\",\"display_username\":\"SLAB-Mr.Thomas\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24594,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/how-to-compensate-for-pose-latency/476127/2\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3455468,\"name\":\"Matthew Milunic\",\"username\":\"mathum\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/8baadc/{size}.png\",\"created_at\":\"2024-12-05T22:51:24.871Z\",\"cooked\":\"\\u003cp\\u003eThe jumps I’m talking about would be specifically examples where you, say, haven’t seen an AprilTag for a while, and your odometry has drifted a large amount from what is correct, say 1 meter.\\u003c/p\\u003e\\n\\u003cp\\u003eThen the following things happen in two robot periodic loops:\\u003c/p\\u003e\\n\\u003cp\\u003eLoop 1:\\u003cbr\\u003e\\nThe robot records the position of itself at (0,0). (The robot is actually at (1,0))\\u003cbr\\u003e\\nThe \\u003cspan class=\\\"abbreviation\\\"\\u003eLL\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Limelight, an integrated vision coprocessor\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e sees a note a meter ahead of it. (The note is at (2,0)) However, due to the delay from the pipeline, it is not actually sent to the robot this loop.\\u003c/p\\u003e\\n\\u003cp\\u003eLoop 2:\\u003cbr\\u003e\\nThe robot sees an AprilTag and updates its position to (1,0).\\u003cbr\\u003e\\nThe robot finally gets the information on the note that was seen last iteration and sees a latency of 1 loop. It checks back 1 loop and sees that its position was (0,0). Since the note is a meter away, it must be at (1,0).\\u003c/p\\u003e\\n\\u003cp\\u003eThis is incorrect because the note is actually at (2,0). Aka, a jump in odometry from not seeing an AprilTag for a long time would cause an inaccurate note position relative to the robot.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":7,\"updated_at\":\"2024-12-05T22:51:24.871Z\",\"reply_count\":0,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":100,\"readers_count\":99,\"score\":20.0,\"yours\":false,\"topic_id\":476127,\"topic_slug\":\"how-to-compensate-for-pose-latency\",\"display_username\":\"Matthew Milunic\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":24594,\"username\":\"SLAB-Mr.Thomas\",\"name\":\"SLAB-Mr.Thomas\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/slab-mr.thomas/{size}/182153_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":59542,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Lead Bug Writer\"},\"post_url\":\"/t/how-to-compensate-for-pose-latency/476127/3\",\"custom_user_title\":\"Lead Bug Writer\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3455533,\"name\":\"sam liu\",\"username\":\"catrix\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/c/dbc845/{size}.png\",\"created_at\":\"2024-12-06T00:49:01.465Z\",\"cooked\":\"\\u003cp\\u003eA \\u003cstrong\\u003emuch\\u003c/strong\\u003e simpler approach would be to subtract the chassis velocity from the current pose.\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003e// Assume there is a 50 ms latency \\nfinal double cameraAverageLatencySeconds = 50.0 / 1000.0; \\n// Obtain robot speeds\\nChassisSpeeds measuredSpeedsFieldRelative = ...;\\n// Trace where the robot is 50ms ago\\n// Use twist2d because velocity is continuous\\nPose2d robotPoseAtLastCameraFrame = currentState.Pose.exp(new Twist2d(\\n     -measuredSpeedsFieldRelative.vxMetersPerSecond * cameraAverageLatencySeconds,\\n     -measuredSpeedsFieldRelative.vyMetersPerSecond * cameraAverageLatencySeconds,\\n     -measuredSpeedsFieldRelative.omegaRadiansPerSecond * cameraAverageLatencySeconds\\n));\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eThis shouldn’t be too inaccurate, it’s safe to assume that there’s no significant change in robot velocity for like 50ms.\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":7,\"updated_at\":\"2024-12-06T00:49:01.465Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":74,\"readers_count\":73,\"score\":34.8,\"yours\":false,\"topic_id\":476127,\"topic_slug\":\"how-to-compensate-for-pose-latency\",\"display_username\":\"sam liu\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":60033,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"CE Student @ UWaterloo | 5516 Alum \"},\"post_url\":\"/t/how-to-compensate-for-pose-latency/476127/4\",\"custom_user_title\":\"CE Student @ UWaterloo | 5516 Alum \",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":true,\"topic_accepted_answer\":true},{\"id\":3455557,\"name\":\"Matthew Milunic\",\"username\":\"mathum\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/8baadc/{size}.png\",\"created_at\":\"2024-12-06T01:39:12.098Z\",\"cooked\":\"\\u003cp\\u003eThank you for pointing this out! I will need to experiment with that. After checking some of our logs, I think that the latency is not large enough to actually justify recording a history of our poses, at least not for the level of precision our pinhole model has.\\u003c/p\\u003e\\n\\u003cp\\u003eWhat is the purpose of Twist2d here? Are you assuming that the robot relative chassis speeds are remaining the same over the past 50ms? Correct me if I’m wrong, but wouldn’t it make sense to use a Transform2d if you were using something like driver control where the field oriented speeds are more likely to remain the same (especially if the robot is rotating)?\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":7,\"updated_at\":\"2024-12-06T01:40:21.692Z\",\"reply_count\":1,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":63,\"readers_count\":62,\"score\":32.6,\"yours\":false,\"topic_id\":476127,\"topic_slug\":\"how-to-compensate-for-pose-latency\",\"display_username\":\"Matthew Milunic\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":60033,\"username\":\"catrix\",\"name\":\"sam liu\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/c/dbc845/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":59542,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Lead Bug Writer\"},\"post_url\":\"/t/how-to-compensate-for-pose-latency/476127/5\",\"custom_user_title\":\"Lead Bug Writer\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3455563,\"name\":\"sam liu\",\"username\":\"catrix\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/c/dbc845/{size}.png\",\"created_at\":\"2024-12-06T01:47:41.112Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"mathum\\\" data-post=\\\"5\\\" data-topic=\\\"476127\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/m/8baadc/48.png\\\" class=\\\"avatar\\\"\\u003e mathum:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eCorrect me if I’m wrong, but wouldn’t it make sense to use a Transform2d if you were using something like driver control where the field oriented speeds are more likely to remain the same (especially if the robot is rotating)?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eHum, I honestly don’t know.  \\u003ccode\\u003eTwist2d\\u003c/code\\u003e is more appropriate if the \\u003cstrong\\u003erobot-centric\\u003c/strong\\u003e velocity remains the same.  But yes you’re right, \\u003ccode\\u003eTransform2d\\u003c/code\\u003e is more suitable if the \\u003cstrong\\u003efield-centric\\u003c/strong\\u003e velocity remains the same.\\u003c/p\\u003e\\n\\u003cp\\u003eThough I guess it’s not a huge difference \\u003cimg src=\\\"https://www.chiefdelphi.com/images/emoji/google/laughing.png?v=12\\\" title=\\\":laughing:\\\" class=\\\"emoji\\\" alt=\\\":laughing:\\\" loading=\\\"lazy\\\" width=\\\"20\\\" height=\\\"20\\\"\\u003e\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":7,\"updated_at\":\"2024-12-06T01:47:41.112Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":59,\"readers_count\":58,\"score\":16.8,\"yours\":false,\"topic_id\":476127,\"topic_slug\":\"how-to-compensate-for-pose-latency\",\"display_username\":\"sam liu\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":60033,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"CE Student @ UWaterloo | 5516 Alum \"},\"post_url\":\"/t/how-to-compensate-for-pose-latency/476127/6\",\"custom_user_title\":\"CE Student @ UWaterloo | 5516 Alum \",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3455566,\"name\":\"Matthew Milunic\",\"username\":\"mathum\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/8baadc/{size}.png\",\"created_at\":\"2024-12-06T01:48:51.808Z\",\"cooked\":\"\\u003cp\\u003eYeah, I believe that as rotation gets closer and closer to 0 (which would happen when time gets closer to 0), the differences between Twist2d and Transform2d dissapear.\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":7,\"updated_at\":\"2024-12-06T01:48:51.808Z\",\"reply_count\":0,\"reply_to_post_number\":6,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":52,\"readers_count\":51,\"score\":25.4,\"yours\":false,\"topic_id\":476127,\"topic_slug\":\"how-to-compensate-for-pose-latency\",\"display_username\":\"Matthew Milunic\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":60033,\"username\":\"catrix\",\"name\":\"sam liu\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/c/dbc845/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":59542,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Lead Bug Writer\"},\"post_url\":\"/t/how-to-compensate-for-pose-latency/476127/7\",\"custom_user_title\":\"Lead Bug Writer\",\"reactions\":[{\"id\":\"100\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true}],\"stream\":[3455414,3455463,3455468,3455533,3455557,3455563,3455566]},\"timeline_lookup\":[[1,310]],\"suggested_topics\":[{\"fancy_title\":\"SmartDashboard Boolean Array trouble\",\"id\":485264,\"title\":\"SmartDashboard Boolean Array trouble\",\"slug\":\"smartdashboard-boolean-array-trouble\",\"posts_count\":4,\"reply_count\":1,\"highest_post_number\":4,\"image_url\":\"https://www.chiefdelphi.com/uploads/default/original/3X/0/7/07090b228b441738ad766e39ed142f1da95b18a9.png\",\"created_at\":\"2025-02-05T07:18:34.022Z\",\"last_posted_at\":\"2025-02-17T02:41:35.263Z\",\"bumped\":true,\"bumped_at\":\"2025-02-17T02:41:35.263Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Hey all. Our team has decided to use QFRCDashboard, specifically the Reef display widget to more visually display where the robot will go to using on-the-fly path generation. To display the Reef disp…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"driverstation\"],\"tags_descriptions\":{},\"like_count\":1,\"views\":138,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3502586,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":69618,\"username\":\"henzo\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/h/a9adbd/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":69618,\"username\":\"henzo\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/h/a9adbd/{size}.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":65,\"username\":\"Joe_Ross\",\"name\":\"Joe Ross\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/joe_ross/{size}/37_2.png\",\"moderator\":true,\"trust_level\":4}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":50684,\"username\":\"crueter\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/crueter/{size}/258043_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"Tuning Auto\",\"id\":474668,\"title\":\"Tuning Auto\",\"slug\":\"tuning-auto\",\"posts_count\":7,\"reply_count\":5,\"highest_post_number\":7,\"image_url\":null,\"created_at\":\"2024-11-11T00:40:53.965Z\",\"last_posted_at\":\"2024-11-13T13:58:40.855Z\",\"bumped\":true,\"bumped_at\":\"2024-11-13T14:15:06.385Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"We’re trying to tune our auto to be close to precise but I’m stumped on how to tune autos. I’m changing the HolonomicPathFollowerConfig PID values but I don’t know how to fully tune these because I’m …\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"autonomous\"],\"tags_descriptions\":{},\"like_count\":4,\"views\":606,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3445873,\"topic_post_liked\":false,\"topic_post_like_count\":2,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":67422,\"username\":\"Space2\",\"name\":\"Joshua Nageli\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/space2/{size}/246138_2.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":67422,\"username\":\"Space2\",\"name\":\"Joshua Nageli\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/space2/{size}/246138_2.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":60033,\"username\":\"catrix\",\"name\":\"sam liu\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/c/dbc845/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":19235,\"username\":\"Skyehawk\",\"name\":\"Skye Leake\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/skyehawk/{size}/179363_2.png\",\"moderator\":true,\"trust_level\":4}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":24617,\"username\":\"gerthworm\",\"name\":\"Chris Gerth\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gerthworm/{size}/268658_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"Motor Following clarification (both CTRE and REV)\",\"id\":474228,\"title\":\"Motor Following clarification (both CTRE and REV)\",\"slug\":\"motor-following-clarification-both-ctre-and-rev\",\"posts_count\":8,\"reply_count\":3,\"highest_post_number\":8,\"image_url\":null,\"created_at\":\"2024-11-02T18:56:14.411Z\",\"last_posted_at\":\"2024-11-03T00:27:38.489Z\",\"bumped\":true,\"bumped_at\":\"2024-11-03T00:27:38.489Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"When using follower modes in CTRE and REV if I use position control, velocity control, etc will the motors follow or will they only follow if I use direct voltage or current control. I ask because bo…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":5,\"views\":439,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3443022,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":48345,\"username\":\"narmstro\",\"name\":\"Nicholas Armstrong\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":48345,\"username\":\"narmstro\",\"name\":\"Nicholas Armstrong\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/5e9695/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":9105,\"username\":\"Fletch1373\",\"name\":\"Fletch\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/fletch1373/{size}/220073_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":60512,\"username\":\"four\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/four/{size}/199902_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":35208,\"username\":\"bathtubed\",\"name\":\"Eric Ward\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bathtubed/{size}/220364_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":1737,\"username\":\"Steven_Carmain\",\"name\":\"Steven Carmain\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/f07891/{size}.png\",\"trust_level\":2}}]},{\"fancy_title\":\"Phonix 6 TalonFX simulation dosent work\",\"id\":477180,\"title\":\"Phonix 6 TalonFX simulation dosent work\",\"slug\":\"phonix-6-talonfx-simulation-dosent-work\",\"posts_count\":5,\"reply_count\":2,\"highest_post_number\":5,\"image_url\":null,\"created_at\":\"2024-12-21T21:34:33.558Z\",\"last_posted_at\":\"2024-12-23T21:01:51.944Z\",\"bumped\":true,\"bumped_at\":\"2024-12-23T21:01:51.944Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"The talonfxsimstate uses the enable disable signal from the driver station even while on simulation. Make sure to click use simulated driver station and enable in the driver station and see if you can…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"robot\"],\"tags_descriptions\":{},\"like_count\":4,\"views\":290,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":true,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3462325,\"topic_post_liked\":false,\"topic_post_like_count\":3,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":2,\"topic_post_user\":{\"id\":62573,\"username\":\"KfirNeuman\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/k/d07c76/{size}.png\"},\"posters\":[{\"extras\":\"latest\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":60986,\"username\":\"GalDotan\",\"name\":\"Gal\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/galdotan/{size}/201749_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster, Accepted Answer\",\"user\":{\"id\":62573,\"username\":\"KfirNeuman\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/k/d07c76/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":48146,\"username\":\"bhall-ctre\",\"name\":\"Benjamin Hall\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bhall-ctre/{size}/198180_2.png\",\"primary_group_name\":\"CTRE\",\"flair_name\":\"CTRE\",\"flair_url\":\"/uploads/default/original/3X/1/b/1bd2b430e1bb6427d1c6504ff6abcd31de851a6d.png\",\"flair_group_id\":57,\"trust_level\":2}}]},{\"fancy_title\":\"Code keeps reverting to old version on robot\",\"id\":492353,\"title\":\"Code keeps reverting to old version on robot\",\"slug\":\"code-keeps-reverting-to-old-version-on-robot\",\"posts_count\":4,\"reply_count\":1,\"highest_post_number\":4,\"image_url\":null,\"created_at\":\"2025-02-19T19:36:39.559Z\",\"last_posted_at\":\"2025-02-19T20:37:52.203Z\",\"bumped\":true,\"bumped_at\":\"2025-02-19T20:37:52.203Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Hey guys, I keep encountering this strange behavior where after the robot is shut off and turned back on (either for power cycling the robot or replacing the battery), enabling the robot in the drive…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":2,\"views\":124,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3533398,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":55168,\"username\":\"Rzheng1232\",\"name\":\"Ryan zheng\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/rzheng1232/{size}/182897_2.png\"},\"posters\":[{\"extras\":\"latest\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":55168,\"username\":\"Rzheng1232\",\"name\":\"Ryan zheng\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/rzheng1232/{size}/182897_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":65469,\"username\":\"OwenF\",\"name\":\"Owen Flanagan\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/o/edb3f5/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":16147,\"username\":\"Thad_House\",\"name\":\"Thad House\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/t/a4c791/{size}.png\",\"trust_level\":2}}]}],\"tags\":[\"swerve\",\"vision\"],\"tags_descriptions\":{},\"fancy_title\":\"How to compensate for pose latency?\",\"id\":476127,\"title\":\"How to compensate for pose latency?\",\"posts_count\":7,\"created_at\":\"2024-12-05T21:19:06.512Z\",\"views\":267,\"reply_count\":4,\"like_count\":3,\"last_posted_at\":\"2024-12-06T01:48:51.808Z\",\"visible\":true,\"closed\":false,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"how-to-compensate-for-pose-latency\",\"category_id\":30,\"word_count\":912,\"deleted_at\":null,\"user_id\":59542,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_476127\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":7,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":{\"id\":38106,\"execute_at\":\"2025-12-06T01:48:51.808Z\",\"duration_minutes\":525600,\"based_on_last_post\":true,\"status_type\":\"close\",\"category_id\":null},\"message_bus_last_id\":0,\"participant_count\":3,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"accepted_answer\":{\"post_number\":4,\"username\":\"catrix\",\"name\":null,\"excerpt\":\"A much simpler approach would be to subtract the chassis velocity from the current pose. \\n// Assume there is a 50 ms latency \\nfinal double cameraAverageLatencySeconds = 50.0 / 1000.0; \\n// Obtain robot speeds\\nChassisSpeeds measuredSpeedsFieldRelative = ...;\\n// Trace where the robot is 50ms ago\\n// Use\\u0026hellip;\",\"accepter_name\":null},\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":59542,\"username\":\"mathum\",\"name\":\"Matthew Milunic\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/8baadc/{size}.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":60033,\"username\":\"catrix\",\"name\":\"sam liu\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/c/dbc845/{size}.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":24594,\"username\":\"SLAB-Mr.Thomas\",\"name\":\"SLAB-Mr.Thomas\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/slab-mr.thomas/{size}/182153_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":59542,\"username\":\"mathum\",\"name\":\"Matthew Milunic\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/8baadc/{size}.png\"},\"last_poster\":{\"id\":59542,\"username\":\"mathum\",\"name\":\"Matthew Milunic\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/8baadc/{size}.png\"}},\"bookmarks\":[]}"}
