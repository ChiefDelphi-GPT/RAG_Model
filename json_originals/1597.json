{"data":"{\"post_stream\":{\"posts\":[{\"id\":3547764,\"name\":\"\",\"username\":\"magwoodrf\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/b19c9b/{size}.png\",\"created_at\":\"2025-03-05T00:28:07.788Z\",\"cooked\":\"\\u003cp\\u003eBelow is the code to my AutoDrive command. I wanted to get feedback on it before I’m able to deploy it to our robot. I’m not very familiar with HolonomicDriveController and figured I needed to use the Trajectory class to limit the acceleration of the robot. Thank you!\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003epublic class AutoDrive extends Command {\\n\\n  private final DriveTrain driveTrain;\\n  private final PoseEstimator poseEstimator;\\n\\n  private final HolonomicDriveController holonomicDriveController = new HolonomicDriveController(\\n    new PIDController(2, 0, 0), new PIDController(2, 0, 0), \\n    new ProfiledPIDController(3, 0, 0,\\n     new TrapezoidProfile.Constraints(Units.degreesToRadians(180), Units.degreesToRadians(180)))\\n  );\\n\\n  private Pose2d closestScoringPose;\\n\\n  private Trajectory desiredTrajectory;\\n  private TrajectoryConfig trajectoryConfig;\\n  private Timer driveTimer = new Timer();\\n\\n  public AutoDrive(DriveTrain driveTrain, PoseEstimator poseEstimator) {\\n    this.driveTrain = driveTrain;\\n    this.poseEstimator = poseEstimator;\\n\\n    holonomicDriveController.setTolerance(new Pose2d(Units.inchesToMeters(2), Units.inchesToMeters(2), Rotation2d.fromDegrees(2)));\\n\\n    addRequirements(driveTrain);\\n  }\\n\\n  // Called when the command is initially scheduled.\\n  @Override\\n  public void initialize() {\\n    driveTimer.stop();\\n    driveTimer.reset();\\n\\n    Pose2d robotPose = poseEstimator.getPoseEstimate();\\n\\n    double bestCost = Double.MAX_VALUE;\\n    for(Pose2d scoringPose : Constants.scoringPoses) {\\n      double distanceError = robotPose.getTranslation().getDistance(scoringPose.getTranslation());\\n      double angleError = Math.abs(robotPose.getRotation().minus(scoringPose.getRotation()).getRadians());\\n\\n      double cost = (distanceError * 0.5 + angleError * 5);\\n      if (cost \\u0026lt; bestCost) {\\n        bestCost = cost;\\n        closestScoringPose = scoringPose; \\n      }\\n    }\\n\\n    trajectoryConfig = new TrajectoryConfig(2, 2);\\n    trajectoryConfig.setStartVelocity(driveTrain.getRobotVeloMagnitude());  \\n    trajectoryConfig.setKinematics(driveTrain.getKinematics());\\n\\n    desiredTrajectory = TrajectoryGenerator.generateTrajectory(\\n      robotPose, \\n      null, \\n      closestScoringPose, \\n      trajectoryConfig);\\n  }\\n\\n  // Called every time the scheduler runs while the command is scheduled.\\n  @Override\\n  public void execute() {\\n    driveTimer.start();\\n    ChassisSpeeds speeds = holonomicDriveController.calculate(\\n      poseEstimator.getPoseEstimate(), \\n      desiredTrajectory.sample(driveTimer.get()),\\n      closestScoringPose.getRotation()\\n    );\\n\\n    driveTrain.setDesiredSpeedsFromHolonomicController(speeds);\\n  }\\n\\n  // Called once the command ends or is interrupted.\\n  @Override\\n  public void end(boolean interrupted) {\\n    driveTimer.stop();\\n    driveTimer.reset();\\n  }\\n\\n  // Returns true when the command should end.\\n  @Override\\n  public boolean isFinished() {\\n    return holonomicDriveController.atReference();\\n  }\\n}\\n\\u003c/code\\u003e\\u003c/pre\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":1,\"updated_at\":\"2025-03-05T11:18:45.079Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":6,\"reads\":52,\"readers_count\":51,\"score\":40.4,\"yours\":false,\"topic_id\":494276,\"topic_slug\":\"is-there-any-feedback-on-my-autodrive-command\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":3,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":68902,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/is-there-any-feedback-on-my-autodrive-command/494276/1\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3547764]},\"timeline_lookup\":[[1,152]],\"suggested_topics\":[{\"id\":491512,\"title\":\"Help with using limelight\",\"fancy_title\":\"Help with using limelight\",\"slug\":\"help-with-using-limelight\",\"posts_count\":7,\"reply_count\":3,\"highest_post_number\":7,\"image_url\":null,\"created_at\":\"2025-02-13T12:27:24.077Z\",\"last_posted_at\":\"2025-02-17T11:37:57.049Z\",\"bumped\":true,\"bumped_at\":\"2025-02-17T11:37:57.049Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Hey, I,m from team 9028 G-Force. We decided to use limelight 3 this year and we also wrote a code for it but we are having some problems with automatic positioning in teleopmode. (simply the robot doe…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"robot\"],\"tags_descriptions\":{},\"like_count\":0,\"views\":294,\"category_id\":75,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3525919,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":true,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":68070,\"username\":\"demir9028\",\"name\":\"Demir\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/d/34f0e0/{size}.png\"},\"posters\":[{\"extras\":\"latest\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":68070,\"username\":\"demir9028\",\"name\":\"Demir\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/d/34f0e0/{size}.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":56380,\"username\":\"ebear11\",\"name\":\"Elijah Beard\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/439d5e/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":36169,\"username\":\"Hollisms\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/hollisms/{size}/110925_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":65,\"username\":\"Joe_Ross\",\"name\":\"Joe Ross\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/joe_ross/{size}/37_2.png\",\"moderator\":true,\"trust_level\":4}}]},{\"id\":492486,\"title\":\"Elevator going crazy\",\"fancy_title\":\"Elevator going crazy\",\"slug\":\"elevator-going-crazy\",\"posts_count\":2,\"reply_count\":0,\"highest_post_number\":2,\"image_url\":null,\"created_at\":\"2025-02-20T21:37:47.965Z\",\"last_posted_at\":\"2025-02-21T14:17:26.508Z\",\"bumped\":true,\"bumped_at\":\"2025-02-21T14:17:26.508Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Hi, whilst testing our elevator when i tried to set a position other than L2 the elevator moves up a little bit and then slams down. any reason why that might be? It works as it should be in sim. here…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":1,\"views\":224,\"category_id\":75,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3534736,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":61536,\"username\":\"kuzeyatay\",\"name\":\"kuzey\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/k/59ef9b/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":61536,\"username\":\"kuzeyatay\",\"name\":\"kuzey\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/k/59ef9b/{size}.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":62698,\"username\":\"CakeDeer6\",\"name\":\"Ethan Grieshop\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cakedeer6/{size}/264680_2.png\",\"trust_level\":2}}]},{\"id\":481470,\"title\":\"Phoenix 6 Pose Estimator Phoenix X Serve\",\"fancy_title\":\"Phoenix 6 Pose Estimator Phoenix X Serve\",\"slug\":\"phoenix-6-pose-estimator-phoenix-x-serve\",\"posts_count\":4,\"reply_count\":2,\"highest_post_number\":4,\"image_url\":null,\"created_at\":\"2025-01-13T21:21:33.109Z\",\"last_posted_at\":\"2025-01-15T01:16:52.406Z\",\"bumped\":true,\"bumped_at\":\"2025-01-15T01:16:52.406Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"We are working on setting up our new project for 2025, and are getting setup to use MegaTag2 with Limelight. This seems to require the PoseEstimator within WPILib. We generated our project through Ph…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":1,\"views\":262,\"category_id\":75,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3481330,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":60894,\"username\":\"rackdev\",\"name\":\"Harrison\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/c0e974/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":60894,\"username\":\"rackdev\",\"name\":\"Harrison\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/c0e974/{size}.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":48146,\"username\":\"bhall-ctre\",\"name\":\"Benjamin Hall\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bhall-ctre/{size}/198180_2.png\",\"primary_group_name\":\"CTRE\",\"flair_name\":\"CTRE\",\"flair_url\":\"/uploads/default/original/3X/1/b/1bd2b430e1bb6427d1c6504ff6abcd31de851a6d.png\",\"flair_group_id\":57,\"trust_level\":2}}]},{\"id\":491376,\"title\":\"YAGSL Gyro Offset for Auto?\",\"fancy_title\":\"YAGSL Gyro Offset for Auto?\",\"slug\":\"yagsl-gyro-offset-for-auto\",\"posts_count\":4,\"reply_count\":2,\"highest_post_number\":4,\"image_url\":null,\"created_at\":\"2025-02-12T17:18:15.540Z\",\"last_posted_at\":\"2025-02-12T18:42:31.870Z\",\"bumped\":true,\"bumped_at\":\"2025-02-12T18:42:31.870Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Our team is relatively new to swerve and path planning. When we set the robot up, we want it to face toward the reef, which is not facing downfield when we exit auto. We want to be able to quickly tra…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":0,\"views\":95,\"category_id\":75,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3524983,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":51278,\"username\":\"JamerGamer789\",\"name\":\"James\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/j/e19b73/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":51278,\"username\":\"JamerGamer789\",\"name\":\"James\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/j/e19b73/{size}.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":51887,\"username\":\"nstrike\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/nstrike/{size}/167038_2.png\",\"trust_level\":2}}]},{\"id\":493664,\"title\":\"REV Sparkmax Go to position only goes down\",\"fancy_title\":\"REV Sparkmax Go to position only goes down\",\"slug\":\"rev-sparkmax-go-to-position-only-goes-down\",\"posts_count\":10,\"reply_count\":7,\"highest_post_number\":10,\"image_url\":null,\"created_at\":\"2025-02-28T21:11:33.205Z\",\"last_posted_at\":\"2025-03-01T00:31:06.819Z\",\"bumped\":true,\"bumped_at\":\"2025-03-01T00:31:06.819Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Hi! We’re trying to go to a set position with our elevator subsystem when a button is pressed. However, when run, the elevator always goes down, no matter what value we give it to go to. It was worki…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":0,\"views\":104,\"category_id\":75,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3543786,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":68236,\"username\":\"FloppyDks\",\"name\":\"Ray Flanagan\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/f/2acd7d/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":68236,\"username\":\"FloppyDks\",\"name\":\"Ray Flanagan\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/f/2acd7d/{size}.png\",\"trust_level\":1}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":28240,\"username\":\"icemannie\",\"name\":\"icemannie\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/i/bc79bd/{size}.png\",\"trust_level\":2}}]}],\"tags\":[],\"tags_descriptions\":{},\"id\":494276,\"title\":\"Is there any feedback on my AutoDrive command?\",\"fancy_title\":\"Is there any feedback on my AutoDrive command?\",\"posts_count\":1,\"created_at\":\"2025-03-05T00:28:07.736Z\",\"views\":82,\"reply_count\":0,\"like_count\":0,\"last_posted_at\":\"2025-03-05T00:28:07.788Z\",\"visible\":true,\"closed\":false,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"is-there-any-feedback-on-my-autodrive-command\",\"category_id\":75,\"word_count\":277,\"deleted_at\":null,\"user_id\":68902,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_494276\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":1,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":{\"id\":45020,\"execute_at\":\"2026-03-05T00:28:07.788Z\",\"duration_minutes\":525600,\"based_on_last_post\":true,\"status_type\":\"close\",\"category_id\":null},\"message_bus_last_id\":0,\"participant_count\":1,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":68902,\"username\":\"magwoodrf\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/b19c9b/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":1}],\"created_by\":{\"id\":68902,\"username\":\"magwoodrf\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/b19c9b/{size}.png\"},\"last_poster\":{\"id\":68902,\"username\":\"magwoodrf\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/b19c9b/{size}.png\"}},\"bookmarks\":[]}"}
