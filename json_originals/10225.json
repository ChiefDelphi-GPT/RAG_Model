{"data":"{\"post_stream\":{\"posts\":[{\"id\":3235074,\"name\":\"viggy96\",\"username\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\",\"created_at\":\"2023-09-26T06:32:15.146Z\",\"cooked\":\"\\u003cp\\u003eWill REV fix this issue? Its kinda a pain, and makes simulation more difficult.\\u003cbr\\u003e\\nUsing ControlMode.kPosition doesn’t update in simulation, however ControlMode.kVelocity works just fine in simulation.\\u003c/p\\u003e\\u003caside class=\\\"onebox githubissue\\\" data-onebox-src=\\\"https://github.com/REVrobotics/SPARK-MAX-Examples/issues/25\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://github.com/REVrobotics/SPARK-MAX-Examples/issues/25\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com/REVrobotics/SPARK-MAX-Examples\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003cdiv class=\\\"github-row\\\"\\u003e\\n  \\u003cdiv class=\\\"github-icon-container\\\" title=\\\"Issue\\\"\\u003e\\n\\t  \\u003csvg width=\\\"60\\\" height=\\\"60\\\" class=\\\"github-icon\\\" viewBox=\\\"0 0 14 16\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cpath fill-rule=\\\"evenodd\\\" d=\\\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\\\"\\u003e\\u003c/path\\u003e\\u003c/svg\\u003e\\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv class=\\\"github-info-container\\\"\\u003e\\n    \\u003ch4\\u003e\\n      \\u003ca href=\\\"https://github.com/REVrobotics/SPARK-MAX-Examples/issues/25\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eRevPhysicsSim Position Control doesn't work\\u003c/a\\u003e\\n    \\u003c/h4\\u003e\\n\\n    \\u003cdiv class=\\\"github-info\\\"\\u003e\\n      \\u003cdiv class=\\\"date\\\"\\u003e\\n        opened \\u003cspan class=\\\"discourse-local-date\\\" data-format=\\\"ll\\\" data-date=\\\"2022-09-11\\\" data-time=\\\"20:47:49\\\" data-timezone=\\\"UTC\\\"\\u003e08:47PM - 11 Sep 22 UTC\\u003c/span\\u003e\\n      \\u003c/div\\u003e\\n\\n\\n      \\u003cdiv class=\\\"user\\\"\\u003e\\n        \\u003ca href=\\\"https://github.com/jonathandao0\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003e\\n          \\u003cimg alt=\\\"jonathandao0\\\" src=\\\"https://avatars.githubusercontent.com/u/9299703?v=4\\\" class=\\\"onebox-avatar-inline\\\" width=\\\"20\\\" height=\\\"20\\\"\\u003e\\n          jonathandao0\\n        \\u003c/a\\u003e\\n      \\u003c/div\\u003e\\n    \\u003c/div\\u003e\\n\\n    \\u003cdiv class=\\\"labels\\\"\\u003e\\n    \\u003c/div\\u003e\\n  \\u003c/div\\u003e\\n\\u003c/div\\u003e\\n\\n  \\u003cdiv class=\\\"github-row\\\"\\u003e\\n    \\u003cp class=\\\"github-body-container\\\"\\u003eGiven this code example:\\n```\\nCANSparkMax m_motorA;\\nCANSparkMax m_motorB;\\n\\np\\u003cspan class=\\\"show-more-container\\\"\\u003e\\u003ca href=\\\"\\\" rel=\\\"noopener\\\" class=\\\"show-more\\\"\\u003e…\\u003c/a\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"excerpt hidden\\\"\\u003eublic void robotInit() {\\n    m_motorA =  new CANSparkMax(0, CANSparkMaxLowLevel.MotorType.kBrushless);\\n    m_motorB =  new CANSparkMax(0, CANSparkMaxLowLevel.MotorType.kBrushless);\\n    \\n    REVPhysicsSim.getInstance().addSparkMax(m_motorA, DCMotor.getNEO(1));\\n    REVPhysicsSim.getInstance().addSparkMax(m_motorB, DCMotor.getNEO(1));\\n}\\n\\ndoube positionSetpoint = 0;\\npublic void robotPeriodic() {\\n    double velocitySetpoint = 5000;\\n\\n    m_motorA.getPIDController().setReference(\\n          velocitySetpoint ,\\n          CANSparkMax.ControlType.kVelocity);\\n\\n    m_motorB.getPIDController().setReference(\\n          positionSetpoint ,\\n          CANSparkMax.ControlType.kPosition);\\n\\n    REVPhysicsSim.getInstance().run();\\n    positionSetpoint += 1;\\n}\\n```\\n\\nWhen simulating this code in WPILib, m_motorA is correctly updated in simulation while m_motorB does not get updated. Digging into the SparkMaxSimProfile.class code, it does the following when the simulation runs:\\n```\\n    public void run() {\\n        double period = this.getPeriod();\\n        this._vel = this._spark.getEncoder().getVelocity();\\n        double position = this._spark.getEncoder().getPosition();\\n        double posFactor = this._spark.getEncoder().getPositionConversionFactor();\\n        this._spark.getEncoder().setPosition(position + this._vel * period / 60000.0D * posFactor);\\n    }\\n```\\n\\nIt doesn't look like setting a position setpoint is correctly updating the SparkMax in simulation. Will this be fixed in the 2023 RevLib? Another thing that would be helpful would be an API call in SparkMaxPIDController to get the calcuated PID output so that we can take the output and simulate the results manually.\\u003c/span\\u003e\\u003c/p\\u003e\\n  \\u003c/div\\u003e\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\",\"post_number\":1,\"post_type\":1,\"posts_count\":8,\"updated_at\":\"2023-09-26T06:32:15.146Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":235,\"reads\":217,\"readers_count\":216,\"score\":1223.4,\"yours\":false,\"topic_id\":441434,\"topic_slug\":\"revphysicssim-spark-max-position-control-simulation\",\"display_username\":\"viggy96\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/REVrobotics/SPARK-MAX-Examples/issues/25\",\"internal\":false,\"reflection\":false,\"title\":\"RevPhysicsSim Position Control doesn't work · Issue #25 · REVrobotics/SPARK-MAX-Examples · GitHub\",\"clicks\":45}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24613,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"418 Mentor | Tries to be smart\"},\"post_url\":\"/t/revphysicssim-spark-max-position-control-simulation/441434/1\",\"custom_user_title\":\"418 Mentor | Tries to be smart\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":3236230,\"name\":\"viggy96\",\"username\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\",\"created_at\":\"2023-09-30T05:21:17.933Z\",\"cooked\":\"\\u003cp\\u003eHas anyone successfully used REVPhysicsSim to simulate mechanisms that use position control, like a swerve module, or arm?\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":8,\"updated_at\":\"2023-09-30T05:21:17.933Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":163,\"readers_count\":162,\"score\":47.6,\"yours\":false,\"topic_id\":441434,\"topic_slug\":\"revphysicssim-spark-max-position-control-simulation\",\"display_username\":\"viggy96\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24613,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"418 Mentor | Tries to be smart\"},\"post_url\":\"/t/revphysicssim-spark-max-position-control-simulation/441434/2\",\"custom_user_title\":\"418 Mentor | Tries to be smart\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3236978,\"name\":\"Joe Ross\",\"username\":\"Joe_Ross\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/joe_ross/{size}/37_2.png\",\"created_at\":\"2023-10-03T02:28:38.841Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"viggy96\\\" data-post=\\\"1\\\" data-topic=\\\"441434\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/viggy96/48/252784_2.png\\\" class=\\\"avatar\\\"\\u003e viggy96:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eWill REV fix this issue?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eWhat did REV support say when you contacted them?\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":8,\"updated_at\":\"2023-10-03T02:28:38.841Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":1,\"incoming_link_count\":2,\"reads\":134,\"readers_count\":133,\"score\":41.8,\"yours\":false,\"topic_id\":441434,\"topic_slug\":\"revphysicssim-spark-max-position-control-simulation\",\"display_username\":\"Joe Ross\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":true,\"admin\":false,\"staff\":true,\"user_id\":65,\"hidden\":false,\"trust_level\":4,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/revphysicssim-spark-max-position-control-simulation/441434/3\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3237024,\"name\":\"viggy96\",\"username\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\",\"created_at\":\"2023-10-03T06:58:22.198Z\",\"cooked\":\"\\u003cp\\u003eNo response on the GitHub issue so far.\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":8,\"updated_at\":\"2023-10-03T06:58:22.198Z\",\"reply_count\":0,\"reply_to_post_number\":3,\"quote_count\":0,\"incoming_link_count\":11,\"reads\":121,\"readers_count\":120,\"score\":79.2,\"yours\":false,\"topic_id\":441434,\"topic_slug\":\"revphysicssim-spark-max-position-control-simulation\",\"display_username\":\"viggy96\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":65,\"username\":\"Joe_Ross\",\"name\":\"Joe Ross\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/joe_ross/{size}/37_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24613,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"418 Mentor | Tries to be smart\"},\"post_url\":\"/t/revphysicssim-spark-max-position-control-simulation/441434/4\",\"custom_user_title\":\"418 Mentor | Tries to be smart\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3237315,\"name\":\"Harry Chen\",\"username\":\"HarryXChen\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/harryxchen/{size}/199841_2.png\",\"created_at\":\"2023-10-04T01:33:50.826Z\",\"cooked\":\"\\u003cp\\u003eRecently we have been working on simulating a full-neo (SparkMAX) swerve drive while trying to use as much of rev’s simulation support as possible\\u003c/p\\u003e\\n\\u003cp\\u003eThe swerve simulation does indeed work but we had to completely bypass \\u003ccode\\u003eRevPhysicsSim\\u003c/code\\u003e (we found it quite clunky to work with) and write our own SparkMAX simulation wrapper - not sure how much use it is to you but I can outline the general structure we have in our code\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eA \\u003ccode\\u003eRevSparkMaxSim\\u003c/code\\u003e class that uses the \\u003ccode\\u003eDCMotor\\u003c/code\\u003e and \\u003ccode\\u003eDCMotorSim\\u003c/code\\u003e classes from wpilib to effectively replace the original rev simulation code\\u003c/li\\u003e\\n\\u003cli\\u003eWe update the integrated relative encoder using the same math that rev uses in their \\u003ccode\\u003eSparkMaxSimProfile\\u003c/code\\u003e, but, for remote feedback sensors, we use the data that we get back from the \\u003ccode\\u003eDCMotorSim\\u003c/code\\u003e - the 2 do indeed match up fairly well, though\\u003c/li\\u003e\\n\\u003cli\\u003eTo run closed-loop control on position in simulation, we run a PID directly in our code (on a real robot, this would be the same as running it on the roborio), feeding it our measured and desired positions, tuning the controller to output a \\u003cstrong\\u003evoltage\\u003c/strong\\u003e so we can control the SparkMAX using something like\\u003cpre\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003esparkMax.getPIDController().setReference(pid.calculate(measured, setpoint), CANSparkMax.ControlMode.kVoltage)\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003erelevant code for the \\u003ca href=\\\"https://github.com/TechnoTitans/TitanWare2023/blob/AdvKit/src/main/java/frc/robot/subsystems/drive/SwerveModuleIONeoSim.java\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eSwerveModule\\u003c/a\\u003e and \\u003ca href=\\\"https://github.com/TechnoTitans/TitanWare2023/blob/AdvKit/src/main/java/frc/robot/utils/sim/motors/RevSparkMAXSim.java\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eRevSparkMaxSim\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":8,\"updated_at\":\"2023-10-04T01:33:50.826Z\",\"reply_count\":1,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":13,\"reads\":109,\"readers_count\":108,\"score\":106.8,\"yours\":false,\"topic_id\":441434,\"topic_slug\":\"revphysicssim-spark-max-position-control-simulation\",\"display_username\":\"Harry Chen\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/TechnoTitans/TitanWare2023/blob/AdvKit/src/main/java/frc/robot/utils/sim/motors/RevSparkMAXSim.java\",\"internal\":false,\"reflection\":false,\"clicks\":26},{\"url\":\"https://github.com/TechnoTitans/TitanWare2023/blob/AdvKit/src/main/java/frc/robot/subsystems/drive/SwerveModuleIONeoSim.java\",\"internal\":false,\"reflection\":false,\"clicks\":12}],\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":24613,\"username\":\"viggy96\",\"name\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":59202,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/revphysicssim-spark-max-position-control-simulation/441434/5\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3237435,\"name\":\"viggy96\",\"username\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\",\"created_at\":\"2023-10-04T14:00:45.641Z\",\"cooked\":\"\\u003cp\\u003eRunning PID controllers in software just for simulation is pretty rough…\\u003c/p\\u003e\\n\\u003cp\\u003eI’ve worked around it for now by taking advantage of AdvantageKit, and setting the encoder values based on the calculated swerve state. So when we do \\u003ccode\\u003egetPosition()\\u003c/code\\u003e on each module to update the pose estimator, it can calculate the robot’s position in simulation just as it would in reality.\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":8,\"updated_at\":\"2023-10-04T14:00:45.641Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":5,\"reads\":96,\"readers_count\":95,\"score\":49.2,\"yours\":false,\"topic_id\":441434,\"topic_slug\":\"revphysicssim-spark-max-position-control-simulation\",\"display_username\":\"viggy96\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":59202,\"username\":\"HarryXChen\",\"name\":\"Harry Chen\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/harryxchen/{size}/199841_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24613,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"418 Mentor | Tries to be smart\"},\"post_url\":\"/t/revphysicssim-spark-max-position-control-simulation/441434/6\",\"custom_user_title\":\"418 Mentor | Tries to be smart\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3237484,\"name\":\"Harry Chen\",\"username\":\"HarryXChen\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/harryxchen/{size}/199841_2.png\",\"created_at\":\"2023-10-04T15:43:50.371Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"viggy96\\\" data-post=\\\"6\\\" data-topic=\\\"441434\\\" data-full=\\\"true\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/viggy96/48/252784_2.png\\\" class=\\\"avatar\\\"\\u003e viggy96:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eRunning \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e controllers in software just for simulation is pretty rough…\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eUnfortunately that seems to be the only way to keep code consistent everywhere else, hopefully rev will consider improved simulation support in the near future. FWIW, rev specifically mentions that the only control modes that are supported in simulation are \\u003ccode\\u003ekVelocity\\u003c/code\\u003e and \\u003ccode\\u003ekVoltage\\u003c/code\\u003e, so supporting \\u003ccode\\u003ekPosition\\u003c/code\\u003e is more of a feature request than a bug.\\u003c/p\\u003e\\n\\u003cp\\u003e@ \\u003ca href=\\\"https://docs.revrobotics.com/sparkmax/software-resources/spark-max-api-information#version-2022.1.0\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eDocumentation\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":8,\"updated_at\":\"2023-10-04T15:45:06.036Z\",\"reply_count\":0,\"reply_to_post_number\":6,\"quote_count\":1,\"incoming_link_count\":5,\"reads\":87,\"readers_count\":86,\"score\":42.4,\"yours\":false,\"topic_id\":441434,\"topic_slug\":\"revphysicssim-spark-max-position-control-simulation\",\"display_username\":\"Harry Chen\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.revrobotics.com/sparkmax/software-resources/spark-max-api-information#version-2022.1.0\",\"internal\":false,\"reflection\":false,\"title\":\"REVLib Information - SPARK MAX\",\"clicks\":29}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":59202,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/revphysicssim-spark-max-position-control-simulation/441434/7\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3430250,\"name\":\"system\",\"username\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\",\"created_at\":\"2024-10-03T15:44:32.054Z\",\"cooked\":\"\\u003cp\\u003eThis topic was automatically closed 365 days after the last reply. New replies are no longer allowed.\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":3,\"posts_count\":8,\"updated_at\":\"2024-10-03T15:44:32.054Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":16,\"readers_count\":15,\"score\":3.2,\"yours\":false,\"topic_id\":441434,\"topic_slug\":\"revphysicssim-spark-max-position-control-simulation\",\"display_username\":\"system\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":true,\"admin\":true,\"staff\":true,\"user_id\":-1,\"hidden\":false,\"trust_level\":4,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"action_code\":\"autoclosed.enabled\",\"post_url\":\"/t/revphysicssim-spark-max-position-control-simulation/441434/8\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3235074,3236230,3236978,3237024,3237315,3237435,3237484,3430250]},\"timeline_lookup\":[[1,747],[2,743],[3,740],[5,739],[6,738],[8,373]],\"suggested_topics\":[{\"fancy_title\":\"Movement and Pathplanner set the position in opposite signs\",\"id\":491813,\"title\":\"Movement and Pathplanner set the position in opposite signs\",\"slug\":\"movement-and-pathplanner-set-the-position-in-opposite-signs\",\"posts_count\":1,\"reply_count\":0,\"highest_post_number\":1,\"image_url\":null,\"created_at\":\"2025-02-15T16:47:53.439Z\",\"last_posted_at\":\"2025-02-15T16:47:53.498Z\",\"bumped\":true,\"bumped_at\":\"2025-02-15T16:47:53.498Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"When I set the position of my robot using pathplanner, the robot goes to the correct position. However, when moving the robot forward it says that the robot is moving backwards on the field, and when…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"pathplanner\",\"gyro\",\"position\"],\"tags_descriptions\":{},\"like_count\":0,\"views\":31,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3527971,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":63024,\"username\":\"Jacksjnfds\",\"name\":\"Jackson\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/j/43a26b/{size}.png\"},\"posters\":[{\"extras\":\"latest single\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":63024,\"username\":\"Jacksjnfds\",\"name\":\"Jackson\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/j/43a26b/{size}.png\",\"trust_level\":2}}]},{\"fancy_title\":\"Log file error\",\"id\":473188,\"title\":\"Log file error\",\"slug\":\"log-file-error\",\"posts_count\":7,\"reply_count\":4,\"highest_post_number\":7,\"image_url\":null,\"created_at\":\"2024-10-16T21:11:11.620Z\",\"last_posted_at\":\"2024-10-16T22:35:20.794Z\",\"bumped\":true,\"bumped_at\":\"2024-10-16T22:35:20.794Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"We recently started to publish all of the robot data to the NT. This enables us to debug in real-time as well as log the NT to a log file for after-match analysis. Sometimes, we encounter a problem wh…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":0,\"views\":148,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3435755,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":60986,\"username\":\"GalDotan\",\"name\":\"Gal\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/galdotan/{size}/201749_2.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":60986,\"username\":\"GalDotan\",\"name\":\"Gal\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/galdotan/{size}/201749_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":13575,\"username\":\"Peter_Johnson\",\"name\":\"Peter Johnson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/peter_johnson/{size}/10417_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":44471,\"username\":\"jonahb55\",\"name\":\"Jonah Bonner\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jonahb55/{size}/194474_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"SparkSim position slightly differs from ArmSim position\",\"id\":481135,\"title\":\"SparkSim position slightly differs from ArmSim position\",\"slug\":\"sparksim-position-slightly-differs-from-armsim-position\",\"posts_count\":1,\"reply_count\":0,\"highest_post_number\":1,\"image_url\":null,\"created_at\":\"2025-01-12T06:19:33.617Z\",\"last_posted_at\":\"2025-01-12T06:19:33.682Z\",\"bumped\":true,\"bumped_at\":\"2025-01-12T06:41:35.734Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"My code is a fairly basic arm simulation using the SingleJointedArmSim class. When I simulate it, the SingleJointedArmSim reports slightly different angles than the SparkMaxSim. The difference seems …\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"rev\",\"python\",\"simulation\"],\"tags_descriptions\":{},\"like_count\":0,\"views\":80,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3479824,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":true,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":58301,\"username\":\"LHACK4142\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/lhack4142/{size}/196107_2.png\"},\"posters\":[{\"extras\":\"latest single\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":58301,\"username\":\"LHACK4142\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/lhack4142/{size}/196107_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"Phonix 6 TalonFX simulation dosent work\",\"id\":477180,\"title\":\"Phonix 6 TalonFX simulation dosent work\",\"slug\":\"phonix-6-talonfx-simulation-dosent-work\",\"posts_count\":5,\"reply_count\":2,\"highest_post_number\":5,\"image_url\":null,\"created_at\":\"2024-12-21T21:34:33.558Z\",\"last_posted_at\":\"2024-12-23T21:01:51.944Z\",\"bumped\":true,\"bumped_at\":\"2024-12-23T21:01:51.944Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"The talonfxsimstate uses the enable disable signal from the driver station even while on simulation. Make sure to click use simulated driver station and enable in the driver station and see if you can…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"robot\"],\"tags_descriptions\":{},\"like_count\":4,\"views\":290,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":true,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3462325,\"topic_post_liked\":false,\"topic_post_like_count\":3,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":2,\"topic_post_user\":{\"id\":62573,\"username\":\"KfirNeuman\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/k/d07c76/{size}.png\"},\"posters\":[{\"extras\":\"latest\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":60986,\"username\":\"GalDotan\",\"name\":\"Gal\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/galdotan/{size}/201749_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster, Accepted Answer\",\"user\":{\"id\":62573,\"username\":\"KfirNeuman\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/k/d07c76/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":48146,\"username\":\"bhall-ctre\",\"name\":\"Benjamin Hall\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bhall-ctre/{size}/198180_2.png\",\"primary_group_name\":\"CTRE\",\"flair_name\":\"CTRE\",\"flair_url\":\"/uploads/default/original/3X/1/b/1bd2b430e1bb6427d1c6504ff6abcd31de851a6d.png\",\"flair_group_id\":57,\"trust_level\":2}}]},{\"fancy_title\":\"Controls Troubleshooting\",\"id\":493536,\"title\":\"Controls Troubleshooting\",\"slug\":\"controls-troubleshooting\",\"posts_count\":5,\"reply_count\":1,\"highest_post_number\":5,\"image_url\":null,\"created_at\":\"2025-02-27T20:30:57.042Z\",\"last_posted_at\":\"2025-02-27T20:50:19.585Z\",\"bumped\":true,\"bumped_at\":\"2025-02-27T21:00:59.673Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"We are a new team this year and are hoping to get help with an issue we are having. The controls of our tank drive are inverted (the left joystick controls left and right and the right joystick contr…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":0,\"views\":77,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3542877,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":73885,\"username\":\"Glendale_Robotics\",\"name\":\"Matthew DeVos\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/g/3bc359/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":73885,\"username\":\"Glendale_Robotics\",\"name\":\"Matthew DeVos\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/g/3bc359/{size}.png\",\"trust_level\":0}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":63767,\"username\":\"Sam948\",\"name\":\"Sam\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/sam948/{size}/261363_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":28240,\"username\":\"icemannie\",\"name\":\"icemannie\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/i/bc79bd/{size}.png\",\"trust_level\":2}}]}],\"tags\":[\"revrobotics\"],\"tags_descriptions\":{},\"fancy_title\":\"REVPhysicsSim Spark Max position control simulation\",\"id\":441434,\"title\":\"REVPhysicsSim Spark Max position control simulation\",\"posts_count\":8,\"created_at\":\"2023-09-26T06:32:15.089Z\",\"views\":983,\"reply_count\":4,\"like_count\":1,\"last_posted_at\":\"2024-10-03T15:44:32.054Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"revphysicssim-spark-max-position-control-simulation\",\"category_id\":30,\"word_count\":497,\"deleted_at\":null,\"user_id\":24613,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_441434\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":8,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":3,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":24613,\"username\":\"viggy96\",\"name\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":59202,\"username\":\"HarryXChen\",\"name\":\"Harry Chen\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/harryxchen/{size}/199841_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":65,\"username\":\"Joe_Ross\",\"name\":\"Joe Ross\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/joe_ross/{size}/37_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"moderator\":true,\"trust_level\":4}],\"created_by\":{\"id\":24613,\"username\":\"viggy96\",\"name\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://github.com/REVrobotics/SPARK-MAX-Examples/issues/25\",\"title\":\"RevPhysicsSim Position Control doesn't work · Issue #25 · REVrobotics/SPARK-MAX-Examples · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":45,\"user_id\":24613,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.revrobotics.com/sparkmax/software-resources/spark-max-api-information#version-2022.1.0\",\"title\":\"REVLib Information - SPARK MAX\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":29,\"user_id\":59202,\"domain\":\"docs.revrobotics.com\",\"root_domain\":\"revrobotics.com\"},{\"url\":\"https://github.com/TechnoTitans/TitanWare2023/blob/AdvKit/src/main/java/frc/robot/utils/sim/motors/RevSparkMAXSim.java\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":26,\"user_id\":59202,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/TechnoTitans/TitanWare2023/blob/AdvKit/src/main/java/frc/robot/subsystems/drive/SwerveModuleIONeoSim.java\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":12,\"user_id\":59202,\"domain\":\"github.com\",\"root_domain\":\"github.com\"}]},\"bookmarks\":[]}"}
