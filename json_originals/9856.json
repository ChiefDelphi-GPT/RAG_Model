{"data":"{\"post_stream\":{\"posts\":[{\"id\":3257318,\"name\":\"Johnny Palogon\",\"username\":\"SerScallywag\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/d07c76/{size}.png\",\"created_at\":\"2023-11-27T02:38:05.977Z\",\"cooked\":\"\\u003cp\\u003eHello, me and my team are fairly new to control loops within FRC, having only used a very barebones PID control the 2023 season.\\u003c/p\\u003e\\n\\u003cp\\u003eOur bot uses a wrist mechanism to intake both cones and cubes on mid \\u0026amp; high, which in turn is assisted via an elevator. Both mechanisms utilize a basic PID to prevent overshoot and potential damage. However, I heard that feedforward control in addition to our PID could greatly help our mechanisms, especially the wrist, work smoothly, as it currently doesn’t have the prettiest control loop, with what I can only assume to be gravity causing it to slam down upon our frame. So I have a few questions:\\u003c/p\\u003e\\n\\u003cp\\u003e1.) How can feedforward be used efficiently \\u003cem\\u003ein practice\\u003c/em\\u003e?\\u003c/p\\u003e\\n\\u003cp\\u003e2.) How can I implement it to our robot?\\u003c/p\\u003e\\n\\u003cp\\u003e3.) Is there any certain specialized feedforward control that would be good to know in the future?\\u003c/p\\u003e\\n\\u003cp\\u003eDisclaimer: I’m a fairly amateur programmer, so there are still quite a few things I’ll have no idea about. Thanks in advance.\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T02:38:05.977Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1980,\"reads\":430,\"readers_count\":429,\"score\":9991.0,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"Johnny Palogon\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":61573,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Flashily\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/1\",\"custom_user_title\":\"Flashily\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":3257320,\"name\":\"Alex\",\"username\":\"legoguy1000\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/legoguy1000/{size}/256261_2.png\",\"created_at\":\"2023-11-27T03:03:22.950Z\",\"cooked\":\"\\u003cp\\u003eIn simplicity PID gets u to where u want to be and Feed forward holds it in position. Using the wrist example, essentially an arm. PID uses the error of the angle u want to be at to move it to that angle, the larger the error, the more power it applies based on ur PID variables. However once u reach the set angle u have no error and the power to the motor based on the PID equation is 0. However in the real world I have gravity which is applying a relative force downwards at all times regardless of which direction the wrist is moving. The feed forward is what holds it in position and counters the force of gravity. The easiest way to start to determine the feed forward value is figure out what voltage holds the wrist parallel with the ground, 0° from the horizontal and then what ever angle the wrist is at the feed forward will apply a proportion of that. The other piece is while the arm is moving the feed forward will add or subtract power based on direction of motion, moving up it provides additional to counter gravity, when moving down it slows the power since gravity is on it side to help over powering the mechanism.\\u003c/p\\u003e\\n\\u003cp\\u003eThis should help with the slamming down but that will still need to be tuned with PID values.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T03:05:29.300Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":22,\"reads\":398,\"readers_count\":397,\"score\":194.6,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"Alex\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":28614,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor \\u0026 Alumnus\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/2\",\"custom_user_title\":\"Mentor \\u0026 Alumnus\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257321,\"name\":\"Lyssia\",\"username\":\"apotato\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/apotato/{size}/204534_2.png\",\"created_at\":\"2023-11-27T03:09:34.187Z\",\"cooked\":\"\\u003cp\\u003ehow heavy is this wrist and how many/what type of motors does it have? a lot of “advanced” control is avoidable on mechanisms that are overpowered.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T03:10:16.446Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":348,\"readers_count\":347,\"score\":89.6,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"Lyssia\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":52651,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"8033 | Software Vice Captain\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/3\",\"custom_user_title\":\"8033 | Software Vice Captain\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257322,\"name\":\"Johnny Palogon\",\"username\":\"SerScallywag\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/d07c76/{size}.png\",\"created_at\":\"2023-11-27T03:18:17.219Z\",\"cooked\":\"\\u003cp\\u003eI think around 5 kg is how much it weighs? I’m guesstimating. The motor is a single regular NEO\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T03:18:17.219Z\",\"reply_count\":1,\"reply_to_post_number\":3,\"quote_count\":0,\"incoming_link_count\":5,\"reads\":332,\"readers_count\":331,\"score\":96.4,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"Johnny Palogon\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":52651,\"username\":\"apotato\",\"name\":\"Lyssia\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/apotato/{size}/204534_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":61573,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Flashily\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/4\",\"custom_user_title\":\"Flashily\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257325,\"name\":\"\",\"username\":\"Alex_Y\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/82dd89/{size}.png\",\"created_at\":\"2023-11-27T03:31:38.346Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"legoguy1000\\\" data-post=\\\"2\\\" data-topic=\\\"444865\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/legoguy1000/48/256261_2.png\\\" class=\\\"avatar\\\"\\u003e legoguy1000:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eFeed forward holds it in position\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eDepends on what feedforwards you are running. If you are only running gravity feedforward, sure. But feedforwards are also used to overcome system dynamics including inertia, the motor’s own back EMF, viscous, and coulomb friction. These feedforwards aren’t used to keep a station stationary, but to have the motor reach its target velocity without the feedback controller having to do anything. This means that the feedback controller can be tuned to better reject disturbances.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"SerScallywag\\\" data-post=\\\"1\\\" data-topic=\\\"444865\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/s/d07c76/48.png\\\" class=\\\"avatar\\\"\\u003e SerScallywag:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003e3.) Is there any certain specialized feedforward control that would be good to know in the future?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eMotion profiling and its associated feedforwards. For high inertia systems or systems that require really high accuracy, instead of PIDing to a postion, you instead want to use feedforward control to follow a desired motion profile and then use a velocity \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e to reject disturbances so that the motor exactly follows the desired motion profile.\\u003c/p\\u003e\\n\\u003cp\\u003eAdditionally, I would look into anti integral windup. When the motor is saturated (meaning that it is being ran at 100% power) and there is any integral control, the integral term will build up and stay “wound up” causing overshoot. There’s a few mechanism you can use to avoid this.\\u003cbr\\u003e\\nThe most effective method is to write a custom \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e controller that will not integrate whenever the input is saturated. Additional ways to make integral control behave is to apply an integral cap to prevent the integral from growing extremely large and also add a method decrease the integral buildup quickly whenever it overshoots.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T03:31:38.346Z\",\"reply_count\":2,\"reply_to_post_number\":2,\"quote_count\":2,\"incoming_link_count\":51,\"reads\":330,\"readers_count\":329,\"score\":331.0,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":50219,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/5\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257326,\"name\":\"Lyssia\",\"username\":\"apotato\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/apotato/{size}/204534_2.png\",\"created_at\":\"2023-11-27T03:32:58.685Z\",\"cooked\":\"\\u003cp\\u003eI would recommend avoiding using I altogether because of the issues with integral you mentioned, since in FRC feedforwards can usually handle whatever I would be used for.\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T03:32:58.685Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":11,\"reads\":271,\"readers_count\":270,\"score\":114.2,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"Lyssia\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":50219,\"username\":\"Alex_Y\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/82dd89/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":52651,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"8033 | Software Vice Captain\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/6\",\"custom_user_title\":\"8033 | Software Vice Captain\",\"reactions\":[{\"id\":\"point_up\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257327,\"name\":\"Lyssia\",\"username\":\"apotato\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/apotato/{size}/204534_2.png\",\"created_at\":\"2023-11-27T03:36:48.354Z\",\"cooked\":\"\\u003cp\\u003eMy intuition tells me that this is likely powerful enough to not need a feedforward. If you want to try one i would start with a gravity feedforward. This can be done by adding a certain voltage to the motor to counteract the force of gravity, but not induce any movement. For a rotating arm the force of gravity will scale with the cosine of the angle of the arm with the horizontal (if you think about holding out your arm, it takes the most effort to hold up when it is straight out, and none when it is pointing down). You will have to find the voltage needed to counteract this force either with some math or by hand tuning it, personally i think hand tuning is fine. To actually use a feedforward like this i would look at \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/feedforward.html#feedforward-control-in-wpilib\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ethis wpilib docs article about singlejointed arm feedforwards\\u003c/a\\u003e. For more of the theory behind controls, take a look at the \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/control-system-basics.html\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ewpilib docs intro to control theory\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T03:36:48.354Z\",\"reply_count\":0,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":15,\"reads\":274,\"readers_count\":273,\"score\":129.8,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"Lyssia\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/feedforward.html#feedforward-control-in-wpilib\",\"internal\":false,\"reflection\":false,\"title\":\"Feedforward Control in WPILib — FIRST Robotics Competition documentation\",\"clicks\":48},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/control-system-basics.html\",\"internal\":false,\"reflection\":false,\"title\":\"Control System Basics — FIRST Robotics Competition documentation\",\"clicks\":16}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":61573,\"username\":\"SerScallywag\",\"name\":\"Johnny Palogon\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/d07c76/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":52651,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"8033 | Software Vice Captain\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/7\",\"custom_user_title\":\"8033 | Software Vice Captain\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257328,\"name\":\"\",\"username\":\"Alex_Y\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/82dd89/{size}.png\",\"created_at\":\"2023-11-27T03:39:58.540Z\",\"cooked\":\"\\u003cp\\u003eI disagree, integral control has its purpose and its not good to blanket avoid it. Anti-windup is not particularly difficult to implement and is extremely effective. Yes having a model of the system and using feedforwards is better, but its not always necessary and for simple system, PID with anti-windup is really quick to implement and effective at what it does. Additionally, for systems with disturbances, integral control can significant help when other factors such as latency or noise amplification prevent you from further increasing kP or kD.\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T03:46:50.205Z\",\"reply_count\":0,\"reply_to_post_number\":6,\"quote_count\":0,\"incoming_link_count\":16,\"reads\":259,\"readers_count\":258,\"score\":131.8,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":52651,\"username\":\"apotato\",\"name\":\"Lyssia\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/apotato/{size}/204534_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":50219,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/8\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"-1\",\"type\":\"emoji\",\"count\":5}],\"current_user_reaction\":null,\"reaction_users_count\":5,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257329,\"name\":\"usbcd36\",\"username\":\"usbcd36\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/usbcd36/{size}/2444_2.png\",\"created_at\":\"2023-11-27T03:43:56.070Z\",\"cooked\":\"\\u003cp\\u003e\\u003ca class=\\\"mention\\\" href=\\\"/u/legoguy1000\\\"\\u003e@legoguy1000\\u003c/a\\u003e gave the gist.  Here’s the expansion.\\u003c/p\\u003e\\n\\u003cp\\u003eWPILib has a bunch of feedforward models, including ones for arms and elevators, so you don’t need to write your own.  They also have several example projects that show how to do it.\\u003c/p\\u003e\\n\\u003caside class=\\\"onebox allowlistedgeneric\\\" data-onebox-src=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/feedforward.html\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003cimg src=\\\"https://docs.wpilib.org/en/stable/_static/FIRSTicon_RGB_withTM.ico\\\" class=\\\"site-icon\\\" width=\\\"\\\" height=\\\"\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/feedforward.html\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eFIRST Robotics Competition Documentation\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003cimg width=\\\"128\\\" height=\\\"128\\\" src=\\\"https://raw.githubusercontent.com/wpilibsuite/branding/main/png/wpilib-128.png\\\" class=\\\"thumbnail onebox-avatar\\\"\\u003e\\n\\n\\u003ch3\\u003e\\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/feedforward.html\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eFeedforward Control in WPILib\\u003c/a\\u003e\\u003c/h3\\u003e\\n\\n  \\u003cp\\u003eYou may have used feedback control (such as PID) for reference tracking (making a system’s output follow a desired reference signal). While this is effective, it’s a reactionary measure; the system...\\u003c/p\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eAnd some examples:  \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/examples-tutorials/wpilib-examples.html\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eWPILib Example Projects — FIRST Robotics Competition documentation\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003e\\u003cstrong\\u003eArmBot\\u003c/strong\\u003e (\\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/armbot\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eJava\\u003c/a\\u003e, \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/ArmBot\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eC++\\u003c/a\\u003e): Demonstrates the use of a \\u003ccode\\u003eProfiledPIDSubsystem\\u003c/code\\u003e to control a robot arm.\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003cstrong\\u003eArmBotOffboard\\u003c/strong\\u003e (\\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/armbotoffboard\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eJava\\u003c/a\\u003e, \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/ArmBotOffboard\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eC++\\u003c/a\\u003e): Demonstrates the use of a \\u003ccode\\u003eTrapezoidProfileSubsystem\\u003c/code\\u003e in conjunction with a “smart motor controller” to control a robot arm.\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003cstrong\\u003eElevator with profiled PID controller\\u003c/strong\\u003e (\\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/elevatorprofiledpid\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eJava\\u003c/a\\u003e, \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/ElevatorProfiledPID\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eC++\\u003c/a\\u003e): Demonstrates the use of the \\u003ccode\\u003eProfiledPIDController\\u003c/code\\u003e class to control the position of an elevator mechanism.\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003cstrong\\u003eElevator with trapezoid profiled PID\\u003c/strong\\u003e (\\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/elevatortrapezoidprofile\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eJava\\u003c/a\\u003e, \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/ElevatorTrapezoidProfile\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eC++\\u003c/a\\u003e): Demonstrates the use of the \\u003ccode\\u003eTrapezoidProfile\\u003c/code\\u003e class in conjunction with a “smart motor controller” to control the position of an elevator mechanism.\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003eMost of the feedforward models in WPILib assume you’re familiar with the SysId program - \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/pathplanning/system-identification/introduction.html#introduction-to-system-identification\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eIntroduction to System Identification — FIRST Robotics Competition documentation\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T03:45:25.375Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":34,\"reads\":242,\"readers_count\":241,\"score\":233.4,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"usbcd36\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/feedforward.html\",\"internal\":false,\"reflection\":false,\"title\":\"Feedforward Control in WPILib — FIRST Robotics Competition documentation\",\"clicks\":43},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/armbot\",\"internal\":false,\"reflection\":false,\"clicks\":27},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/elevatortrapezoidprofile\",\"internal\":false,\"reflection\":false,\"clicks\":16},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/pathplanning/system-identification/introduction.html#introduction-to-system-identification\",\"internal\":false,\"reflection\":false,\"title\":\"Introduction to System Identification — FIRST Robotics Competition documentation\",\"clicks\":11},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/examples-tutorials/wpilib-examples.html\",\"internal\":false,\"reflection\":false,\"title\":\"WPILib Example Projects — FIRST Robotics Competition documentation\",\"clicks\":10},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/armbotoffboard\",\"internal\":false,\"reflection\":false,\"clicks\":8},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/elevatorprofiledpid\",\"internal\":false,\"reflection\":false,\"clicks\":8},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/ElevatorTrapezoidProfile\",\"internal\":false,\"reflection\":false,\"clicks\":2},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/ArmBot\",\"internal\":false,\"reflection\":false,\"clicks\":1},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/ElevatorProfiledPID\",\"internal\":false,\"reflection\":false,\"clicks\":1},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/ArmBotOffboard\",\"internal\":false,\"reflection\":false,\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":7334,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/9\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257330,\"name\":\"Johnny Palogon\",\"username\":\"SerScallywag\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/d07c76/{size}.png\",\"created_at\":\"2023-11-27T03:51:00.344Z\",\"cooked\":\"\\u003cblockquote\\u003e\\n\\u003cp\\u003einstead of PIDing to a postion, you instead want to use feedforward control to follow a desired motion profile and then use a velocity PID to reject disturbances so that the motor exactly follows the desired motion profile.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eHow would i implement this in the code?\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eWhen the motor is saturated (meaning that it is being ran at 100% power) and there is any integral control, the integral term will build up and stay “wound up” causing overshoot.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eThis is meant to decrease the noise (large distance between the error and current state), yes? What value should i set the cap at? I havent really messed with my own custom PID before, although i did make a super primitive P-control loop when I first started learning.\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eFor a rotating arm the force of gravity will scale with the cosine of the angle of the arm with the horizontal (if you think about holding out your arm, it takes the most effort to hold up when it is straight out, and none when it is pointing down).\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eWhy do you use the cosine? Ive seen it in examples, I just dont get why\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T03:51:00.344Z\",\"reply_count\":2,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":7,\"reads\":212,\"readers_count\":211,\"score\":87.4,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"Johnny Palogon\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":50219,\"username\":\"Alex_Y\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/82dd89/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":61573,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Flashily\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/10\",\"custom_user_title\":\"Flashily\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257332,\"name\":\"Anand Rajamani\",\"username\":\"asid61\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/asid61/{size}/7179_2.png\",\"created_at\":\"2023-11-27T03:58:29.559Z\",\"cooked\":\"\\u003cp\\u003eHere’s what, in practice, your pseudocode should look like:\\u003c/p\\u003e\\n\\u003cp\\u003econstructor() {\\u003cbr\\u003e\\nkG = ??\\u003cbr\\u003e\\nkP = ??\\u003cbr\\u003e\\nkI = 0\\u003cbr\\u003e\\nkD = ??\\u003c/p\\u003e\\n\\u003cp\\u003epid = new PID(kP,kI,kD)\\u003cbr\\u003e\\n}\\u003c/p\\u003e\\n\\u003cp\\u003eperiodic() {\\u003cbr\\u003e\\nposition = getEncoder()\\u003cbr\\u003e\\nfeedforward = cos(position) * kG\\u003cbr\\u003e\\neffort = pid.calculate(position)\\u003cbr\\u003e\\neffort += feedforward\\u003cbr\\u003e\\ncontroller.set(effort)\\u003cbr\\u003e\\n}\\u003c/p\\u003e\\n\\u003cp\\u003eThat’s basically it. kG will be the effort (voltage, usually) required to hold the arm perfectly horizontal. You can experimentally measure this or estimate it with Recalc. kP and kD you find experimentally afterwards, start with feedforward first. You typically will not need any kI or only need a very very small kI, so tune it last.\\u003c/p\\u003e\\n\\u003cp\\u003eThere’s a fun example to help you tune here: \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/tuning-vertical-arm.html\\\" class=\\\"inline-onebox\\\"\\u003eTuning a Vertical Arm Position Controller — FIRST Robotics Competition documentation\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T03:58:29.559Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":6,\"reads\":191,\"readers_count\":190,\"score\":83.2,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"Anand Rajamani\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/tuning-vertical-arm.html\",\"internal\":false,\"reflection\":false,\"title\":\"Tuning a Vertical Arm Position Controller — FIRST Robotics Competition documentation\",\"clicks\":21}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":21715,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/11\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257333,\"name\":\"\",\"username\":\"Alex_Y\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/82dd89/{size}.png\",\"created_at\":\"2023-11-27T04:02:05.365Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"SerScallywag\\\" data-post=\\\"10\\\" data-topic=\\\"444865\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/s/d07c76/48.png\\\" class=\\\"avatar\\\"\\u003e SerScallywag:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eThis is meant to decrease the noise (large distance between the error and current state), yes? What value should i set the cap at? I havent really messed with my own custom PID before, although i did make a super primitive P-control loop when I first started learning.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eNo. Noise is an entirely different problem. Noise specifically refers to random variations in sensor readings that are not reflective of the true thing the sensor is measuring.\\u003c/p\\u003e\\n\\u003cp\\u003eIntegral windup is a specific issue that occurs when an input is saturated. In \\u003cspan class=\\\"abbreviation\\\"\\u003eFRC\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eFIRST Robotics Competition\\u003c/template\\u003e\\u003c/span\\u003e, this generally means you are sending full power to the motor already. Without any anti-windup measures, the integral term will build up while not affecting the output because you can’t send any more power to the motor. But the intergral term is still increasing. Once you get close to your setpoint, most of your feedback controller wants to stop, but because a very large integral term has built up, the output of the controller will still be full power, or that the controller is “wound up”, causing a massive overshoot.\\u003c/p\\u003e\\n\\u003cp\\u003eAnti windup measures such as not integrating when saturated (also known as clamping), capping the intergral term, and lowering/clearing the integral term on overshoot all prevent this issue which allows you to run more aggressive integral gains without windup ever being an issue.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"SerScallywag\\\" data-post=\\\"10\\\" data-topic=\\\"444865\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/s/d07c76/48.png\\\" class=\\\"avatar\\\"\\u003e SerScallywag:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eWhy do you use the cosine? Ive seen it in examples, I just dont get why\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eBecause of physics \\u0026amp; trig. Gravity will apply a torque on the arm based on how far away the center of mass is horizontally from the pivot point. If you do the trig, you will find this distance to be the distance from the center of mass to the pivot point times the cosine of the arm angle.\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T04:03:35.073Z\",\"reply_count\":1,\"reply_to_post_number\":10,\"quote_count\":1,\"incoming_link_count\":7,\"reads\":183,\"readers_count\":182,\"score\":91.6,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":50219,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/12\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257334,\"name\":\"usbcd36\",\"username\":\"usbcd36\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/usbcd36/{size}/2444_2.png\",\"created_at\":\"2023-11-27T04:13:11.116Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group quote-modified\\\" data-username=\\\"SerScallywag\\\" data-post=\\\"10\\\" data-topic=\\\"444865\\\" data-full=\\\"true\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/s/d07c76/48.png\\\" class=\\\"avatar\\\"\\u003e SerScallywag:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003einstead of PIDing to a postion, you instead want to use feedforward control to follow a desired motion profile and then use a velocity PID to reject disturbances so that the motor exactly follows the desired motion profile.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eHow would i implement this in the code?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eHere’s a TimedRobot example for an elevator (see other examples above):\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/elevatorprofiledpid/Robot.java\\\"\\u003eElevator Profiled PID\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eEdit: it doesn’t do precisely what the quote above says; it uses a position PD controller (no I) to reduce errors in position over the course of the move, and at the two end positions, while the feedforward does most of the heavy lifting.\\u003c/p\\u003e\\n\\u003cp\\u003eProfiledPIDController combines a PID controller with a trapezoidal profile generator – i.e., a rate limiter on setpoint change.  That way, you don’t tell the elevator, “ok, go to the top NOW” and it goes full power trying to do this.  Instead, you command the elevator, “go to some location a reasonable distance away” and then you keep moving the goal at a rate it can keep up with.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group quote-modified\\\" data-username=\\\"SerScallywag\\\" data-post=\\\"10\\\" data-topic=\\\"444865\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/s/d07c76/48.png\\\" class=\\\"avatar\\\"\\u003e SerScallywag:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eWhen the motor is saturated (meaning that it is being ran at 100% power) and there is any integral control, the integral term will build up and stay “wound up” causing overshoot.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eThis is meant to decrease the noise (large distance between the error and current state), yes? What value should i set the cap at? I havent really messed with my own custom PID before, although i did make a super primitive P-control loop when I first started learning.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eIt depends on your application.  Personally, I suggest trying to avoid integral – if you want more info on why…well, it’s a longer read: \\u003ca href=\\\"https://file.tavsys.net/control/controls-engineering-in-frc.pdf\\\"\\u003ehttps://file.tavsys.net/control/controls-engineering-in-\\u003cspan class=\\\"abbreviation\\\"\\u003efrc\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eFIRST Robotics Competition\\u003c/template\\u003e\\u003c/span\\u003e.pdf\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003e6.7 Integral control\\u003cbr\\u003e\\nA common way of implementing integral control is to add an additional state that is the\\u003cbr\\u003e\\nintegral of the error of the variable intended to have zero steady-state error.\\u003cbr\\u003e\\n54\\u003c/p\\u003e\\n\\u003cp\\u003eChapter 6. Continuous state-space control\\u003cbr\\u003e\\nWe’\\u003cspan class=\\\"abbreviation\\\"\\u003ell\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eLimelight, an integrated vision coprocessor\\u003c/template\\u003e\\u003c/span\\u003e present two methods:\\u003c/p\\u003e\\n\\u003col\\u003e\\n\\u003cli\\u003eAugment the plant. For an arm, one would add an “integral of position” state.\\u003c/li\\u003e\\n\\u003cli\\u003eEstimate the “error” in the control input (the difference between what was applied versus what was observed to happen) via the observer and compensate for it. We’\\u003cspan class=\\\"abbreviation\\\"\\u003ell\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eLimelight, an integrated vision coprocessor\\u003c/template\\u003e\\u003c/span\\u003e call this “input error estimation”.\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cp\\u003eIn \\u003cspan class=\\\"abbreviation\\\"\\u003eFRC\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eFIRST Robotics Competition\\u003c/template\\u003e\\u003c/span\\u003e, avoid integral control unless you have a very good reason to use it. Integral\\u003cbr\\u003e\\ncontrol adds significant complexity, and steady-state error can often be avoided with a\\u003cbr\\u003e\\nmotion profile, a well-tuned feedforward, and proportional feedback (i.e., more deterministic options you should be using anyway).\\u003c/p\\u003e\\n\\u003cp\\u003e6.7.1 Plant augmentation\\u003c/p\\u003e\\n\\u003cp\\u003eCaveats\\u003c/p\\u003e\\n\\u003cp\\u003eFirst, unconstrained integral control exhibits integral windup on a unitstep input. When the error reaches zero, the integrator may still have a large positive accumulated error from the initial ramp-up. The integrator makes the system overshoot until the accumulated error is unwound by negative errors. Poor tuning can lead to instability.[6] Integrating only when close to the reference somewhat mitigates integral windup.\\u003c/p\\u003e\\n\\u003cp\\u003eSecond, unconstrained integral control is a poor choice for modeled dynamics compensation. Feedforwards provide more precise compensation since we already know beforehand how to counteract the undesirable dynamics.\\u003c/p\\u003e\\n\\u003cp\\u003eThird, unconstrained integral control is a poor choice for unmodeled dynamics compensation. To choose proper gains, the integrator must be tuned online when the unmodeled dynamics are present, which may be inconvenient or unsafe in some circumstances. Furthermore, accumulation even when the system is following the model means it still compensates for modeled dynamics despite our intent otherwise. Prefer the approach in subsection 6.7.2.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T04:22:04.787Z\",\"reply_count\":0,\"reply_to_post_number\":10,\"quote_count\":1,\"incoming_link_count\":7,\"reads\":172,\"readers_count\":171,\"score\":69.4,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"usbcd36\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/elevatorprofiledpid/Robot.java\",\"internal\":false,\"reflection\":false,\"clicks\":11},{\"url\":\"https://file.tavsys.net/control/controls-engineering-in-frc.pdf\",\"internal\":false,\"reflection\":false,\"clicks\":7}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":7334,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/13\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257338,\"name\":\"Johnny Palogon\",\"username\":\"SerScallywag\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/d07c76/{size}.png\",\"created_at\":\"2023-11-27T04:35:17.768Z\",\"cooked\":\"\\u003cblockquote\\u003e\\n\\u003cp\\u003eOnce you get close to your setpoint, most of your feedback controller wants to stop, but because a very large integral term has built up, the output of the controller will still be full power, or that the controller is “wound up”, causing a massive overshoot.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eAhhhh I see, that makes a lot more sense, thank you. I believe I saw a few examples of anti-windup in some \\u003cspan class=\\\"abbreviation\\\"\\u003eFTC\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eFIRST Tech Challenge\\u003c/template\\u003e\\u003c/span\\u003e guides to help me out.\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eGravity will apply a torque on the arm based on how far away the center of mass is horizontally from the pivot point. If you do the trig, you will find this distance to be the distance from the center of mass to the pivot point times the cosine of the arm angle.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eOhhhh okay okay. My math isn’t too up-to-speed with more advanced trig functions, so I’m a bit lacking there.\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eThat’s basically it. kG will be the effort (voltage, usually) required to hold the arm perfectly horizontal.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eIve been playing around with the tuner, it’s very fascinating. Is kG supposed to be the primary constant that’\\u003cspan class=\\\"abbreviation\\\"\\u003ell\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eLimelight, an integrated vision coprocessor\\u003c/template\\u003e\\u003c/span\\u003e aid in counteracting gravity? And \\u003cspan class=\\\"abbreviation\\\"\\u003ekV\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eKey Volunteer\\u003c/template\\u003e\\u003c/span\\u003e the max velocity, I suppose? I understand kinda the concept of feedforward, it’s just actual execution\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T04:35:17.768Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":150,\"readers_count\":149,\"score\":50.0,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"Johnny Palogon\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":50219,\"username\":\"Alex_Y\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/82dd89/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":61573,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Flashily\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/14\",\"custom_user_title\":\"Flashily\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257339,\"name\":\"usbcd36\",\"username\":\"usbcd36\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/usbcd36/{size}/2444_2.png\",\"created_at\":\"2023-11-27T04:37:59.058Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"SerScallywag\\\" data-post=\\\"14\\\" data-topic=\\\"444865\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/s/d07c76/48.png\\\" class=\\\"avatar\\\"\\u003e SerScallywag:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eIs kG supposed to be the primary constant that’\\u003cspan class=\\\"abbreviation\\\"\\u003ell\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eLimelight, an integrated vision coprocessor\\u003c/template\\u003e\\u003c/span\\u003e aid in counteracting gravity? And \\u003cspan class=\\\"abbreviation\\\"\\u003ekV\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eKey Volunteer\\u003c/template\\u003e\\u003c/span\\u003e the max velocity, I suppose? I understand kinda the concept of feedforward, it’s just actual execution\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eYes on kG.  No on \\u003cspan class=\\\"abbreviation\\\"\\u003ekV\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eKey Volunteer\\u003c/template\\u003e\\u003c/span\\u003e:\\u003c/p\\u003e\\n\\u003caside class=\\\"onebox allowlistedgeneric\\\" data-onebox-src=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-feedforward.html\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003cimg src=\\\"https://docs.wpilib.org/en/stable/_static/FIRSTicon_RGB_withTM.ico\\\" class=\\\"site-icon\\\" width=\\\"\\\" height=\\\"\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-feedforward.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003eFIRST Robotics Competition Documentation\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003cimg width=\\\"128\\\" height=\\\"128\\\" src=\\\"https://raw.githubusercontent.com/wpilibsuite/branding/main/png/wpilib-128.png\\\" class=\\\"thumbnail onebox-avatar\\\"\\u003e\\n\\n\\u003ch3\\u003e\\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-feedforward.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003eIntroduction to DC Motor Feedforward\\u003c/a\\u003e\\u003c/h3\\u003e\\n\\n  \\u003cp\\u003eThis page explains the conceptual and mathematical workings of WPILib’s SimpleMotorFeedforward (and the other related classes). The Permanent-Magnet DC Motor Feedforward Equation: Recall from earli...\\u003c/p\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003e\\u003cspan class=\\\"abbreviation\\\"\\u003ekV\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eKey Volunteer\\u003c/template\\u003e\\u003c/span\\u003e describes how much voltage is needed to hold (or “cruise”) at a given constant velocity while overcoming the \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controls-glossary.html#term-counter-electromotive-force\\\"\\u003ecounter-electromotive force\\u003c/a\\u003e and any additional friction that increases with speed (including \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controls-glossary.html#term-viscous-drag\\\"\\u003eviscous drag\\u003c/a\\u003e and some \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controls-glossary.html#term-churning-losses\\\"\\u003echurning losses\\u003c/a\\u003e). The relationship between speed and voltage (at constant acceleration) is almost entirely linear (for \\u003cspan class=\\\"abbreviation\\\"\\u003eFRC\\u003ctemplate class=\\\"tooltiptext\\\"\\u003eFIRST Robotics Competition\\u003c/template\\u003e\\u003c/span\\u003e-legal components) because of how permanent-magnet DC motors work.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-27T04:37:59.058Z\",\"reply_count\":0,\"reply_to_post_number\":14,\"quote_count\":1,\"incoming_link_count\":6,\"reads\":153,\"readers_count\":152,\"score\":60.6,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"usbcd36\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-feedforward.html\",\"internal\":false,\"reflection\":false,\"title\":\"Introduction to DC Motor Feedforward — FIRST Robotics Competition documentation\",\"clicks\":14},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controls-glossary.html#term-churning-losses\",\"internal\":false,\"reflection\":false,\"title\":\"Controls Glossary — FIRST Robotics Competition documentation\",\"clicks\":1},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controls-glossary.html#term-counter-electromotive-force\",\"internal\":false,\"reflection\":false,\"title\":\"Controls Glossary — FIRST Robotics Competition documentation\",\"clicks\":0},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controls-glossary.html#term-viscous-drag\",\"internal\":false,\"reflection\":false,\"title\":\"Controls Glossary — FIRST Robotics Competition documentation\",\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":7334,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/15\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257866,\"name\":\"gregzetko\",\"username\":\"gregzetko\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gregzetko/{size}/201403_2.png\",\"created_at\":\"2023-11-28T21:40:56.741Z\",\"cooked\":\"\\u003cp\\u003eI would also like note that the benefit of adding a gravity feedforward is significantly less in multi-jointed arm where forces accumulate throughout the joints which could result in what I call a “ping-pong” effect from the rotational inertia of the links. Depending on the geometry and mainly desired speed and responsiveness of your arm, this effect may be more significant than the gravity.\\u003cbr\\u003e\\nAs others have mentioned above, you COULD* get away without all of this if your motors/mechanisms are overkill enough. Within the scope of FRC, I’d highly recommend implementing feedforward control for lower-dimensional systems like drivetrains and elevators, but I’d advise to approach multi-dimensional systems cautiously as their are dynamics are more complex.\\u003c/p\\u003e\\n\\u003cp\\u003e*Disclaimer: Just because you can, doesn’t mean you should. Know your limits, and play within it. Team 1114 (the team that recommended gravity feedforward to us this year, thanks Caleb!) built a great \\u003ca href=\\\"https://youtu.be/oOg0gJU6bc0?si=D36gqVMGToqjvfsr\\\" rel=\\\"noopener nofollow ugc\\\"\\u003emulti-jointed arm\\u003c/a\\u003e this year, and they’ve achieved blazing fast speeds by utilizing gravity feedforward alongside a hard stop for their “lower link” (the link between shoulder and elbow) which from what I could tell, significantly mitigated the “ping-pong” effect of their upper link under acceleration and deceleration. Year after year they implement the simplest yet most effective solutions to their problems by understanding their system in depth.\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-28T21:40:56.741Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":14,\"reads\":118,\"readers_count\":117,\"score\":158.6,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"gregzetko\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://youtu.be/oOg0gJU6bc0?si=D36gqVMGToqjvfsr\",\"internal\":false,\"reflection\":false,\"clicks\":13}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":27566,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/16\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257948,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2023-11-29T03:54:51.613Z\",\"cooked\":\"\\u003cp\\u003eI’m not sure what you’re getting at - a correctly computed gravity feedforward for each joint of a multi-joint arm will almost certainly improve performance compared to no feedforward at all.  It won’t be as good as a full nonlinear dynamics model, but it’s easy to implement.\\u003c/p\\u003e\\n\\u003cp\\u003eA naively-applied single-joint feedforward is, of course, not guaranteed to work well for a multi-joint arm.\\u003c/p\\u003e\\n\\u003cp\\u003eIf you’re not following your profiles closely enough, you may want to swap the gravity portion of the feedforward for a feedback linearizer, which is the same thing but computed off of the measured angle(s) instead of the desired ones.  This is less-stable but doesn’t go wonky if you depart from the intended motion.  A better solution is to tune your profile constraints to ensure you can actually follow the profiles.\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-29T03:58:34.057Z\",\"reply_count\":2,\"reply_to_post_number\":16,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":110,\"readers_count\":109,\"score\":57.0,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":27566,\"username\":\"gregzetko\",\"name\":\"gregzetko\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gregzetko/{size}/201403_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/17\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"+1\",\"type\":\"emoji\",\"count\":1},{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257974,\"name\":\"gregzetko\",\"username\":\"gregzetko\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gregzetko/{size}/201403_2.png\",\"created_at\":\"2023-11-29T06:08:00.368Z\",\"cooked\":\"\\u003cp\\u003eMy point is that understanding the characteristics of your own system better could lead you to simpler solutions with less points of failure. Tuning profile constraints, geometry, gearing are all viable avenues to explore that can lead to quicker insight into the dynamics of your system without adding complexity.\\u003cbr\\u003e\\nI guess what I’m suggesting is that perhaps investigating the existing control system through logging the motor speeds, current readings could reveal what your issue is better than experimenting with a control system you are less familiar with and a system whose dynamics fully understand.\\u003cbr\\u003e\\nNo doubt that understanding the physics and math behind it is key to extracting the maximum out of the system, but the basic steps like tuning gear ratios and understanding the behavior of the motors and existing control loops should not be ignored. Other mechanical/electrical solutions may also exist that add less complexity\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-29T06:09:20.782Z\",\"reply_count\":0,\"reply_to_post_number\":17,\"quote_count\":0,\"incoming_link_count\":7,\"reads\":102,\"readers_count\":101,\"score\":55.4,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"gregzetko\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":27566,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/18\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3257975,\"name\":\"joel truher\",\"username\":\"truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"created_at\":\"2023-11-29T06:09:04.690Z\",\"cooked\":\"\\u003cp\\u003ei’d suggest that, even better than a correct feedforward, would be physical counterbalancing.  one or two serial joints are pretty simple to rig.\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":20,\"updated_at\":\"2023-11-29T06:09:04.690Z\",\"reply_count\":0,\"reply_to_post_number\":17,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":99,\"readers_count\":98,\"score\":44.8,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"joel truher\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53190,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/19\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"+1\",\"type\":\"emoji\",\"count\":1},{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3452824,\"name\":\"system\",\"username\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\",\"created_at\":\"2024-11-28T06:09:22.137Z\",\"cooked\":\"\\u003cp\\u003eThis topic was automatically closed 365 days after the last reply. New replies are no longer allowed.\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":3,\"posts_count\":20,\"updated_at\":\"2024-11-28T06:09:22.137Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":14,\"readers_count\":13,\"score\":12.8,\"yours\":false,\"topic_id\":444865,\"topic_slug\":\"feedforward-pid-control-on-a-wrist\",\"display_username\":\"system\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":true,\"admin\":true,\"staff\":true,\"user_id\":-1,\"hidden\":false,\"trust_level\":4,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"action_code\":\"autoclosed.enabled\",\"post_url\":\"/t/feedforward-pid-control-on-a-wrist/444865/20\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3257318,3257320,3257321,3257322,3257325,3257326,3257327,3257328,3257329,3257330,3257332,3257333,3257334,3257338,3257339,3257866,3257948,3257974,3257975,3452824]},\"timeline_lookup\":[[1,685],[16,683],[20,318]],\"suggested_topics\":[{\"fancy_title\":\"Path planner error\",\"id\":504653,\"title\":\"Path planner error\",\"slug\":\"path-planner-error\",\"posts_count\":4,\"reply_count\":1,\"highest_post_number\":4,\"image_url\":null,\"created_at\":\"2025-07-25T22:29:23.139Z\",\"last_posted_at\":\"2025-07-27T02:50:01.521Z\",\"bumped\":true,\"bumped_at\":\"2025-07-27T02:50:01.521Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"I have been trying to get pathplanner working for my team, and when I try to run an auto that has the robot try to rotate, while moving, the robot will go off course and then snap back to the path at …\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"java\",\"pathplanner\"],\"tags_descriptions\":{},\"like_count\":1,\"views\":133,\"category_id\":9,\"featured_link\":null,\"has_accepted_answer\":true,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3690236,\"topic_post_liked\":false,\"topic_post_like_count\":1,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":66773,\"username\":\"patriot_programmer\",\"name\":null,\"avatar_template\":\"/letter_avatar_proxy/v4/letter/p/b9e5f3/{size}.png\"},\"posters\":[{\"extras\":\"latest\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":66773,\"username\":\"patriot_programmer\",\"name\":null,\"avatar_template\":\"/letter_avatar_proxy/v4/letter/p/b9e5f3/{size}.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster, Accepted Answer\",\"user\":{\"id\":66808,\"username\":\"MJLiner\",\"name\":\"Mason Liner\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/779978/{size}.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":65624,\"username\":\"10219Ryba\",\"name\":\"Carter Ryba\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/10219ryba/{size}/248339_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"VH-109 works fine in our main lab and regional but will not work in other rooms\",\"id\":502586,\"title\":\"VH-109 works fine in our main lab and regional but will not work in other rooms\",\"slug\":\"vh-109-works-fine-in-our-main-lab-and-regional-but-will-not-work-in-other-rooms\",\"posts_count\":5,\"reply_count\":2,\"highest_post_number\":5,\"image_url\":null,\"created_at\":\"2025-05-30T13:46:26.443Z\",\"last_posted_at\":\"2025-05-30T15:07:36.929Z\",\"bumped\":true,\"bumped_at\":\"2025-05-30T15:07:36.929Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Our VH-109 works fine in our main lab. We bring the another room across the hall or in a different building it won’t connect. The old style radio never had this problem in the other two rooms. Is it…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"vh-109\"],\"tags_descriptions\":{},\"like_count\":2,\"views\":200,\"category_id\":9,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3640857,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":61778,\"username\":\"RummelRobotics\",\"name\":\"James Goebel\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/bc8723/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":61778,\"username\":\"RummelRobotics\",\"name\":\"James Goebel\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/bc8723/{size}.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":40342,\"username\":\"AndrewMcb\",\"name\":\"Andrew McBride\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/ec9cab/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":25570,\"username\":\"alst\",\"name\":\"alst\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/alst/{size}/11646_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":15944,\"username\":\"FrankJ\",\"name\":\"FrankJ\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frankj/{size}/5392_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"Driver Station Error 44000 and 44004 D:\",\"id\":494686,\"title\":\"Driver Station Error 44000 and 44004 D:\",\"slug\":\"driver-station-error-44000-and-44004-d\",\"posts_count\":3,\"reply_count\":0,\"highest_post_number\":3,\"image_url\":\"https://www.chiefdelphi.com/uploads/default/original/3X/a/e/aedfac58bf92b9f38c4a3710b6a6f9397172dd1a.png\",\"created_at\":\"2025-03-08T00:37:16.012Z\",\"last_posted_at\":\"2025-03-08T13:30:09.975Z\",\"bumped\":true,\"bumped_at\":\"2025-03-08T13:30:09.975Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Hey everyone, we connect our robot to our driver station and after some seconds it will just disconnect. To be honest we don’t know what could it be and a year ago a team made also this question but t…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":0,\"views\":104,\"category_id\":9,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3550843,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":61412,\"username\":\"Emma4735\",\"name\":\"Emmanuel Perez\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/emma4735/{size}/216176_2.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":61412,\"username\":\"Emma4735\",\"name\":\"Emmanuel Perez\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/emma4735/{size}/216176_2.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":65757,\"username\":\"Ty3618\",\"name\":\"Ty Galle\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ty3618/{size}/256568_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":56095,\"username\":\"Rowanbladex\",\"name\":\"Zac Ogburn\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/ce7236/{size}.png\",\"trust_level\":2}}]},{\"fancy_title\":\"How to read networktable values in custom code\",\"id\":491293,\"title\":\"How to read networktable values in custom code\",\"slug\":\"how-to-read-networktable-values-in-custom-code\",\"posts_count\":6,\"reply_count\":3,\"highest_post_number\":6,\"image_url\":null,\"created_at\":\"2025-02-12T01:01:24.611Z\",\"last_posted_at\":\"2025-03-05T18:06:36.411Z\",\"bumped\":true,\"bumped_at\":\"2025-03-05T18:06:36.411Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"I want to make a program for my laptop that plays a sound when a network table/smartdashboard variable becomes true, but i am not sure how to read these values from the network table from the robot.\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"robot\"],\"tags_descriptions\":{},\"like_count\":0,\"views\":130,\"category_id\":75,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3524270,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":63063,\"username\":\"Mochatitan\",\"name\":\"6894 Lead prog/driver\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/mochatitan/{size}/237112_2.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":63063,\"username\":\"Mochatitan\",\"name\":\"6894 Lead prog/driver\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/mochatitan/{size}/237112_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":63596,\"username\":\"Otter502\",\"name\":\"Val\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/otter502/{size}/245799_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":32004,\"username\":\"dan\",\"name\":\"Dan Katzuv\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/d/eada6e/{size}.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":13575,\"username\":\"Peter_Johnson\",\"name\":\"Peter Johnson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/peter_johnson/{size}/10417_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"Trying to tune PID for our arm\",\"id\":495394,\"title\":\"Trying to tune PID for our arm\",\"slug\":\"trying-to-tune-pid-for-our-arm\",\"posts_count\":2,\"reply_count\":0,\"highest_post_number\":2,\"image_url\":null,\"created_at\":\"2025-03-13T02:29:33.711Z\",\"last_posted_at\":\"2025-03-13T03:25:20.912Z\",\"bumped\":true,\"bumped_at\":\"2025-03-13T03:25:20.912Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"After getting all our movement sorted for our arm tuning the PID has lead us to hitting a wall. We have a FF that is scaled based off of gravity along with a PID and a Slewrate limiter and the values …\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"java\"],\"tags_descriptions\":{},\"like_count\":0,\"views\":96,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3555761,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":56262,\"username\":\"Kavi1359\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/k/3bc359/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":56262,\"username\":\"Kavi1359\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/k/3bc359/{size}.png\",\"trust_level\":1}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":28240,\"username\":\"icemannie\",\"name\":\"icemannie\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/i/bc79bd/{size}.png\",\"trust_level\":2}}]}],\"tags\":[],\"tags_descriptions\":{},\"fancy_title\":\"Feedforward + PID control on a wrist?\",\"id\":444865,\"title\":\"Feedforward + PID control on a wrist?\",\"posts_count\":20,\"created_at\":\"2023-11-27T02:38:05.921Z\",\"views\":2378,\"reply_count\":13,\"like_count\":10,\"last_posted_at\":\"2024-11-28T06:09:22.137Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"feedforward-pid-control-on-a-wrist\",\"category_id\":9,\"word_count\":3567,\"deleted_at\":null,\"user_id\":61573,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_444865\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":20,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":9,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":61573,\"username\":\"SerScallywag\",\"name\":\"Johnny Palogon\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/d07c76/{size}.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":1},{\"id\":7334,\"username\":\"usbcd36\",\"name\":\"usbcd36\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/usbcd36/{size}/2444_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":50219,\"username\":\"Alex_Y\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/82dd89/{size}.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":52651,\"username\":\"apotato\",\"name\":\"Lyssia\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/apotato/{size}/204534_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":27566,\"username\":\"gregzetko\",\"name\":\"gregzetko\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gregzetko/{size}/201403_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":28614,\"username\":\"legoguy1000\",\"name\":\"Alex\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/legoguy1000/{size}/256261_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":53190,\"username\":\"truher\",\"name\":\"joel truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":21715,\"username\":\"asid61\",\"name\":\"Anand Rajamani\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/asid61/{size}/7179_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":61573,\"username\":\"SerScallywag\",\"name\":\"Johnny Palogon\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/d07c76/{size}.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/feedforward.html#feedforward-control-in-wpilib\",\"title\":\"Feedforward Control in WPILib — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":48,\"user_id\":52651,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/feedforward.html\",\"title\":\"Feedforward Control in WPILib — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":43,\"user_id\":7334,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/armbot\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":27,\"user_id\":7334,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/tuning-vertical-arm.html\",\"title\":\"Tuning a Vertical Arm Position Controller — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":21,\"user_id\":21715,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/control-system-basics.html\",\"title\":\"Control System Basics — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":16,\"user_id\":52651,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/elevatortrapezoidprofile\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":16,\"user_id\":7334,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-feedforward.html\",\"title\":\"Introduction to DC Motor Feedforward — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":14,\"user_id\":7334,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://youtu.be/oOg0gJU6bc0?si=D36gqVMGToqjvfsr\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":13,\"user_id\":27566,\"domain\":\"youtu.be\",\"root_domain\":\"youtu.be\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/pathplanning/system-identification/introduction.html#introduction-to-system-identification\",\"title\":\"Introduction to System Identification — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":11,\"user_id\":7334,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/elevatorprofiledpid/Robot.java\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":11,\"user_id\":7334,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/examples-tutorials/wpilib-examples.html\",\"title\":\"WPILib Example Projects — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":10,\"user_id\":7334,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/elevatorprofiledpid\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":8,\"user_id\":7334,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/armbotoffboard\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":8,\"user_id\":7334,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://file.tavsys.net/control/controls-engineering-in-frc.pdf\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":7,\"user_id\":7334,\"domain\":\"file.tavsys.net\",\"root_domain\":\"tavsys.net\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/ElevatorTrapezoidProfile\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":7334,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/ElevatorProfiledPID\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":7334,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/tree/main/wpilibcExamples/src/main/cpp/examples/ArmBot\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":7334,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controls-glossary.html#term-churning-losses\",\"title\":\"Controls Glossary — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":7334,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"}]},\"bookmarks\":[]}"}
