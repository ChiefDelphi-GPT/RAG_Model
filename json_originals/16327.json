{"data":"{\"post_stream\":{\"posts\":[{\"id\":2939547,\"name\":\"Sean W - 2421 Software Mentor\",\"username\":\"seanw\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\",\"created_at\":\"2021-03-14T19:33:38.619Z\",\"cooked\":\"\\u003cp\\u003eWe have a mecanum bot using Talons, but odometry is driving us nuts. The raw distance traveled on the sensors when we drive forward works but the pose is constantly about 1.4x too high.\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode\\u003epublic void periodic() {\\n    double[] speeds = getWheelSpeeds();\\n    double frontLeftSpeed = speeds[0];\\n    double rearLeftSpeed = speeds[1];\\n    double frontRightSpeed = speeds[2];\\n    double rearRightSpeed = speeds[3];\\n    \\n    var wheelspeeds = new MecanumDriveWheelSpeeds(frontLeftSpeed, frontRightSpeed,\\n                                                  rearLeftSpeed, rearRightSpeed);\\n    var m_pose = m_odometry.update(getGyroHeading(), wheelspeeds);\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eWe are getting speeds and distances with\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode\\u003epublic double getSpeedMetersPerSecond(WPI_TalonSRX talon) {\\n    return (double) (talon.getSelectedSensorVelocity(0)) / 1536.0 * TrajectoryConstants.kDriveWheelCircumferenceMeters * 10.0;\\n  }\\n\\n  public double getPositionMeters(WPI_TalonSRX talon) {\\n    return (double) talon.getSelectedSensorPosition(0) / 1536.0 * TrajectoryConstants.kDriveWheelCircumferenceMeters;\\n  }\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eWhere 1536 is the number of ticks we get off the encoder (384 encoder setting * 4 ticks per pulse) and it’s being read right off the Talon. We’re sending both the getPositionMeters and pose.getX(), but the pose is constantly 1.4x ahead of the raw sensor position, which we’ve measured to be correct.\\u003c/p\\u003e\\n\\u003cp\\u003eIt’s driving us nuts. The wheel circumference is correct and the encoders are reporting distance correctly. I’ve got no way of measuring velocity, but it’s coming from the same sensor with the same settings.\\u003c/p\\u003e\\n\\u003cp\\u003eAny thoughts on where to look next?\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-14T19:33:38.619Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":258,\"reads\":227,\"readers_count\":226,\"score\":1335.4,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Sean W - 2421 Software Mentor\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/2021-the-year-in-review/398569/5\",\"internal\":true,\"reflection\":true,\"title\":\"2021: The Year in Review\",\"clicks\":0},{\"url\":\"https://www.chiefdelphi.com/t/autonomous-code-in-c-for-mecanum/392462/10\",\"internal\":true,\"reflection\":true,\"title\":\"Autonomous code in C++ for mecanum\",\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38977,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2421 Software Mentor\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/1\",\"custom_user_title\":\"2421 Software Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true,\"can_vote\":false},{\"id\":2939555,\"name\":\"2582\",\"username\":\"chadr03\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/chadr03/{size}/195529_2.png\",\"created_at\":\"2021-03-14T20:08:09.753Z\",\"cooked\":\"\\u003cp\\u003eI would suspect it is very difficult to get accurate poise due to the inherent slip and spinning of the free wheels on a mecanum bot. I suspect you can be repeatable in your path, but that the values will likely be off.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-14T20:08:50.646Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":193,\"readers_count\":192,\"score\":43.6,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"2582\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":13827,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/2\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939558,\"name\":null,\"username\":\"veg\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/v/3be4f8/{size}.png\",\"created_at\":\"2021-03-14T20:15:46.371Z\",\"cooked\":\"\\u003cp\\u003e1 / sin(45) == 1.414\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-14T20:15:46.371Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":195,\"readers_count\":194,\"score\":64.0,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":null,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48088,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/3\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939559,\"name\":\"2582\",\"username\":\"chadr03\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/chadr03/{size}/195529_2.png\",\"created_at\":\"2021-03-14T20:20:33.352Z\",\"cooked\":\"\\u003cp\\u003eI didn’t even think of that.   Some teams in the past have also used a set of wheels as odometry wheels.  See the green omnis on 1986’s Steamworks bot at around 1:25 in the linked video.  I am pretty sure that is what they were for.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003ca href=\\\"https://youtu.be/ewTCvLp5EUo?t=85\\\" class=\\\"onebox\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003ehttps://youtu.be/ewTCvLp5EUo?t=85\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-14T20:20:33.352Z\",\"reply_count\":1,\"reply_to_post_number\":3,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":192,\"readers_count\":191,\"score\":68.4,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"2582\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://youtu.be/ewTCvLp5EUo?t=85\",\"internal\":false,\"reflection\":false,\"clicks\":2}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48088,\"username\":\"veg\",\"name\":null,\"avatar_template\":\"/letter_avatar_proxy/v4/letter/v/3be4f8/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":13827,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/4\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939583,\"name\":\"Sean W - 2421 Software Mentor\",\"username\":\"seanw\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\",\"created_at\":\"2021-03-14T22:09:48.223Z\",\"cooked\":\"\\u003cp\\u003eYea, whenever I see 1.4 I immediately think “oh that’s the square root of 2”, which made me wonder if we’re using some of the WPIlib stuff incorrectly.\\u003c/p\\u003e\\n\\u003cp\\u003eThese tests were of the bot going forward slowly, so we’re not even into strafing or slipping.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-14T22:09:48.223Z\",\"reply_count\":1,\"reply_to_post_number\":3,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":182,\"readers_count\":181,\"score\":46.4,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Sean W - 2421 Software Mentor\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48088,\"username\":\"veg\",\"name\":null,\"avatar_template\":\"/letter_avatar_proxy/v4/letter/v/3be4f8/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38977,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2421 Software Mentor\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/5\",\"custom_user_title\":\"2421 Software Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939585,\"name\":\"Sean W - 2421 Software Mentor\",\"username\":\"seanw\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\",\"created_at\":\"2021-03-14T22:39:48.394Z\",\"cooked\":\"\\u003cp\\u003eTo follow onto my last one, the wheel encoders are reading an accurate distance so I know there’s no slipping. But when we take the velocity from the encoder and pass that through the pose update, we end up with the x position getting inflated by that 1.4 factor.\\u003c/p\\u003e\\n\\u003cp\\u003eThis all seemed to work on a diff drive robot, but for that one you pass in distances not velocities.\\u003c/p\\u003e\\n\\u003cp\\u003eSo that tells me that either the velocities are being calculated incorrectly, or we’re using the pose update wrong. I’m skeptical that it would be the velocity since the distance is being read correctly.\\u003c/p\\u003e\\n\\u003cp\\u003eAll I can think of now is to pass in static values for velocity and see if we get the expected pose. e.g. hard code the velocity to 1m/s and verify the pose shows x=10 after 10 seconds.\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-14T22:39:48.394Z\",\"reply_count\":0,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":175,\"readers_count\":174,\"score\":40.0,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Sean W - 2421 Software Mentor\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":38977,\"username\":\"seanw\",\"name\":\"Sean W - 2421 Software Mentor\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38977,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2421 Software Mentor\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/6\",\"custom_user_title\":\"2421 Software Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939592,\"name\":\"Sean W - 2421 Software Mentor\",\"username\":\"seanw\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\",\"created_at\":\"2021-03-14T23:36:37.487Z\",\"cooked\":\"\\u003cp\\u003eAnd to continue to follow on to myself (google “rubber duck debugging”), I ran our bot in the simulator with the wheel velocities hard coded to 1m/s and compared that to the results of Timer.getFPGATimer(). They’re off, and if I graph the error as a percentage it’s not linear, and I don’t get the 1.4 factor I saw on our real bot.\\u003c/p\\u003e\\n\\u003cp\\u003eUsing the debugger I find myself in kinematics \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/2e07902d769191c8b9e563b36ca2243ac11f500f/wpimath/src/main/java/edu/wpi/first/wpilibj/kinematics/MecanumDriveKinematics.java#L148\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eMecanumDriveKinematics\\u003c/a\\u003e where it converts wheel speeds to chassis speeds, and what comes out of the chassis speed is an X velocity of 1.414214 or, the square root of 2.\\u003c/p\\u003e\\n\\u003cp\\u003eAt this point I’m wishing I paid more attention in my Linear Algebra class, which was back in 1996 with a teacher that spoke so softly no one could hear her. Because the way we got to this answer is by taking the wheel position matrix we started with and doing some stuff and scaling it by 1/sqrt(2) to get the inverse kinematics, invert that, and then multiply by the velocity matrix I’m sending in.\\u003c/p\\u003e\\n\\u003cp\\u003eNow I’m into the \\u003ccode\\u003egit blame\\u003c/code\\u003e of the code to find some names and comments. That code has been there for 2 years and doesn’t seem to have been changed since kinematics was introduced to WPIlib.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/pull/1787\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eIntroduce kinematics suite by prateekma · Pull Request #1787 · wpilibsuite/allwpilib · GitHub\\u003c/a\\u003e by \\u003ca class=\\\"mention\\\" href=\\\"/u/prateek_m\\\"\\u003e@Prateek_M\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eThe \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/2e07902d769191c8b9e563b36ca2243ac11f500f/wpimath/src/test/java/edu/wpi/first/wpilibj/kinematics/MecanumDriveOdometryTest.java\\\" rel=\\\"noopener nofollow ugc\\\"\\u003etests\\u003c/a\\u003e have a curious comment in them:\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode\\u003e// 5 units/sec  in the x axis (forward)\\nfinal var wheelSpeeds = new MecanumDriveWheelSpeeds(3.536, 3.536, 3.536, 3.536);\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003e5 / 3.536 = our friend root 2.\\u003c/p\\u003e\\n\\u003cp\\u003eSo this seems to be expected behavior but I’m not clear why. If all my wheels are driving forward at 1m/s, my robot does not move forward 1.4m/s. Are we measuring something wrong?\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-14T23:36:37.487Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":165,\"readers_count\":164,\"score\":53.0,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Sean W - 2421 Software Mentor\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/2e07902d769191c8b9e563b36ca2243ac11f500f/wpimath/src/main/java/edu/wpi/first/wpilibj/kinematics/MecanumDriveKinematics.java#L148\",\"internal\":false,\"reflection\":false,\"title\":\"allwpilib/MecanumDriveKinematics.java at 2e07902d769191c8b9e563b36ca2243ac11f500f · wpilibsuite/allwpilib · GitHub\",\"clicks\":2},{\"url\":\"https://github.com/wpilibsuite/allwpilib/pull/1787\",\"internal\":false,\"reflection\":false,\"title\":\"Introduce kinematics suite by prateekma · Pull Request #1787 · wpilibsuite/allwpilib · GitHub\",\"clicks\":2},{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/2e07902d769191c8b9e563b36ca2243ac11f500f/wpimath/src/test/java/edu/wpi/first/wpilibj/kinematics/MecanumDriveOdometryTest.java\",\"internal\":false,\"reflection\":false,\"title\":\"allwpilib/MecanumDriveOdometryTest.java at 2e07902d769191c8b9e563b36ca2243ac11f500f · wpilibsuite/allwpilib · GitHub\",\"clicks\":1}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38977,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2421 Software Mentor\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/7\",\"custom_user_title\":\"2421 Software Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939596,\"name\":\"Sean W - 2421 Software Mentor\",\"username\":\"seanw\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\",\"created_at\":\"2021-03-14T23:48:45.855Z\",\"cooked\":\"\\u003cp\\u003eaaaaaannnddd I have a feeling this rabbit hole goes deep. In the CPP version of the code I see this comment\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode\\u003e/*   By equation (13.12) of the state-space-guide, the wheel speeds should\\n      be as follows:\\n      velocities: fl 3.535534 fr 3.535534 rl 3.535534 rr 3.535534\\n*/\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eWhich I assume is talking about \\u003ca href=\\\"https://file.tavsys.net/control/controls-engineering-in-frc.pdf\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ehttps://file.tavsys.net/control/controls-engineering-in-frc.pdf\\u003c/a\\u003e. Equation 13.12 is in the middle of the elevator chapter. If only they specified the git SHA they were looking at! However I see that chapter 12 talks about mecanum and has this nice picture:\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003cimg src=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/1/0/108cb2494f3a8f7ed083b6c0035555c52ec89b87.png\\\" alt=\\\"Controls Engineering in the FIRST Robotics Competition 2021-03-14 19-47-30\\\" data-base62-sha1=\\\"2mp4YrAjDZese3jhKFoT5OOgYqH\\\" width=\\\"306\\\" height=\\\"205\\\"\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eoh, the wheel velocities it’s working on are the actual wheelie-doodles on the wheel itself. How the heck do we measure the speed of those!?\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-14T23:48:45.855Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":153,\"readers_count\":152,\"score\":60.6,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Sean W - 2421 Software Mentor\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://file.tavsys.net/control/controls-engineering-in-frc.pdf\",\"internal\":false,\"reflection\":false,\"clicks\":7}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38977,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2421 Software Mentor\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/8\",\"custom_user_title\":\"2421 Software Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939597,\"name\":\"Joe Ross\",\"username\":\"Joe_Ross\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/joe_ross/{size}/37_2.png\",\"created_at\":\"2021-03-14T23:53:52.810Z\",\"cooked\":\"\\u003cp\\u003eHere’s another source of mecanum kinematics derivation. It looks like it agrees with you that the forward speed should be the same as the wheel speed.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote quote-modified\\\" data-post=\\\"1\\\" data-topic=\\\"106153\\\"\\u003e\\n  \\u003cdiv class=\\\"title\\\"\\u003e\\n    \\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n    \\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/ether/48/4431_2.png\\\" class=\\\"avatar\\\"\\u003e\\n    \\u003ca href=\\\"https://www.chiefdelphi.com/t/paper-mecanum-and-omni-kinematic-and-force-analysis/106153\\\"\\u003ePaper: Mecanum and Omni Kinematic and Force Analysis\\u003c/a\\u003e \\u003ca class=\\\"badge-category__wrapper \\\" href=\\\"/c/cd-media-papers/82\\\"\\u003e\\u003cspan data-category-id=\\\"82\\\" style=\\\"--category-badge-color: #0088CC; --category-badge-text-color: #FFFFFF;\\\" data-drop-close=\\\"true\\\" class=\\\"badge-category \\\" title=\\\"FIRST-related White Papers\\\"\\u003e\\u003cspan class=\\\"badge-category__name\\\"\\u003eCD-Media: Papers\\u003c/span\\u003e\\u003c/span\\u003e\\u003c/a\\u003e\\n  \\u003c/div\\u003e\\n  \\u003cblockquote\\u003e\\n    Thread created automatically to discuss a document in CD-Media. \\nMecanum and Omni Kinematic and Force Analysis by: Ether  Mecanum and Omni wheel kinematic and force analysis and programming.  Omni vs mecanum force and kinematic comparison. Bump-free mecanum roller profile.  . \\n-----------------Mecanum Kinematic Analysis--------------------------- \\n\\u003ca class=\\\"attachment\\\" href=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/9/3/937da7cbd006480f2b47eb9ee7bd8567b8f22dd9.pdf\\\"\\u003eMecanum Kinematic Analysis 100531.pdf\\u003c/a\\u003e (60.3 KB)  \\nGiven a desired vehicle motion, shows how to calculate \\nthe necessary mecanum wheel speeds to achiev…\\n  \\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\",\"post_number\":9,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-14T23:53:52.810Z\",\"reply_count\":0,\"reply_to_post_number\":8,\"quote_count\":0,\"incoming_link_count\":8,\"reads\":152,\"readers_count\":151,\"score\":70.4,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Joe Ross\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/paper-mecanum-and-omni-kinematic-and-force-analysis/106153\",\"internal\":true,\"reflection\":false,\"title\":\"Paper: Mecanum and Omni Kinematic and Force Analysis\",\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":38977,\"username\":\"seanw\",\"name\":\"Sean W - 2421 Software Mentor\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":true,\"admin\":false,\"staff\":true,\"user_id\":65,\"hidden\":false,\"trust_level\":4,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/9\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939599,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2021-03-15T00:19:07.488Z\",\"cooked\":\"\\u003cp\\u003eYea, some chapters got reordered since then. Section 12.4.2 “Mecanum drive” from commit f6e24f5 gets the 1/sqrt(2) factor used in MecanumDriveKinematics from projecting the chassis velocity vector onto the wheel velocity vector.\\u003c/p\\u003e\\n\\u003caside class=\\\"onebox githubblob\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/native/cpp/kinematics/MecanumDriveKinematics.cpp#L55-L65\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch4\\u003e\\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/native/cpp/kinematics/MecanumDriveKinematics.cpp#L55-L65\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ewpilibsuite/allwpilib/blob/main/wpimath/src/main/native/cpp/kinematics/MecanumDriveKinematics.cpp#L55-L65\\u003c/a\\u003e\\u003c/h4\\u003e\\n\\u003cpre class=\\\"onebox\\\"\\u003e\\u003ccode class=\\\"lang-cpp\\\"\\u003e\\u003col class=\\\"start lines\\\" start=\\\"55\\\" style=\\\"counter-reset: li-counter 54 ;\\\"\\u003e\\n\\u003cli\\u003evoid MecanumDriveKinematics::SetInverseKinematics(Translation2d fl,\\u003c/li\\u003e\\u003cli\\u003e                                                  Translation2d fr,\\u003c/li\\u003e\\u003cli\\u003e                                                  Translation2d rl,\\u003c/li\\u003e\\u003cli\\u003e                                                  Translation2d rr) const {\\u003c/li\\u003e\\u003cli\\u003e  // clang-format off\\u003c/li\\u003e\\u003cli\\u003e  m_inverseKinematics \\u0026lt;\\u0026lt; 1, -1, (-(fl.X() + fl.Y())).template to\\u0026lt;double\\u0026gt;(),\\u003c/li\\u003e\\u003cli\\u003e                         1,  1, (fr.X() - fr.Y()).template to\\u0026lt;double\\u0026gt;(),\\u003c/li\\u003e\\u003cli\\u003e                         1,  1, (rl.X() - rl.Y()).template to\\u0026lt;double\\u0026gt;(),\\u003c/li\\u003e\\u003cli\\u003e                         1, -1, (-(rr.X() + rr.Y())).template to\\u0026lt;double\\u0026gt;();\\u003c/li\\u003e\\u003cli\\u003e  // clang-format on\\u003c/li\\u003e\\u003cli\\u003e  m_inverseKinematics /= std::sqrt(2);\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\",\"post_number\":10,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-15T00:27:09.149Z\",\"reply_count\":1,\"reply_to_post_number\":8,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":148,\"readers_count\":147,\"score\":39.6,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/native/cpp/kinematics/MecanumDriveKinematics.cpp#L55-L65\",\"internal\":false,\"reflection\":false,\"title\":\"allwpilib/MecanumDriveKinematics.cpp at main · wpilibsuite/allwpilib · GitHub\",\"clicks\":1}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":38977,\"username\":\"seanw\",\"name\":\"Sean W - 2421 Software Mentor\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/10\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939601,\"name\":\"Sean W - 2421 Software Mentor\",\"username\":\"seanw\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\",\"created_at\":\"2021-03-15T00:31:04.978Z\",\"cooked\":\"\\u003cp\\u003eThanks. Now I’m understanding where the math comes from but not quite how we’re expected to apply it. It looks like the mecanum drive kinematics in WPIlib expects us to be measuring the speeds of the rollers on the wheels, not the wheels themselves. Is there a translation step somewhere to go from wheel speeds to roller speeds? Or are we updating the pose incorrectly?\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-15T00:31:04.978Z\",\"reply_count\":1,\"reply_to_post_number\":10,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":138,\"readers_count\":137,\"score\":37.6,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Sean W - 2421 Software Mentor\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38977,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2421 Software Mentor\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/11\",\"custom_user_title\":\"2421 Software Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939603,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2021-03-15T00:35:19.611Z\",\"cooked\":\"\\u003cp\\u003eI guess the issue is when going forward, the correct speed to use is the wheel speed, but going sideways, you need the roller speed (mecanum chasses go slower sideways than forward for the same wheel speed magnitudes).\\u003c/p\\u003e\\n\\u003cp\\u003eSomething like this?\\u003cbr\\u003e\\n\\u003cspan class=\\\"math\\\"\\u003e\\n\\\\begin{bmatrix}\\n  v_{fl} \\\\\\\\\\n  v_{fr} \\\\\\\\\\n  v_{rl} \\\\\\\\\\n  v_{rr}\\n\\\\end{bmatrix} =\\n\\\\begin{bmatrix}\\n  1 \\u0026amp; -\\\\sqrt{2} \\u0026amp; -(r_{fl_x} + r_{fl_y}) \\\\\\\\\\n  1 \\u0026amp; \\\\sqrt{2} \\u0026amp; r_{fr_x} - r_{fr_y} \\\\\\\\\\n  1 \\u0026amp; \\\\sqrt{2} \\u0026amp; r_{rl_x} - r_{rl_y} \\\\\\\\\\n  1 \\u0026amp; -\\\\sqrt{2} \\u0026amp; -(r_{rr_x} + r_{rr_y})\\n\\\\end{bmatrix}\\n\\\\begin{bmatrix}\\n  v_x \\\\\\\\ v_y \\\\\\\\ \\\\omega\\n\\\\end{bmatrix}\\u003c/span\\u003e\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-15T00:49:07.468Z\",\"reply_count\":1,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":136,\"readers_count\":135,\"score\":37.2,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":38977,\"username\":\"seanw\",\"name\":\"Sean W - 2421 Software Mentor\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/12\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939604,\"name\":\"jspatz1\",\"username\":\"jspatz1\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jspatz1/{size}/3252_2.png\",\"created_at\":\"2021-03-15T00:38:47.773Z\",\"cooked\":\"\\u003cp\\u003eUsing separate odometer wheels in X and Y, like this example from 1986, is very common in FTC where most teams use mecanums. Nearly all the top teams use them to achieve their autonomous movements. It is inherently accurate as it is measuring the result, not the input, of wheel rotations. No math, no derivation, no slippage, just a precise measure of how far the robot has moved in X and Y.\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-15T00:44:45.556Z\",\"reply_count\":1,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":135,\"readers_count\":134,\"score\":52.0,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"jspatz1\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":13827,\"username\":\"chadr03\",\"name\":\"2582\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/chadr03/{size}/195529_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":9453,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/13\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939606,\"name\":\"Sean W - 2421 Software Mentor\",\"username\":\"seanw\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\",\"created_at\":\"2021-03-15T00:48:56.307Z\",\"cooked\":\"\\u003cp\\u003eYea, I’m with you there. I’m just stuck on the practicality of measuring the roller speed. I’ll noodle over that translation with the team and see if that works for us or if we need to try the odometer wheels that others have mentioned.\\u003c/p\\u003e\\n\\u003cp\\u003eThanks for the help!\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-15T00:48:56.307Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":132,\"readers_count\":131,\"score\":36.4,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Sean W - 2421 Software Mentor\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38977,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2421 Software Mentor\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/14\",\"custom_user_title\":\"2421 Software Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939609,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2021-03-15T00:55:07.293Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"seanw\\\" data-post=\\\"14\\\" data-topic=\\\"392401\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/seanw/48/120003_2.png\\\" class=\\\"avatar\\\"\\u003e seanw:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eI’m just stuck on the practicality of measuring the roller speed.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eYou’re not supposed to. The original intent was to use wheel speeds, not roller speeds; I just messed up the derivation. The corrected transformation matrix above seems to give the right answers. You can copy the MecanumDriveKinematics and MecanumDriveOdometry classes out of WPILib and fix the matrix while we try to prove it’s correct in a more rigorous fashion, and get a patch merged.\\u003c/p\\u003e\\n\\u003cpre data-code-wrap=\\\"python\\\"\\u003e\\u003ccode class=\\\"lang-python\\\"\\u003e#!/usr/bin/env python3\\n\\nimport math\\nimport numpy as np\\n\\ndef main():\\n    r = 5\\n\\n    \\\"\\\"\\\"\\n    v_fl = v_x - v_y - omega * r\\n    v_fr = v_x + v_y + omega * r\\n    v_rl = v_x + v_y + omega * r\\n    v_rr = v_x - v_y - omega * r\\n\\n    [v_fl]   [ 1 -sqrt(2) -r][v_x]\\n    [v_fr] = [ 1  sqrt(2)  r][v_y]\\n    [v_rl]   [ 1  sqrt(2)  r][omega]\\n    [v_rr]   [ 1 -sqrt(2) -r]\\n\\n    Solve for [v_x, v_y, omega] by multiplying wheel speeds by pseudoinverse of\\n    4 x 3 matrix.\\n    \\\"\\\"\\\"\\n    rflx = 5\\n    rfly = 5\\n    M = np.array([[1, -math.sqrt(2), -r],\\n                  [1,  math.sqrt(2),  r],\\n                  [1,  math.sqrt(2),  r],\\n                  [1, -math.sqrt(2), -r]])\\n    wheels = np.array([[2],\\n                       [2],\\n                       [2],\\n                       [2]])\\n    print(\\\"v_x, v_y, omega =\\\")\\n    print(np.linalg.pinv(M) @ wheels)\\n\\n    chassis_speeds = np.array([[2], [0], [0]])\\n    print(\\\"2 along x: fl, fr, rl, rr=\\\")\\n    print(M @ chassis_speeds)\\n\\n    chassis_speeds = np.array([[0], [2], [0]])\\n    print(\\\"2 along y: fl, fr, rl, rr=\\\")\\n    print(M @ chassis_speeds)\\n\\nif __name__ == \\\"__main__\\\":\\n    main()\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eGives:\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003ev_x, v_y, omega =\\n[[2.00000000e+00]\\n [1.04083409e-17]\\n [4.16333634e-17]]\\n2 along x: fl, fr, rl, rr=\\n[[2.]\\n [2.]\\n [2.]\\n [2.]]\\n2 along y: fl, fr, rl, rr=\\n[[-2.82842712]\\n [ 2.82842712]\\n [ 2.82842712]\\n [-2.82842712]]\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eUnless the mecanum drivetrain my team made in 2013 was just done incorrectly, and it should be able to achieve the same speed forward and sideways for the same input voltages.\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-15T01:01:02.901Z\",\"reply_count\":1,\"reply_to_post_number\":14,\"quote_count\":1,\"incoming_link_count\":2,\"reads\":134,\"readers_count\":133,\"score\":41.8,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/15\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2939611,\"name\":\"Sean W - 2421 Software Mentor\",\"username\":\"seanw\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\",\"created_at\":\"2021-03-15T00:58:33.815Z\",\"cooked\":\"\\u003cp\\u003eAha! Sorry for being dense. That makes sense now, we’ll give that a shot.\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-15T00:58:33.815Z\",\"reply_count\":0,\"reply_to_post_number\":15,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":118,\"readers_count\":117,\"score\":33.6,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Sean W - 2421 Software Mentor\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38977,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2421 Software Mentor\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/16\",\"custom_user_title\":\"2421 Software Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2940170,\"name\":\"Sean W - 2421 Software Mentor\",\"username\":\"seanw\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\",\"created_at\":\"2021-03-16T18:51:01.353Z\",\"cooked\":\"\\u003cp\\u003eI’m a little fuzzy on the nomenclature here and still doing this in a simulator (which seems to work at least for forward), but I’ve copied in all the necessary code into our project and added this to MecanumDriveKinematics.java:\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode\\u003e  private void setCorrectedKinematics(Translation2d fl, Translation2d fr, Translation2d rl, Translation2d rr) {\\n    m_correctedKinematics.setRow(0, 0, 1, -Math.sqrt(2), -(fl.getX() + fl.getY()));\\n    m_correctedKinematics.setRow(1, 0, 1, Math.sqrt(2), fr.getX() - fr.getY());\\n    m_correctedKinematics.setRow(2, 0, 1, Math.sqrt(2), rl.getX() - rl.getY());\\n    m_correctedKinematics.setRow(3, 0, 1, -Math.sqrt(2), -(rr.getX() + rr.getY()));\\n    m_correctedKinematics = m_correctedKinematics.pseudoInverse();\\n  }\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eAnd then in toChassisSpeeds I’ve swapped the corrected matrix in:\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode\\u003e   // var chassisSpeedsVector = m_forwardKinematics.mult(wheelSpeedsMatrix);\\n   var chassisSpeedsVector = m_correctedKinematics.mult(wheelSpeedsMatrix);\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eDoes that seem sane?\\u003c/p\\u003e\\n\\u003cp\\u003eThanks\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-16T18:51:01.353Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":109,\"readers_count\":108,\"score\":41.8,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Sean W - 2421 Software Mentor\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38977,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2421 Software Mentor\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/17\",\"custom_user_title\":\"2421 Software Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2940629,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2021-03-17T21:16:58.466Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"seanw\\\" data-post=\\\"17\\\" data-topic=\\\"392401\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/seanw/48/120003_2.png\\\" class=\\\"avatar\\\"\\u003e seanw:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eDoes that seem sane?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eYea. Let me know if the odometry is off sideways as well, which would mean the sqrt(2) should be 1. I haven’t used a mecanum drive in years, so idk what the correct drivetrain behavior is.\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-17T21:16:58.466Z\",\"reply_count\":2,\"reply_to_post_number\":17,\"quote_count\":1,\"incoming_link_count\":6,\"reads\":105,\"readers_count\":104,\"score\":61.0,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/18\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2940672,\"name\":null,\"username\":\"jkenney\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/j/b9bd4f/{size}.png\",\"created_at\":\"2021-03-18T01:12:18.970Z\",\"cooked\":\"\\u003cp\\u003eFor a mecanum drive with rollers mounted at 45 degrees, there should be no “sqrt(2)” involved in calculating the forward or sideways speed. Pure forward and pure sideways travel will be at the same speed the drive wheels turn (assuming no skid).\\u003c/p\\u003e\\n\\u003cp\\u003eBut (assuming a square drivetrain) there is a “sqrt(2)” involved in calculating the change in angle. For pure rotation,\\u003c/p\\u003e\\n\\u003cp\\u003edelta_wheel_distance = R * sqrt(2) * delta_heading\\u003c/p\\u003e\\n\\u003cp\\u003ewhere R is the distance from the robot center to each drive wheel. This changes slightly for a drive train that is a non-square rectangle:\\u003c/p\\u003e\\n\\u003cp\\u003edelta_wheel_distance = (W/2 + L/2) * delta_heading\\u003c/p\\u003e\\n\\u003cp\\u003ewhere W = wheel base width, and L = wheel base length.\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-18T01:12:18.970Z\",\"reply_count\":1,\"reply_to_post_number\":18,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":103,\"readers_count\":102,\"score\":40.6,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":null,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":47525,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/19\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":2940748,\"name\":null,\"username\":\"veg\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/v/3be4f8/{size}.png\",\"created_at\":\"2021-03-18T10:26:04.694Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"jkenney\\\" data-post=\\\"19\\\" data-topic=\\\"392401\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/j/b9bd4f/48.png\\\" class=\\\"avatar\\\"\\u003e jkenney:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003e(assuming no skid).\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eIf the wheels are vectoring at right angles to one another, how is it possible to have no skid?\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":30,\"updated_at\":\"2021-03-18T10:26:04.694Z\",\"reply_count\":1,\"reply_to_post_number\":19,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":95,\"readers_count\":94,\"score\":29.0,\"yours\":false,\"topic_id\":392401,\"topic_slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"display_username\":null,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48088,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/mecanum-odometry-off-but-sensors-seem-ok/392401/20\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true}],\"stream\":[2939547,2939555,2939558,2939559,2939583,2939585,2939592,2939596,2939597,2939599,2939601,2939603,2939604,2939606,2939609,2939611,2940170,2940629,2940672,2940748,2940751,2940753,2940793,2940796,2940812,2942654,2942854,2976030,2976052,3096805]},\"timeline_lookup\":[[1,1672],[17,1670],[18,1669],[26,1661],[27,1660],[28,1431],[30,1066]],\"tags\":[],\"tags_descriptions\":{},\"fancy_title\":\"Mecanum Odometry off but sensors seem ok\",\"id\":392401,\"title\":\"Mecanum Odometry off but sensors seem ok\",\"posts_count\":30,\"created_at\":\"2021-03-14T19:33:38.341Z\",\"views\":3367,\"reply_count\":21,\"like_count\":4,\"last_posted_at\":\"2022-11-11T00:37:00.757Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"mecanum-odometry-off-but-sensors-seem-ok\",\"category_id\":75,\"word_count\":2714,\"deleted_at\":null,\"user_id\":38977,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_392401\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":30,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":10,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"accepted_answer\":{\"post_number\":29,\"username\":\"Peter_Johnson\",\"name\":null,\"excerpt\":\"As stated in the post previous to yours, unfortunately many of the odometry error parameters in Mecanum drive robots (particularly for lateral movement) can only be compensated for using empirical measurements on a real robot, and will vary from robot to robot and likely over time as well (e.g. due \\u0026hellip;\",\"accepter_name\":null},\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":38977,\"username\":\"seanw\",\"name\":\"Sean W - 2421 Software Mentor\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\",\"post_count\":10,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"post_count\":5,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":47525,\"username\":\"jkenney\",\"name\":null,\"avatar_template\":\"/letter_avatar_proxy/v4/letter/j/b9bd4f/{size}.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":48088,\"username\":\"veg\",\"name\":null,\"avatar_template\":\"/letter_avatar_proxy/v4/letter/v/3be4f8/{size}.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":65,\"username\":\"Joe_Ross\",\"name\":\"Joe Ross\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/joe_ross/{size}/37_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"moderator\":true,\"trust_level\":4},{\"id\":13827,\"username\":\"chadr03\",\"name\":\"2582\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/chadr03/{size}/195529_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":22335,\"username\":\"GeeTwo\",\"name\":\"Gus Michel II\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/geetwo/{size}/120962_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":46068,\"username\":\"Jackarivera\",\"name\":\"Jack Rivera\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jackarivera/{size}/142958_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":13575,\"username\":\"Peter_Johnson\",\"name\":\"Peter Johnson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/peter_johnson/{size}/10417_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":9453,\"username\":\"jspatz1\",\"name\":\"jspatz1\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jspatz1/{size}/3252_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":1}],\"created_by\":{\"id\":38977,\"username\":\"seanw\",\"name\":\"Sean W - 2421 Software Mentor\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/blame/main/wpimath/src/main/java/edu/wpi/first/math/kinematics/MecanumDriveKinematics.java\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":9,\"user_id\":38977,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://file.tavsys.net/control/controls-engineering-in-frc.pdf\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":7,\"user_id\":38977,\"domain\":\"file.tavsys.net\",\"root_domain\":\"tavsys.net\"},{\"url\":\"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6983209/\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":5,\"user_id\":65,\"domain\":\"www.ncbi.nlm.nih.gov\",\"root_domain\":\"nih.gov\"},{\"url\":\"https://youtu.be/ewTCvLp5EUo?t=85\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":13827,\"domain\":\"youtu.be\",\"root_domain\":\"youtu.be\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/2e07902d769191c8b9e563b36ca2243ac11f500f/wpimath/src/main/java/edu/wpi/first/wpilibj/kinematics/MecanumDriveKinematics.java#L148\",\"title\":\"allwpilib/MecanumDriveKinematics.java at 2e07902d769191c8b9e563b36ca2243ac11f500f · wpilibsuite/allwpilib · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":38977,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/pull/1787\",\"title\":\"Introduce kinematics suite by prateekma · Pull Request #1787 · wpilibsuite/allwpilib · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":38977,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/native/cpp/kinematics/MecanumDriveKinematics.cpp#L55-L65\",\"title\":\"allwpilib/MecanumDriveKinematics.cpp at main · wpilibsuite/allwpilib · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":16846,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/2e07902d769191c8b9e563b36ca2243ac11f500f/wpimath/src/test/java/edu/wpi/first/wpilibj/kinematics/MecanumDriveOdometryTest.java\",\"title\":\"allwpilib/MecanumDriveOdometryTest.java at 2e07902d769191c8b9e563b36ca2243ac11f500f · wpilibsuite/allwpilib · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":38977,\"domain\":\"github.com\",\"root_domain\":\"github.com\"}]},\"bookmarks\":[]}"}
