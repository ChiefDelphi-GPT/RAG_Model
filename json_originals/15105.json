{"data":"{\"post_stream\":{\"posts\":[{\"id\":3003146,\"name\":\"\",\"username\":\"FRC6302\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\",\"created_at\":\"2022-02-04T22:44:49.096Z\",\"cooked\":\"\\u003cp\\u003eHello, I am trying to incorporate ideas seen in multiple posts (\\u003ca href=\\\"https://www.chiefdelphi.com/t/turret-control-pid-ks-only-pid-full-feedforward-or-something-else/393068/12\\\"\\u003epost 1 about rotational feedforward\\u003c/a\\u003e and \\u003ca href=\\\"https://www.chiefdelphi.com/t/have-ball-turret-compensate-for-robot-left-and-right-movement/381782/6\\\"\\u003epost 2 about tangential feedforward\\u003c/a\\u003e) to code the feedforward for our turret this year. As I want the turret to stay locked on the target as we move around the field, I think the feedforward will have to take into account the tangential velocity of the robot with respect to the target as well as the rotational velocity of the robot (we are using mecanum drive).\\u003c/p\\u003e\\n\\u003cp\\u003eI think I have figured out how to find the tangential feedforward based on the robot’s tangential velocity and distance to the target, and the rotational feedforward would just be the opposite of the robot’s angular velocity.\\u003c/p\\u003e\\n\\u003cp\\u003eAlso I was thinking I should use the WPILib SimpleMotorFeedforward class along with the SysID tool to make it more accurate.\\u003c/p\\u003e\\n\\u003cp\\u003eSo I was wondering how exactly to implement all of this together on top of \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e control. I was thinking something along the lines of\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003emotorTurret.setVoltage(pidController.calculate(getEncoderVelocity(), setpoint) + simpleFeedforward.calculate(setpoint) + tangentialFeedforward + rotationalFeedforward);\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eWould this work? Should I be using a velocity or positional \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e here? I am pretty new to complicated control stuff like this. Thanks.\\u003c/p\\u003e\\n\\u003cp\\u003e-Samuel\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-04T22:46:50.532Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":399,\"reads\":463,\"readers_count\":462,\"score\":2072.6,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/turret-control-pid-ks-only-pid-full-feedforward-or-something-else/393068/12\",\"internal\":true,\"reflection\":false,\"title\":\"Turret Control - PID + kS Only, PID + Full Feedforward, or something else?\",\"clicks\":65},{\"url\":\"https://www.chiefdelphi.com/t/have-ball-turret-compensate-for-robot-left-and-right-movement/381782/6\",\"internal\":true,\"reflection\":false,\"title\":\"Have ball turret compensate for robot left and right movement?\",\"clicks\":49},{\"url\":\"https://www.chiefdelphi.com/t/gyroscope-feedforward-and-pid/403726/2\",\"internal\":true,\"reflection\":true,\"title\":\"Gyroscope FeedForward and PID\",\"clicks\":1},{\"url\":\"https://www.chiefdelphi.com/t/seeking-pose-estimation-example-for-turrets/407248/5\",\"internal\":true,\"reflection\":true,\"title\":\"Seeking Pose Estimation Example for Turrets\",\"clicks\":1}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48779,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Sam - Programming Lead\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/1\",\"custom_user_title\":\"Sam - Programming Lead\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true,\"can_vote\":false},{\"id\":3003148,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-02-04T22:49:16.517Z\",\"cooked\":\"\\u003cp\\u003eYou need to be careful that you “cascade” the controllers in a coherent way given their dimensions.  Your tangential and rotational feedforwards here are probably in units of velocity; that suggests that they should modify the setpoint itself, and thus cascade to your \\u003ccode\\u003eSimpleMotorFeedforward\\u003c/code\\u003e and \\u003ccode\\u003ePIDController\\u003c/code\\u003es.\\u003c/p\\u003e\\n\\u003cp\\u003eI am curious as to why you’re performing velocity control on your turret; you can probably do fine with a “flat” position controller (in which case you only need to cascade to the \\u003ccode\\u003eSimpleMotorFeedforward\\u003c/code\\u003e).\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-05T20:59:53.418Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":6,\"reads\":411,\"readers_count\":410,\"score\":137.2,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/2\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":true,\"topic_accepted_answer\":true},{\"id\":3003161,\"name\":\"\",\"username\":\"FRC6302\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\",\"created_at\":\"2022-02-04T23:21:55.905Z\",\"cooked\":\"\\u003cp\\u003eHonestly I don’t really know what I am doing, and I think I have confused myself. I don’t have any programming mentors on my team so I have had to learn all of this on my own.\\u003c/p\\u003e\\n\\u003cp\\u003eThe end goal for this is to have the turret constantly track the target throughout the match and be able to score into the high goal while moving in any direction by compensating for the robot’s movement in our shot. I am working on the turret stuff now and am going to figure out all the details of tuning the actual shot and accounting for the robot’s velocity by offsetting the angle of the shot later. I know this is something that will be hard to pull off but I am somewhat confident I can figure it all out.\\u003c/p\\u003e\\n\\u003cp\\u003eHere is my turret subsystem:\\u003c/p\\u003e\\u003caside class=\\\"onebox githubblob\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003ca href=\\\"https://github.com/FRC6302/2022Bot1/blob/master/src/main/java/frc/robot/subsystems/Turret.java\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch4\\u003e\\u003ca href=\\\"https://github.com/FRC6302/2022Bot1/blob/master/src/main/java/frc/robot/subsystems/Turret.java\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eFRC6302/2022Bot1/blob/master/src/main/java/frc/robot/subsystems/Turret.java\\u003c/a\\u003e\\u003c/h4\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003e// Copyright (c) FIRST and other WPILib contributors.\\n// Open Source Software; you can modify and/or share it under the terms of\\n// the WPILib BSD license file in the root directory of this project.\\n\\npackage frc.robot.subsystems;\\n\\nimport com.ctre.phoenix.motorcontrol.ControlMode;\\nimport com.ctre.phoenix.motorcontrol.NeutralMode;\\nimport com.ctre.phoenix.motorcontrol.can.WPI_TalonSRX;\\n\\nimport edu.wpi.first.math.controller.ProfiledPIDController;\\nimport edu.wpi.first.math.controller.SimpleMotorFeedforward;\\nimport edu.wpi.first.wpilibj.Encoder;\\nimport edu.wpi.first.wpilibj2.command.SubsystemBase;\\nimport frc.robot.Constants;\\n\\npublic class Turret extends SubsystemBase {\\n  private WPI_TalonSRX motorTurret = new WPI_TalonSRX(Constants.motorTurret);\\n\\n  private Encoder turretEncoder = new Encoder(Constants.encTurretA, Constants.encTurretB, false);\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\n  This file has been truncated. \\u003ca href=\\\"https://github.com/FRC6302/2022Bot1/blob/master/src/main/java/frc/robot/subsystems/Turret.java\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eshow original\\u003c/a\\u003e\\n\\n  \\u003c/article\\u003e\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eAnd here is the command so far for tracking the target throughout the match which I will have running 24/7:\\u003c/p\\u003e\\u003caside class=\\\"onebox githubblob\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003ca href=\\\"https://github.com/FRC6302/2022Bot1/blob/master/src/main/java/frc/robot/commands/TrackTarget.java\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch4\\u003e\\u003ca href=\\\"https://github.com/FRC6302/2022Bot1/blob/master/src/main/java/frc/robot/commands/TrackTarget.java\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eFRC6302/2022Bot1/blob/master/src/main/java/frc/robot/commands/TrackTarget.java\\u003c/a\\u003e\\u003c/h4\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003e// Copyright (c) FIRST and other WPILib contributors.\\n// Open Source Software; you can modify and/or share it under the terms of\\n// the WPILib BSD license file in the root directory of this project.\\n\\npackage frc.robot.commands;\\n\\nimport edu.wpi.first.wpilibj.DriverStation;\\nimport edu.wpi.first.wpilibj2.command.CommandBase;\\nimport frc.robot.Constants;\\nimport frc.robot.subsystems.Hood;\\nimport frc.robot.subsystems.Limelight;\\nimport frc.robot.subsystems.MecDriveTrain;\\nimport frc.robot.subsystems.Shooter;\\nimport frc.robot.subsystems.Turret;\\n\\npublic class TrackTarget extends CommandBase {\\n  MecDriveTrain mecDriveTrain;\\n  Turret turret;\\n  Hood hood;\\n  Shooter shooter;\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\n  This file has been truncated. \\u003ca href=\\\"https://github.com/FRC6302/2022Bot1/blob/master/src/main/java/frc/robot/commands/TrackTarget.java\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eshow original\\u003c/a\\u003e\\n\\n  \\u003c/article\\u003e\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eAlso, could you explain what you mean by cascading the controllers?\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-04T23:21:55.905Z\",\"reply_count\":0,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":25,\"reads\":387,\"readers_count\":386,\"score\":202.4,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/FRC6302/2022Bot1/blob/master/src/main/java/frc/robot/subsystems/Turret.java\",\"internal\":false,\"reflection\":false,\"clicks\":49},{\"url\":\"https://github.com/FRC6302/2022Bot1/blob/master/src/main/java/frc/robot/commands/TrackTarget.java\",\"internal\":false,\"reflection\":false,\"clicks\":30}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48779,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Sam - Programming Lead\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/3\",\"custom_user_title\":\"Sam - Programming Lead\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3003227,\"name\":\"\",\"username\":\"FRC6302\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\",\"created_at\":\"2022-02-05T03:12:05.693Z\",\"cooked\":\"\\u003cp\\u003eI have thought about it some more and I think I understand it better. Is this what you were thinking when you talked about modifying the setpoint directly?\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003esetpointV = setpointV + tangentialFeedforward + rotationalFeedforward;\\u003cbr\\u003e\\nmotorTurret.setVoltage(pidController.calculate(getEncVelocity(), setpointV) + simpleFeedforward.calculate(setpointV));\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eThe problem I am having with just using a position pid instead of a velocity one is that I am not sure what I would be putting as the position setpoint. With the velocity control, I can just make the desired velocity setpoint (before adding the feedforward) proportional to the Limelight tx angle. If I wanted to use position control then I think I would have to take into account the robot’s position on the field because if I was at a different place on the field then the angle (relative to the robot) that the turret would need to be in order to score would be different. Is this correct or am I completely missing something simple?\\u003c/p\\u003e\\n\\u003cp\\u003eEdit: if I did position control, would setting the setpoint to be turretAngle - tx work? Then I could do:\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003edouble pidOutput = pidController.calculate(angle, angle - tx);\\u003cbr\\u003e\\nmotorTurret.setVoltage(simpleFeedforward.calculate(pidOutput) + tangentialFeedforward + rotationalFeedforward);\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eIs this what you meant when you said this?\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Oblarg\\\" data-post=\\\"2\\\" data-topic=\\\"402194\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/oblarg/48/161674_2.png\\\" class=\\\"avatar\\\"\\u003e Oblarg:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eyou can probably do fine with a “flat” position controller (in which case you only need to cascade to the \\u003ccode\\u003eSimpleMotorFeedforward\\u003c/code\\u003e).\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eAssuming both velocity and position control work, is there any benefit to using one over the other or would they have the similar results/smoothness?\\u003c/p\\u003e\\n\\u003cp\\u003eEdit 2: I have come to the realization that\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003epidController.calculate(angle, angle - tx)\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003ewould give the same exact output as\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003epidController.calculate(tx, 0)\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003ewhich is probably what you meant in the first place. Oh man.\\u003c/p\\u003e\\n\\u003cp\\u003eAlso, for the position control, instead of this line:\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cpre\\u003e\\u003ccode\\u003emotorTurret.setVoltage(simpleFeedforward.calculate(pidOutput) + tangentialFeedforward + rotationalFeedforward);\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003ewould I be better off with this one:\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003emotorTurret.setVoltage(simpleFeedforward.calculate(pidOutput + tangentialFeedforward + rotationalFeedforward));\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-05T15:13:38.056Z\",\"reply_count\":1,\"reply_to_post_number\":2,\"quote_count\":1,\"incoming_link_count\":15,\"reads\":283,\"readers_count\":282,\"score\":136.6,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":5,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48779,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Sam - Programming Lead\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/4\",\"custom_user_title\":\"Sam - Programming Lead\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3003508,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-02-05T20:43:26.784Z\",\"cooked\":\"\\u003cp\\u003eYes, you seem to have figured out the gist of the thing.  Keep track of the dimensions, and it will all work out.\\u003c/p\\u003e\\n\\u003cp\\u003ePosition control is equivalent to velocity control in this situation, once you have tuned it properly - every cascaded controller has a flat equivalent.  The position controller is simpler in structure, however.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-05T20:44:26.000Z\",\"reply_count\":1,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":233,\"readers_count\":232,\"score\":86.6,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48779,\"username\":\"FRC6302\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/5\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3003522,\"name\":\"\",\"username\":\"FRC6302\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\",\"created_at\":\"2022-02-05T20:59:41.744Z\",\"cooked\":\"\\u003cp\\u003eAwesome! So go with this line for the position control then?\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003emotorTurret.setVoltage(simpleFeedforward.calculate(pidOutput + tangentialFeedforward + rotationalFeedforward));\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eThanks\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-05T20:59:41.744Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":227,\"readers_count\":226,\"score\":65.4,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48779,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Sam - Programming Lead\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/6\",\"custom_user_title\":\"Sam - Programming Lead\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3003602,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-02-05T23:09:13.159Z\",\"cooked\":\"\\u003cp\\u003eNot quite; the PID output is a voltage, not a velocity.  It should be added to the output of the feedforward calculation.  The feedforward calculation looks correct otherwise.\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-05T23:09:13.159Z\",\"reply_count\":2,\"reply_to_post_number\":6,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":221,\"readers_count\":220,\"score\":59.2,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48779,\"username\":\"FRC6302\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/7\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3003683,\"name\":\"\",\"username\":\"FRC6302\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\",\"created_at\":\"2022-02-06T02:28:33.260Z\",\"cooked\":\"\\u003cp\\u003eOh ok that makes sense. So this then?\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003emotorTurret.setVoltage(pidOutput + simpleFeedforward.calculate(tangentialFeedforward + rotationalFeedforward));\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eThe way I understand things, the feedforward should be doing most of the work here if I want it to run smoothly, so do you think I should be making sure my pidOutput is never more than say 3 volts (by choosing a lower kp value) or something like that?\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-06T02:33:50.689Z\",\"reply_count\":1,\"reply_to_post_number\":7,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":208,\"readers_count\":207,\"score\":81.6,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48779,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Sam - Programming Lead\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/8\",\"custom_user_title\":\"Sam - Programming Lead\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3003709,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-02-06T03:59:18.125Z\",\"cooked\":\"\\u003cp\\u003eYour choice of kP should handle that, yes.\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-06T03:59:18.125Z\",\"reply_count\":0,\"reply_to_post_number\":8,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":194,\"readers_count\":193,\"score\":38.8,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48779,\"username\":\"FRC6302\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/9\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3006691,\"name\":\"\",\"username\":\"FRC6302\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\",\"created_at\":\"2022-02-12T17:46:23.269Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Oblarg\\\" data-post=\\\"7\\\" data-topic=\\\"402194\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/oblarg/48/161674_2.png\\\" class=\\\"avatar\\\"\\u003e Oblarg:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003ethe \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e output is a voltage, not a velocity.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eIf feedforward essentially just converts a desired velocity into a voltage, isn’t it arbitrary whether the \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e output is a velocity or a voltage? Couldn’t I just use this line\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003emotorTurret.setVoltage(simpleFeedforward.calculate(pidOutput + tangentialFeedforward + rotationalFeedforward));\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eand tune the \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e so that it’s a velocity? Which approach would give better results and why?\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-12T17:46:23.269Z\",\"reply_count\":1,\"reply_to_post_number\":7,\"quote_count\":1,\"incoming_link_count\":6,\"reads\":190,\"readers_count\":189,\"score\":73.0,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48779,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Sam - Programming Lead\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/10\",\"custom_user_title\":\"Sam - Programming Lead\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3006711,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-02-12T18:42:33.084Z\",\"cooked\":\"\\u003cp\\u003eIf \\u003ccode\\u003eSimpleMotorFeedforward\\u003c/code\\u003e were a linear function of velocity, this would be mathematically equivalent but would put your gains in funky, harder-to-interpret units.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003ccode\\u003eSimpleMotorFeedforward\\u003c/code\\u003e is not entirely linear, though, so this won’t really work correctly as you’ve written it (it’ll change the sign of the \\u003ccode\\u003ekS\\u003c/code\\u003e correction at an incorrect place).\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-12T18:42:41.191Z\",\"reply_count\":1,\"reply_to_post_number\":10,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":183,\"readers_count\":182,\"score\":56.6,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48779,\"username\":\"FRC6302\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/11\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3006916,\"name\":\"\",\"username\":\"FRC6302\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\",\"created_at\":\"2022-02-13T00:35:22.286Z\",\"cooked\":\"\\u003cp\\u003eOh ok. My problem with this line\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003emotorTurret.setVoltage(pidOutput + simpleFeedforward.calculate(tangentialFeedforward + rotationalFeedforward));\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eis that if my drivetrain is not moving (rotationally or translationally), then I effectively only have a \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e loop with no feedforward. Isn’t this not ideal?\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-13T00:35:22.286Z\",\"reply_count\":2,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":177,\"readers_count\":176,\"score\":60.4,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48779,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Sam - Programming Lead\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/12\",\"custom_user_title\":\"Sam - Programming Lead\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3006993,\"name\":\"Joseph Farkas\",\"username\":\"MrRedness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/mrredness/{size}/229088_2.png\",\"created_at\":\"2022-02-13T06:07:24.081Z\",\"cooked\":\"\\u003cp\\u003eI think I understand your concern. The turret would not be able to move even if it were offset if the bot wasn’t moving since the pidControl would be limited to 3 volts. Honestly, I think your solution is a little overcomplicated. (or maybe I’m just \\u003cem\\u003eunderthinking it\\u003c/em\\u003e) I would suggest trying to rewrite your code to make it a little simpler. There are 2 ideas I can think of. For positional control, try:\\u003c/p\\u003e\\n\\u003col\\u003e\\n\\u003cli\\u003eFinding the angle the turret should go to (seems you already have a good start with your vision tracking math)\\u003c/li\\u003e\\n\\u003cli\\u003eConverting that into motor ticks (angle / 360 (or 2pi) * encoder_resolution)\\u003c/li\\u003e\\n\\u003cli\\u003ePassing that value into a positional control system (the talonfx has a built-in system for this, try taking at look at our \\u003ca href=\\\"https://github.com/team1771/\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ecode\\u003c/a\\u003e if you need some inspiration (either look at the climber.cpp in obob’s code, or the positional control in swervemodule.cpp in any of our black widow repos) CTRE also has some \\u003cem\\u003edecent\\u003c/em\\u003e documentation.\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cp\\u003eMake sure to add a ramp rate and limits to make sure you don’t break your turret\\u003c/p\\u003e\\n\\u003cp\\u003eFor velocity control, you could do:\\u003c/p\\u003e\\n\\u003col\\u003e\\n\\u003cli\\u003eFinding the angle the turret should go to\\u003c/li\\u003e\\n\\u003cli\\u003eUsing a PID controller to convert angle to velocity (either a wpilib one, or something you implement yourself, like we did here):\\u003cbr\\u003e\\n\\u003ccode\\u003eint error_theta = (theta - getAngle()).to\\u0026lt;int\\u0026gt;() % 360; // Get difference between old and new angle \\u0026amp;\\u0026amp; gets the equivalent value between -360 and 360\\u003c/code\\u003e\\u003cbr\\u003e\\n\\u003ccode\\u003e  if (error_theta \\u0026lt; -180)  error_theta += 360; // Ensure angle is between -180 and 360\\u003c/code\\u003e\\u003cbr\\u003e\\n\\u003ccode\\u003e  if (error_theta \\u0026gt; 180)  error_theta -= 360; // Optimizes angle if over 180\\u003c/code\\u003e\\u003cbr\\u003e\\n\\u003ccode\\u003e  if (std::abs(error_theta) \\u0026lt; 5)  error_theta = 0; // Dead-zone to prevent oscillation\\u003c/code\\u003e\\u003cbr\\u003e\\n\\u003ccode\\u003e  double p_rotation = error_theta * rot_p; // Modifies error_theta in order to get a faster turning speed\\u003c/code\\u003e\\u003cbr\\u003e\\n\\u003ccode\\u003e  if (std::abs(p_rotation) \\u0026gt; max_rot_speed.value())  p_rotation = max_rot_speed.value() * ((p_rotation \\u0026gt; 0) ? 1 : -1); // Constrains turn speed\\u003c/code\\u003e\\n\\u003c/li\\u003e\\n\\u003cli\\u003eConverting to actual motor control (feed forward? talonfx velocity control loop?)\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cp\\u003eBest of luck!\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-13T06:07:24.081Z\",\"reply_count\":0,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":7,\"reads\":177,\"readers_count\":176,\"score\":70.4,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"Joseph Farkas\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/team1771/\",\"internal\":false,\"reflection\":false,\"clicks\":6}],\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":48779,\"username\":\"FRC6302\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":50693,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"1771 Programming, Operator\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/13\",\"custom_user_title\":\"1771 Programming, Operator\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3006995,\"name\":\"Joseph Farkas\",\"username\":\"MrRedness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/mrredness/{size}/229088_2.png\",\"created_at\":\"2022-02-13T06:21:36.528Z\",\"cooked\":\"\\u003cp\\u003eActually I just realized I could just share our turret tracking code lol:\\u003cbr\\u003e\\n\\u003cdiv class=\\\"lightbox-wrapper\\\"\\u003e\\u003ca class=\\\"lightbox\\\" href=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/9/9/9900c6cc0e447acb697b50b2bcf2887c0fc202b8.png\\\" data-download-href=\\\"https://www.chiefdelphi.com/uploads/default/9900c6cc0e447acb697b50b2bcf2887c0fc202b8\\\" title=\\\"image\\\"\\u003e\\u003cimg src=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/9/9/9900c6cc0e447acb697b50b2bcf2887c0fc202b8.png\\\" alt=\\\"image\\\" data-base62-sha1=\\\"lPwIr7gJB0tZsqsZSfxhX2jHXcc\\\" width=\\\"690\\\" height=\\\"416\\\" data-dominant-color=\\\"242627\\\"\\u003e\\u003cdiv class=\\\"meta\\\"\\u003e\\u003csvg class=\\\"fa d-icon d-icon-far-image svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#far-image\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003cspan class=\\\"filename\\\"\\u003eimage\\u003c/span\\u003e\\u003cspan class=\\\"informations\\\"\\u003e771×465 16 KB\\u003c/span\\u003e\\u003csvg class=\\\"fa d-icon d-icon-discourse-expand svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#discourse-expand\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003c/div\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eSetTarget/Reference is a REV thing but you could use position control for CTRE\\u003c/p\\u003e\\n\\u003cp\\u003eEdit: This guide also looks pretty nice: \\u003ca href=\\\"https://docs.limelightvision.io/en/latest/cs_aiming.html\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eCase Study: Aiming Using Vision — Limelight 1.0 documentation\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-13T06:29:05.040Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":149,\"readers_count\":148,\"score\":49.8,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"Joseph Farkas\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.limelightvision.io/en/latest/cs_aiming.html\",\"internal\":false,\"reflection\":false,\"title\":\"Case Study: Aiming Using Vision — Limelight 1.0 documentation\",\"clicks\":8},{\"url\":\"https://www.chiefdelphi.com/uploads/default/original/3X/9/9/9900c6cc0e447acb697b50b2bcf2887c0fc202b8.png\",\"internal\":true,\"reflection\":false,\"clicks\":0}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":50693,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"1771 Programming, Operator\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/14\",\"custom_user_title\":\"1771 Programming, Operator\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3007068,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-02-13T16:34:22.806Z\",\"cooked\":\"\\u003cp\\u003eAh, yeah, my earlier post was in error.\\u003c/p\\u003e\\n\\u003cp\\u003eYou can indeed treat the position PID controller as outputting a reference velocity and cascade that to the feedforward.  This changes the units accordingly, and the benefit is a correct application of the \\u003ccode\\u003ekS\\u003c/code\\u003e term in the case when the other feedforwards are zero or cancel each other out.\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-13T16:34:22.806Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":141,\"readers_count\":140,\"score\":43.2,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48779,\"username\":\"FRC6302\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/15\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3007118,\"name\":\"\",\"username\":\"FRC6302\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\",\"created_at\":\"2022-02-13T18:34:34.148Z\",\"cooked\":\"\\u003cp\\u003eOk nice. Do you think tuning this feedforward accurately would correct for the problem of camera latency (\\u003ca href=\\\"https://www.chiefdelphi.com/t/high-refresh-rate-vision-processing/387949/8\\\"\\u003edescribed here\\u003c/a\\u003e) as long as I kept my kP low, or should I be implementing that separately?\\u003c/p\\u003e\\n\\u003cp\\u003eIf I am moving fast, my pid will effectively be fighting against the feedforward for those ~25ms until I receive my next limelight image. Because the pid wants to go back towards the old target while my feedforwards “knows” the target is actually somewhere else and so is moving towards the actual target. Thoughts?\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-13T18:34:34.148Z\",\"reply_count\":0,\"reply_to_post_number\":15,\"quote_count\":0,\"incoming_link_count\":5,\"reads\":146,\"readers_count\":145,\"score\":54.2,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/high-refresh-rate-vision-processing/387949/8\",\"internal\":true,\"reflection\":false,\"title\":\"High refresh rate vision processing\",\"clicks\":3}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48779,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Sam - Programming Lead\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/16\",\"custom_user_title\":\"Sam - Programming Lead\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3007121,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-02-13T18:37:05.401Z\",\"cooked\":\"\\u003cp\\u003eFeedforward might help the overall system response enough that latency compensation is not necessary, but I don’t think I can really predict whether that’ll be the case or not.  You’ll have to try it and see!\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-13T18:37:05.401Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":135,\"readers_count\":134,\"score\":42.0,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/17\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3012901,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2022-02-25T18:16:29.035Z\",\"cooked\":\"\\u003cp\\u003eSlightly off topic, but are you planning to use a Limelight to track the target for the whole match? In 2020, our local officials interpreted R.203.m to mean our Limelight could not stay illuminated for the whole match.\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003ehigh intensity light sources used on the ROBOT (e.g. super bright LED\\u003cbr\\u003e\\nsources marketed as ‘military grade’ or ‘self-defense’) may only be\\u003cbr\\u003e\\nilluminated for a brief time while targeting and may need to be shrouded to\\u003cbr\\u003e\\nprevent any exposure to participants. Complaints about the use of such light\\u003cbr\\u003e\\nsources will be followed by re-inspection and possible disablement of the\\u003cbr\\u003e\\ndevice.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-25T18:16:29.035Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":126,\"readers_count\":125,\"score\":45.2,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/18\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3012942,\"name\":\"Crystal\",\"username\":\"CIM\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cim/{size}/3861_2.png\",\"created_at\":\"2022-02-25T19:58:27.690Z\",\"cooked\":\"\\u003cp\\u003eI think the key here is “high intensity” - to me I’m interpreting this as referring to lights with an blinding level of glare from a relatively wide angle. The references to “self-defense lighting” suggest it is the kind of brightness and field of view that can quickly hurt people and create lasting safety issues. The Limelight certainly is producing a useful, bright light, but not on the same magnitude as these products.\\u003c/p\\u003e\\n\\u003cp\\u003eIn past years, most notably 2012, teams would use very high intensity lights to allow drivers to manually align their robots with goals. This rule was created to require teams to be able to switch these lights off.\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-25T19:59:13.076Z\",\"reply_count\":1,\"reply_to_post_number\":18,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":118,\"readers_count\":117,\"score\":38.6,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"Crystal\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":true,\"admin\":false,\"staff\":true,\"user_id\":11107,\"hidden\":false,\"trust_level\":4,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Crystal is me (she/they)\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/19\",\"custom_user_title\":\"Crystal is me (she/they)\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3012949,\"name\":\"\",\"username\":\"FRC6302\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\",\"created_at\":\"2022-02-25T20:11:52.469Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"gdefender\\\" data-post=\\\"18\\\" data-topic=\\\"402194\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/gdefender/48/168507_2.png\\\" class=\\\"avatar\\\"\\u003e gdefender:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eSlightly off topic, but are you planning to use a Limelight to track the target for the whole match?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThat was the plan. I am however currently working on using odometry to tell the turret approximately what angle to goes towards even with the limelight off. And then when we are about to shoot we can just turn it back on, and adjust from there. So if I can get that working then we’ll just switch to that if the referees get mad at us.\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":32,\"updated_at\":\"2022-02-25T20:11:52.469Z\",\"reply_count\":1,\"reply_to_post_number\":18,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":119,\"readers_count\":118,\"score\":33.8,\"yours\":false,\"topic_id\":402194,\"topic_slug\":\"complicated-turret-feedforward\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48779,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Sam - Programming Lead\"},\"post_url\":\"/t/complicated-turret-feedforward/402194/20\",\"custom_user_title\":\"Sam - Programming Lead\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true}],\"stream\":[3003146,3003148,3003161,3003227,3003508,3003522,3003602,3003683,3003709,3006691,3006711,3006916,3006993,3006995,3007068,3007118,3007121,3012901,3012942,3012949,3012959,3012960,3012970,3013012,3013032,3013120,3013345,3015178,3015204,3015231,3015305,3155661]},\"timeline_lookup\":[[1,1345],[5,1344],[10,1337],[16,1336],[18,1324],[27,1323],[28,1320],[32,955]],\"tags\":[\"java\"],\"tags_descriptions\":{},\"fancy_title\":\"Complicated turret feedforward\",\"id\":402194,\"title\":\"Complicated turret feedforward\",\"posts_count\":32,\"created_at\":\"2022-02-04T22:44:48.927Z\",\"views\":3536,\"reply_count\":24,\"like_count\":9,\"last_posted_at\":\"2023-03-02T01:03:30.972Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"complicated-turret-feedforward\",\"category_id\":30,\"word_count\":4029,\"deleted_at\":null,\"user_id\":48779,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_402194\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":32,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":6,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"accepted_answer\":{\"post_number\":2,\"username\":\"Oblarg\",\"name\":null,\"excerpt\":\"You need to be careful that you “cascade” the controllers in a coherent way given their dimensions.  Your tangential and rotational feedforwards here are probably in units of velocity; that suggests that they should modify the setpoint itself, and thus cascade to your SimpleMotorFeedforward and PIDC\\u0026hellip;\",\"accepter_name\":null},\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":48779,\"username\":\"FRC6302\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\",\"post_count\":14,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"post_count\":8,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"post_count\":5,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":50693,\"username\":\"MrRedness\",\"name\":\"Joseph Farkas\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/mrredness/{size}/229088_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":7123,\"username\":\"Mike_Schreiber\",\"name\":\"Mike Schreiber\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/mike_schreiber/{size}/200098_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":11107,\"username\":\"CIM\",\"name\":\"Crystal\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cim/{size}/3861_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"moderator\":true,\"trust_level\":4}],\"created_by\":{\"id\":48779,\"username\":\"FRC6302\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frc6302/{size}/165591_2.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://www.chiefdelphi.com/t/turret-control-pid-ks-only-pid-full-feedforward-or-something-else/393068/12\",\"title\":\"Turret Control - PID + kS Only, PID + Full Feedforward, or something else?\",\"internal\":true,\"attachment\":false,\"reflection\":false,\"clicks\":65,\"user_id\":48779,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://www.chiefdelphi.com/t/have-ball-turret-compensate-for-robot-left-and-right-movement/381782/6\",\"title\":\"Have ball turret compensate for robot left and right movement?\",\"internal\":true,\"attachment\":false,\"reflection\":false,\"clicks\":49,\"user_id\":48779,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://github.com/FRC6302/2022Bot1/blob/master/src/main/java/frc/robot/subsystems/Turret.java\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":49,\"user_id\":48779,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/FRC6302/2022Bot1/blob/master/src/main/java/frc/robot/commands/TrackTarget.java\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":30,\"user_id\":48779,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.limelightvision.io/en/latest/cs_aiming.html\",\"title\":\"Case Study: Aiming Using Vision — Limelight 1.0 documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":8,\"user_id\":50693,\"domain\":\"docs.limelightvision.io\",\"root_domain\":\"limelightvision.io\"},{\"url\":\"https://github.com/team1771/\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":6,\"user_id\":50693,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/trapezoidal-profiles.html#complete-usage-example\",\"title\":\"Trapezoidal Motion Profiles in WPILib — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":6,\"user_id\":12381,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://www.chiefdelphi.com/t/high-refresh-rate-vision-processing/387949/8\",\"title\":\"High refresh rate vision processing\",\"internal\":true,\"attachment\":false,\"reflection\":false,\"clicks\":3,\"user_id\":48779,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://en.wikipedia.org/wiki/Rotation_of_axes\",\"title\":\"Rotation of axes - Wikipedia\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":3,\"user_id\":48779,\"domain\":\"en.wikipedia.org\",\"root_domain\":\"wikipedia.org\"},{\"url\":\"https://first.wpi.edu/wpilib/allwpilib/docs/release/java/edu/wpi/first/math/kinematics/MecanumDriveKinematics.html\",\"title\":\"MecanumDriveKinematics (WPILib API 2022.4.1)\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":3,\"user_id\":48779,\"domain\":\"first.wpi.edu\",\"root_domain\":\"wpi.edu\"},{\"url\":\"https://www.chiefdelphi.com/t/seeking-pose-estimation-example-for-turrets/407248/5\",\"title\":\"Seeking Pose Estimation Example for Turrets\",\"internal\":true,\"attachment\":false,\"reflection\":true,\"clicks\":1,\"user_id\":44380,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://www.chiefdelphi.com/t/gyroscope-feedforward-and-pid/403726/2\",\"title\":\"Gyroscope FeedForward and PID\",\"internal\":true,\"attachment\":false,\"reflection\":true,\"clicks\":1,\"user_id\":48779,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"}]},\"bookmarks\":[]}"}
