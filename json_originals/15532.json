{"data":"{\"post_stream\":{\"posts\":[{\"id\":2936253,\"name\":\"Ben Bistline\",\"username\":\"benjiboy2539\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\",\"created_at\":\"2021-03-04T01:14:05.355Z\",\"cooked\":\"\\u003cp\\u003eRecently our team has been attempting to use trajectory generation from WPILIB and the pathfinder following for our swerve drive. From my understanding and experience, the trajectory generator seems to be intended for tank drives. I can feed it a series of waypoints, with x, y, and heading, and it will create a trajectory to satisfy them, but not take into account that the robot can strafe. I guess to simplify my question: If I wanted to follow a trajectory and have the swerve base to be spinning at the same time, is that possible.\\u003cbr\\u003e\\nWhat I have experienced is that if we generate a trajectory and do not specify heading for the waypoints, but only end points, then the trajectory is generated in the expected way. When headings are specified however, the trajectory changes. I want to follow the original trajectory, but still be able to specify which way the robot is facing at each way point. I do not wish to have the heading interact with the trajectory generation, but rather follow the same path and ‘spin’ while following that path.\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-04T01:14:05.355Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":2382,\"reads\":605,\"readers_count\":604,\"score\":12106.0,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"Ben Bistline\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/some-suggestion-and-question-about-swerve-trajectory-generator/396331/4\",\"internal\":true,\"reflection\":true,\"title\":\"Some suggestion and question about swerve trajectory generator\",\"clicks\":3}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":5}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":36581,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Drive it like you stole it\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/1\",\"custom_user_title\":\"Drive it like you stole it\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":5}],\"current_user_reaction\":null,\"reaction_users_count\":5,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":2936259,\"name\":\"jdao\",\"username\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\",\"created_at\":\"2021-03-04T01:26:31.119Z\",\"cooked\":\"\\u003cp\\u003eThere is a swerve specific command/controller for doing so, see the sample WPILib Java code here:\\u003cbr\\u003e\\n\\u003c/p\\u003e\\u003caside class=\\\"onebox githubblob\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/435bbb6a8ccde148580d3e7d84d41d8f8446e03b/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/swervecontrollercommand/RobotContainer.java#L97\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch4\\u003e\\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/435bbb6a8ccde148580d3e7d84d41d8f8446e03b/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/swervecontrollercommand/RobotContainer.java#L97\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ewpilibsuite/allwpilib/blob/435bbb6a8ccde148580d3e7d84d41d8f8446e03b/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/swervecontrollercommand/RobotContainer.java#L97\\u003c/a\\u003e\\u003c/h4\\u003e\\n\\u003cpre class=\\\"onebox\\\"\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003e\\u003col class=\\\"start lines\\\" start=\\\"87\\\" style=\\\"counter-reset: li-counter 86 ;\\\"\\u003e\\n\\u003cli\\u003e        List.of(new Translation2d(1, 1), new Translation2d(2, -1)),\\u003c/li\\u003e\\u003cli\\u003e        // End 3 meters straight ahead of where we started, facing forward\\u003c/li\\u003e\\u003cli\\u003e        new Pose2d(3, 0, new Rotation2d(0)),\\u003c/li\\u003e\\u003cli\\u003e        config);\\u003c/li\\u003e\\u003cli\\u003e\\u003c/li\\u003e\\u003cli\\u003evar thetaController =\\u003c/li\\u003e\\u003cli\\u003e    new ProfiledPIDController(\\u003c/li\\u003e\\u003cli\\u003e        AutoConstants.kPThetaController, 0, 0, AutoConstants.kThetaControllerConstraints);\\u003c/li\\u003e\\u003cli\\u003ethetaController.enableContinuousInput(-Math.PI, Math.PI);\\u003c/li\\u003e\\u003cli\\u003e\\u003c/li\\u003e\\u003cli class=\\\"selected\\\"\\u003eSwerveControllerCommand swerveControllerCommand =\\u003c/li\\u003e\\u003cli\\u003e    new SwerveControllerCommand(\\u003c/li\\u003e\\u003cli\\u003e        exampleTrajectory,\\u003c/li\\u003e\\u003cli\\u003e        m_robotDrive::getPose, // Functional interface to feed supplier\\u003c/li\\u003e\\u003cli\\u003e        DriveConstants.kDriveKinematics,\\u003c/li\\u003e\\u003cli\\u003e\\u003c/li\\u003e\\u003cli\\u003e        // Position controllers\\u003c/li\\u003e\\u003cli\\u003e        new PIDController(AutoConstants.kPXController, 0, 0),\\u003c/li\\u003e\\u003cli\\u003e        new PIDController(AutoConstants.kPYController, 0, 0),\\u003c/li\\u003e\\u003cli\\u003e        thetaController,\\u003c/li\\u003e\\u003cli\\u003e        m_robotDrive::setModuleStates,\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eRamsete is specific to tank drive styled robots due to the fact that they cannot move sideways.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-04T01:26:31.119Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":77,\"reads\":586,\"readers_count\":585,\"score\":552.2,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"jdao\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/435bbb6a8ccde148580d3e7d84d41d8f8446e03b/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/swervecontrollercommand/RobotContainer.java#L97\",\"internal\":false,\"reflection\":false,\"title\":\"allwpilib/RobotContainer.java at 435bbb6a8ccde148580d3e7d84d41d8f8446e03b · wpilibsuite/allwpilib · GitHub\",\"clicks\":274}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24178,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"4201 Mentor, CSA\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/2\",\"custom_user_title\":\"4201 Mentor, CSA\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2936268,\"name\":\"Ben Bistline\",\"username\":\"benjiboy2539\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\",\"created_at\":\"2021-03-04T02:10:42.479Z\",\"cooked\":\"\\u003cp\\u003eThis is what we are currently using, and it is behaving weirdly. To start with If I feed it a end point of x = 1 , y=1 and theta = 0 I would expect it to end at the point 1 meter in the positive x and y directions. But it moves about 4.3 meters in both directions, but does so constantly. I also checked to see if the odomotry thought that it was going 1 meter in both directions, but it prints out as 4.3 in both. The odomotry is seemingly accurate.  I tried printing out the x and y values of the translation 2d that we were feeding it immediately before they were received, and they were 1, 1 .That alone is concerning, but manageable if it always goes in a 4.3 to 1 ratio.   On top of that if we use the other trajectory constructor that allows us to feed waypoints instead of 2d translations, then the rotation is all off. No matter what I do I can’t find a relationship between the fed rotation and the actual rotation it achieves. Again I printed the odomotry and the fed numbers and found that when I feed it 1 radian, it rotates about 2 radians. Then when I feed it .5 radians, it moves more than 2 radians. I couldn’t find any mathematical relationship between the radians it was receiving at the waypoints, and the radians it was going to. I do want to say that it is possible that it is not completely finishing the path, because when we go back from autonomous to telliop, it then seems to have the velocity limit of the point on the path that it was just on. I am thoroughly confused as to what is going on, and it is quite possible that I am just out of my depth. Any help would be appreciated.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-04T02:10:42.479Z\",\"reply_count\":2,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":105,\"reads\":514,\"readers_count\":513,\"score\":652.8,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"Ben Bistline\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":24178,\"username\":\"jdao\",\"name\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":36581,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Drive it like you stole it\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/3\",\"custom_user_title\":\"Drive it like you stole it\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2936287,\"name\":\"Lucas Ferguson\",\"username\":\"Lucas.Ferguson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/lucas.ferguson/{size}/153437_2.png\",\"created_at\":\"2021-03-04T03:08:20.374Z\",\"cooked\":\"\\u003cp\\u003eYes, we have also been experiencing the same weirdness. Below I have attached a video of our autonomous.  At the time we were using transform2d to generate the path, but when we changed to Pose2d and added a rotation, the robot would drive through the point at that heading causing some problems.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003ca href=\\\"https://github.com/timebots5275frc/robot2021/tree/PathWeaver\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub robot2021 : PathWeaver Branch\\u003c/a\\u003e\\u003cbr\\u003e\\n\\u003ca href=\\\"https://drive.google.com/file/d/1rUcnWGezUdbugkJGQoJ-bR3OB3WUma4M/view?usp=sharing\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eFirst Successful Test Of Swerve Drive\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-04T03:08:20.374Z\",\"reply_count\":1,\"reply_to_post_number\":3,\"quote_count\":0,\"incoming_link_count\":21,\"reads\":460,\"readers_count\":459,\"score\":232.0,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"Lucas Ferguson\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://drive.google.com/file/d/1rUcnWGezUdbugkJGQoJ-bR3OB3WUma4M/view?usp=sharing\",\"internal\":false,\"reflection\":false,\"clicks\":112},{\"url\":\"https://github.com/timebots5275frc/robot2021/tree/PathWeaver\",\"internal\":false,\"reflection\":false,\"title\":\"GitHub - timebots5275frc/robot2021 at PathWeaver\",\"clicks\":95}],\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":36581,\"username\":\"benjiboy2539\",\"name\":\"Ben Bistline\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":47306,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Lucas.Ferguson\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/4\",\"custom_user_title\":\"Lucas.Ferguson\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2936292,\"name\":\"jdao\",\"username\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\",\"created_at\":\"2021-03-04T03:15:39.115Z\",\"cooked\":\"\\u003cp\\u003eMy assumption, based on your code, is that you have a unit conversion error here:\\u003cbr\\u003e\\n\\u003c/p\\u003e\\u003caside class=\\\"onebox githubblob\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003ca href=\\\"https://github.com/FRC2539/pybot/blob/781c2fba804e9471a0589378c3b1fd9b68d85473/subsystems/swervedrive.py#L76\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch4\\u003e\\u003ca href=\\\"https://github.com/FRC2539/pybot/blob/781c2fba804e9471a0589378c3b1fd9b68d85473/subsystems/swervedrive.py#L76\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eFRC2539/pybot/blob/781c2fba804e9471a0589378c3b1fd9b68d85473/subsystems/swervedrive.py#L76\\u003c/a\\u003e\\u003c/h4\\u003e\\n\\u003cpre class=\\\"onebox\\\"\\u003e\\u003ccode class=\\\"lang-py\\\"\\u003e\\u003col class=\\\"start lines\\\" start=\\\"66\\\" style=\\\"counter-reset: li-counter 65 ;\\\"\\u003e\\n\\u003cli\\u003e    SwerveModule(  # Back right module.\\u003c/li\\u003e\\u003cli\\u003e        ports.drivetrain.backRightDriveID,\\u003c/li\\u003e\\u003cli\\u003e        ports.drivetrain.backRightTurnID,\\u003c/li\\u003e\\u003cli\\u003e        ports.drivetrain.backRightCANCoder,\\u003c/li\\u003e\\u003cli\\u003e        self.speedLimit,\\u003c/li\\u003e\\u003cli\\u003e        -129.9,\\u003c/li\\u003e\\u003cli\\u003e        invertedDrive=True,  # Invert for some reason. Ezra's going nuts lol.\\u003c/li\\u003e\\u003cli\\u003e    ),\\u003c/li\\u003e\\u003cli\\u003e]\\u003c/li\\u003e\\u003cli\\u003e\\u003c/li\\u003e\\u003cli class=\\\"selected\\\"\\u003eself.swerveKinematics = (\\u003c/li\\u003e\\u003cli\\u003e    SwerveDrive4Kinematics(  # X and Y components of center offsets.\\u003c/li\\u003e\\u003cli\\u003e        Translation2d(36.4, 36.4),  # Front left module\\u003c/li\\u003e\\u003cli\\u003e        Translation2d(36.4, -36.4),  # Front right module\\u003c/li\\u003e\\u003cli\\u003e        Translation2d(-36.4, 36.4),  # Back left module\\u003c/li\\u003e\\u003cli\\u003e        Translation2d(-36.4, -36.4),  # Back right module\\u003c/li\\u003e\\u003cli\\u003e    )\\u003c/li\\u003e\\u003cli\\u003e)\\u003c/li\\u003e\\u003cli\\u003e\\u003c/li\\u003e\\u003cli\\u003eself.swerveOdometry = SwerveDrive4Odometry(\\u003c/li\\u003e\\u003cli\\u003e    self.swerveKinematics,\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eYou initialize the swerve kinematics in inches, but then feed it into the swerve controller. Since a lot of the kinematics/odometry libraries assume you are using SI units, I would bet that somewhere in the math, the conversion from inches to meters doesn’t happen, which is causing your issues. Try changing this to meters and see what happens.\\u003c/p\\u003e\\n\\u003cp\\u003eEdit: Also, those values should be divided by 2, since all those translations will be relative to the center of your robot.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-04T03:23:40.611Z\",\"reply_count\":1,\"reply_to_post_number\":3,\"quote_count\":0,\"incoming_link_count\":15,\"reads\":456,\"readers_count\":455,\"score\":186.2,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"jdao\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/FRC2539/pybot/blob/781c2fba804e9471a0589378c3b1fd9b68d85473/subsystems/swervedrive.py#L76\",\"internal\":false,\"reflection\":false,\"title\":\"pybot/swervedrive.py at 781c2fba804e9471a0589378c3b1fd9b68d85473 · FRC2539/pybot · GitHub\",\"clicks\":13}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":36581,\"username\":\"benjiboy2539\",\"name\":\"Ben Bistline\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24178,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"4201 Mentor, CSA\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/5\",\"custom_user_title\":\"4201 Mentor, CSA\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2936357,\"name\":\"jdao\",\"username\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\",\"created_at\":\"2021-03-04T08:27:59.024Z\",\"cooked\":\"\\u003cp\\u003eHmm… I’m not sure why but I seem to have issues generating a valid swerve trajectory with the points you used here:\\u003cbr\\u003e\\n\\u003c/p\\u003e\\u003caside class=\\\"onebox githubblob\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003ca href=\\\"https://github.com/timebots5275frc/robot2021/blob/8703c84d0f78f6ba19820d487e48bbe5ccec50d6/src/main/java/frc/robot/RobotContainer.java#L103\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch4\\u003e\\u003ca href=\\\"https://github.com/timebots5275frc/robot2021/blob/8703c84d0f78f6ba19820d487e48bbe5ccec50d6/src/main/java/frc/robot/RobotContainer.java#L103\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003etimebots5275frc/robot2021/blob/8703c84d0f78f6ba19820d487e48bbe5ccec50d6/src/main/java/frc/robot/RobotContainer.java#L103\\u003c/a\\u003e\\u003c/h4\\u003e\\n\\u003cpre class=\\\"onebox\\\"\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003e\\u003col class=\\\"start lines\\\" start=\\\"93\\\" style=\\\"counter-reset: li-counter 92 ;\\\"\\u003e\\n\\u003cli\\u003e// new Pose2d(3, 0, new Rotation2d(0)), config);\\u003c/li\\u003e\\u003cli\\u003e\\u003c/li\\u003e\\u003cli\\u003eList\\u0026lt;Translation2d\\u0026gt; listTranslation2d = List.of(new Translation2d(1.8, .5), new Translation2d(2.5, 1.5),\\u003c/li\\u003e\\u003cli\\u003e    new Translation2d(3.5, 2.5), new Translation2d(7.5, 2.5), new Translation2d(8.5, 1.5),\\u003c/li\\u003e\\u003cli\\u003e    new Translation2d(9.5, 0.5), new Translation2d(10.5, 1.5), // far point\\u003c/li\\u003e\\u003cli\\u003e    new Translation2d(9.5, 2.5), new Translation2d(8.5, 1.5), new Translation2d(7.7, 0.5),\\u003c/li\\u003e\\u003cli\\u003e    new Translation2d(5.5, 0.5), new Translation2d(3.5, 0.5), new Translation2d(2.5, 1.5),\\u003c/li\\u003e\\u003cli\\u003e    new Translation2d(1.5, 2.5));\\u003c/li\\u003e\\u003cli\\u003e\\u003c/li\\u003e\\u003cli\\u003eRotation2d zero = Rotation2d.fromDegrees(0);\\u003c/li\\u003e\\u003cli class=\\\"selected\\\"\\u003eList\\u0026lt;Pose2d\\u0026gt; listPose2d = List.of(new Pose2d(0, 0, zero), new Pose2d(2.2, 1, zero), new Pose2d(3, 1, zero),\\u003c/li\\u003e\\u003cli\\u003e    new Pose2d(4, 3, zero), new Pose2d(8, 3, zero), new Pose2d(9, 2, zero), new Pose2d(10, 1, zero),\\u003c/li\\u003e\\u003cli\\u003e    new Pose2d(11, 2, zero), new Pose2d(10, 3, zero), new Pose2d(9, 2, zero), new Pose2d(8.2, 2, zero),\\u003c/li\\u003e\\u003cli\\u003e    new Pose2d(6, 1, zero), new Pose2d(4, 1, zero), new Pose2d(3, 11, zero), new Pose2d(2, 3, zero));\\u003c/li\\u003e\\u003cli\\u003e\\u003c/li\\u003e\\u003cli\\u003eList\\u0026lt;Pose2d\\u0026gt; listPose2dtest = List.of(new Pose2d(0, 0, zero), new Pose2d(2.2, 1, zero), new Pose2d(3, 1, zero),\\u003c/li\\u003e\\u003cli\\u003e    new Pose2d(4, 3, zero), new Pose2d(8, 3, zero), new Pose2d(9, 2, zero), new Pose2d(10, 1, zero),\\u003c/li\\u003e\\u003cli\\u003e    new Pose2d(11, 2, zero), new Pose2d(10, 3, zero), new Pose2d(9, 2, zero), new Pose2d(8.2, 2, zero));\\u003c/li\\u003e\\u003cli\\u003e\\u003c/li\\u003e\\u003cli\\u003ePose2d offset = new Pose2d(.5, .5, new Rotation2d(0));\\u003c/li\\u003e\\u003cli\\u003eTrajectory exampleTrajectory = DriveTrain.generateTrajectory(config, offset, listPose2dtest);\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eIf you remove the points from either path starting from \\u003ccode\\u003ePose2d(8.2, 2, zero)\\u003c/code\\u003e onwards, do you still get issues? If so, a workaround might be to split your path into separate trajectories to get around this. You can then customize the start/end speeds of the parts so that you don’t stop when transitioning between trajectories.\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-04T08:27:59.024Z\",\"reply_count\":1,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":14,\"reads\":396,\"readers_count\":395,\"score\":184.2,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"jdao\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/timebots5275frc/robot2021/blob/8703c84d0f78f6ba19820d487e48bbe5ccec50d6/src/main/java/frc/robot/RobotContainer.java#L103\",\"internal\":false,\"reflection\":false,\"title\":\"robot2021/RobotContainer.java at 8703c84d0f78f6ba19820d487e48bbe5ccec50d6 · timebots5275frc/robot2021 · GitHub\",\"clicks\":16}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":47306,\"username\":\"Lucas.Ferguson\",\"name\":\"Lucas Ferguson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/lucas.ferguson/{size}/153437_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24178,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"4201 Mentor, CSA\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/6\",\"custom_user_title\":\"4201 Mentor, CSA\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2936680,\"name\":\"Ben Bistline\",\"username\":\"benjiboy2539\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\",\"created_at\":\"2021-03-04T23:32:20.859Z\",\"cooked\":\"\\u003cp\\u003eI fixed the unit error, and it is still behaving weird with just translations as points. It still moves -4.3 times the fed unit according to the odometry, which still seems to be accurate. Any ideas? \\u003ca class=\\\"mention\\\" href=\\\"/u/peter_johnson\\\"\\u003e@Peter_Johnson\\u003c/a\\u003e?\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-04T23:34:24.927Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":20,\"reads\":338,\"readers_count\":337,\"score\":187.6,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"Ben Bistline\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":24178,\"username\":\"jdao\",\"name\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":36581,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Drive it like you stole it\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/7\",\"custom_user_title\":\"Drive it like you stole it\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2936767,\"name\":\"Lucas Ferguson\",\"username\":\"Lucas.Ferguson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/lucas.ferguson/{size}/153437_2.png\",\"created_at\":\"2021-03-05T06:46:37.735Z\",\"cooked\":\"\\u003cp\\u003eThank You! I like the idea of using multiple trajectories. Currently, we are experimenting and learning by generating trajectories in different ways and see how they run. I also plan on using PathWeaver to generate trajectories. Motion profiling is also something I plan to look into. Thanks for your help!\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-05T06:46:37.735Z\",\"reply_count\":0,\"reply_to_post_number\":6,\"quote_count\":0,\"incoming_link_count\":6,\"reads\":332,\"readers_count\":331,\"score\":111.4,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"Lucas Ferguson\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":24178,\"username\":\"jdao\",\"name\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":47306,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Lucas.Ferguson\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/8\",\"custom_user_title\":\"Lucas.Ferguson\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2936825,\"name\":\"\",\"username\":\"Autom8it\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/e19adc/{size}.png\",\"created_at\":\"2021-03-05T16:12:10.782Z\",\"cooked\":\"\\u003cp\\u003eThe trajectory generator was designed for tank drive, but can work with swerve.  The important thing to realize is that the heading of the point on the trajectory is just the field-oriented translation vector’s direction.  That is, that’s the direction the robot is moving.  If you have swerve, the robot can be facing any other direction you want at that time.\\u003c/p\\u003e\\n\\u003cp\\u003eTrajectory generation, at the moment, doesn’t allow you to specify the actual robot heading as a separate variable at each waypoint, so it’s not going to generate a nice continuous heading adjustment for you at each point in the trajectory.  You will have to do this yourself.\\u003c/p\\u003e\\n\\u003cp\\u003eOne simple thing you can do is just set your heading to the trajectory heading, which essentially turns your fancy swerve drive into a tank drive.  I will leave it as an exercise for you to determine what the best solution is.  \\u003cimg src=\\\"https://www.chiefdelphi.com/images/emoji/google/slight_smile.png?v=9\\\" title=\\\":slight_smile:\\\" class=\\\"emoji\\\" alt=\\\":slight_smile:\\\"\\u003e\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-05T16:12:10.782Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":15,\"reads\":331,\"readers_count\":330,\"score\":151.2,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":46682,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Don't worry, we'll fix that in software\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/9\",\"custom_user_title\":\"Don't worry, we'll fix that in software\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2936828,\"name\":\"hamac2003\",\"username\":\"hamac2003\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/hamac2003/{size}/135172_2.png\",\"created_at\":\"2021-03-05T16:33:02.468Z\",\"cooked\":\"\\u003cp\\u003eOur team uses Pure Pursuit for our path following pipeline (with swerve). We maintain a heading using a simple PID controller, and we specify the desired heading in our path generation program. Not sure if this is directly applicable to the path generation program you use, just my 2¢.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003cstrong\\u003e\\u003cdiv class=\\\"lightbox-wrapper\\\"\\u003e\\u003ca class=\\\"lightbox\\\" href=\\\"https://lh4.googleusercontent.com/AS7LMTeOcZ-s_mYcqterEEnCfiMQvw8limat0RGqskH7Yyd0jF9fdTMskuVZ712DqBV8t8_Cu4UCHPCbd_l2X4levbh5gQxsOvUlur_RpuFT-2E15X8OM-USWPjtq_-eZZjcn8Z0\\\" title=\\\"\\\" rel=\\\"noopener nofollow ugc\\\"\\u003e\\u003cimg src=\\\"https://lh4.googleusercontent.com/AS7LMTeOcZ-s_mYcqterEEnCfiMQvw8limat0RGqskH7Yyd0jF9fdTMskuVZ712DqBV8t8_Cu4UCHPCbd_l2X4levbh5gQxsOvUlur_RpuFT-2E15X8OM-USWPjtq_-eZZjcn8Z0\\\" alt=\\\"\\\" width=\\\"361\\\" height=\\\"484\\\"\\u003e\\u003cdiv class=\\\"meta\\\"\\u003e\\u003csvg class=\\\"fa d-icon d-icon-far-image svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse xlink:href=\\\"#far-image\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003cspan class=\\\"filename\\\"\\u003e\\u003c/span\\u003e\\u003cspan class=\\\"informations\\\"\\u003e562×756\\u003c/span\\u003e\\u003csvg class=\\\"fa d-icon d-icon-discourse-expand svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse xlink:href=\\\"#discourse-expand\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003c/div\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\u003c/strong\\u003e\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-05T16:33:02.468Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":14,\"reads\":325,\"readers_count\":324,\"score\":170.0,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"hamac2003\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://lh4.googleusercontent.com/AS7LMTeOcZ-s_mYcqterEEnCfiMQvw8limat0RGqskH7Yyd0jF9fdTMskuVZ712DqBV8t8_Cu4UCHPCbd_l2X4levbh5gQxsOvUlur_RpuFT-2E15X8OM-USWPjtq_-eZZjcn8Z0\",\"internal\":false,\"reflection\":false,\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":29352,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"My other robot is an A.I.\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/10\",\"custom_user_title\":\"My other robot is an A.I.\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2936976,\"name\":\"jdao\",\"username\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\",\"created_at\":\"2021-03-05T23:41:09.794Z\",\"cooked\":\"\\u003cp\\u003eIn the PID values using frc-characterization, did you specify the tool to generate PID values for Talons/Falcons? Additionally, did you verify that the configuration of your project was correct? (e.g. deploy the test project, verify that 1 wheel rotation is reported correctly by physically moving your drive wheel one full rotation and checking the SmartDashboard value).\\u003c/p\\u003e\\n\\u003cp\\u003eThinking about it again, your 4.3 magnitude difference is close to 4, which is what you should multiply 2048 by to set the encoder counts in the frc-characterization project to be (See [this post](\\u003ca href=\\\"https://www.chiefdelphi.com/t/robot-\\\"\\u003ehttps://www.chiefdelphi.com/t/robot-\\u003c/a\\u003e. characterization-trajectory-tracking-help/391685/4?u=jdao)). Did you do this?\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-05T23:41:09.794Z\",\"reply_count\":1,\"reply_to_post_number\":7,\"quote_count\":0,\"incoming_link_count\":9,\"reads\":297,\"readers_count\":296,\"score\":109.4,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"jdao\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/robot-\",\"internal\":true,\"reflection\":false,\"clicks\":18}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":36581,\"username\":\"benjiboy2539\",\"name\":\"Ben Bistline\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24178,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"4201 Mentor, CSA\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/11\",\"custom_user_title\":\"4201 Mentor, CSA\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2936979,\"name\":\"jdao\",\"username\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\",\"created_at\":\"2021-03-05T23:52:38.881Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Autom8it\\\" data-post=\\\"9\\\" data-topic=\\\"392018\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/a/e19adc/48.png\\\" class=\\\"avatar\\\"\\u003e Autom8it:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eTrajectory generation, at the moment, doesn’t allow you to specify the actual robot heading as a separate variable at each waypoint\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThis is incorrect. You can specify the headings of each point if you generate a trajectory with just a list of Pose2d() points. As an example:\\u003c/p\\u003e\\n\\u003cpre data-code-wrap=\\\"java\\\"\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003e    m_trajectory = TrajectoryGenerator.generateTrajectory(\\n            new Pose2d(1,1, new Rotation2d()),\\n            List.of(new Translation2d(3, 2),\\n                    new Translation2d(5, 3),\\n                    new Translation2d(7, 2)),\\n            new Pose2d(9, 1, new Rotation2d()),\\n            new TrajectoryConfig(4, 4)\\n    );\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003e\\u003cimg src=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/f/a/fa4d913c8e9383249842ef1bb13c9eca3a537923.gif\\\" alt=\\\"translationPath\\\" data-base62-sha1=\\\"zIhyoQvMZuGqXdKy91yxEugKxX5\\\" width=\\\"300\\\" height=\\\"169\\\" class=\\\"animated\\\"\\u003e\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003e    m_trajectory = TrajectoryGenerator.generateTrajectory(\\n            List.of(new Pose2d(1,1, new Rotation2d()),\\n                    new Pose2d(3,2, new Rotation2d()),\\n                    new Pose2d(5,3, new Rotation2d()),\\n                    new Pose2d(6,2, new Rotation2d()),\\n                    new Pose2d(9,1, new Rotation2d())),\\n            new TrajectoryConfig(4, 4)\\n    );\\n\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003e\\u003cimg src=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/9/d/9d7a7bb4378aee0655f491365bdc27913d010f71.gif\\\" alt=\\\"pose2dPath\\\" data-base62-sha1=\\\"mt7nGct4V3ktEm0ca5wIDHeRJlf\\\" width=\\\"300\\\" height=\\\"169\\\" class=\\\"animated\\\"\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/trajectories/trajectory-generation.html#splines\\\"\\u003e\\u003cspan class=\\\"abbreviation\\\"\\u003eFRC\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"FIRST Robotics Competition\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e-Docs Page\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-05T23:52:38.881Z\",\"reply_count\":1,\"reply_to_post_number\":9,\"quote_count\":1,\"incoming_link_count\":13,\"reads\":297,\"readers_count\":296,\"score\":129.4,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"jdao\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/trajectories/trajectory-generation.html#splines\",\"internal\":false,\"reflection\":false,\"title\":\"Trajectory Generation — FIRST Robotics Competition documentation\",\"clicks\":15}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24178,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"4201 Mentor, CSA\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/12\",\"custom_user_title\":\"4201 Mentor, CSA\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2937160,\"name\":\"Ben Bistline\",\"username\":\"benjiboy2539\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\",\"created_at\":\"2021-03-06T18:34:50.306Z\",\"cooked\":\"\\u003cp\\u003eThis allows you to specify waypoint heading, not the robot’s heading independent of the movement. If you see in your first example, I want to follow that path, but have the robot constantly ‘looking’ towards the bottom. This isn’t possible with these tools because it is controlling robot heading as if it is tank drive, and not swerve drive. Again trajectory doesn’t support swerve drive heading.\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-06T18:34:50.306Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":7,\"reads\":274,\"readers_count\":273,\"score\":109.8,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"Ben Bistline\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":24178,\"username\":\"jdao\",\"name\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":36581,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Drive it like you stole it\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/13\",\"custom_user_title\":\"Drive it like you stole it\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2937161,\"name\":\"Ben Bistline\",\"username\":\"benjiboy2539\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\",\"created_at\":\"2021-03-06T18:39:43.649Z\",\"cooked\":\"\\u003cp\\u003eWe didn’t use the characterization tool that you mentioned.\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-06T18:39:43.649Z\",\"reply_count\":0,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":6,\"reads\":266,\"readers_count\":265,\"score\":83.2,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"Ben Bistline\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":24178,\"username\":\"jdao\",\"name\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":36581,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Drive it like you stole it\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/14\",\"custom_user_title\":\"Drive it like you stole it\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2937162,\"name\":\"Ben Bistline\",\"username\":\"benjiboy2539\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\",\"created_at\":\"2021-03-06T18:40:56.383Z\",\"cooked\":\"\\u003cp\\u003eThank you for the verification, I thought this might be the case. Do you have any ideas as to why we are having about a 4.3 magnitude difference between the points we specify and where we are going?\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-06T18:40:56.383Z\",\"reply_count\":0,\"reply_to_post_number\":9,\"quote_count\":0,\"incoming_link_count\":17,\"reads\":265,\"readers_count\":264,\"score\":138.0,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"Ben Bistline\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":46682,\"username\":\"Autom8it\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/e19adc/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":36581,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Drive it like you stole it\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/15\",\"custom_user_title\":\"Drive it like you stole it\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2937166,\"name\":\"Ben Bistline\",\"username\":\"benjiboy2539\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\",\"created_at\":\"2021-03-06T18:53:08.412Z\",\"cooked\":\"\\u003cp\\u003eSorry it took so long for me to reply, I wanted to read up on the Pure Pursuit that you mentioned. The paper that I read was interesting, but unless I’m mistaken it still seems as though it was intended for a tank drive. I am interested in how you converted the tank drive outputs into swerve and how you then manipulate them into heading control.\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-06T18:53:08.412Z\",\"reply_count\":1,\"reply_to_post_number\":10,\"quote_count\":0,\"incoming_link_count\":14,\"reads\":263,\"readers_count\":262,\"score\":127.6,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"Ben Bistline\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":29352,\"username\":\"hamac2003\",\"name\":\"hamac2003\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/hamac2003/{size}/135172_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":36581,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Drive it like you stole it\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/16\",\"custom_user_title\":\"Drive it like you stole it\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2937178,\"name\":\"hamac2003\",\"username\":\"hamac2003\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/hamac2003/{size}/135172_2.png\",\"created_at\":\"2021-03-06T19:17:15.380Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"benjiboy2539\\\" data-post=\\\"16\\\" data-topic=\\\"392018\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/benjiboy2539/48/127059_2.png\\\" class=\\\"avatar\\\"\\u003e benjiboy2539:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eThe paper that I read\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI’m guessing your read \\u003ca href=\\\"https://www.chiefdelphi.com/t/paper-implementation-of-the-adaptive-pure-pursuit-controller/166552\\\"\\u003ethis paper\\u003c/a\\u003e, which is what we based our Pure Pursuit implementation off of.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"benjiboy2539\\\" data-post=\\\"16\\\" data-topic=\\\"392018\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/benjiboy2539/48/127059_2.png\\\" class=\\\"avatar\\\"\\u003e benjiboy2539:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eI am interested in how you converted the tank drive outputs into swerve and how you then manipulate them into heading control.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eLong story short, we don’t \\u003cem\\u003econvert\\u003c/em\\u003e the tank drive outputs. What we did instead was just drive towards the point where our look ahead radius intersected the path. Imagine that as your [X,Y] vector, with the magnitude of the vector being the velocity of the nearest point in the path. Here’s a link to our (unfinished) \\u003ca href=\\\"https://docs.google.com/document/d/19RSzkHe1eFjvdaVEvaAxHPnEfQE0ORjeNNrjOwnmnj4/edit?usp=sharing\\\" rel=\\\"noopener nofollow ugc\\\"\\u003etechnical write-up\\u003c/a\\u003e.\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-06T19:17:15.380Z\",\"reply_count\":0,\"reply_to_post_number\":16,\"quote_count\":1,\"incoming_link_count\":85,\"reads\":264,\"readers_count\":263,\"score\":477.8,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"hamac2003\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/paper-implementation-of-the-adaptive-pure-pursuit-controller/166552\",\"internal\":true,\"reflection\":false,\"title\":\"Paper: Implementation of the Adaptive Pure Pursuit Controller\",\"clicks\":47},{\"url\":\"https://docs.google.com/document/d/19RSzkHe1eFjvdaVEvaAxHPnEfQE0ORjeNNrjOwnmnj4/edit?usp=sharing\",\"internal\":false,\"reflection\":false,\"title\":\"2021_Team4004_Controls - Google Docs\",\"clicks\":31}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":29352,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"My other robot is an A.I.\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/17\",\"custom_user_title\":\"My other robot is an A.I.\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2937219,\"name\":\"jdao\",\"username\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\",\"created_at\":\"2021-03-06T21:23:06.926Z\",\"cooked\":\"\\u003cp\\u003eFor Swerve drives, if you want to specify a heading independent of the path, you need to use the other \\u003ca href=\\\"https://robotpy.readthedocs.io/projects/commands-v2/en/stable/commands2/Swerve4ControllerCommand.html#commands2.Swerve4ControllerCommand\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eSwerve4ControllerCommand()\\u003c/a\\u003e constructor, where you specify the heading target you want after the the theta controller.\\u003c/p\\u003e\\n\\u003cp\\u003eRegardless of if you used the frc-characterization tool, can you confirm that aphysical rotation of one of the swerve drive’s module returns a distrance traveled value equal to the circumference of the wheel?\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2021-03-06T21:23:06.926Z\",\"reply_count\":0,\"reply_to_post_number\":13,\"quote_count\":0,\"incoming_link_count\":15,\"reads\":262,\"readers_count\":261,\"score\":127.4,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"jdao\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://robotpy.readthedocs.io/projects/commands-v2/en/stable/commands2/Swerve4ControllerCommand.html#commands2.Swerve4ControllerCommand\",\"internal\":false,\"reflection\":false,\"title\":\"Swerve4ControllerCommand — RobotPy Commands v2 2021.2.2.2 documentation\",\"clicks\":118}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":36581,\"username\":\"benjiboy2539\",\"name\":\"Ben Bistline\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24178,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"4201 Mentor, CSA\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/18\",\"custom_user_title\":\"4201 Mentor, CSA\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2996606,\"name\":\"matt\",\"username\":\"matt2052\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/c5a1d2/{size}.png\",\"created_at\":\"2022-01-22T21:45:03.504Z\",\"cooked\":\"\\u003cp\\u003eHi \\u003ca class=\\\"mention\\\" href=\\\"/u/benjiboy2539\\\"\\u003e@benjiboy2539\\u003c/a\\u003e, this is Matt from team 2052 KnightKrawler. Our team recently starting working with the WPILib swerve library to try and see if it is feasible and similar to your question we have been looking for a way to change our robot’s heading while following a set path. Did your team ever solve your heading problem where you could follow a path, but couldn’t specify a heading?\\u003c/p\\u003e\\n\\u003cp\\u003eBelow I’ve included an auto path which, without the \\u003ccode\\u003e() -\\u0026gt; Rotation2d.fromDegrees(_)\\u003c/code\\u003e line, goes forward and then turn left. \\u003cem\\u003e( \\u003ccode\\u003e() -\\u0026gt; Rotation2d.fromDegrees(_)\\u003c/code\\u003e is included in both commands because otherwise the frame rotation gets set back to 0 degreese)\\u003c/em\\u003e However, Once we include what should rotate the frame of the robot while following the same path our robot begins to have unexpected behavior.\\u003c/p\\u003e\\n\\u003cp\\u003eSpecifically using a 45 degree rotation results in the path going straight forward, pausing, and then continuing along the same straight path. Using a 90 degree rotation results in the path going straight pausing and then going right relative to the field. We’ve tried using the \\u003ccode\\u003eTrajectory.transformBy(new Transform2d(new Translation2d(0, 0), new Rotation2d(_)))\\u003c/code\\u003e to adjust our path, but it just seems to cause more unwanted behavior.\\u003c/p\\u003e\\n\\u003cp\\u003eEven more troubling, checking our Glass field odometry tracker it shows the same path being followed regardless of rotation, meaning WPI thinks it’s executing the right behavior.\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode\\u003eSwerveControllerCommand forward = new SwerveControllerCommand(\\n  TrajectoryGenerator.generateTrajectory(\\n    new Pose2d(0, 0, new Rotation2d()),\\n    new ArrayList\\u0026lt;Translation2d\\u0026gt;(),\\n    new Pose2d(2, 0, new Rotation2d()),\\n    defaultConfig\\n  ), drivetrain::getPose, DrivetrainConstants.kSwerveDriveKinematics,\\n  new PIDController(AutonomousConstants.kPXController, 0, 0),\\n  new PIDController(AutonomousConstants.kPYController, 0, 0),\\n  thetaController, drivetrain::setModuleStates,\\n  drivetrain\\n);\\n\\nSwerveControllerCommand turn = new SwerveControllerCommand(\\n  TrajectoryGenerator.generateTrajectory(\\n    new Pose2d(2, 0, new Rotation2d()),\\n    new ArrayList\\u0026lt;Translation2d\\u0026gt;(),\\n    new Pose2d(2.3, 0, Rotation2d.fromDegrees(0)),\\n    defaultConfig\\n  ),\\n  drivetrain::getPose,\\n  DrivetrainConstants.kSwerveDriveKinematics,\\n  new PIDController(AutonomousConstants.kPXController, 0, 0),\\n  new PIDController(AutonomousConstants.kPYController, 0, 0),\\n  thetaController,\\n  () -\\u0026gt; Rotation2d.fromDegrees(45),\\n  drivetrain::setModuleStates,\\n  drivetrain\\n);\\n\\nSwerveControllerCommand left = new SwerveControllerCommand(\\n  TrajectoryGenerator.generateTrajectory(\\n    new Pose2d(2.3, 0, Rotation2d.fromDegrees(0)),\\n    new ArrayList\\u0026lt;Translation2d\\u0026gt;(),\\n    new Pose2d(2.3, 2, Rotation2d.fromDegrees(0)),\\n    defaultConfig\\n  ),\\n  drivetrain::getPose,\\n  DrivetrainConstants.kSwerveDriveKinematics,\\n  new PIDController(AutonomousConstants.kPXController, 0, 0),\\n  new PIDController(AutonomousConstants.kPYController, 0, 0),\\n  thetaController,\\n  () -\\u0026gt; Rotation2d.fromDegrees(45), // \\u0026lt;- default behavior is 0\\n  drivetrain::setModuleStates,\\n  drivetrain\\n);\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eIf you have any questions about our code or want clarifications please let me know.\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-01-22T21:45:03.504Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":41,\"reads\":228,\"readers_count\":227,\"score\":255.6,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"matt\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":50984,\"hidden\":false,\"trust_level\":0,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2052 Controls Captain\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/19\",\"custom_user_title\":\"2052 Controls Captain\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2996690,\"name\":\"Nolan\",\"username\":\"Quake\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/quake/{size}/236072_2.png\",\"created_at\":\"2022-01-23T01:26:26.992Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"matt2052\\\" data-post=\\\"19\\\" data-topic=\\\"392018\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/m/c5a1d2/48.png\\\" class=\\\"avatar\\\"\\u003e matt2052:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003echecking our Glass field odometry tracker it shows the same path being followed regardless of rotation\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eDoes this mean your robot odometry appears to follow the intended path, but the actual robot does not(e.g. going right instead of left)? What does your odometry update look like?\\u003c/p\\u003e\\n\\u003cp\\u003eHave you confirmed the odometry correctly tracks while driving in teleop, and that supplying ChassisSpeeds in teleop controls the swerve modules to the correct orientation and speed?\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-01-23T01:26:26.992Z\",\"reply_count\":1,\"reply_to_post_number\":19,\"quote_count\":1,\"incoming_link_count\":12,\"reads\":211,\"readers_count\":210,\"score\":107.2,\"yours\":false,\"topic_id\":392018,\"topic_slug\":\"swerve-trajectory-tracking-with-heading-control\",\"display_username\":\"Nolan\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":37917,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"4512AM\"},\"post_url\":\"/t/swerve-trajectory-tracking-with-heading-control/392018/20\",\"custom_user_title\":\"4512AM\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[2936253,2936259,2936268,2936287,2936292,2936357,2936680,2936767,2936825,2936828,2936976,2936979,2937160,2937161,2937162,2937166,2937178,2937219,2996606,2996690,3005065,3142214]},\"timeline_lookup\":[[1,1683],[7,1682],[11,1681],[13,1680],[19,1358],[21,1341],[22,976]],\"tags\":[\"robot\",\"swerve\",\"programming\",\"autonomous\"],\"tags_descriptions\":{},\"fancy_title\":\"Swerve Trajectory Tracking with Heading Control\",\"id\":392018,\"title\":\"Swerve Trajectory Tracking with Heading Control\",\"posts_count\":22,\"created_at\":\"2021-03-04T01:14:05.056Z\",\"views\":6486,\"reply_count\":16,\"like_count\":20,\"last_posted_at\":\"2023-02-09T01:40:52.683Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"swerve-trajectory-tracking-with-heading-control\",\"category_id\":30,\"word_count\":2385,\"deleted_at\":null,\"user_id\":36581,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_392018\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":22,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":7,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":36581,\"username\":\"benjiboy2539\",\"name\":\"Ben Bistline\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\",\"post_count\":7,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":24178,\"username\":\"jdao\",\"name\":\"jdao\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jdao/{size}/160969_2.png\",\"post_count\":6,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":47306,\"username\":\"Lucas.Ferguson\",\"name\":\"Lucas Ferguson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/lucas.ferguson/{size}/153437_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":1},{\"id\":50984,\"username\":\"matt2052\",\"name\":\"matt\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/c5a1d2/{size}.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":0},{\"id\":29352,\"username\":\"hamac2003\",\"name\":\"hamac2003\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/hamac2003/{size}/135172_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":37917,\"username\":\"Quake\",\"name\":\"Nolan\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/quake/{size}/236072_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":46682,\"username\":\"Autom8it\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/e19adc/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":36581,\"username\":\"benjiboy2539\",\"name\":\"Ben Bistline\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/benjiboy2539/{size}/127059_2.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/435bbb6a8ccde148580d3e7d84d41d8f8446e03b/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/swervecontrollercommand/RobotContainer.java#L97\",\"title\":\"allwpilib/RobotContainer.java at 435bbb6a8ccde148580d3e7d84d41d8f8446e03b · wpilibsuite/allwpilib · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":274,\"user_id\":24178,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://robotpy.readthedocs.io/projects/commands-v2/en/stable/commands2/Swerve4ControllerCommand.html#commands2.Swerve4ControllerCommand\",\"title\":\"Swerve4ControllerCommand — RobotPy Commands v2 2021.2.2.2 documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":118,\"user_id\":24178,\"domain\":\"robotpy.readthedocs.io\",\"root_domain\":\"robotpy.readthedocs.io\"},{\"url\":\"https://drive.google.com/file/d/1rUcnWGezUdbugkJGQoJ-bR3OB3WUma4M/view?usp=sharing\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":112,\"user_id\":47306,\"domain\":\"drive.google.com\",\"root_domain\":\"google.com\"},{\"url\":\"https://github.com/timebots5275frc/robot2021/tree/PathWeaver\",\"title\":\"GitHub - timebots5275frc/robot2021 at PathWeaver\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":95,\"user_id\":47306,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://www.chiefdelphi.com/t/paper-implementation-of-the-adaptive-pure-pursuit-controller/166552\",\"title\":\"Paper: Implementation of the Adaptive Pure Pursuit Controller\",\"internal\":true,\"attachment\":false,\"reflection\":false,\"clicks\":47,\"user_id\":29352,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://docs.google.com/document/d/19RSzkHe1eFjvdaVEvaAxHPnEfQE0ORjeNNrjOwnmnj4/edit?usp=sharing\",\"title\":\"2021_Team4004_Controls - Google Docs\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":31,\"user_id\":29352,\"domain\":\"docs.google.com\",\"root_domain\":\"google.com\"},{\"url\":\"https://www.chiefdelphi.com/t/robot-\",\"title\":null,\"internal\":true,\"attachment\":false,\"reflection\":false,\"clicks\":18,\"user_id\":24178,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://github.com/timebots5275frc/robot2021/blob/8703c84d0f78f6ba19820d487e48bbe5ccec50d6/src/main/java/frc/robot/RobotContainer.java#L103\",\"title\":\"robot2021/RobotContainer.java at 8703c84d0f78f6ba19820d487e48bbe5ccec50d6 · timebots5275frc/robot2021 · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":16,\"user_id\":24178,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/trajectories/trajectory-generation.html#splines\",\"title\":\"Trajectory Generation — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":15,\"user_id\":24178,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.com/FRC2539/pybot/blob/781c2fba804e9471a0589378c3b1fd9b68d85473/subsystems/swervedrive.py#L76\",\"title\":\"pybot/swervedrive.py at 781c2fba804e9471a0589378c3b1fd9b68d85473 · FRC2539/pybot · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":13,\"user_id\":24178,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://www.chiefdelphi.com/t/some-suggestion-and-question-about-swerve-trajectory-generator/396331/4\",\"title\":\"Some suggestion and question about swerve trajectory generator\",\"internal\":true,\"attachment\":false,\"reflection\":true,\"clicks\":3,\"user_id\":34970,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"}]},\"bookmarks\":[]}"}
