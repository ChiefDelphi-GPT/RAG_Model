{"data":"{\"post_stream\":{\"posts\":[{\"id\":3495590,\"name\":\"\",\"username\":\"michjor\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/13edae/{size}.png\",\"created_at\":\"2025-01-29T14:38:50.036Z\",\"cooked\":\"\\u003cp\\u003eLooking for some assistance on transform for PhotonVision and WPILib. Code below everything works fine except for the front_camera_target_yaw result.\\u003cbr\\u003e\\nThe distance is transformed to robot center but the yaw angle is still coming from the camera and 12 degrees off. In the Rotation3d method I added a 12 to the yaw argument and able to get more accurate results.\\u003cbr\\u003e\\nThe camera is perpendicular to front of the robot and 0 degrees offset.\\u003c/p\\u003e\\n\\u003cp\\u003eI’m expecting the yaw return to be 0 degrees for the robot to rotate towards the tag, and use getBestCameraToTarget().Rotation().Degrees() to calculate the strafe input to position the robot perpendicular to the tag to approach it straight ahead. (Without using AprilTag field poseestimation layout or localization).\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003efrom photonlibpy.photonCamera import PhotonCamera\\nfrom wpimath.geometry import Transform3d, Translation3d, Rotation3d\\nimport math\\n\\n\\n# Define the camera's position and orientation relative to the robot center\\ncamera_to_robot_transform = Transform3d(\\n    Translation3d(-0.19, 0.25, 0.33),  # Camera physical location offset to robot center. Meters. x: left (-), y: forward, z: height\\n    Rotation3d(math.radians(0), math.radians(3), math.radians(0))  # Radians, camera angle with 3 degree pitch upwards\\n)\\n\\n# FRONT CAMERA TARGET VARIABLES\\nfront_camera_target_yaw = 0.0\\nfront_camera_target_pitch = 0.0\\nfront_camera_target_distance = float('inf')  # Initialize with large value\\nfront_camera_fiducial_id = None\\nfront_camera_target_visible = False\\n\\n# Process the front camera (any fiducial ID)\\nfront_result = self.front_camera.getLatestResult()\\n\\nif front_result.hasTargets():\\n    for front_camera_target in front_result.getTargets():\\n        # Get camera-to-target transform\\n        camera_to_target_transform = front_camera_target.getBestCameraToTarget()\\n        if camera_to_target_transform is not None:\\n            # Transform the target position from camera frame to robot center frame\\n            robot_to_target_transform = camera_to_target_transform + camera_to_robot_transform\\n\\n            # Extract the transformed position\\n            target_translation = robot_to_target_transform.translation()\\n            distance = target_translation.norm()  # Compute range (distance to the tag)\\n\\n            # Only compute yaw if this is the closest target\\n            if distance \\u0026lt; front_camera_target_distance:\\n                front_camera_target_distance = distance\\n                front_camera_target_yaw = math.degrees(math.atan2(target_translation.y, target_translation.x))  # Convert yaw to degrees\\n                front_camera_target_pitch = front_camera_target.getPitch()\\n                front_camera_fiducial_id = front_camera_target.fiducialId\\n                front_camera_target_visible = True\\n\\u003c/code\\u003e\\u003c/pre\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":1,\"updated_at\":\"2025-01-29T14:38:50.036Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":27,\"reads\":38,\"readers_count\":37,\"score\":142.6,\"yours\":false,\"topic_id\":484111,\"topic_slug\":\"photonvision-yaw-offset-not-zero\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":56276,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/photonvision-yaw-offset-not-zero/484111/1\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false}],\"stream\":[3495590]},\"timeline_lookup\":[[1,255]],\"suggested_topics\":[{\"fancy_title\":\"CTRE Tuner X Swerve Project Generator help\",\"id\":495923,\"title\":\"CTRE Tuner X Swerve Project Generator help\",\"slug\":\"ctre-tuner-x-swerve-project-generator-help\",\"posts_count\":9,\"reply_count\":3,\"highest_post_number\":9,\"image_url\":null,\"created_at\":\"2025-03-17T18:01:33.470Z\",\"last_posted_at\":\"2025-09-05T14:04:53.074Z\",\"bumped\":true,\"bumped_at\":\"2025-09-05T14:04:53.074Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"I used the CTRE Tuner X’s Swerve Generator for Python, and now the robot doesn’t drive right, so, I have no idea what to do next. Please help\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"swerve\",\"ctre\",\"code\",\"python\",\"ctre-swerve-gen\"],\"tags_descriptions\":{},\"like_count\":4,\"views\":215,\"category_id\":77,\"featured_link\":null,\"has_accepted_answer\":true,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3559492,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":73288,\"username\":\"Bray500000\",\"name\":\"Brayden Durocher\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/b/90db22/{size}.png\"},\"posters\":[{\"extras\":\"latest\",\"description\":\"Original Poster, Most Recent Poster, Accepted Answer\",\"user\":{\"id\":73288,\"username\":\"Bray500000\",\"name\":\"Brayden Durocher\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/b/90db22/{size}.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":63596,\"username\":\"Otter502\",\"name\":\"Val\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/otter502/{size}/245799_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":61981,\"username\":\"daltzsmith\",\"name\":\"Dalton\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/daltzsmith/{size}/206287_2.png\",\"primary_group_name\":\"CTRE\",\"flair_name\":\"CTRE\",\"flair_url\":\"/uploads/default/original/3X/1/b/1bd2b430e1bb6427d1c6504ff6abcd31de851a6d.png\",\"flair_group_id\":57,\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":64705,\"username\":\"LaytonK737\",\"name\":\"Layton\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/l/aca169/{size}.png\",\"trust_level\":2}}]},{\"fancy_title\":\"Issues With Wpilib Trajectory Generation Python\",\"id\":484559,\"title\":\"Issues With Wpilib Trajectory Generation Python\",\"slug\":\"issues-with-wpilib-trajectory-generation-python\",\"posts_count\":13,\"reply_count\":8,\"highest_post_number\":13,\"image_url\":null,\"created_at\":\"2025-02-01T02:11:34.118Z\",\"last_posted_at\":\"2025-02-02T20:12:14.858Z\",\"bumped\":true,\"bumped_at\":\"2025-02-02T20:12:14.858Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"I’ve been developing AprilTag alignment code using PhotonVision to calculate the robot’s ideal position for proper alignment. To move the robot to this position, I used WPILib’s Trajectory Generator. …\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"vision\",\"trajectory\"],\"tags_descriptions\":{},\"like_count\":3,\"views\":162,\"category_id\":77,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3498633,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":72024,\"username\":\"Hwagons\",\"name\":\"Henry Wagner\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/h/8797f3/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":72024,\"username\":\"Hwagons\",\"name\":\"Henry Wagner\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/h/8797f3/{size}.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":64275,\"username\":\"aaditsangvikar\",\"name\":\"Aadit Sangvikar\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/aaditsangvikar/{size}/228666_2.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":4760,\"username\":\"billbo911\",\"name\":\"billbo911\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/billbo911/{size}/110890_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"Help using Playing With Fusion TOF sensor and Python\",\"id\":495833,\"title\":\"Help using Playing With Fusion TOF sensor and Python\",\"slug\":\"help-using-playing-with-fusion-tof-sensor-and-python\",\"posts_count\":6,\"reply_count\":2,\"highest_post_number\":6,\"image_url\":null,\"created_at\":\"2025-03-16T23:27:30.707Z\",\"last_posted_at\":\"2025-03-18T18:23:03.550Z\",\"bumped\":true,\"bumped_at\":\"2025-03-18T18:23:03.550Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"From our point of view, the python library works fine, thanks! You’ll have to do a pip install robotpy-playingwithfusion and add it in your pyproject.toml requires section like we did here. There is…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":3,\"views\":128,\"category_id\":77,\"featured_link\":null,\"has_accepted_answer\":true,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3560758,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":5,\"topic_post_user\":{\"id\":32094,\"username\":\"CJ_Hill\",\"name\":\"CJ Hill\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cj_hill/{size}/142363_2.png\"},\"posters\":[{\"extras\":\"latest\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":31768,\"username\":\"FredK\",\"name\":\"FredK\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/f/71e660/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster, Accepted Answer\",\"user\":{\"id\":32094,\"username\":\"CJ_Hill\",\"name\":\"CJ Hill\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cj_hill/{size}/142363_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":65,\"username\":\"Joe_Ross\",\"name\":\"Joe Ross\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/joe_ross/{size}/37_2.png\",\"moderator\":true,\"trust_level\":4}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":11063,\"username\":\"virtuald\",\"name\":\"Dustin Spicuzza\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/virtuald/{size}/65268_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":42432,\"username\":\"JaredL\",\"name\":\"Jared Leonard\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jaredl/{size}/240552_2.png\",\"trust_level\":2}}]},{\"fancy_title\":\"CANSparkMax vs SparkMax\",\"id\":493973,\"title\":\"CANSparkMax vs SparkMax\",\"slug\":\"cansparkmax-vs-sparkmax\",\"posts_count\":5,\"reply_count\":1,\"highest_post_number\":5,\"image_url\":null,\"created_at\":\"2025-03-03T14:11:39.888Z\",\"last_posted_at\":\"2025-03-03T19:08:36.260Z\",\"bumped\":true,\"bumped_at\":\"2025-03-03T19:08:36.260Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"So, I have a weird thing going on. We have a couple of computers being used to program our robot using Robotpy and the REV library, and it seems that all of them are up to date (Robotpy - 2025.3.1.1; …\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":4,\"views\":186,\"category_id\":77,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3545802,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":13247,\"username\":\"deeek\",\"name\":\"Derek W.\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/d/ce7236/{size}.png\"},\"posters\":[{\"extras\":\"latest\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":13247,\"username\":\"deeek\",\"name\":\"Derek W.\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/d/ce7236/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":11063,\"username\":\"virtuald\",\"name\":\"Dustin Spicuzza\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/virtuald/{size}/65268_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":71903,\"username\":\"F-4_Phantom_II\",\"name\":\"Martin\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/f/d07c76/{size}.png\",\"trust_level\":2}}]},{\"fancy_title\":\"MagicBot AddPeriodic\",\"id\":496837,\"title\":\"MagicBot AddPeriodic\",\"slug\":\"magicbot-addperiodic\",\"posts_count\":2,\"reply_count\":0,\"highest_post_number\":2,\"image_url\":null,\"created_at\":\"2025-03-25T03:25:16.612Z\",\"last_posted_at\":\"2025-03-25T05:22:20.469Z\",\"bumped\":true,\"bumped_at\":\"2025-03-25T05:22:20.469Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"My team uses magicbot for robotpy, and we want to use an equivalent of addPeriodic, even though we aren’t using TimedRobot. We’ve tried adding a notifier, and it caused severe loop overruns, and the a…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":2,\"views\":110,\"category_id\":77,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3567772,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":62698,\"username\":\"CakeDeer6\",\"name\":\"Ethan Grieshop\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cakedeer6/{size}/264680_2.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":62698,\"username\":\"CakeDeer6\",\"name\":\"Ethan Grieshop\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/cakedeer6/{size}/264680_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":11063,\"username\":\"virtuald\",\"name\":\"Dustin Spicuzza\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/virtuald/{size}/65268_2.png\",\"trust_level\":2}}]}],\"tags\":[\"photonvision\"],\"tags_descriptions\":{},\"fancy_title\":\"PhotonVision yaw offset not zero\",\"id\":484111,\"title\":\"PhotonVision yaw offset not zero\",\"posts_count\":1,\"created_at\":\"2025-01-29T14:38:49.950Z\",\"views\":71,\"reply_count\":0,\"like_count\":0,\"last_posted_at\":\"2025-01-29T14:38:50.036Z\",\"visible\":true,\"closed\":false,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"photonvision-yaw-offset-not-zero\",\"category_id\":77,\"word_count\":307,\"deleted_at\":null,\"user_id\":56276,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_484111\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":1,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":{\"id\":40166,\"execute_at\":\"2026-01-29T14:38:50.036Z\",\"duration_minutes\":525600,\"based_on_last_post\":true,\"status_type\":\"close\",\"category_id\":null},\"message_bus_last_id\":0,\"participant_count\":1,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":56276,\"username\":\"michjor\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/13edae/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":1}],\"created_by\":{\"id\":56276,\"username\":\"michjor\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/13edae/{size}.png\"},\"last_poster\":{\"id\":56276,\"username\":\"michjor\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/13edae/{size}.png\"}},\"bookmarks\":[]}"}
