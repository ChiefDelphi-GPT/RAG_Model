{"data":"{\"post_stream\":{\"posts\":[{\"id\":3352072,\"name\":\"\",\"username\":\"MichaelRemi\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\",\"created_at\":\"2024-04-04T02:03:48.369Z\",\"cooked\":\"\\u003cp\\u003eFor our robot, we need our NEO motor to spin faster over one half of the revolution until it hits a certain position, then spin slower over the other half until it completes a full revolution. We currently have a NEO Brushless 1.1 in a 36:1 gearbox hooked up to a Spark MAX controller and we’re controlling the motor through \\u003cspan class=\\\"abbreviation\\\"\\u003ePWM\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Pulse Width Modulation\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e (coding in C++).\\u003c/p\\u003e\\n\\u003cp\\u003eRight now, what we’re doing is running the motor at a higher duty cycle at a given delay to spin for a half revolution, then spinning it at a lower duty cycle for a longer delay to complete the revolution. However, this isn’t very precise, and the motor completes the full cycle after around 365 degrees. After many cycles, this 5 degree offset compounds.\\u003c/p\\u003e\\n\\u003cp\\u003eOne option that we have is to use a limit switch. The limit switch will cue the motor when to stop to prevent the motor arm from spinning too far. Our only concern is that the motor still spins pretty fast over the slow section (around 40 \\u003cspan class=\\\"abbreviation\\\"\\u003eRPM\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Revolutions Per Minute\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e), and this limit switch will quickly accumulate thousands of cycles.\\u003c/p\\u003e\\n\\u003cp\\u003eWith the NEO and SparkMAX set up, do we have access to any position data that can help add precision to our set up? I’m hoping we don’t have to purchase the Through Bore Encoder because the Absolute Encoder Adapter and the Data Port Breakout Board are both out of stock. The Alternate Adapter is in stock, but it doesn’t seem like exactly what we want.\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T02:03:48.369Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":363,\"reads\":244,\"readers_count\":243,\"score\":1868.8,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":65641,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/1\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":3352136,\"name\":\"\",\"username\":\"TheComputer314\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thecomputer314/{size}/241453_2.png\",\"created_at\":\"2024-04-04T03:34:50.134Z\",\"cooked\":\"\\u003cp\\u003e\\u003ca href=\\\"https://xyproblem.info/\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eThis sounds very X/Y problem-y.\\u003c/a\\u003e What are you controlling with the motor? What do you intend to do with it? How did you come up with this particular idea?\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003ca href=\\\"https://www.youtube.com/watch?v=d80oXSCcHTk\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eMaking a motor spin at a particular speed for half of its rotation and at another speed for the other half of its rotation is something that isn’t completely impossible\\u003c/a\\u003e but I don’t see a way to do it precisely with \\u003cspan class=\\\"abbreviation\\\"\\u003eFRC\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"FIRST Robotics Competition\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e control systems.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T03:34:50.134Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":221,\"readers_count\":220,\"score\":114.2,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://xyproblem.info/\",\"internal\":false,\"reflection\":false,\"title\":\"Home - The XY Problem\",\"clicks\":34},{\"url\":\"https://www.youtube.com/watch?v=d80oXSCcHTk\",\"internal\":false,\"reflection\":false,\"clicks\":21}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":5}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":62207,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"The one crazy dude on 167\"},\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/2\",\"custom_user_title\":\"The one crazy dude on 167\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":4},{\"id\":\"point_up\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":5,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352152,\"name\":\"\",\"username\":\"MichaelRemi\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\",\"created_at\":\"2024-04-04T03:58:44.448Z\",\"cooked\":\"\\u003cp\\u003eThanks for the response.\\u003c/p\\u003e\\n\\u003cp\\u003eOur fundamental idea is we want to move an indoor rowing machine back and forth with certain timing to simulate rowing on a boat. Our idea is we have a motor on a linear track, and it has a weight attached to an extension of the rotor arm. The half rotation was a bit of a simplification as to not overcomplicate the blurb, but we want this weight to spin fast when it’s aligned with the linear track, and spin slower when it’s lateral to the track, to apply a centripetal acceleration to roll the whole system back and forth along the track with the correct timing. We didn’t want to use an actuator because the rower should be able to resist the force generated by the motor - if we used an actuator, the rower’s movement would be constrained.\\u003c/p\\u003e\\n\\u003cp\\u003eSo, we want the motor to spin fast for the quarter of the rotation it’s aligned with the forward direction of the track, spin slow when it gets to the next quarter that’s lateral to the track, then spin fast again when it gets to the backward direction of the track, and finish by spinning slow back to its starting position.\\u003c/p\\u003e\\n\\u003cp\\u003eDo you not think the Through Bore Encoder would give us the precision to control the NEO as intended? We originally wanted a stepper motor but they were out of budget given our high power needs. It seems like the Through Bore Encoder will give us a lot of position data that we can use to locate the motor arm to have it spin fast/slow at the correct spots.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T03:58:44.448Z\",\"reply_count\":2,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":214,\"readers_count\":213,\"score\":52.8,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":62207,\"username\":\"TheComputer314\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thecomputer314/{size}/241453_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":65641,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/3\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352269,\"name\":\"\",\"username\":\"TheComputer314\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thecomputer314/{size}/241453_2.png\",\"created_at\":\"2024-04-04T13:23:15.980Z\",\"cooked\":\"\\u003cp\\u003eAh ok, so the goal is to control the speed of the shaft at the end of the gearboxes, not at the motor. In that case it would be significantly easier. Using a throughbore encoder to measure the arm’s angle would suffice. Software wise, I’m imagining something like full-sending the motor between 0-180 deg and half-speeding the motor between 180-360 deg given the encoder measurement. Angles might have to be offset and/or run through MathUtil.angleModulus().\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T13:23:15.980Z\",\"reply_count\":3,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":159,\"readers_count\":158,\"score\":61.8,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":62207,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"The one crazy dude on 167\"},\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/4\",\"custom_user_title\":\"The one crazy dude on 167\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352274,\"name\":\"Dan\",\"username\":\"theworkshope\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/theworkshope/{size}/194375_2.png\",\"created_at\":\"2024-04-04T13:32:10.536Z\",\"cooked\":\"\\u003cp\\u003eThe true secret is often measuring after your backlash \\u003cimg src=\\\"https://www.chiefdelphi.com/images/emoji/google/slight_smile.png?v=12\\\" title=\\\":slight_smile:\\\" class=\\\"emoji\\\" alt=\\\":slight_smile:\\\" loading=\\\"lazy\\\" width=\\\"20\\\" height=\\\"20\\\"\\u003e (and with as much resolution as reasonable).\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T13:33:12.318Z\",\"reply_count\":0,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":156,\"readers_count\":155,\"score\":36.2,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"Dan\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":62207,\"username\":\"TheComputer314\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thecomputer314/{size}/241453_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53412,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/5\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352278,\"name\":\"\",\"username\":\"MichaelRemi\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\",\"created_at\":\"2024-04-04T13:39:28.283Z\",\"cooked\":\"\\u003cp\\u003eThe absolute encoder adapter and the Spark Max Data Port Breakout board are both out of stock, so our only option is to use the Alternate Encoder Adapter and use the Through Bore Encoder as an Incremental Encoder. Would this work in a similar way? How would we know the starting position if it were an incremental encoder?\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T13:39:28.283Z\",\"reply_count\":0,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":149,\"readers_count\":148,\"score\":29.8,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":62207,\"username\":\"TheComputer314\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thecomputer314/{size}/241453_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":65641,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/6\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352285,\"name\":\"\",\"username\":\"TheComputer314\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thecomputer314/{size}/241453_2.png\",\"created_at\":\"2024-04-04T13:49:48.381Z\",\"cooked\":\"\\u003cp\\u003eThe throughbore encoder can be plugged directly into the RIO as a DIO absolute encoder, so you can use that for knowing the position of the arm.\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T13:49:48.381Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":135,\"readers_count\":134,\"score\":37.0,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":62207,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"The one crazy dude on 167\"},\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/7\",\"custom_user_title\":\"The one crazy dude on 167\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352288,\"name\":\"\",\"username\":\"MichaelRemi\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\",\"created_at\":\"2024-04-04T14:02:28.741Z\",\"cooked\":\"\\u003cp\\u003eDo you know if this would work with the Spark MAX using the Alternate Encoder Adapter? The RoboRIO is currently out of stock.\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T14:02:28.741Z\",\"reply_count\":1,\"reply_to_post_number\":7,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":120,\"readers_count\":119,\"score\":29.0,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":62207,\"username\":\"TheComputer314\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thecomputer314/{size}/241453_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":65641,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/8\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352303,\"name\":\"Dan\",\"username\":\"theworkshope\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/theworkshope/{size}/194375_2.png\",\"created_at\":\"2024-04-04T14:33:54.422Z\",\"cooked\":\"\\u003cp\\u003eIf you’re not on the Rio/\\u003cspan class=\\\"abbreviation\\\"\\u003eFRC\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"FIRST Robotics Competition\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e SW stack then you have lots of options for encoders and interfacing. What platforms do you have experience with (your go-to option)? Arduino, Pi, ESP32, etc.\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T14:34:23.146Z\",\"reply_count\":1,\"reply_to_post_number\":8,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":113,\"readers_count\":112,\"score\":27.6,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"Dan\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":65641,\"username\":\"MichaelRemi\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53412,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/9\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352314,\"name\":\"Skye Leake\",\"username\":\"Skyehawk\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/skyehawk/{size}/179363_2.png\",\"created_at\":\"2024-04-04T15:17:42.008Z\",\"cooked\":\"\\u003cp\\u003eA predictable motion profile that has different speeds through the path is often accomplished with linkages.\\u003c/p\\u003e\\n\\u003cp\\u003eConstant rpm in → different speeds at different mechanical advantages out.\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T15:18:41.046Z\",\"reply_count\":0,\"reply_to_post_number\":3,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":102,\"readers_count\":101,\"score\":35.4,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"Skye Leake\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":65641,\"username\":\"MichaelRemi\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":5}],\"moderator\":true,\"admin\":false,\"staff\":true,\"user_id\":19235,\"hidden\":false,\"trust_level\":4,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Pretengineer\"},\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/10\",\"custom_user_title\":\"Pretengineer\",\"reactions\":[{\"id\":\"point_up\",\"type\":\"emoji\",\"count\":3},{\"id\":\"+1\",\"type\":\"emoji\",\"count\":1},{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":5,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352322,\"name\":\"FrankJ\",\"username\":\"FrankJ\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frankj/{size}/5392_2.png\",\"created_at\":\"2024-04-04T15:26:29.302Z\",\"cooked\":\"\\u003cp\\u003eYou would probably have better luck with a 4 bar linkage or elliptical gears. I am at a competition so cannot dig up any examples.\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T15:26:29.302Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":92,\"readers_count\":91,\"score\":28.4,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"FrankJ\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":15944,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2974 Robot Mentor\"},\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/11\",\"custom_user_title\":\"2974 Robot Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352327,\"name\":\"Max Morehead\",\"username\":\"Max_Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\",\"created_at\":\"2024-04-04T15:36:57.063Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"MichaelRemi\\\" data-post=\\\"1\\\" data-topic=\\\"461265\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/m/22d042/48.png\\\" class=\\\"avatar\\\"\\u003e MichaelRemi:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003e36:1 gearbox\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eCould you describe a little more about what gearbox you are using? Is it a spur gearbox, or planetary and what is its output.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"MichaelRemi\\\" data-post=\\\"1\\\" data-topic=\\\"461265\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/m/22d042/48.png\\\" class=\\\"avatar\\\"\\u003e MichaelRemi:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003ecoding in C++\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI assume this is non-\\u003cspan class=\\\"abbreviation\\\"\\u003eFRC\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"FIRST Robotics Competition\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e application, so you’re using something like arduino to create the \\u003cspan class=\\\"abbreviation\\\"\\u003ePWM\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Pulse Width Modulation\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e signal. Could you provide a little more info about what controller you’re using and how you’re programming it?\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"MichaelRemi\\\" data-post=\\\"1\\\" data-topic=\\\"461265\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/m/22d042/48.png\\\" class=\\\"avatar\\\"\\u003e MichaelRemi:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eHowever, this isn’t very precise, and the motor completes the full cycle after around 365 degrees. After many cycles, this 5 degree offset compounds.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eWhat level of precision do you need? Is it okay if the rotation is detected within one or two degrees, as long as the error does not build up over multiple rotation?\\u003c/p\\u003e\\n\\u003cp\\u003eYou have two problems:\\u003c/p\\u003e\\n\\u003col\\u003e\\n\\u003cli\\u003e\\n\\u003cp\\u003eAccurately measuring the rotation of your output shaft.\\u003c/p\\u003e\\n\\u003c/li\\u003e\\n\\u003cli\\u003e\\n\\u003cp\\u003eControlling your machine to the desired position based on the rotation.\\u003c/p\\u003e\\n\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cp\\u003eFor problem one, as people have indicated, an absolute encoder attached to the output shaft would be ideal. One people use a lot for \\u003cspan class=\\\"abbreviation\\\"\\u003eFRC\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"FIRST Robotics Competition\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e in the Thrifty Magnetic Encoder. It gives an analog signal out, which you could read with an arduino (and it works in both 3.3V and 5V mode I believe). You would have to drill a 1/4\\\" hole in your output shaft and glue in a magnet.\\u003c/p\\u003e\\n\\u003caside class=\\\"onebox allowlistedgeneric\\\" data-onebox-src=\\\"https://www.thethriftybot.com/products/thrifty-absolute-magnetic-encoder\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://www.thethriftybot.com/products/thrifty-absolute-magnetic-encoder\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003eThe Thrifty Bot\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003cdiv class=\\\"aspect-image\\\" style=\\\"--aspect-ratio:481/500;\\\"\\u003e\\u003cimg src=\\\"https://www.thethriftybot.com/cdn/shop/files/PXL_20230912_162030751_1.jpg?v=1694535889\\\" class=\\\"thumbnail\\\" width=\\\"\\\" height=\\\"\\\"\\u003e\\u003c/div\\u003e\\n\\n\\u003ch3\\u003e\\u003ca href=\\\"https://www.thethriftybot.com/products/thrifty-absolute-magnetic-encoder\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003eThrifty Absolute Magnetic Encoder\\u003c/a\\u003e\\u003c/h3\\u003e\\n\\n  \\u003cp\\u003e\\u0026nbsp; ﻿Note: Molded plastic cases have begun shipping with all encoder orders!﻿ The Thrifty Absolute Magnetic Encoder was designed to provide teams a lower cost option for absolute position sensing. Simply plug the included 3-wire PWM style cable...\\u003c/p\\u003e\\n\\n  \\u003cp\\u003e\\n    \\u003cspan class=\\\"label1\\\"\\u003ePrice: USD 29.99\\u003c/span\\u003e\\n  \\u003c/p\\u003e\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eIf you have a smaller output shaft, one possibility is the CUI AMT102 (it is not absolute but instead has a “index” signal that triggers once per rotation). It comes with mounts for small round shafts. There are probably other absolute encoders you can buy.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003ca href=\\\"https://www.digikey.com/en/products/detail/cui-devices/AMT102-V/827015\\\" class=\\\"onebox\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003ehttps://www.digikey.com/en/products/detail/cui-devices/AMT102-V/827015\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eIf you can’t spend more money, one harder option would to be read the output of the NEOs built-in hall effect sensor. Based on some other \\u003cspan class=\\\"abbreviation\\\"\\u003eCD\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Chief Delphi\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e searches I believe it has three phases which each go high 7 times per revolution (so with Arduino you could trigger an interrupt whenever the input from each phase changes, which happens 42 times per revolutions, so 1512 for one full rotation of your machine). Some experimentation might have to happen to make sure this works correctly (and it’s a 5V input so make sure your controller can handle this).\\u003c/p\\u003e\\n\\u003cp\\u003eThis option would be sufficient if you were find with a little bit of error (due to backlash), as long as it didn’t add up a little bit over time. It will also be more complicated to program.\\u003c/p\\u003e\\n\\u003caside class=\\\"onebox allowlistedgeneric\\\" data-onebox-src=\\\"https://docs.revrobotics.com/sparkmax/feature-description/data-port\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003cimg src=\\\"https://2353547788-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-M7iEUG41QXEdyOMqbkc%2Ficon%2F7aY0EC13LDR0qvEAxaoa%2FREV_Logo_for_GitBook-1250x1200px.png?alt=media\\u0026amp;token=66827752-c0ec-40fb-88c3-32dbbf31831d\\\" class=\\\"site-icon\\\" width=\\\"\\\" height=\\\"\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://docs.revrobotics.com/sparkmax/feature-description/data-port\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003edocs.revrobotics.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003cimg width=\\\"\\\" height=\\\"\\\" src=\\\"https://docs.revrobotics.com/sparkmax/~gitbook/ogimage/-M7oBXtcF6MTV4OfGesv\\\" class=\\\"thumbnail\\\"\\u003e\\n\\n\\u003ch3\\u003e\\u003ca href=\\\"https://docs.revrobotics.com/sparkmax/feature-description/data-port\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003eData Port | SPARK MAX\\u003c/a\\u003e\\u003c/h3\\u003e\\n\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003caside class=\\\"onebox allowlistedgeneric\\\" data-onebox-src=\\\"https://docs.revrobotics.com/sparkmax/feature-description/encoder-port\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003cimg src=\\\"https://2353547788-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-M7iEUG41QXEdyOMqbkc%2Ficon%2F7aY0EC13LDR0qvEAxaoa%2FREV_Logo_for_GitBook-1250x1200px.png?alt=media\\u0026amp;token=66827752-c0ec-40fb-88c3-32dbbf31831d\\\" class=\\\"site-icon\\\" width=\\\"\\\" height=\\\"\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://docs.revrobotics.com/sparkmax/feature-description/encoder-port\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003edocs.revrobotics.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003cimg width=\\\"\\\" height=\\\"\\\" src=\\\"https://docs.revrobotics.com/sparkmax/~gitbook/ogimage/-M7o1fUi-kqYS5scx-H5\\\" class=\\\"thumbnail\\\"\\u003e\\n\\n\\u003ch3\\u003e\\u003ca href=\\\"https://docs.revrobotics.com/sparkmax/feature-description/encoder-port\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003eEncoder Port | SPARK MAX\\u003c/a\\u003e\\u003c/h3\\u003e\\n\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003caside class=\\\"quote\\\" data-post=\\\"9\\\" data-topic=\\\"374995\\\"\\u003e\\n  \\u003cdiv class=\\\"title\\\"\\u003e\\n    \\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n    \\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/geetwo/48/120962_2.png\\\" class=\\\"avatar\\\"\\u003e\\n    \\u003ca href=\\\"https://www.chiefdelphi.com/t/pwm-sparkmax-encoder/374995/9\\\"\\u003ePWM SparkMax Encoder\\u003c/a\\u003e \\u003ca class=\\\"badge-category__wrapper \\\" href=\\\"/c/technical/programming/30\\\"\\u003e\\u003cspan data-category-id=\\\"30\\\" style=\\\"--category-badge-color: #F7941D; --category-badge-text-color: #FFF; --parent-category-badge-color: #3AB54A;\\\" data-parent-category-id=\\\"9\\\" data-drop-close=\\\"true\\\" class=\\\"badge-category --has-parent\\\" title=\\\"Discussion of any ideas, algorithms, etc.\\\"\\u003e\\u003cspan class=\\\"badge-category__name\\\"\\u003eProgramming\\u003c/span\\u003e\\u003c/span\\u003e\\u003c/a\\u003e\\n  \\u003c/div\\u003e\\n  \\u003cblockquote\\u003e\\n    No, the encoder in the motor actually includes this PWM as an output, similar to the absolute encoder line on the SRX encoder (though I presume it has 42 rather than 4096 different states).\\n  \\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eAnother option you may not have considered is a string potentiometer along the linear track, but your explanation doesn’t make enough sense to me to determine whether I’d recommend it.\\u003c/p\\u003e\\n\\u003cp\\u003eIn general, the encoder choice is going to be driven by the mechanical mounting constraints (i.e. what you’re output shaft is and what fabrication abilities you have available) and the controller you’re using.\\u003c/p\\u003e\\n\\u003cp\\u003eFor problem 2, it sounds like you could just change the percent output based on the measured rotation, but their might be more complex things you can try based on what you desire the behavior to be (for example do you desire a constant force during parts of the rotation).\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T15:40:14.026Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":1,\"incoming_link_count\":10,\"reads\":97,\"readers_count\":96,\"score\":79.4,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"Max Morehead\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.thethriftybot.com/products/thrifty-absolute-magnetic-encoder\",\"internal\":false,\"reflection\":false,\"title\":\"Thrifty Absolute Magnetic Encoder\",\"clicks\":4},{\"url\":\"https://docs.revrobotics.com/sparkmax/feature-description/data-port\",\"internal\":false,\"reflection\":false,\"title\":\"Data Port | SPARK MAX\",\"clicks\":1},{\"url\":\"https://docs.revrobotics.com/sparkmax/feature-description/encoder-port\",\"internal\":false,\"reflection\":false,\"title\":\"Encoder Port | SPARK MAX\",\"clicks\":1},{\"url\":\"https://www.digikey.com/en/products/detail/cui-devices/AMT102-V/827015\",\"internal\":false,\"reflection\":false,\"title\":\"AMT102-V CUI Devices | Sensors, Transducers | DigiKey\",\"clicks\":1},{\"url\":\"https://www.chiefdelphi.com/t/pwm-sparkmax-encoder/374995/9\",\"internal\":true,\"reflection\":false,\"title\":\"PWM SparkMax Encoder\",\"clicks\":0}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53784,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor\"},\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/12\",\"custom_user_title\":\"Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352329,\"name\":\"\",\"username\":\"MichaelRemi\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\",\"created_at\":\"2024-04-04T15:39:52.666Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"TheComputer314\\\" data-post=\\\"4\\\" data-topic=\\\"461265\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/thecomputer314/48/241453_2.png\\\" class=\\\"avatar\\\"\\u003e TheComputer314:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003espeeding\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eWe have experience using Arduino and ESP-32. ESP-32 is what we have in our circuit right now\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T15:39:52.666Z\",\"reply_count\":0,\"reply_to_post_number\":9,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":73,\"readers_count\":72,\"score\":19.6,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":53412,\"username\":\"theworkshope\",\"name\":\"Dan\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/theworkshope/{size}/194375_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":65641,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/13\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"+1\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352331,\"name\":\"BillDunlap\",\"username\":\"BillDunlap\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/b/7ea924/{size}.png\",\"created_at\":\"2024-04-04T15:46:41.431Z\",\"cooked\":\"\\u003cp\\u003eMy first thought also was to use a four bar linkage.  E.g., \\u003ca href=\\\"https://dynref.engr.illinois.edu/aml.html\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eFour-Bar Linkages\\u003c/a\\u003e, \\u003ca href=\\\"https://www.robives.com/blog/four-bar-linkage-mechanism/\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ehttps://www.robives.com/blog/four-bar-linkage-mechanism/\\u003c/a\\u003e or \\u003ca href=\\\"https://www.reddit.com/r/ScienceNcoolThings/comments/18bcarp/multi_stage_four_bar_linkage/\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ehttps://www.reddit.com/r/ScienceNcoolThings/comments/18bcarp/multi_stage_four_bar_linkage/\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003e-Bill\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T15:46:41.431Z\",\"reply_count\":0,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":72,\"readers_count\":71,\"score\":14.4,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"BillDunlap\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.reddit.com/r/ScienceNcoolThings/comments/18bcarp/multi_stage_four_bar_linkage/\",\"internal\":false,\"reflection\":false,\"clicks\":3},{\"url\":\"https://www.robives.com/blog/four-bar-linkage-mechanism/\",\"internal\":false,\"reflection\":false,\"clicks\":2},{\"url\":\"https://dynref.engr.illinois.edu/aml.html\",\"internal\":false,\"reflection\":false,\"title\":\"Four-Bar Linkages\",\"clicks\":2}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":15944,\"username\":\"FrankJ\",\"name\":\"FrankJ\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frankj/{size}/5392_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16385,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/14\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352336,\"name\":\"\",\"username\":\"MichaelRemi\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\",\"created_at\":\"2024-04-04T15:47:36.351Z\",\"cooked\":\"\\u003cp\\u003eThanks for the response Max. To answer some of your questions:\\u003cbr\\u003e\\n1: We’re using a 36:1 planetary gearbox with a hex shaft output. \\u003ca href=\\\"https://www.andymark.com/products/cim-sport-options?via=Z2lkOi8vYW5keW1hcmsvV29ya2FyZWE6OkNhdGFsb2c6OkNhdGVnb3J5LzViMzY1MGNlYmM2ZjZkM2UyNzczOGY5MQ\\u0026amp;Ratio=36%3A1%20HD%20(am-4008_036)\\u0026amp;quantity=1\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ehttps://www.andymark.com/products/cim-sport-options?via=Z2lkOi8vYW5keW1hcmsvV29ya2FyZWE6OkNhdGFsb2c6OkNhdGVnb3J5LzViMzY1MGNlYmM2ZjZkM2UyNzczOGY5MQ\\u0026amp;Ratio=36%3A1%20HD%20(am-4008_036)\\u0026amp;quantity=1\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003e2: We’re using an ESP-32. The general way we’re coding it right now is sending \\u003cspan class=\\\"abbreviation\\\"\\u003ePWM\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Pulse Width Modulation\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e(duty_cycle) to the motor to spin for a given time period, then having it spin at \\u003cspan class=\\\"abbreviation\\\"\\u003ePWM\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Pulse Width Modulation\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e(lower_duty_cycle) to spin for another given time period.\\u003c/p\\u003e\\n\\u003cp\\u003e3: A 1-2 degree error per revolution is totally fine. The main issue is the accumulation of this error. This machine will complete around 20 full revolutions per minute and we want to have this running for at least 30 minutes at a time, so this small error can compound quickly.\\u003c/p\\u003e\\n\\u003cp\\u003eOur current path forward seems to try to connect the Through Bore Encoder to an Alternate Encoder Adapter on the Spark MAX because the Absolute is out of stock. The issue with this set up is trying to figure out the starting position. We may try to work around this by having a homing sequence with a limit switch before starting the full operation.\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T15:47:36.351Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":72,\"readers_count\":71,\"score\":19.4,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.andymark.com/products/cim-sport-options?via=Z2lkOi8vYW5keW1hcmsvV29ya2FyZWE6OkNhdGFsb2c6OkNhdGVnb3J5LzViMzY1MGNlYmM2ZjZkM2UyNzczOGY5MQ\\u0026Ratio=36%3A1%20HD%20(am-4008_036)\\u0026quantity=1\",\"internal\":false,\"reflection\":false,\"clicks\":1}],\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":53784,\"username\":\"Max_Morehead\",\"name\":\"Max Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":65641,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/15\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352399,\"name\":\"Max Morehead\",\"username\":\"Max_Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\",\"created_at\":\"2024-04-04T16:58:41.082Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"MichaelRemi\\\" data-post=\\\"15\\\" data-topic=\\\"461265\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/m/22d042/48.png\\\" class=\\\"avatar\\\"\\u003e MichaelRemi:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eOur current path forward seems to try to connect the Through Bore Encoder to an Alternate Encoder Adapter on the Spark MAX because the Absolute is out of stock. The issue with this set up is trying to figure out the starting position.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eYou don’t want to do this because you don’t have any way to read the encoder’s output when you’re controlling it over \\u003cspan class=\\\"abbreviation\\\"\\u003ePWM\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Pulse Width Modulation\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e. People who are recommending it are probably used to controlling a SparkMAX over \\u003cspan class=\\\"abbreviation\\\"\\u003eCAN\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Controller Area Network\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e, if I’m not missing something. If you’re going to use through-bore encoder you’d just using the included wiring adapter (\\u003ca href=\\\"https://www.revrobotics.com/rev-11-1817/\\\" class=\\\"inline-onebox\\\"\\u003eJST PH 6-pin to 4 Channel PWM Cable - 1m - REV Robotics\\u003c/a\\u003e) to directly read the outputs.\\u003c/p\\u003e\\n\\u003cp\\u003eHowever, the problem is the ESP32 does not have any obvious way to convert the \\u003cspan class=\\\"abbreviation\\\"\\u003ePWM\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Pulse Width Modulation\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e output to a measured angle. Based on some searches you could try to use interrupts or maybe the RMT interface to do so, but as someone who works with the ESP32 professionally I’d consider that advanced/difficult and I’m not sure how well either would work. I did find this RMT library for the esp32 that seems to solve this problem: \\u003ca href=\\\"https://github.com/rewegit/esp32-rmt-pwm-reader\\\" class=\\\"inline-onebox\\\"\\u003eGitHub - rewegit/esp32-rmt-pwm-reader: esp32 8 channel rc-pwm-reader for arduino framework\\u003c/a\\u003e, so maybe it’s easier than my first reaction.\\u003c/p\\u003e\\n\\u003cp\\u003eThe other methods to use the through-bore encoder would be to design a low pass filter/integrator to convert the pwm output to an analog value, or to find a chip that does so (LTC 2645 seems like it would work), but at that point why use the through-bore. You could also use the quadrature and index outputs (again just connecting them to ESP32 GPIO) but there would also be some complications there, and you’d have to spin the device at least once before being able to detect it’s absolute rotation (using the index input).\\u003c/p\\u003e\\n\\u003cp\\u003eI still like the idea of drilling a hole in the end of the shaft, gluing in a magnet, and using the thrifty encoder (set to 3.3V mode), which you should be able to read easily with ESP32.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"MichaelRemi\\\" data-post=\\\"15\\\" data-topic=\\\"461265\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/m/22d042/48.png\\\" class=\\\"avatar\\\"\\u003e MichaelRemi:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eWe’re using an ESP-32.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eAre you using the Arduino libraries or ESP-IDF directly?\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T17:04:47.756Z\",\"reply_count\":2,\"reply_to_post_number\":15,\"quote_count\":1,\"incoming_link_count\":5,\"reads\":55,\"readers_count\":54,\"score\":46.0,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"Max Morehead\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/rewegit/esp32-rmt-pwm-reader\",\"internal\":false,\"reflection\":false,\"title\":\"GitHub - rewegit/esp32-rmt-pwm-reader: esp32 8 channel rc-pwm-reader for arduino framework\",\"clicks\":2},{\"url\":\"https://www.revrobotics.com/rev-11-1817/\",\"internal\":false,\"reflection\":false,\"title\":\"JST PH 6-pin to 4 Channel PWM Cable - 1m - REV Robotics\",\"clicks\":1}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53784,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor\"},\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/16\",\"custom_user_title\":\"Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352433,\"name\":\"\",\"username\":\"MichaelRemi\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\",\"created_at\":\"2024-04-04T17:29:04.444Z\",\"cooked\":\"\\u003cp\\u003eGotcha, this is super helpful information, thanks. I’ll take a look into the git you sent.\\u003c/p\\u003e\\n\\u003cp\\u003eWe downloaded ESP libraries by expressif to run the code through the Arduino IDE. \\u003ca href=\\\"https://docs.espressif.com/projects/arduino-esp32/en/latest/installing.html\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eInstalling - - — Arduino ESP32 latest documentation\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eDo you know if using an Arduino would make converting the \\u003cspan class=\\\"abbreviation\\\"\\u003ePWM\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Pulse Width Modulation\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e to a maesured angle a simpler operation? We’ve gotten the Arduino to spin our motor before, so it’s not too late in the game to switch our microcontroller.\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T17:29:04.444Z\",\"reply_count\":1,\"reply_to_post_number\":16,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":48,\"readers_count\":47,\"score\":24.6,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.espressif.com/projects/arduino-esp32/en/latest/installing.html\",\"internal\":false,\"reflection\":false,\"title\":\"Installing - - — Arduino ESP32 latest documentation\",\"clicks\":0}],\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":53784,\"username\":\"Max_Morehead\",\"name\":\"Max Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":65641,\"hidden\":false,\"trust_level\":1,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/17\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352438,\"name\":\"Dan\",\"username\":\"theworkshope\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/theworkshope/{size}/194375_2.png\",\"created_at\":\"2024-04-04T17:38:13.159Z\",\"cooked\":\"\\u003cp\\u003eArduino also has the ESP 32 version for 20 bucks, looks like 3.3V so may need to level shift depending on your encoder setup (edit: he one you have is 3.3 already)?\\u003c/p\\u003e\\n\\u003caside class=\\\"onebox allowlistedgeneric\\\" data-onebox-src=\\\"https://store-usa.arduino.cc/pages/nano-esp32\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003cimg src=\\\"https://store-usa.arduino.cc/cdn/shop/files/favicon-48x48_32x32.png?v=1626427468\\\" class=\\\"site-icon\\\" width=\\\"\\\" height=\\\"\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://store-usa.arduino.cc/pages/nano-esp32\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eArduino Online Shop\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003cimg width=\\\"500\\\" height=\\\"500\\\" src=\\\"https://store-usa.arduino.cc/cdn/shop/files/Arduino_RGB_Pantone_e06772fd-2f44-4738-8016-be9ae7dd0a13_1200x1200.png?v=1637755826\\\" class=\\\"thumbnail onebox-avatar\\\"\\u003e\\n\\n\\u003ch3\\u003e\\u003ca href=\\\"https://store-usa.arduino.cc/pages/nano-esp32\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eNano ESP32\\u003c/a\\u003e\\u003c/h3\\u003e\\n\\n  \\u003cp\\u003eIoT has a little secret: it’s becoming easier than ever. Tools like the tiny Nano ESP32 give you power, flexibility and extensive support – so whether you are on your first or your nth project, you can learn, make and succeed. That’s it!\\u003c/p\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eWon’t the Arduino pulseIn() function work to read this duty cycle output? Need a little math to calculate the corresponding duty cycle and angle, but at the 1000Hz output should be doable.\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T18:10:44.113Z\",\"reply_count\":0,\"reply_to_post_number\":17,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":51,\"readers_count\":50,\"score\":10.2,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"Dan\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://store-usa.arduino.cc/pages/nano-esp32\",\"internal\":false,\"reflection\":false,\"title\":\"Nano ESP32 — Arduino Online Shop\",\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":65641,\"username\":\"MichaelRemi\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53412,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/18\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352472,\"name\":\"Dan\",\"username\":\"theworkshope\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/theworkshope/{size}/194375_2.png\",\"created_at\":\"2024-04-04T18:13:51.804Z\",\"cooked\":\"\\u003cp\\u003eYou’re suggesting to use this ESP library for reading the pulse width directly? Similar to pulseIn() on Arduino. It talks a lot about rc pwm, so just want to make sure \\u003ca class=\\\"mention\\\" href=\\\"/u/michaelremi\\\"\\u003e@MichaelRemi\\u003c/a\\u003e is clear on which parts to use.\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T18:15:03.503Z\",\"reply_count\":1,\"reply_to_post_number\":16,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":46,\"readers_count\":45,\"score\":24.2,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"Dan\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":53784,\"username\":\"Max_Morehead\",\"name\":\"Max Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53412,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/20\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3352577,\"name\":\"Max Morehead\",\"username\":\"Max_Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\",\"created_at\":\"2024-04-04T21:08:10.776Z\",\"cooked\":\"\\u003cp\\u003eCorrect, that’s what I was suggesting.\\u003c/p\\u003e\\n\\u003cp\\u003eI didn’t know about \\u003ccode\\u003epulseIn\\u003c/code\\u003e, and for some reason it didn’t come up when I searched, and I didn’t think about just busy waiting. That’s a much better suggestion, so the through-bore encoder would definitely be usable. Sorry for the oversight.\\u003c/p\\u003e\\n\\u003cp\\u003eI would warn that the \\u003ccode\\u003epulseIn\\u003c/code\\u003e function uses busy waiting (i.e. checking the value of the input repeatedly in a loop), so you’ll have to wait up to 2ms for a response, during which time no other code can run on that core. The arduino docs also say that the minimum pulse length that \\u003ccode\\u003epulseIn\\u003c/code\\u003e can’t read inputs less than 10 us (the minimum pulse is 1 us), but I’m pretty sure that’s for an AVR arduino, since looking at the \\u003ccode\\u003epulseIn\\u003c/code\\u003e ESP implementation, it should be able to handle a pulse width as small a few hundred ns. (Edit: This also means a normal arduino would be worse for this).\\u003c/p\\u003e\\n\\u003cp\\u003eThis limitation is probably fine for your application. Just don’t call it more than once per iteration. I would also decrease the maximum timeout to something like 10 ms.\\u003c/p\\u003e\\n\\u003cp\\u003eAnother thing to be wary of is that is that if an interrupt triggers or the task is preempted, you won’t get an accurate reading. I don’t think this should be an issue because most of the background tasks like wifi, Bluetooth run on core 0 I believe, while Arduino runs on core 1. But if you have issues with inaccurate readings, that’s something to look into, and anyways I would make sure to filter readings much longer that the through-bore encoders maximum pulse length.\\u003c/p\\u003e\\n\\u003cp\\u003eTo provide more explanation of how you would use pulseIn, you’d wire the absolute \\u003cspan class=\\\"abbreviation\\\"\\u003ePWM\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Pulse Width Modulation\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e output of the through bore to any GPIO pin (and +V to 3.3V and GND to GND). In the the through-bore encoder documentation, there’s a maximum and minimum pulse width, corresponding to 0 degrees and just before 360 degrees. You’d read the length of the pulse in microseconds with \\u003ccode\\u003epulseIn\\u003c/code\\u003e, and use an offset and a scale factor based on the minimum and maximum pulse length to convert it to degrees.\\u003c/p\\u003e\",\"post_number\":21,\"post_type\":1,\"posts_count\":26,\"updated_at\":\"2024-04-04T22:00:18.720Z\",\"reply_count\":0,\"reply_to_post_number\":20,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":36,\"readers_count\":35,\"score\":12.2,\"yours\":false,\"topic_id\":461265,\"topic_slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"display_username\":\"Max Morehead\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":53412,\"username\":\"theworkshope\",\"name\":\"Dan\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/theworkshope/{size}/194375_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53784,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor\"},\"post_url\":\"/t/how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax/461265/21\",\"custom_user_title\":\"Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3352072,3352136,3352152,3352269,3352274,3352278,3352285,3352288,3352303,3352314,3352322,3352327,3352329,3352331,3352336,3352399,3352433,3352438,3352472,3352577,3352579,3352591,3352642,3352643,3352647,3580433]},\"timeline_lookup\":[[1,556],[4,555],[26,190]],\"tags\":[\"robot\"],\"tags_descriptions\":{},\"fancy_title\":\"How to change motor speed in one revolution - NEO with SparkMax\",\"id\":461265,\"title\":\"How to change motor speed in one revolution - NEO with SparkMax\",\"posts_count\":26,\"created_at\":\"2024-04-04T02:03:48.310Z\",\"views\":945,\"reply_count\":19,\"like_count\":11,\"last_posted_at\":\"2025-04-04T23:01:38.090Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"how-to-change-motor-speed-in-one-revolution-neo-with-sparkmax\",\"category_id\":30,\"word_count\":3040,\"deleted_at\":null,\"user_id\":65641,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_461265\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":27,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":8,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":65641,\"username\":\"MichaelRemi\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\",\"post_count\":9,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":1},{\"id\":53412,\"username\":\"theworkshope\",\"name\":\"Dan\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/theworkshope/{size}/194375_2.png\",\"post_count\":5,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":53784,\"username\":\"Max_Morehead\",\"name\":\"Max Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":62207,\"username\":\"TheComputer314\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thecomputer314/{size}/241453_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":19235,\"username\":\"Skyehawk\",\"name\":\"Skye Leake\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/skyehawk/{size}/179363_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"moderator\":true,\"trust_level\":4},{\"id\":50219,\"username\":\"Alex_Y\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/82dd89/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":15944,\"username\":\"FrankJ\",\"name\":\"FrankJ\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/frankj/{size}/5392_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":16385,\"username\":\"BillDunlap\",\"name\":\"BillDunlap\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/b/7ea924/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":1}],\"created_by\":{\"id\":65641,\"username\":\"MichaelRemi\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/22d042/{size}.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://xyproblem.info/\",\"title\":\"Home - The XY Problem\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":34,\"user_id\":62207,\"domain\":\"xyproblem.info\",\"root_domain\":\"xyproblem.info\"},{\"url\":\"https://www.youtube.com/watch?v=d80oXSCcHTk\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":21,\"user_id\":62207,\"domain\":\"www.youtube.com\",\"root_domain\":\"youtube.com\"},{\"url\":\"https://www.thethriftybot.com/products/thrifty-absolute-magnetic-encoder\",\"title\":\"Thrifty Absolute Magnetic Encoder\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":4,\"user_id\":53784,\"domain\":\"www.thethriftybot.com\",\"root_domain\":\"thethriftybot.com\"},{\"url\":\"https://www.mekanizmalar.com/\",\"title\":\"Animated Mechanisms.\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":3,\"user_id\":53412,\"domain\":\"www.mekanizmalar.com\",\"root_domain\":\"mekanizmalar.com\"},{\"url\":\"https://www.reddit.com/r/ScienceNcoolThings/comments/18bcarp/multi_stage_four_bar_linkage/\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":3,\"user_id\":16385,\"domain\":\"www.reddit.com\",\"root_domain\":\"reddit.com\"},{\"url\":\"https://github.com/rewegit/esp32-rmt-pwm-reader\",\"title\":\"GitHub - rewegit/esp32-rmt-pwm-reader: esp32 8 channel rc-pwm-reader for arduino framework\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":53784,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://www.robives.com/blog/four-bar-linkage-mechanism/\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":16385,\"domain\":\"www.robives.com\",\"root_domain\":\"robives.com\"},{\"url\":\"https://dynref.engr.illinois.edu/aml.html\",\"title\":\"Four-Bar Linkages\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":16385,\"domain\":\"dynref.engr.illinois.edu\",\"root_domain\":\"illinois.edu\"},{\"url\":\"https://en.wikipedia.org/wiki/Quick_return_mechanism\",\"title\":\"Quick return mechanism - Wikipedia\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":2,\"user_id\":50219,\"domain\":\"en.wikipedia.org\",\"root_domain\":\"wikipedia.org\"},{\"url\":\"https://docs.revrobotics.com/sparkmax/feature-description/data-port\",\"title\":\"Data Port | SPARK MAX\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":53784,\"domain\":\"docs.revrobotics.com\",\"root_domain\":\"revrobotics.com\"},{\"url\":\"https://www.revrobotics.com/rev-11-1817/\",\"title\":\"JST PH 6-pin to 4 Channel PWM Cable - 1m - REV Robotics\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":53784,\"domain\":\"www.revrobotics.com\",\"root_domain\":\"revrobotics.com\"},{\"url\":\"https://www.youtube.com/user/thang010146/videos\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":53412,\"domain\":\"www.youtube.com\",\"root_domain\":\"youtube.com\"},{\"url\":\"https://docs.revrobotics.com/sparkmax/feature-description/encoder-port\",\"title\":\"Encoder Port | SPARK MAX\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":53784,\"domain\":\"docs.revrobotics.com\",\"root_domain\":\"revrobotics.com\"},{\"url\":\"https://www.andymark.com/products/cim-sport-options?via=Z2lkOi8vYW5keW1hcmsvV29ya2FyZWE6OkNhdGFsb2c6OkNhdGVnb3J5LzViMzY1MGNlYmM2ZjZkM2UyNzczOGY5MQ\\u0026Ratio=36%3A1%20HD%20(am-4008_036)\\u0026quantity=1\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":65641,\"domain\":\"www.andymark.com\",\"root_domain\":\"andymark.com\"},{\"url\":\"https://www.digikey.com/en/products/detail/cui-devices/AMT102-V/827015\",\"title\":\"AMT102-V CUI Devices | Sensors, Transducers | DigiKey\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":53784,\"domain\":\"www.digikey.com\",\"root_domain\":\"digikey.com\"},{\"url\":\"https://codedocs.revrobotics.com/cpp/namespacerev.html\",\"title\":\"REVLib - C++: rev Namespace Reference\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":65641,\"domain\":\"codedocs.revrobotics.com\",\"root_domain\":\"revrobotics.com\"}]},\"bookmarks\":[]}"}
