{"data":"{\"post_stream\":{\"posts\":[{\"id\":3026992,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2022-03-21T14:30:51.029Z\",\"cooked\":\"\\u003cp\\u003eWe are updating our color sensor values on every iteration and we occasionally get loop overruns. I’m quite confident this is because our color sensors are on a multiplexer and they just aren’t fast enough. I want to try moving reading their values to a thread. I don’t think there are any multi-thread concerns with the implementation. I know we might get a stale value occasionally, but that’s better than a stuttering robot.\\u003c/p\\u003e\\n\\u003cp\\u003eI think the \\u003ccode\\u003eNotifier\\u003c/code\\u003e is the right class for this, but there is no documentation for it on the docs site, and it has no class-level Javadoc. I think I have this right, please see below. Is there a place I should call the \\u003ccode\\u003e.close()\\u003c/code\\u003e method?\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003epublic class MySubsystem extends SubsystemBase {\\n\\n  private final MyRunnable runnable = new MyRunnable();\\n\\n  public MySybsystem() {\\n    new Notifier(runnable).startPeriodic(0.02)\\n  }\\n\\n  public void periodic() {\\n    var myValues = runnable.getSensorValues();\\n  }\\n\\n}\\n\\u003c/code\\u003e\\u003c/pre\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T14:30:51.029Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":43,\"reads\":214,\"readers_count\":213,\"score\":272.8,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/addperiodic-or-notifiers-loopers/416533/12\",\"internal\":true,\"reflection\":true,\"title\":\"AddPeriodic() or Notifiers \\u0026 Loopers?\",\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/using-notifier/406338/1\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true,\"can_vote\":false},{\"id\":3027061,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-03-21T16:00:48.612Z\",\"cooked\":\"\\u003cp\\u003eHow much do you know about thread safety?  This is the right general idea (I wouldn’t name a class \\u003ccode\\u003eMyRunnable\\u003c/code\\u003e though), but you have to make sure the access to the published state is threadsafe.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:00:48.612Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":162,\"readers_count\":161,\"score\":42.4,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/using-notifier/406338/2\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027063,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2022-03-21T16:12:44.015Z\",\"cooked\":\"\\u003cp\\u003eYou need to store a reference to your Notifier so the garbage collector doesn’t destroy it, causing the Notifier to stop running. The GC destroys unreferenced/unreachable objects.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T17:55:46.859Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":156,\"readers_count\":155,\"score\":41.2,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/using-notifier/406338/3\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":true,\"topic_accepted_answer\":true},{\"id\":3027064,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2022-03-21T16:13:11.274Z\",\"cooked\":\"\\u003cp\\u003eI’m very familiar with thread safety in vanilla Java, but WPI does a lot automagically in the background so it can be a little scary.\\u003c/p\\u003e\\n\\u003cp\\u003eI’m not too concerned because this is a pretty straightforward implementation. This thread will be the only place in the project accessing I2C. It writes to the multiplexer to switch the sensor and then reads the values. It will read the values on the color sensors every period, store the values in an instance variable, and only provide accessors (getters) for the values from the last period.\\u003c/p\\u003e\\n\\u003cp\\u003eThe “My” naming was just for demonstration purposes. \\u003ca href=\\\"https://github.com/STMARobotics/frc-7028-2022/compare/f012145d6c2947e15924cb98dfa02745fe138d66..75cd2d2?expand=1\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eHere is the real code.\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:13:11.274Z\",\"reply_count\":1,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":147,\"readers_count\":146,\"score\":44.4,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/STMARobotics/frc-7028-2022/compare/f012145d6c2947e15924cb98dfa02745fe138d66..75cd2d2?expand=1\",\"internal\":false,\"reflection\":false,\"title\":\"Comparing f012145d6c2947e15924cb98dfa02745fe138d66..75cd2d2 · STMARobotics/frc-7028-2022 · GitHub\",\"clicks\":8}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/using-notifier/406338/4\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027068,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2022-03-21T16:15:54.266Z\",\"cooked\":\"\\u003cp\\u003eThanks \\u003ca class=\\\"mention\\\" href=\\\"/u/calcmogul\\\"\\u003e@calcmogul\\u003c/a\\u003e. I’ll move the Notifier up to an instance variable on my subsystem.\\u003c/p\\u003e\\n\\u003cp\\u003eWPILib does so much in the background it’s hard to know if this is needed. For example, the \\u003ccode\\u003eTrigger\\u003c/code\\u003e constructor has the (nasty) side-effect of registering the trigger, so there is no reason to hang onto it.\\u003c/p\\u003e\\n\\u003cp\\u003eEDIT: The \\u003ccode\\u003eTrigger\\u003c/code\\u003e constructor itself doesn’t register the trigger, the activation commands do. But you don’t have to hold onto the trigger, and there is no way to unregister it.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:21:08.441Z\",\"reply_count\":2,\"reply_to_post_number\":3,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":137,\"readers_count\":136,\"score\":42.4,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/using-notifier/406338/5\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027072,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-03-21T16:21:07.890Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"gdefender\\\" data-post=\\\"4\\\" data-topic=\\\"406338\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/gdefender/48/168507_2.png\\\" class=\\\"avatar\\\"\\u003e gdefender:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eIt will read the values on the color sensors every period, store the values in an instance variable, and only provide accessors (getters) for the values from the last period.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eYou need to make sure you store the most recent polled result as an \\u003ccode\\u003eAtomicReference\\u003c/code\\u003e and replace it entirely each time (if it’s a primitive or an immutable type then this’ll be handled for you).\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:21:07.890Z\",\"reply_count\":1,\"reply_to_post_number\":4,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":126,\"readers_count\":125,\"score\":35.2,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/using-notifier/406338/6\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027076,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-03-21T16:24:38.485Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"gdefender\\\" data-post=\\\"5\\\" data-topic=\\\"406338\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/gdefender/48/168507_2.png\\\" class=\\\"avatar\\\"\\u003e gdefender:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eand there is no way to unregister it.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThere should be a \\u003ccode\\u003eclear\\u003c/code\\u003e method on \\u003ccode\\u003eTrigger\\u003c/code\\u003e that nukes all bound listeners.  If there isn’t, submit a github issue and we’ll add it.\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:24:38.485Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":120,\"readers_count\":119,\"score\":34.0,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/using-notifier/406338/7\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027077,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2022-03-21T16:25:07.694Z\",\"cooked\":\"\\u003cp\\u003eThe polling result is populated into an immutable object. It holds a WPILib \\u003ccode\\u003eColor\\u003c/code\\u003e and an \\u003ccode\\u003eint\\u003c/code\\u003e. A new object is created each period and entirely replaced.\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003e/**\\n * Immutable value object to hold color and proximity data from a color sensor\\n */\\npublic class ColorSensorValues {\\n  /** Color from color sensor */\\n  public final Color color;\\n\\n  /** Proximity from color sensor */\\n  public final int proximity;\\n\\n  /**\\n   * Constructs a ColorSensorValues object\\n   * @param color Color from color sensor\\n   * @param proximity Proximity from color sensor\\n   */\\n  public ColorSensorValues(Color color, int proximity) {\\n    this.color = color;\\n    this.proximity = proximity;\\n  }\\n}\\n\\u003c/code\\u003e\\u003c/pre\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:25:07.694Z\",\"reply_count\":1,\"reply_to_post_number\":6,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":123,\"readers_count\":122,\"score\":49.6,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/using-notifier/406338/8\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027090,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2022-03-21T16:33:59.814Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"gdefender\\\" data-post=\\\"5\\\" data-topic=\\\"406338\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/gdefender/48/168507_2.png\\\" class=\\\"avatar\\\"\\u003e gdefender:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eFor example, the \\u003ccode\\u003eTrigger\\u003c/code\\u003e constructor has the (nasty) side-effect of registering the trigger, so there is no reason to hang onto it.\\u003c/p\\u003e\\n\\u003cp\\u003eEDIT: The \\u003ccode\\u003eTrigger\\u003c/code\\u003e constructor itself doesn’t register the trigger, the activation commands do. But you don’t have to hold onto the trigger, and there is no way to unregister it.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003e\\u003ca class=\\\"mention\\\" href=\\\"/u/oblarg\\\"\\u003e@Oblarg\\u003c/a\\u003e Is this documented in the trigger API?\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:33:59.814Z\",\"reply_count\":0,\"reply_to_post_number\":5,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":109,\"readers_count\":108,\"score\":26.8,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/using-notifier/406338/9\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027092,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2022-03-21T16:35:07.824Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Oblarg\\\" data-post=\\\"7\\\" data-topic=\\\"406338\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/oblarg/48/161674_2.png\\\" class=\\\"avatar\\\"\\u003e Oblarg:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eThere should be a \\u003ccode\\u003eclear\\u003c/code\\u003e method on \\u003ccode\\u003eTrigger\\u003c/code\\u003e that nukes all bound listeners.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI agree, there \\u003cem\\u003eshould\\u003c/em\\u003e be, but there isn’t. I brought this up during the new command framework beta but it was determined to be too complex.\\u003cbr\\u003e\\n\\u003cdiv class=\\\"lightbox-wrapper\\\"\\u003e\\u003ca class=\\\"lightbox\\\" href=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/9/8/9891befd1295cc371dcc3ddefd0eacfdec3167c7.png\\\" data-download-href=\\\"https://www.chiefdelphi.com/uploads/default/9891befd1295cc371dcc3ddefd0eacfdec3167c7\\\" title=\\\"image\\\"\\u003e\\u003cimg src=\\\"https://www.chiefdelphi.com/uploads/default/optimized/3X/9/8/9891befd1295cc371dcc3ddefd0eacfdec3167c7_2_558x500.png\\\" alt=\\\"image\\\" data-base62-sha1=\\\"lLGPLEHJmUFogec5WgyRKcXK4oD\\\" width=\\\"558\\\" height=\\\"500\\\" srcset=\\\"https://www.chiefdelphi.com/uploads/default/optimized/3X/9/8/9891befd1295cc371dcc3ddefd0eacfdec3167c7_2_558x500.png, https://www.chiefdelphi.com/uploads/default/optimized/3X/9/8/9891befd1295cc371dcc3ddefd0eacfdec3167c7_2_837x750.png 1.5x, https://www.chiefdelphi.com/uploads/default/optimized/3X/9/8/9891befd1295cc371dcc3ddefd0eacfdec3167c7_2_1116x1000.png 2x\\\" data-dominant-color=\\\"F3F4F5\\\"\\u003e\\u003cdiv class=\\\"meta\\\"\\u003e\\u003csvg class=\\\"fa d-icon d-icon-far-image svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#far-image\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003cspan class=\\\"filename\\\"\\u003eimage\\u003c/span\\u003e\\u003cspan class=\\\"informations\\\"\\u003e1831×1638 366 KB\\u003c/span\\u003e\\u003csvg class=\\\"fa d-icon d-icon-discourse-expand svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#discourse-expand\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003c/div\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:35:07.824Z\",\"reply_count\":1,\"reply_to_post_number\":7,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":107,\"readers_count\":106,\"score\":31.4,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/uploads/default/original/3X/9/8/9891befd1295cc371dcc3ddefd0eacfdec3167c7.png\",\"internal\":true,\"reflection\":false,\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/using-notifier/406338/10\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027094,\"name\":null,\"username\":\"ksquare\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ksquare/{size}/121038_2.png\",\"created_at\":\"2022-03-21T16:36:14.201Z\",\"cooked\":\"\\u003cp\\u003eIf you do this, you might think it’s thread-safe because you have an immutable container for the latest value and you replace it with a new one:\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003e// Somewhere:\\nColorSensorValues latest;\\n\\n// Thread that updates it:\\nlatest = new ColorSensorValues(...)\\n\\n// .. and somewhere else you read this:\\nColorSensorValues safe_copy_of_latest = latest;\\n// .. then use safe_copy_of_latest..color, safe_copy_of_latest.proximity\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eBut unless you use an \\u003ccode\\u003eAtomicReference\\u0026lt;ColorSensorValues\\u0026gt; latest\\u003c/code\\u003e or \\u003ccode\\u003esynchronized\\u003c/code\\u003e on something, the JVM may use cached memory. So when you read \\u003ccode\\u003elatest\\u003c/code\\u003e, it may be an older value.\\u003cbr\\u003e\\nWith Atomicreference or synchronized you force the JVM to actually flush the writes to memory respectively go out and read from memory.\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:37:03.574Z\",\"reply_count\":1,\"reply_to_post_number\":8,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":103,\"readers_count\":102,\"score\":45.6,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":null,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38843,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/using-notifier/406338/11\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027100,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-03-21T16:39:54.269Z\",\"cooked\":\"\\u003cp\\u003eI suppose in the C++ we could demand that the user (optionally) provide their own deletion handle.\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:40:08.863Z\",\"reply_count\":0,\"reply_to_post_number\":10,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":102,\"readers_count\":101,\"score\":25.4,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/using-notifier/406338/12\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027110,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2022-03-21T16:50:43.027Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"ksquare\\\" data-post=\\\"11\\\" data-topic=\\\"406338\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/ksquare/48/121038_2.png\\\" class=\\\"avatar\\\"\\u003e ksquare:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eBut unless you use an \\u003ccode\\u003eAtomicReference\\u0026lt;ColorSensorValues\\u0026gt; latest\\u003c/code\\u003e or \\u003ccode\\u003esynchronized\\u003c/code\\u003e on something, the JVM may use cached memory.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI appreciate the warning, but do you have a reference for that statement? I have not heard of this before. Was this a JRE “defect” that could not be avoided before Java 5, when \\u003ccode\\u003eAtomicReference\\u003c/code\\u003e was added because a \\u003ccode\\u003esyncronized\\u003c/code\\u003e block doesn’t seem like it would help with that?\\u003c/p\\u003e\\n\\u003cp\\u003eI did not expect \\u003ccode\\u003eAtomicReference\\u003c/code\\u003e to be needed here because the whole object is being replaced. I am not, for example, updating the color and proximity in two separate steps, or updating the values from multiple threads. There is a chance that the robot code gets sensor data part way through an update, meaning one sensor’s values are more current than the others, but that’s something I was willing to accept.\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:50:43.027Z\",\"reply_count\":1,\"reply_to_post_number\":11,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":100,\"readers_count\":99,\"score\":25.0,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/using-notifier/406338/13\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027115,\"name\":null,\"username\":\"ksquare\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ksquare/{size}/121038_2.png\",\"created_at\":\"2022-03-21T16:53:08.963Z\",\"cooked\":\"\\u003caside class=\\\"onebox stackexchange\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003ca href=\\\"https://stackoverflow.com/questions/1850270/memory-effects-of-synchronization-in-java\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003estackoverflow.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n      \\u003ca href=\\\"https://stackoverflow.com/users/3973/binil-thomas\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003e\\n    \\u003cimg alt=\\\"Binil Thomas\\\" src=\\\"https://www.gravatar.com/avatar/cbd511f0cd39f36c6f2a9bc17fb0f2da?s=256\\u0026amp;d=identicon\\u0026amp;r=PG\\\" class=\\\"thumbnail onebox-avatar\\\" width=\\\"256\\\" height=\\\"256\\\"\\u003e\\n  \\u003c/a\\u003e\\n\\u003ch4\\u003e\\n  \\u003ca href=\\\"https://stackoverflow.com/questions/1850270/memory-effects-of-synchronization-in-java\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eMemory effects of synchronization in Java\\u003c/a\\u003e\\n\\u003c/h4\\u003e\\n\\n\\u003cdiv class=\\\"tags\\\"\\u003e\\n  \\u003cstrong\\u003ejava, concurrency, jvm, java-memory-model\\u003c/strong\\u003e\\n\\u003c/div\\u003e\\n\\n\\u003cdiv class=\\\"date\\\"\\u003e\\n  asked by\\n  \\n  \\u003ca href=\\\"https://stackoverflow.com/users/3973/binil-thomas\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003e\\n    Binil Thomas\\n  \\u003c/a\\u003e\\n  on \\u003ca href=\\\"https://stackoverflow.com/questions/1850270/memory-effects-of-synchronization-in-java\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003e11:10PM - 04 Dec 09 UTC\\u003c/a\\u003e\\n\\u003c/div\\u003e\\n\\n  \\u003c/article\\u003e\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003e\\u003ca href=\\\"http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#synchronization\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eJSR-133 FAQ\\u003c/a\\u003e says:\\u003c/p\\u003e\\n\\u003cp\\u003e“But there is more to synchronization than mutual exclusion. Synchronization ensures that memory writes by a thread before or during a synchronized block are made visible in a predictable manner to other threads which synchronize on the same monitor. After we exit a synchronized block, we release the monitor, which has the effect of flushing the cache”\\u003c/p\\u003e\\n\\u003cp\\u003eIt’s not a bug, it’s a feature. Different threads can run in different CPU cores. The CPU is fast, memory access is slow. So the JVM optimizes memory access, caches values that it’s seen before. If \\u003cem\\u003eanother\\u003c/em\\u003e thread updates data, it’s not only about concurrency but also about forcing the CPU to ignore the cached data and go out to memory where another thread might have updated the data. In reality, you might seldom see old data, but it can happen, it’s the type of error that bites you in the worst possible moment \\u003cimg src=\\\"https://www.chiefdelphi.com/images/emoji/google/wink.png?v=9\\\" title=\\\":wink:\\\" class=\\\"emoji\\\" alt=\\\":wink:\\\"\\u003e\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T16:58:12.411Z\",\"reply_count\":1,\"reply_to_post_number\":13,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":93,\"readers_count\":92,\"score\":43.6,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":null,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":3,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://stackoverflow.com/questions/1850270/memory-effects-of-synchronization-in-java\",\"internal\":false,\"reflection\":false,\"title\":\"concurrency - Memory effects of synchronization in Java - Stack Overflow\",\"clicks\":1},{\"url\":\"https://stackoverflow.com/users/3973/binil-thomas\",\"internal\":false,\"reflection\":false,\"title\":\"User Binil Thomas - Stack Overflow\",\"clicks\":0},{\"url\":\"http://www.cs.umd.edu/users/pugh/java/memoryModel/jsr-133-faq.html#synchronization\",\"internal\":false,\"reflection\":false,\"clicks\":0}],\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38843,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/using-notifier/406338/14\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027145,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2022-03-21T17:18:24.412Z\",\"cooked\":\"\\u003cp\\u003eThanks for the warning, that was a helpful document! Yikes, it does sound like there were some defects in the initial implementation, like \\u003ccode\\u003efinal\\u003c/code\\u003e fields appearing to change values (which can still happen if not properly constructing objects, but that’s a user code error.)\\u003c/p\\u003e\\n\\u003cp\\u003eThat aside, in your example wouldn’t it be sufficient to mark \\u003ccode\\u003elatest\\u003c/code\\u003e as \\u003ccode\\u003evolatile\\u003c/code\\u003e? From the FAQ:\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eWriting to a volatile field has the same memory effect as a monitor release, and reading from a volatile field has the same memory effect as a monitor acquire.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T17:18:24.412Z\",\"reply_count\":2,\"reply_to_post_number\":14,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":84,\"readers_count\":83,\"score\":26.8,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":38843,\"username\":\"ksquare\",\"name\":null,\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ksquare/{size}/121038_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/using-notifier/406338/15\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027150,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-03-21T17:21:21.019Z\",\"cooked\":\"\\u003cp\\u003eNever use \\u003ccode\\u003evolatile\\u003c/code\\u003e.  It has weird semantics and only acts as an implicit memory barrier because enough people were wrongly using it that way that it was deemed the path-of-least-resistance to just Make It Do That As Well.\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T17:23:50.206Z\",\"reply_count\":1,\"reply_to_post_number\":15,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":77,\"readers_count\":76,\"score\":40.4,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/using-notifier/406338/16\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027172,\"name\":null,\"username\":\"ksquare\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ksquare/{size}/121038_2.png\",\"created_at\":\"2022-03-21T17:46:43.537Z\",\"cooked\":\"\\u003cp\\u003eYes, in this specific example volatile would also work.\\u003cbr\\u003e\\nI would not never use it, but \\u003ccode\\u003eAtomicReference\\u0026lt;ColorSensorValues\\u0026gt; latest\\u003c/code\\u003e is probably better these days. Just calling \\u003ccode\\u003elatest.get()\\u003c/code\\u003e makes it obvious that you’re fetching the latest reference in a thread-safe way. With volatile you’ll always have to double check: Wait, is this thing I’m reading from another thread indeed declared volatile?\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T17:46:43.537Z\",\"reply_count\":0,\"reply_to_post_number\":15,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":75,\"readers_count\":74,\"score\":30.0,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":null,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38843,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/using-notifier/406338/17\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027344,\"name\":\"Gavin Matthews\",\"username\":\"bovlb\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bovlb/{size}/167232_2.png\",\"created_at\":\"2022-03-21T20:24:29.678Z\",\"cooked\":\"\\u003cp\\u003eA Notifier approach should work.\\u003cbr\\u003e\\nAn alternative approach would be to add the values to \\u003ccode\\u003eNetworkTable\\u003c/code\\u003e (using, for example, \\u003ccode\\u003eSendableBuilder.addBooleanProperty\\u003c/code\\u003e) in the \\u003ccode\\u003einitSendable\\u003c/code\\u003e method of the subsystem. That way they can not only be used in the subsystem, but also read and recorded on SmartDashboard/ShuffleBoard.\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T20:24:29.678Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":72,\"readers_count\":71,\"score\":19.4,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Gavin Matthews\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38743,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Programming mentor, Team 2102, RI, CSA (he/him)\"},\"post_url\":\"/t/using-notifier/406338/18\",\"custom_user_title\":\"Programming mentor, Team 2102, RI, CSA (he/him)\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027360,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2022-03-21T20:44:35.368Z\",\"cooked\":\"\\u003cp\\u003eCan you explain that further? Would that mean now the NetworkTable thread is responsible for polling my sensors? What is the default update rate, this is not documented and any change is global since there is only one NetworkTables instance.\\u003c/p\\u003e\\n\\u003cp\\u003eThat seems like it could work, but not really the intended purpose. Sendable is intended for telemetry. The purpose here is no only to get the sensor values for the driver to see in Shuffleboard, but also to operate the indexer mechanism.\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T20:44:35.368Z\",\"reply_count\":1,\"reply_to_post_number\":18,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":72,\"readers_count\":71,\"score\":39.4,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":38743,\"username\":\"bovlb\",\"name\":\"Gavin Matthews\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bovlb/{size}/167232_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/using-notifier/406338/19\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3027403,\"name\":\"Gavin Matthews\",\"username\":\"bovlb\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bovlb/{size}/167232_2.png\",\"created_at\":\"2022-03-21T21:55:27.659Z\",\"cooked\":\"\\u003cp\\u003eWhat is the default update rate of the NetworkTable thread?  That’s a great question, and it reminded me that I’ve been meaning to check on that, so I had a quick dig around in the WPILIB source code.  To my surprise, I found that (in \\u003ccode\\u003eTimedRobot\\u003c/code\\u003e) the sendable updates are called as part of the main event loop function from \\u003ccode\\u003eIterativeRobotBase\\u003c/code\\u003e.  There is no attempt to call them with a different frequency or priority.  This was a surprise for me because it was my understanding that the \\u003ccode\\u003eSendable\\u003c/code\\u003e interface was a way to safely add periodic code that might include I/O delay (for example by asking questions on the CAN bus).  Now I’m rethinking my approach to dealing with the CAN bus.\\u003c/p\\u003e\\n\\u003cp\\u003eSo I retract my suggestion.  Notifiers is the way to go (although \\u003ccode\\u003eTimedRobot.addPeriodic\\u003c/code\\u003e might also work).\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":31,\"updated_at\":\"2022-03-21T21:55:27.659Z\",\"reply_count\":1,\"reply_to_post_number\":19,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":70,\"readers_count\":69,\"score\":34.0,\"yours\":false,\"topic_id\":406338,\"topic_slug\":\"using-notifier\",\"display_username\":\"Gavin Matthews\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38743,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Programming mentor, Team 2102, RI, CSA (he/him)\"},\"post_url\":\"/t/using-notifier/406338/20\",\"custom_user_title\":\"Programming mentor, Team 2102, RI, CSA (he/him)\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true}],\"stream\":[3026992,3027061,3027063,3027064,3027068,3027072,3027076,3027077,3027090,3027092,3027094,3027100,3027110,3027115,3027145,3027150,3027172,3027344,3027360,3027403,3027416,3027422,3027425,3027428,3027430,3027432,3027445,3027450,3027470,3027486,3169923]},\"timeline_lookup\":[[1,1301],[13,1300],[31,935]],\"tags\":[\"java\"],\"tags_descriptions\":{},\"fancy_title\":\"Using Notifier\",\"id\":406338,\"title\":\"Using Notifier\",\"posts_count\":31,\"created_at\":\"2022-03-21T14:30:50.919Z\",\"views\":1207,\"reply_count\":26,\"like_count\":12,\"last_posted_at\":\"2023-03-22T00:31:02.583Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"using-notifier\",\"category_id\":9,\"word_count\":2384,\"deleted_at\":null,\"user_id\":44380,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_406338\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":31,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":7,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"accepted_answer\":{\"post_number\":3,\"username\":\"calcmogul\",\"name\":null,\"excerpt\":\"You need to store a reference to your Notifier so the garbage collector doesn’t destroy it, causing the Notifier to stop running. The GC destroys unreferenced/unreachable objects.\",\"accepter_name\":null},\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"post_count\":9,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"post_count\":6,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":38743,\"username\":\"bovlb\",\"name\":\"Gavin Matthews\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bovlb/{size}/167232_2.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":13575,\"username\":\"Peter_Johnson\",\"name\":\"Peter Johnson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/peter_johnson/{size}/10417_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":38843,\"username\":\"ksquare\",\"name\":null,\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ksquare/{size}/121038_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":32957,\"username\":\"retrodaredevil\",\"name\":\"retrodaredevil\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/retrodaredevil/{size}/111923_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://github.com/STMARobotics/frc-7028-2022/compare/f012145d6c2947e15924cb98dfa02745fe138d66..75cd2d2?expand=1\",\"title\":\"Comparing f012145d6c2947e15924cb98dfa02745fe138d66..75cd2d2 · STMARobotics/frc-7028-2022 · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":8,\"user_id\":44380,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://stackoverflow.com/questions/1850270/memory-effects-of-synchronization-in-java\",\"title\":\"concurrency - Memory effects of synchronization in Java - Stack Overflow\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":38843,\"domain\":\"stackoverflow.com\",\"root_domain\":\"stackoverflow.com\"}]},\"bookmarks\":[]}"}
