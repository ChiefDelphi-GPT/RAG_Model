{"data":"{\"post_stream\":{\"posts\":[{\"id\":3445432,\"name\":\"Ryan Yohnk\",\"username\":\"yohnkrb\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yohnkrb/{size}/184829_2.png\",\"created_at\":\"2024-11-09T19:17:28.711Z\",\"cooked\":\"\\u003cp\\u003eHey \\u003cspan class=\\\"abbreviation\\\"\\u003eCD\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Chief Delphi\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e,\\u003c/p\\u003e\\n\\u003cp\\u003eIn preparation for the upcoming season, our team has been focusing on areas for improvement identified from last year. This year they’ve done a great job and we’re at the end of our list; robot localization.\\u003c/p\\u003e\\n\\u003cp\\u003eFor context, last year our robot utilized PhotonVision for AprilTag detection, YASGL for our swerve drive, and the built-in SwerveDrivePoseEstimator. That was a success and we wouldn’t feel too bad if we needed to head down that path again. But with ~2 months left until kickoff, I thought this would be a good idea to teach the kids what’s going on behind the scenes and look to make improvements.\\u003c/p\\u003e\\n\\u003cp\\u003eThe biggest improvement I’d like to see the kids make is to pull more sensor data into their localization method. To my knowledge, I don’t see a good way to plug data from sensors like an IMU into the SwerveDrivePoseEstimator (but please correct me if this is wrong.). There were times last year where we took a good hit and our estimated pose would either take a while to recover or never recover at all.\\u003c/p\\u003e\\n\\u003cp\\u003eIn doing some research, I feel there’s a few paths we could dig into. Here’s what I’ve come up with options and pros/cons, but I’d love any input other teams have. I’m not an expert in this area, so corrections are always welcome.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003cstrong\\u003eContinue to use the built-in SwerveDrivePoseEstimator.\\u003c/strong\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003ePros:\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eA straight forward way to get fairly accurate results.\\u003c/li\\u003e\\n\\u003cli\\u003eCan use the built-in framework without much added work.\\u003c/li\\u003e\\n\\u003cli\\u003eRuns well directly on the Rio.\\u003c/li\\u003e\\n\\u003cli\\u003eAPI plays well with the rest of the robot framework (PhotonLib for example).\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003eCons:\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eHard to extend to incorporate other sensor data.\\u003c/li\\u003e\\n\\u003cli\\u003eA bit of a “black box”. Makes it hard to troubleshoot if you haven’t covered the underlying details with the kids.\\u003c/li\\u003e\\n\\u003cli\\u003ePotentially better performance to be had through other approaches.\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003e\\u003cstrong\\u003eUtilize a Kalman Filter (or some flavor of it).\\u003c/strong\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003ePros:\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eEfficient and could run well on the Rio.\\u003c/li\\u003e\\n\\u003cli\\u003eTheoretically the “best” you can do (if implemented correctly).\\u003c/li\\u003e\\n\\u003cli\\u003eCommon in the industry so there’s good resources out there.\\u003c/li\\u003e\\n\\u003cli\\u003eCan provide very solid results if designed and tuned correctly.\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003eCons:\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eA fairly complicated topic to be teaching kids who haven’t been exposed to linear algebra and probability, especially as you get into the more advanced (Extended) filters.\\u003c/li\\u003e\\n\\u003cli\\u003eHave some theoretical limitations around gaussian inputs, unimodal belief states, and linear models that may require you to jump to the advanced versions.\\u003c/li\\u003e\\n\\u003cli\\u003eCan be difficult to design (mapping multiple sensor inputs to the matrices that represent your model).\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003e\\u003cstrong\\u003eUtilize a Particle Filter.\\u003c/strong\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003ePros:\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eMuch simpler to teach and for the kids to understand.\\u003c/li\\u003e\\n\\u003cli\\u003eEasier to pull in sensor data, each sensor can “vote” on aspects of particles they can monitor.\\u003c/li\\u003e\\n\\u003cli\\u003eGets around some of the constraints Kalman Filters exhibit (non-linear behavior, gaussian noise, etc).\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003eCons:\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eFar less efficient than other methods, and would probably require running on a coprocessor.\\u003c/li\\u003e\\n\\u003cli\\u003ePotential latency because of incorporating the coprocessor.\\u003c/li\\u003e\\n\\u003cli\\u003eCan have problems converging on incorrect solutions and have a difficult time recovering from that.\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003eBased on this I think we’ll do some experimentation over the next few weeks to see what works best. But before diving into that I’d love to hear what experiences other people have had in this area. Again, I’m not an expert here so any input would be appreciated!\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-09T19:17:28.711Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":56,\"reads\":452,\"readers_count\":451,\"score\":390.4,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Ryan Yohnk\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":45842,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/robot-localization/474605/1\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":3445433,\"name\":\"viggy96\",\"username\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\",\"created_at\":\"2024-11-09T19:19:42.811Z\",\"cooked\":\"\\u003cp\\u003eFrom what I understand, the existing pose estimators use a Kalman filter.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-09T19:19:42.811Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":379,\"readers_count\":378,\"score\":215.8,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"viggy96\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":9}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24613,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"418 Mentor | Tries to be smart\"},\"post_url\":\"/t/robot-localization/474605/2\",\"custom_user_title\":\"418 Mentor | Tries to be smart\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":8},{\"id\":\"point_up\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":9,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3445434,\"name\":\"Ryan Yohnk\",\"username\":\"yohnkrb\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yohnkrb/{size}/184829_2.png\",\"created_at\":\"2024-11-09T19:23:45.237Z\",\"cooked\":\"\\u003cp\\u003eI think you’re correct. Maybe a better way to state the difference between the two options is that the built in pose estimator has a nice framework around it that makes working with the underlying Kalman filter easy. Compared to rolling your own where you’re free to implement your model however you want but then bear the burden or ensuring its correctness.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-09T19:23:45.237Z\",\"reply_count\":0,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":376,\"readers_count\":375,\"score\":75.2,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Ryan Yohnk\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":24613,\"username\":\"viggy96\",\"name\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":45842,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/robot-localization/474605/3\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3445437,\"name\":\"Brad\",\"username\":\"Bmongar\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bmongar/{size}/228654_2.png\",\"created_at\":\"2024-11-09T19:27:07.126Z\",\"cooked\":\"\\u003cp\\u003eThe SwerveDrivePoseEstimator isn’t a black box as all the source is included and you can step in and look at anything you want.\\u003c/p\\u003e\\n\\u003cp\\u003eAlso as for being hard to extend for other sensors.   Just use the addVisionMeasurement if you have another way to produce a pose and use whatever standard deviations you wan with it.   It doesn’t have to be vision.\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-09T19:27:07.126Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":368,\"readers_count\":367,\"score\":113.6,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Brad\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38557,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \"},\"post_url\":\"/t/robot-localization/474605/4\",\"custom_user_title\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3445440,\"name\":\"Ryan Yohnk\",\"username\":\"yohnkrb\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yohnkrb/{size}/184829_2.png\",\"created_at\":\"2024-11-09T19:39:18.268Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Bmongar\\\" data-post=\\\"4\\\" data-topic=\\\"474605\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/bmongar/48/228654_2.png\\\" class=\\\"avatar\\\"\\u003e Bmongar:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eThe SwerveDrivePoseEstimator isn’t a black box\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eLet me rephrase that. It’s friendly enough to use that it’s tempting to just plug in the data and go on your way without understanding what’s actually going on under the hood. This can cause issues while troubleshooting as you’re trying to get up to speed on what’s happening while also fixing the issue. Admittedly this is a universal problem with any “\\u003cspan class=\\\"abbreviation\\\"\\u003eCOTS\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Commercial, off-the-shelf\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e” library and could be fixed by digging in and teaching the basics prior to the season.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Bmongar\\\" data-post=\\\"4\\\" data-topic=\\\"474605\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/bmongar/48/228654_2.png\\\" class=\\\"avatar\\\"\\u003e Bmongar:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eJust use the addVisionMeasurement if you have another way to produce a pose and use whatever standard deviations you wan with it.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThat method takes in a Pose2d, which looks like it’s a position (Translation2d) and heading (Rotation2d). My thought was to incorporate things like velocity and acceleration into the filter, which I’m not sure I see how you could do with the current framework. Right now it seems you’d have to keep track of this data elsewhere and translate it into a Pose2d, which seems like it’s avoiding some of the power of using a filter.\\u003c/p\\u003e\\n\\u003cp\\u003ePlease correct me if I’m wrong. If I’m overlooking something simple that would definitely make life easier.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-09T19:39:18.268Z\",\"reply_count\":0,\"reply_to_post_number\":4,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":349,\"readers_count\":348,\"score\":84.8,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Ryan Yohnk\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":45842,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/robot-localization/474605/5\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3445441,\"name\":\"viggy96\",\"username\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\",\"created_at\":\"2024-11-09T19:41:18.386Z\",\"cooked\":\"\\u003cp\\u003eThe main thing I want with the existing pose estimators is being able to dynamically change the std dev of wheel odometry measurements, like I can for vision measurements. So I can trust the wheel odometry less, the longer it’s been since a vision pose update.\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-09T19:41:18.386Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":311,\"readers_count\":310,\"score\":107.2,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"viggy96\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24613,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"418 Mentor | Tries to be smart\"},\"post_url\":\"/t/robot-localization/474605/6\",\"custom_user_title\":\"418 Mentor | Tries to be smart\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2},{\"id\":\"thinking\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3445445,\"name\":\"Ryan Yohnk\",\"username\":\"yohnkrb\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yohnkrb/{size}/184829_2.png\",\"created_at\":\"2024-11-09T20:21:05.392Z\",\"cooked\":\"\\u003cp\\u003eIdeally, wouldn’t this type of behavior be inherent to Bayesian filters? The longer you go without a position update, the larger your position variance gets. Maybe this is an artifact of using wheel odometry to provide an actual position when really they should just be providing heading/velocity information.\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-09T20:21:05.392Z\",\"reply_count\":1,\"reply_to_post_number\":6,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":302,\"readers_count\":301,\"score\":75.4,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Ryan Yohnk\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":24613,\"username\":\"viggy96\",\"name\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":45842,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/robot-localization/474605/7\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446378,\"name\":\"Ryan Yohnk\",\"username\":\"yohnkrb\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yohnkrb/{size}/184829_2.png\",\"created_at\":\"2024-11-12T00:26:34.385Z\",\"cooked\":\"\\u003cp\\u003eFor anyone visiting this in the future, I want to suggest checking out \\u003ca href=\\\"http://rlabbe.github.io/Kalman-and-Bayesian-Filters-in-Python/\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ethis book/repository\\u003c/a\\u003e as a fantastic resource to get up to speed on this topic.\\u003c/p\\u003e\\n\\u003cp\\u003eI’ve been walking through the chapters in preparation to get our kids up to speed, and honestly I think this will become a part of our “must read” for kids working on programming.\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T00:26:34.385Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":257,\"readers_count\":256,\"score\":101.4,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Ryan Yohnk\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"http://rlabbe.github.io/Kalman-and-Bayesian-Filters-in-Python/\",\"internal\":false,\"reflection\":false,\"title\":\"Kalman and Bayesian Filters in Python by rlabbe\",\"clicks\":39}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":45842,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/robot-localization/474605/8\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446387,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2024-11-12T00:46:37.784Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"viggy96\\\" data-post=\\\"6\\\" data-topic=\\\"474605\\\" data-full=\\\"true\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/viggy96/48/252784_2.png\\\" class=\\\"avatar\\\"\\u003e viggy96:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eThe main thing I want with the existing pose estimators is being able to dynamically change the std dev of wheel odometry measurements, like I can for vision measurements. So I can trust the wheel odometry less, the longer it’s been since a vision pose update.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"yohnkrb\\\" data-post=\\\"7\\\" data-topic=\\\"474605\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/yohnkrb/48/184829_2.png\\\" class=\\\"avatar\\\"\\u003e yohnkrb:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eIdeally, wouldn’t this type of behavior be inherent to Bayesian filters?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThis is correct. The odometry measurement noise is constant (which is why we’ve rejected issues for making it configurable), but the error covariance increases over time such that CV pose measurements have a larger effect on the state estimate.\\u003c/p\\u003e\\n\\u003cp\\u003eWPILib used to use an unscented Kalman filter with a good process model, bad measurement model (wasn’t a camera model), and latency compensation that replayed measurements and recomputed the past error covariances. The roboRIO wasn’t fast enough to run it. Instead, WPILib now uses a very poor linear process model and steady-state Kalman gains: \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/algorithms.md#closed-form-kalman-gain-for-continuous-kalman-filter-with-a--0-and-c--i\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eallwpilib/wpimath/algorithms.md at main · wpilibsuite/allwpilib · GitHub\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eWe’ll have to wait for 2027 to get an accurate solution teams can run in real-time.\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T01:31:54.857Z\",\"reply_count\":1,\"reply_to_post_number\":7,\"quote_count\":2,\"incoming_link_count\":1,\"reads\":251,\"readers_count\":250,\"score\":90.2,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/algorithms.md#closed-form-kalman-gain-for-continuous-kalman-filter-with-a--0-and-c--i\",\"internal\":false,\"reflection\":false,\"title\":\"allwpilib/wpimath/algorithms.md at main · wpilibsuite/allwpilib · GitHub\",\"clicks\":8}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/robot-localization/474605/9\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446415,\"name\":\"\",\"username\":\"pigrammer\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/pigrammer/{size}/234083_2.png\",\"created_at\":\"2024-11-12T01:44:21.694Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group quote-modified\\\" data-username=\\\"calcmogul\\\" data-post=\\\"9\\\" data-topic=\\\"474605\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/calcmogul/48/128045_2.png\\\" class=\\\"avatar\\\"\\u003e calcmogul:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eWPILib used to use an unscented Kalman filter with a proper model and latency compensation, but the roboRIO isn’t fast enough to run it. Instead, WPILib now uses a very poor linear process model and steady-state Kalman gains: \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/algorithms.md#closed-form-kalman-gain-for-continuous-kalman-filter-with-a--0-and-c--i\\\"\\u003eallwpilib/wpimath/algorithms.md at main · wpilibsuite/allwpilib · GitHub \\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eWe’ll have to wait for 2027 to get an accurate solution teams can run in real-time.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eIs this something one could run on a coprocessor right now, or is the latency required for odometry lower than the latency achieved using a coprocessor and NetworkTables?\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T01:44:21.694Z\",\"reply_count\":1,\"reply_to_post_number\":9,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":230,\"readers_count\":229,\"score\":56.0,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":64857,\"hidden\":false,\"trust_level\":3,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"246 Software Lead\"},\"post_url\":\"/t/robot-localization/474605/10\",\"custom_user_title\":\"246 Software Lead\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446432,\"name\":\"sam liu\",\"username\":\"catrix\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/c/dbc845/{size}.png\",\"created_at\":\"2024-11-12T02:30:40.489Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"yohnkrb\\\" data-post=\\\"1\\\" data-topic=\\\"474605\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/yohnkrb/48/184829_2.png\\\" class=\\\"avatar\\\"\\u003e yohnkrb:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eI don’t see a good way to plug data from sensors like an IMU into the SwerveDrivePoseEstimator\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI thought \\u003ccode\\u003eSwerveDrivePoseEstimator\\u003c/code\\u003e must take a gyro (IMU) measurement for rotation when you update it.  (Maybe some teams without IMU adds up the Twist2d from the odometry to estimate rotation instead, but that isn’t the recommended approach.)\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T02:30:40.489Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":1,\"incoming_link_count\":2,\"reads\":224,\"readers_count\":223,\"score\":59.8,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"sam liu\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":60033,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"CE Student @ UWaterloo | 5516 Alum \"},\"post_url\":\"/t/robot-localization/474605/11\",\"custom_user_title\":\"CE Student @ UWaterloo | 5516 Alum \",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446463,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2024-11-12T03:18:11.035Z\",\"cooked\":\"\\u003cp\\u003eThere’s R\\u0026amp;D to do more complex stuff than that on a coprocessor: \\u003ca href=\\\"https://github.com/mcm001/gtsam-playground/\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eGitHub - mcm001/gtsam-playground\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T03:18:11.035Z\",\"reply_count\":1,\"reply_to_post_number\":10,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":214,\"readers_count\":213,\"score\":92.8,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/mcm001/gtsam-playground/\",\"internal\":false,\"reflection\":false,\"title\":\"GitHub - mcm001/gtsam-playground\",\"clicks\":22}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":64857,\"username\":\"pigrammer\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/pigrammer/{size}/234083_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/robot-localization/474605/12\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446471,\"name\":\"Ryan Yohnk\",\"username\":\"yohnkrb\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yohnkrb/{size}/184829_2.png\",\"created_at\":\"2024-11-12T03:33:00.188Z\",\"cooked\":\"\\u003cp\\u003eYou’re probably correct. My point there was to incorporate the acceleration data into the filter, not just the heading from the gyro.\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T03:33:00.188Z\",\"reply_count\":1,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":211,\"readers_count\":210,\"score\":52.2,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Ryan Yohnk\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":60033,\"username\":\"catrix\",\"name\":\"sam liu\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/c/dbc845/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":45842,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/robot-localization/474605/13\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446499,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2024-11-12T06:02:28.569Z\",\"cooked\":\"\\u003cp\\u003e3512 did that in their 2020 robot code. Here’s the \\u003ca href=\\\"https://github.com/frc3512/Robot-2020/blob/main/docs/drivetrain-imu-measurement-model.md\\\" rel=\\\"noopener nofollow ugc\\\"\\u003emeasurement model\\u003c/a\\u003e. The acceleration was so noisy that the optimal filter contribution was essentially nothing.\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T06:02:28.569Z\",\"reply_count\":1,\"reply_to_post_number\":13,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":207,\"readers_count\":206,\"score\":51.4,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/frc3512/Robot-2020/blob/main/docs/drivetrain-imu-measurement-model.md\",\"internal\":false,\"reflection\":false,\"title\":\"Robot-2020/docs/drivetrain-imu-measurement-model.md at main · frc3512/Robot-2020 · GitHub\",\"clicks\":14}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":45842,\"username\":\"yohnkrb\",\"name\":\"Ryan Yohnk\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yohnkrb/{size}/184829_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/robot-localization/474605/14\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446507,\"name\":\"Matt\",\"username\":\"thatmattguy\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thatmattguy/{size}/222358_2.png\",\"created_at\":\"2024-11-12T07:17:33.249Z\",\"cooked\":\"\\u003cp\\u003eThe more complex stuff also happens to magically deal with inserting new measurements somewhere in the past through the /magic of iSAM/ which is pretty fantastic. Definitely need more R\\u0026amp;D on this project though - still looking for someone to own these gtsam projexts :))))\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T07:17:33.249Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":204,\"readers_count\":203,\"score\":50.8,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Matt\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":37738,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/robot-localization/474605/15\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446610,\"name\":\"Ryan Yohnk\",\"username\":\"yohnkrb\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yohnkrb/{size}/184829_2.png\",\"created_at\":\"2024-11-12T15:04:49.689Z\",\"cooked\":\"\\u003cp\\u003eGood to know!\\u003c/p\\u003e\\n\\u003cp\\u003eI know there’s risk in including higher and higher orders in your model, but considering you can directly measure acceleration I’m surprised it performed poorly.\\u003c/p\\u003e\\n\\u003cp\\u003eSounds like something we’ll get to test as we explore this topic.\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T15:04:49.689Z\",\"reply_count\":0,\"reply_to_post_number\":14,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":198,\"readers_count\":197,\"score\":39.6,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Ryan Yohnk\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":45842,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/robot-localization/474605/16\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446614,\"name\":\"joemost\",\"username\":\"joemost\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/joemost/{size}/11114_2.png\",\"created_at\":\"2024-11-12T15:21:41.217Z\",\"cooked\":\"\\u003cp\\u003ewe are still planning on starting to experiment with it. Just not sure how far we will get.\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T15:21:41.217Z\",\"reply_count\":0,\"reply_to_post_number\":15,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":191,\"readers_count\":190,\"score\":63.2,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"joemost\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":37738,\"username\":\"thatmattguy\",\"name\":\"Matt\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thatmattguy/{size}/222358_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":20003,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/robot-localization/474605/17\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446734,\"name\":\"Ryan Yohnk\",\"username\":\"yohnkrb\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yohnkrb/{size}/184829_2.png\",\"created_at\":\"2024-11-12T18:46:14.885Z\",\"cooked\":\"\\u003cp\\u003eFor those that use a custom Kalman filter, how have you found the performance? We’re curious if we can rely on running this on the Rio.\\u003c/p\\u003e\\n\\u003cp\\u003eAre you able to update each periodic tick, or do you have to limit it to something like every 10th tick?\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T18:46:14.885Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":179,\"readers_count\":178,\"score\":45.8,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Ryan Yohnk\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":45842,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/robot-localization/474605/18\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446742,\"name\":\"Tyler Veness\",\"username\":\"calcmogul\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"created_at\":\"2024-11-12T19:15:49.654Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"yohnkrb\\\" data-post=\\\"18\\\" data-topic=\\\"474605\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/yohnkrb/48/184829_2.png\\\" class=\\\"avatar\\\"\\u003e yohnkrb:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eFor those that use a custom Kalman filter, how have you found the performance? We’re curious if we can rely on running this on the Rio.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eFor Java, I have no clue. However, in 2020, 3512 ran a 7-state, 2-input, 5-output unscented Kalman filter and an LTV differential drive controller on a roboRIO v1 at 200 Hz (real-time C++). Combined, they took 1.32 ms of the allocated 1.5 ms timeslice, with most of it being the estimator.\\u003c/p\\u003e\\n\\u003cp\\u003eLatency compensation was very expensive for old computer vision measurements. We probably should have used a history buffer smaller than 1.5 s.\\u003c/p\\u003e\\n\\u003cp\\u003e3512 switched to the WPILib odometry class in 2022 because the pose estimate quality was similar to what we were using before (encoders and IMUs have very low noise, so those measurements were almost entirely driving the Kalman filter model anyway).\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T19:24:25.080Z\",\"reply_count\":1,\"reply_to_post_number\":18,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":177,\"readers_count\":176,\"score\":70.4,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Tyler Veness\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16846,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib controls | Choreo optimizer backend\"},\"post_url\":\"/t/robot-localization/474605/19\",\"custom_user_title\":\"WPILib controls | Choreo optimizer backend\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3446768,\"name\":\"Matt\",\"username\":\"thatmattguy\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thatmattguy/{size}/222358_2.png\",\"created_at\":\"2024-11-12T20:13:14.162Z\",\"cooked\":\"\\u003cp\\u003eSomething \\u003ca class=\\\"mention\\\" href=\\\"/u/pietroglyph\\\"\\u003e@pietroglyph\\u003c/a\\u003e has mentioned but I’ve never actually had time to play with is robust noise models for un-modeled disturbances\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-11-12T20:13:14.162Z\",\"reply_count\":0,\"reply_to_post_number\":19,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":164,\"readers_count\":163,\"score\":37.8,\"yours\":false,\"topic_id\":474605,\"topic_slug\":\"robot-localization\",\"display_username\":\"Matt\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":37738,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/robot-localization/474605/20\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3445432,3445433,3445434,3445437,3445440,3445441,3445445,3446378,3446387,3446415,3446432,3446463,3446471,3446499,3446507,3446610,3446614,3446734,3446742,3446768,3449154,3450222,3450288]},\"timeline_lookup\":[[1,336],[8,334],[16,333],[21,327],[22,325]],\"tags\":[\"localization\"],\"tags_descriptions\":{},\"fancy_title\":\"Robot Localization\",\"id\":474605,\"title\":\"Robot Localization\",\"posts_count\":23,\"created_at\":\"2024-11-09T19:17:28.643Z\",\"views\":1306,\"reply_count\":16,\"like_count\":27,\"last_posted_at\":\"2024-11-21T10:47:07.690Z\",\"visible\":true,\"closed\":false,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"robot-localization\",\"category_id\":30,\"word_count\":2047,\"deleted_at\":null,\"user_id\":45842,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_474605\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":23,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":{\"id\":37708,\"execute_at\":\"2025-11-21T10:47:07.690Z\",\"duration_minutes\":525600,\"based_on_last_post\":true,\"status_type\":\"close\",\"category_id\":null},\"message_bus_last_id\":0,\"participant_count\":9,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":45842,\"username\":\"yohnkrb\",\"name\":\"Ryan Yohnk\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yohnkrb/{size}/184829_2.png\",\"post_count\":9,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":16846,\"username\":\"calcmogul\",\"name\":\"Tyler Veness\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":37738,\"username\":\"thatmattguy\",\"name\":\"Matt\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/thatmattguy/{size}/222358_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":60663,\"username\":\"Geoffrey8814\",\"name\":\"Geoffrey\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/geoffrey8814/{size}/262430_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":24613,\"username\":\"viggy96\",\"name\":\"viggy96\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/viggy96/{size}/252784_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":64857,\"username\":\"pigrammer\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/pigrammer/{size}/234083_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":3},{\"id\":20003,\"username\":\"joemost\",\"name\":\"joemost\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/joemost/{size}/11114_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":38557,\"username\":\"Bmongar\",\"name\":\"Brad\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bmongar/{size}/228654_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":60033,\"username\":\"catrix\",\"name\":\"sam liu\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/c/dbc845/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":45842,\"username\":\"yohnkrb\",\"name\":\"Ryan Yohnk\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/yohnkrb/{size}/184829_2.png\"},\"last_poster\":{\"id\":60663,\"username\":\"Geoffrey8814\",\"name\":\"Geoffrey\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/geoffrey8814/{size}/262430_2.png\"},\"links\":[{\"url\":\"http://rlabbe.github.io/Kalman-and-Bayesian-Filters-in-Python/\",\"title\":\"Kalman and Bayesian Filters in Python by rlabbe\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":39,\"user_id\":45842,\"domain\":\"rlabbe.github.io\",\"root_domain\":\"rlabbe.github.io\"},{\"url\":\"https://github.com/mcm001/gtsam-playground/\",\"title\":\"GitHub - mcm001/gtsam-playground\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":22,\"user_id\":16846,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/frc3512/Robot-2020/blob/main/docs/drivetrain-imu-measurement-model.md\",\"title\":\"Robot-2020/docs/drivetrain-imu-measurement-model.md at main · frc3512/Robot-2020 · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":14,\"user_id\":16846,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/algorithms.md#closed-form-kalman-gain-for-continuous-kalman-filter-with-a--0-and-c--i\",\"title\":\"allwpilib/wpimath/algorithms.md at main · wpilibsuite/allwpilib · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":8,\"user_id\":16846,\"domain\":\"github.com\",\"root_domain\":\"github.com\"}]},\"bookmarks\":[]}"}
