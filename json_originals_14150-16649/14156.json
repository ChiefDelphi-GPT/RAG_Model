{"data":"{\"post_stream\":{\"posts\":[{\"id\":3022098,\"name\":\"chrisrin\",\"username\":\"chrisrin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/chrisrin/{size}/160418_2.png\",\"created_at\":\"2022-03-13T16:52:24.068Z\",\"cooked\":\"\\u003cp\\u003eSince our school doesn‚Äôt have weekend robotics meetings anymore \\u0026amp; the team is behind with our first event next week, I‚Äôm hosting students this weekend, and programming is the task at hand. I am not a programming mentor. Yep, still build season here for us.\\u003c/p\\u003e\\n\\u003cp\\u003eI mentioned current limiting being important with brushless motors yesterday, and students implemented limits for each motor in code after tracking down how. However, after searching \\u0026amp; reading a few posts this morning, I‚Äôm concerned we‚Äôre still not set up well. I overheard a programmer say our Neo drive motors are at 30A, for example, which sounds off‚Ä¶\\u003c/p\\u003e\\n\\u003cp\\u003eIs there a clear, concise best practice I can point my team to? Other than end game, we have three modes:\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eintaking: 4 Neo drive motors, 1 Neo intake motor, 1 775pro conveyor motor\\u003c/li\\u003e\\n\\u003cli\\u003edrive to shooting location: 4 Neo drive motors, 1 Neo speed up wheel, 1 Neo shooting motor\\u003c/li\\u003e\\n\\u003cli\\u003eshooting: 2 775pro conveyor motors, 1 Neo speed up wheel motor, and 1 Neo shooting motor set up to spin two opposing wheels to minimize spin. We should not usually be driving when actually shooting since our shooting spots are hub bumper and 1 robot length back from hub bumper, but it may rarely happen.\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003eThanks\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-03-13T16:52:24.068Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":2234,\"reads\":685,\"readers_count\":684,\"score\":11312.0,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"chrisrin\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":28219,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/1\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":3022123,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-03-13T17:16:17.218Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"chrisrin\\\" data-post=\\\"1\\\" data-topic=\\\"405541\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/chrisrin/48/160418_2.png\\\" class=\\\"avatar\\\"\\u003e chrisrin:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eI overheard a programmer say our Neo drive motors are at 30A, for example, which sounds off‚Ä¶\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eDepends how many you have.  Brownout occurs at anywhere from 150A to 300A total draw depending on battery health and wiring quality.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-03-13T17:16:17.218Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":1,\"incoming_link_count\":17,\"reads\":647,\"readers_count\":646,\"score\":249.4,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/2\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022136,\"name\":\"chrisrin\",\"username\":\"chrisrin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/chrisrin/{size}/160418_2.png\",\"created_at\":\"2022-03-13T17:35:24.057Z\",\"cooked\":\"\\u003cp\\u003eThanks. At the end of my post, I shared what motors run during our primary operating modes, including 4 Neo drive motors.\\u003c/p\\u003e\\n\\u003cp\\u003eI‚Äôm more concerned about \\u003ca href=\\\"https://www.chiefdelphi.com/t/spark-max-current-limit/354333\\\"\\u003ecomments\\u003c/a\\u003e that indicate peak current will exceed software limited current at times \\u0026amp; cause problems and how to mitigate that. Maybe 30A is too safe for us or maybe it‚Äôs better for reliability despite the torque trade-off?\\u003c/p\\u003e\\n\\u003cp\\u003eAlso, is it better to limit current via software or via the client via USB as described \\u003ca href=\\\"https://github.com/CrimsonRobotics/Current-Limiting-Spark-MAX\\\"\\u003ehere\\u003c/a\\u003e (thanks to CrimsonRobotics)? I did read something about making sure to burn the settings to flash if SW.\\u003c/p\\u003e\\n\\u003cp\\u003eWe‚Äôre going for simple and reliable, so we will err on the side being conservative to avoid brown outs, but I also don‚Äôt want to \\u003cem\\u003eexcessively\\u003c/em\\u003e limit ourselves. I just don‚Äôt think any of us has much feel for where to draw those lines for the limits, and I‚Äôm interested in a good reference for that if one exists for the overall robot rather than instructions for an individual motor. Thanks.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-03-13T17:35:24.057Z\",\"reply_count\":0,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":29,\"reads\":625,\"readers_count\":624,\"score\":270.0,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"chrisrin\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/CrimsonRobotics/Current-Limiting-Spark-MAX\",\"internal\":false,\"reflection\":false,\"clicks\":27},{\"url\":\"https://www.chiefdelphi.com/t/spark-max-current-limit/354333\",\"internal\":true,\"reflection\":false,\"title\":\"Spark max current limit\",\"clicks\":14}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":28219,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/3\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022137,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-03-13T17:40:41.108Z\",\"cooked\":\"\\u003cp\\u003eJudging by motor specs, 30 amperes per motor looks like it‚Äôs \\u003ca\\u003equite close to the current required to slip the motors\\u003c/a\\u003e, which is the maximum current you‚Äôll ever want to give to your drive.  You can increase it slightly if you want but I doubt it‚Äôll help.\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-03-13T17:40:52.448Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":7,\"reads\":577,\"readers_count\":576,\"score\":165.4,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/4\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067757,\"name\":\"Rod\",\"username\":\"Weldingrod1\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/weldingrod1/{size}/162109_2.png\",\"created_at\":\"2022-06-06T15:04:41.644Z\",\"cooked\":\"\\u003cp\\u003eYou definitely want to set a current limit that will avoid brownout; Oblarg is right on the rough total current draw that happens at.  It depends some on how long your battery cables are, their gauge, and how good a job you do on your crimps.\\u003c/p\\u003e\\n\\u003cp\\u003eI know its a hard sell with the students (more power more better school), but limiting the current to avoid or limit wheel slip is well worth doing and will actually improve your cycle times!\\u003c/p\\u003e\\n\\u003cp\\u003eiLite can get you pretty close to the right current limit to start with!\\u003c/p\\u003e\\n\\u003cp\\u003eNEO550s MUST be current limited to 20 Amps (IIRC) or so or you WILL fry them.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-06T15:04:41.644Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":20,\"reads\":548,\"readers_count\":547,\"score\":304.6,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Rod\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":5}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":46443,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/5\",\"custom_user_title\":\"Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":6}],\"current_user_reaction\":null,\"reaction_users_count\":5,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067803,\"name\":\"Chris Herzog\",\"username\":\"zog\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/zog/{size}/266762_2.png\",\"created_at\":\"2022-06-06T18:00:53.642Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Weldingrod1\\\" data-post=\\\"5\\\" data-topic=\\\"405541\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/weldingrod1/48/162109_2.png\\\" class=\\\"avatar\\\"\\u003e Weldingrod1:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eNEO550s MUST be current limited to 20 Amps (IIRC) or so or you WILL fry them.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThat‚Äôs a big deal - we lost a NEO550 right out of the gate (I didn‚Äôt even know we were using it for a specific application because it got done so late) because of this.\\u003c/p\\u003e\\n\\u003cp\\u003eThe SparkMAX is sized to supply the current to drive a fully loaded NEO; a poor heavily loaded NEO550 will \\u003cem\\u003eask\\u003c/em\\u003e for more than it can really \\u003cem\\u003etake\\u003c/em\\u003e so keeping it from cooking itself is doing it, and you, a favor for sure!\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-06T18:00:53.642Z\",\"reply_count\":0,\"reply_to_post_number\":5,\"quote_count\":1,\"incoming_link_count\":26,\"reads\":499,\"readers_count\":498,\"score\":259.8,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Chris Herzog\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":40142,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Doin' robot stuff... [ FRC 2151 + 3061 | Ri3D Redux '23 | RIP 4292 \\u0026 4241 ]\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/6\",\"custom_user_title\":\"Doin' robot stuff... [ FRC 2151 + 3061 | Ri3D Redux '23 | RIP 4292 \\u0026 4241 ]\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067805,\"name\":\"ahartnet\",\"username\":\"ahartnet\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ahartnet/{size}/5249_2.png\",\"created_at\":\"2022-06-06T18:33:00.550Z\",\"cooked\":\"\\u003cp\\u003eThis is a bit beyond what you asked for, but still relevant. By default - our programming team‚Äôs directions are as follows:\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eUpon initialization in a subsystem constructor, each spark max is restored to factory defaults. This is because if you change out a spark max in a hurry, you don‚Äôt want it to accidentally have some old parameters that it‚Äôs using for anything. We also sometimes have had weird, non-replicable issues that seems to be addressed by doing a factory reset every power up.\\u003c/li\\u003e\\n\\u003cli\\u003eneo550s are set to 20 A limits. If this doesn‚Äôt work, we can increment this buy compare against this chart to make sure we don‚Äôt allow it to run longer than a certain amount of time \\u003ca href=\\\"https://www.revrobotics.com/neo-550-brushless-motor-locked-rotor-testing/\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eNEO 550 Brushless Motor - Locked-rotor Testing\\u003c/a\\u003e. For instance, you could let it pull 40 A if you‚Äôve got other checks that won‚Äôt let it run at 40 A for more than say ~20 seconds (but ideally shorter than that). I probably wouldn‚Äôt let it run at 60 A at all as it‚Äôll start to fail in about 6 seconds.\\u003c/li\\u003e\\n\\u003cli\\u003ebig neos can be left at the default 80A, but I usually recommend explicitly setting it anyway.\\u003c/li\\u003e\\n\\u003cli\\u003eI‚Äôd recommend a constant for each (set of) motors current limit that you can modify/see all in one place anyway\\u003c/li\\u003e\\n\\u003cli\\u003ewe set all desired parameters on the spark max AND burn to flash. This ensures that if you have any kind of brown out/power issue - the spark max should come up with the same parameters as what you intend for them to.\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003eAs for your drivetrain limit, as indicated by others that‚Äôs probably because that‚Äôs where your wheels would start to slip anyway. You can analytically guess this value based on the iLITE drivetrain simulator, or actually test it by putting your robot up against a wall on carpet, plot the current, and then slowly increase the setpoint until the wheels slip and then take a value a little shy of your peak current as your current limit.\\u003c/p\\u003e\\n\\u003cp\\u003eOf course, imo with the number of PDH slots available and the power available in motors now, there‚Äôs not usually a good reason to run on the edge of an acceptable current. It‚Äôs probably worth it to either gear something a little slower to reduce current, throw another motor on it to share the load, or potentially change from something like a 550 to a big neo or a falcon\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-06T18:33:00.550Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":66,\"reads\":472,\"readers_count\":471,\"score\":479.4,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"ahartnet\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.revrobotics.com/neo-550-brushless-motor-locked-rotor-testing/\",\"internal\":false,\"reflection\":false,\"title\":\"NEO 550 Brushless Motor - Locked-rotor Testing\",\"clicks\":69}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":15473,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5414 Mentor\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/7\",\"custom_user_title\":\"5414 Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067848,\"name\":\"Allen Nuttle\",\"username\":\"nuttle\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/nuttle/{size}/124105_2.png\",\"created_at\":\"2022-06-06T21:21:12.300Z\",\"cooked\":\"\\u003cp\\u003eFor the not-NEO-550: \\u003ca href=\\\"https://www.revrobotics.com/neo-brushless-motor-locked-rotor-testing/\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eNEO Brushless Motor - Locked-rotor Testing\\u003c/a\\u003e.\\u003c/p\\u003e\\n\\u003cp\\u003eWe use a C++ class that wraps the SPARK MAX and makes it easier to manage the config stuff (which you can also do by just burning the settings using the REV HW Client).  The settings we used for mechanism NEOs and NEO 550s are here: \\u003ca href=\\\"https://github.com/Jagwires7443/Swerve/blob/master/src/main/cpp/subsystems/FeederSubsystem.cpp#L7\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ehttps://github.com/Jagwires7443/Swerve/blob/master/src/main/cpp/subsystems/FeederSubsystem.cpp#L7\\u003c/a\\u003e.\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-06T21:21:12.300Z\",\"reply_count\":0,\"reply_to_post_number\":7,\"quote_count\":0,\"incoming_link_count\":13,\"reads\":367,\"readers_count\":366,\"score\":138.4,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Allen Nuttle\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.revrobotics.com/neo-brushless-motor-locked-rotor-testing/\",\"internal\":false,\"reflection\":false,\"title\":\"NEO Brushless Motor - Locked-rotor Testing\",\"clicks\":36},{\"url\":\"https://github.com/Jagwires7443/Swerve/blob/master/src/main/cpp/subsystems/FeederSubsystem.cpp#L7\",\"internal\":false,\"reflection\":false,\"clicks\":28}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":15473,\"username\":\"ahartnet\",\"name\":\"ahartnet\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ahartnet/{size}/5249_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":14283,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/8\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067852,\"name\":\"Chris Herzog\",\"username\":\"zog\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/zog/{size}/266762_2.png\",\"created_at\":\"2022-06-06T21:31:09.875Z\",\"cooked\":\"\\u003cp\\u003eThese are really solid points - especially doing \\u003cem\\u003eall\\u003c/em\\u003e the setting via software at initialization (and subsequent saving to flash).\\u003c/p\\u003e\\n\\u003cp\\u003eThis is an especially big deal when something needs to be replaced as mentioned - all you need is the CAN ID set correctly and the rest will take care of itself.  Expecting specific settings to be properly configured off-robot, all of them, not missing or mal-configuring even one of them, under the time crunch of competition is asking a lot - a lot that doesn‚Äôt need to be asked for.\\u003c/p\\u003e\\n\\u003cp\\u003ePlus doing it in the code gives you the real-deal, ‚Äúas-built‚Äù documentation for what is really in effect on that controller - this is important if you ever want to re-use a subsystem or use it as a base for a subsequent generation.  It‚Äôll capture all of the non-default settings more reliably than ay external written doc since it will be the source of truth for that controller.\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-06T21:31:09.875Z\",\"reply_count\":1,\"reply_to_post_number\":7,\"quote_count\":0,\"incoming_link_count\":5,\"reads\":358,\"readers_count\":357,\"score\":131.6,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Chris Herzog\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":15473,\"username\":\"ahartnet\",\"name\":\"ahartnet\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ahartnet/{size}/5249_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":40142,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Doin' robot stuff... [ FRC 2151 + 3061 | Ri3D Redux '23 | RIP 4292 \\u0026 4241 ]\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/9\",\"custom_user_title\":\"Doin' robot stuff... [ FRC 2151 + 3061 | Ri3D Redux '23 | RIP 4292 \\u0026 4241 ]\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2},{\"id\":\"point_up\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067858,\"name\":\"ahartnet\",\"username\":\"ahartnet\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ahartnet/{size}/5249_2.png\",\"created_at\":\"2022-06-06T21:54:58.112Z\",\"cooked\":\"\\u003cp\\u003eIt sometimes feels a bit odd to suggest it, because generally speaking I wouldn‚Äôt tell someone to write code that burns the same values to flash every time it initializes (the ‚Äúproper‚Äù way would be to read it and then write it if it‚Äôs different than expected)‚Ä¶but unless someone writes some \\u003cem\\u003ereally\\u003c/em\\u003e bad code, no one‚Äôs coming close to what I assume is the something like 100,000+ read/write cycles of the flash memory. So for our application, I would definitely argue it‚Äôs the ‚Äúright‚Äù way to do it - exchanging the flash memory life time for boot time and reliability of expected behavior.\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-06T21:54:58.112Z\",\"reply_count\":0,\"reply_to_post_number\":9,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":332,\"readers_count\":331,\"score\":146.4,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"ahartnet\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":40142,\"username\":\"zog\",\"name\":\"Chris Herzog\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/zog/{size}/266762_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":4}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":15473,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5414 Mentor\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/10\",\"custom_user_title\":\"5414 Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":4}],\"current_user_reaction\":null,\"reaction_users_count\":4,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067867,\"name\":\"Rod\",\"username\":\"Weldingrod1\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/weldingrod1/{size}/162109_2.png\",\"created_at\":\"2022-06-06T23:08:48.043Z\",\"cooked\":\"\\u003cp\\u003eI was told the SparkMax flash life is FAR shorter than 100k‚Ä¶\\u003cbr\\u003e\\nFlashing SparkMaxes in code is also vulnerable to race conditions, leading to hard to sort weirdness.  Speaking from repeated painful experience \\u003cimg src=\\\"https://www.chiefdelphi.com/images/emoji/google/frowning.png?v=9\\\" title=\\\":frowning:\\\" class=\\\"emoji\\\" alt=\\\":frowning:\\\"\\u003e\\u003cbr\\u003e\\nI strongly suggest -reading- the state and only flashing if it‚Äôs wrong.\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-06T23:08:48.043Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":8,\"reads\":320,\"readers_count\":319,\"score\":124.0,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Rod\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":46443,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/11\",\"custom_user_title\":\"Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067887,\"name\":\"ahartnet\",\"username\":\"ahartnet\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ahartnet/{size}/5249_2.png\",\"created_at\":\"2022-06-07T00:24:19.248Z\",\"cooked\":\"\\u003cp\\u003eHm, maybe \\u003ca class=\\\"mention\\\" href=\\\"/u/dyanoshak\\\"\\u003e@dyanoshak\\u003c/a\\u003e could chime in on what Rev recommends based on the number of usable flash write cycles and/or race conditions? I see a comment actually in the code/api that it‚Äôs actually 10,000 write cycles, which would still nearly 80 power cycles a day every day for from Jan 1 through April 30th. But that order of magnitude is definitely relevant.\\u003c/p\\u003e\\n\\u003cp\\u003eSeems to me like you can avoid any race conditions with flashing the sparks, but maybe my assumptions on the number of writes is way off.\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-07T00:24:19.248Z\",\"reply_count\":1,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":13,\"reads\":305,\"readers_count\":304,\"score\":131.0,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"ahartnet\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":46443,\"username\":\"Weldingrod1\",\"name\":\"Rod\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/weldingrod1/{size}/162109_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":15473,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5414 Mentor\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/12\",\"custom_user_title\":\"5414 Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067909,\"name\":\"Rod\",\"username\":\"Weldingrod1\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/weldingrod1/{size}/162109_2.png\",\"created_at\":\"2022-06-07T02:33:06.257Z\",\"cooked\":\"\\u003cp\\u003eAh, yes!  That‚Äôs where we found it!\\u003cbr\\u003e\\nRember, they get cycled every time the code starts, so ever code push, battery swap, turn off, etc‚Ä¶\\u003cbr\\u003e\\nIt got me worrying‚Ä¶  especially with the race condition problem.\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-07T02:33:06.257Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":289,\"readers_count\":288,\"score\":72.8,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Rod\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":46443,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/13\",\"custom_user_title\":\"Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067910,\"name\":\"Allen Nuttle\",\"username\":\"nuttle\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/nuttle/{size}/124105_2.png\",\"created_at\":\"2022-06-07T03:12:09.859Z\",\"cooked\":\"\\u003cp\\u003eFWIW, the code I linked above does the read/verify/write only on command thing.  We can manually trigger a write from test mode.  Also, the config stuff normally all happens when the robot is in disabled mode and the code is designed to spread out CAN bus traffic and blocking config function calls (to avoid loop overruns).  It also handles detecting any motor controller restarts and restoring volatile settings (status frame periods), as well as any errors (these are counted and reported on demand, rather than spewing error messages out as the code runs).\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-07T16:58:29.884Z\",\"reply_count\":0,\"reply_to_post_number\":13,\"quote_count\":0,\"incoming_link_count\":7,\"reads\":283,\"readers_count\":282,\"score\":91.6,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Allen Nuttle\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":46443,\"username\":\"Weldingrod1\",\"name\":\"Rod\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/weldingrod1/{size}/162109_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":14283,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/14\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067974,\"name\":\"Oliver\",\"username\":\"ohowe\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ohowe/{size}/221361_2.png\",\"created_at\":\"2022-06-07T15:28:16.812Z\",\"cooked\":\"\\u003cp\\u003eHas anyone found any issue with restoring factory default, setting all the needed values, then just not burning to the flash?\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-07T15:28:16.812Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":5,\"reads\":256,\"readers_count\":255,\"score\":81.2,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Oliver\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":48874,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"3729 Alum\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/15\",\"custom_user_title\":\"3729 Alum\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067977,\"name\":\"ahartnet\",\"username\":\"ahartnet\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ahartnet/{size}/5249_2.png\",\"created_at\":\"2022-06-07T15:30:54.847Z\",\"cooked\":\"\\u003cp\\u003eIf your controller browns out or have a suspect power cable for any reason this could cause inconsistent and unexpected behavior.\\u003c/p\\u003e\\n\\u003cp\\u003eGenerally speaking, you want your flashed values to be the same as what you‚Äôve set them to - other than while doing testing in your shop to find new values.\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-07T15:30:54.847Z\",\"reply_count\":0,\"reply_to_post_number\":15,\"quote_count\":0,\"incoming_link_count\":8,\"reads\":256,\"readers_count\":255,\"score\":121.2,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"ahartnet\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":48874,\"username\":\"ohowe\",\"name\":\"Oliver\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ohowe/{size}/221361_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":15473,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5414 Mentor\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/16\",\"custom_user_title\":\"5414 Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067987,\"name\":\"Orion DeYoe\",\"username\":\"Orion.DeYoe\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/orion.deyoe/{size}/171961_2.png\",\"created_at\":\"2022-06-07T16:22:08.065Z\",\"cooked\":\"\\u003cp\\u003eThe easiest thing to get out of the way is if you‚Äôre using NEO 550, I would NEVER set the current limit higher than 25A.  Any application where you need more torque than that provides should probably be a NEO anyways.\\u003c/p\\u003e\\n\\u003cp\\u003eGenerally speaking, a NEO can handle the default 80A current limit (thermally) in normal FRC use.  Basically that means the robot can run for 3min and then have a short break and that you aren‚Äôt running the motor constantly under load or stalling for long periods of time during the match.\\u003c/p\\u003e\\n\\u003cp\\u003eIf you plan on running very long practice sessions or the motor is on a mechanism that is stalled (at a high throttle point) for long periods in the match, you will want a lower current limit.\\u003c/p\\u003e\\n\\u003cp\\u003eOutside of damaging the motor, there are a couple other concerns:\\u003c/p\\u003e\\n\\u003col\\u003e\\n\\u003cli\\u003e\\n\\u003cp\\u003eCurrent budget.  As some have already mentioned, you can only draw so many amps overall before the battery voltage drops so low that critical components turn off or disable.  Reducing current limit on motors keeps the peak current draw to a minimum.  In reality you aren‚Äôt usually running everything on your robot at once so approaching current limiting from the standpoint of ‚Äúhow many amps would I draw if every motor was stalled‚Äù is going to lead you down the wrong path.  You want to think through what groups of motors will need to run at the same time frequently and set current limits to keep the total current in those groups within acceptable ranges (testing will help you determine what these are, but probably 150-250A).  For example, your drivetrain and shooter will probably run at the same time (shooter spin-up happens while driving to go shoot) but your climber and shooter don‚Äôt usually run at the same time.\\u003c/p\\u003e\\n\\u003c/li\\u003e\\n\\u003cli\\u003e\\n\\u003cp\\u003eTorque limiting and avoiding wheel slip.  If you have a high torque mechanism that is capable of damaging itself in stall conditions, current limiting is a good way to limit the torque the motor produces (torque and current should be considered to be proportional).  In addition, you should set current limits on your drivetrain to keep your wheels from slipping.  These things really have to be determined with testing.  You mentioned 30A on your drivetrain motors which does seem a little low, however it‚Äôs in the ballpark.  If you have a very low gear ratio 30A could totally be the correct limit.  3005‚Äôs drive motors were limited to 55A this year for reference.\\u003c/p\\u003e\\n\\u003c/li\\u003e\\n\\u003c/ol\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-07T16:22:08.065Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":16,\"reads\":257,\"readers_count\":256,\"score\":161.4,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Orion DeYoe\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":18343,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"FRC 3005\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/17\",\"custom_user_title\":\"FRC 3005\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067992,\"name\":\"Gus Michel II\",\"username\":\"GeeTwo\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/geetwo/{size}/120962_2.png\",\"created_at\":\"2022-06-07T16:46:03.650Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"ahartnet\\\" data-post=\\\"12\\\" data-topic=\\\"405541\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/ahartnet/48/5249_2.png\\\" class=\\\"avatar\\\"\\u003e ahartnet:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003ewhich would still nearly 80 power cycles a day every day for from Jan 1 through April 30th.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eIt must be nice to be able to retire controllers after one season.\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-07T16:46:03.650Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":1,\"incoming_link_count\":4,\"reads\":237,\"readers_count\":236,\"score\":72.4,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Gus Michel II\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":22335,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Somebody Else ‚¨õüü´üü•üüßüü®üü©üü¶üü™‚ñí‚ñí‚¨ú\\t\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/18\",\"custom_user_title\":\"Somebody Else ‚¨õüü´üü•üüßüü®üü©üü¶üü™‚ñí‚ñí‚¨ú\\t\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067996,\"name\":\"ahartnet\",\"username\":\"ahartnet\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ahartnet/{size}/5249_2.png\",\"created_at\":\"2022-06-07T17:07:07.093Z\",\"cooked\":\"\\u003cp\\u003eDefinitely some privilege in that we try to keep our robots intact for demos, prototypes, programming development from year to year. Not just from a money standpoint, but also from a space standpoint (though we are running out of that).\\u003c/p\\u003e\\n\\u003cp\\u003eBut I‚Äôd also argue most teams aren‚Äôt running roborio code that reflashes memory every day jan- April. There are certainly some teams that get to running ‚Äúreal‚Äù robot code much sooner than us, but we‚Äôre probably doing pretty good if we were to get up to an average of 80 boot ups a meeting 4x a week across March and April, which would only be about 30% of its life cycle (80 * 4 * say 10 weeks).\\u003c/p\\u003e\\n\\u003cp\\u003eNow I‚Äôm kind of curious and will see if we can keep a counter of boot ups. Can probably do it in code and also saw a neat counter that \\u003ca class=\\\"mention\\\" href=\\\"/u/nick_lawrence\\\"\\u003e@Nick_Lawrence\\u003c/a\\u003e had - but I can‚Äôt remember if that was run time or power ups\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-07T17:07:07.093Z\",\"reply_count\":2,\"reply_to_post_number\":18,\"quote_count\":0,\"incoming_link_count\":35,\"reads\":239,\"readers_count\":238,\"score\":232.8,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"ahartnet\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":22335,\"username\":\"GeeTwo\",\"name\":\"Gus Michel II\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/geetwo/{size}/120962_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":15473,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5414 Mentor\"},\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/19\",\"custom_user_title\":\"5414 Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3067998,\"name\":\"Nick Lawrence\",\"username\":\"Nick_Lawrence\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/848f3c/{size}.png\",\"created_at\":\"2022-06-07T17:19:20.812Z\",\"cooked\":\"\\u003cp\\u003e\\u003ca class=\\\"mention\\\" href=\\\"/u/ahartnet\\\"\\u003e@ahartnet\\u003c/a\\u003e Ours is runtime measured in hours, sorry. It does not count power-on cycles.\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-06-07T17:19:20.812Z\",\"reply_count\":0,\"reply_to_post_number\":19,\"quote_count\":0,\"incoming_link_count\":10,\"reads\":236,\"readers_count\":235,\"score\":112.2,\"yours\":false,\"topic_id\":405541,\"topic_slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"display_username\":\"Nick Lawrence\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":15473,\"username\":\"ahartnet\",\"name\":\"ahartnet\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ahartnet/{size}/5249_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12349,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"user_suspended\":true,\"post_url\":\"/t/clear-concise-best-practices-for-sparkmax-neo-current-limiting/405541/20\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"cry\",\"type\":\"emoji\",\"count\":1},{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3022098,3022123,3022136,3022137,3067757,3067803,3067805,3067848,3067852,3067858,3067867,3067887,3067909,3067910,3067974,3067977,3067987,3067992,3067996,3067998,3068258,3068269,3213210]},\"timeline_lookup\":[[1,1308],[5,1224],[6,1223],[17,1222],[21,1221],[23,856]],\"tags\":[],\"tags_descriptions\":{},\"fancy_title\":\"Clear, concise best practices for Sparkmax/Neo current limiting?\",\"id\":405541,\"title\":\"Clear, concise best practices for Sparkmax/Neo current limiting?\",\"posts_count\":23,\"created_at\":\"2022-03-13T16:52:23.957Z\",\"views\":4704,\"reply_count\":12,\"like_count\":31,\"last_posted_at\":\"2023-06-08T18:55:54.054Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"clear-concise-best-practices-for-sparkmax-neo-current-limiting\",\"category_id\":31,\"word_count\":2571,\"deleted_at\":null,\"user_id\":28219,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_405541\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":23,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":11,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":15473,\"username\":\"ahartnet\",\"name\":\"ahartnet\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ahartnet/{size}/5249_2.png\",\"post_count\":5,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":46443,\"username\":\"Weldingrod1\",\"name\":\"Rod\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/weldingrod1/{size}/162109_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":40142,\"username\":\"zog\",\"name\":\"Chris Herzog\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/zog/{size}/266762_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":28219,\"username\":\"chrisrin\",\"name\":\"chrisrin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/chrisrin/{size}/160418_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":18343,\"username\":\"Orion.DeYoe\",\"name\":\"Orion DeYoe\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/orion.deyoe/{size}/171961_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":14283,\"username\":\"nuttle\",\"name\":\"Allen Nuttle\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/nuttle/{size}/124105_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":48874,\"username\":\"ohowe\",\"name\":\"Oliver\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ohowe/{size}/221361_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":19731,\"username\":\"jtrv\",\"name\":\"Justin Tervay\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jtrv/{size}/203436_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":22335,\"username\":\"GeeTwo\",\"name\":\"Gus Michel II\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/geetwo/{size}/120962_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":12349,\"username\":\"Nick_Lawrence\",\"name\":\"Nick Lawrence\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/n/848f3c/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":28219,\"username\":\"chrisrin\",\"name\":\"chrisrin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/chrisrin/{size}/160418_2.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://www.revrobotics.com/neo-550-brushless-motor-locked-rotor-testing/\",\"title\":\"NEO 550 Brushless Motor - Locked-rotor Testing\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":69,\"user_id\":15473,\"domain\":\"www.revrobotics.com\",\"root_domain\":\"revrobotics.com\"},{\"url\":\"https://www.revrobotics.com/neo-brushless-motor-locked-rotor-testing/\",\"title\":\"NEO Brushless Motor - Locked-rotor Testing\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":36,\"user_id\":14283,\"domain\":\"www.revrobotics.com\",\"root_domain\":\"revrobotics.com\"},{\"url\":\"https://github.com/Jagwires7443/Swerve/blob/master/src/main/cpp/subsystems/FeederSubsystem.cpp#L7\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":28,\"user_id\":14283,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/CrimsonRobotics/Current-Limiting-Spark-MAX\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":27,\"user_id\":28219,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://www.chiefdelphi.com/t/spark-max-current-limit/354333\",\"title\":\"Spark max current limit\",\"internal\":true,\"attachment\":false,\"reflection\":false,\"clicks\":14,\"user_id\":28219,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"}]},\"bookmarks\":[]}"}
