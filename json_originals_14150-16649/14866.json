{"data":"{\"post_stream\":{\"posts\":[{\"id\":3021933,\"name\":\"ericjanofski\",\"username\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"created_at\":\"2022-03-13T05:00:44.175Z\",\"cooked\":\"\\u003cp\\u003eWe are using SysId for the first time and really need some help understanding how to get values that are in the same units we work with.\\u003c/p\\u003e\\n\\u003cp\\u003eWe are trying to tune a Feedforward controller to assist our shooter, a BangBang velocity controller. Our setpoints are measured in RPM. We are using a Rev Through Bore controller on the shaft.\\u003c/p\\u003e\\n\\u003cp\\u003eOur system:\\u003cbr\\u003e\\nTo get to RPM we took the rate from the Rev Through Bore, divided it by 2048 and then multiplied it by 60 to get to RPM. Sanity check: with a NEO (5880 RPM free speed) and a 2:1 gear reduction (max 2940 RPM after reduction) we are printing out values that make sense.\\u003c/p\\u003e\\n\\u003cp\\u003eOn to SysId:\\u003cbr\\u003e\\nIn sysid I’m unclear on whether we need to do the above conversions. There is a CPR section and the docs say to use 8192 for a Rev Through Bore encoder. Again, we applied 2048 to the returned rate, not 8192. Is that right?\\u003c/p\\u003e\\n\\u003cp\\u003eAlso, do we have to do some conversion to account for seconds vs minutes? Will that affect the ks, kv, ka calculations? I tried putting 60 in the units per rotation but the software wouldn’t let me change the value from 1.000\\u003c/p\\u003e\\n\\u003cp\\u003eAny help would be appreciated. Thank you.\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T05:01:52.958Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":481,\"reads\":206,\"readers_count\":205,\"score\":2461.2,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"ericjanofski\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30875,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor - 6637 - The BetaWolves\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/1\",\"custom_user_title\":\"Mentor - 6637 - The BetaWolves\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":3021947,\"name\":\"Bryn Dole - programming mentor FRC 2930\",\"username\":\"randomstring\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/randomstring/{size}/170695_2.png\",\"created_at\":\"2022-03-13T05:53:26.078Z\",\"cooked\":\"\\u003cp\\u003eRev through bore CPR is definitely 8192 not 2048. How are you connecting it? Through the RIO? Directly to the Spark Max motor controller?\\u003c/p\\u003e\\n\\u003cp\\u003eRev SparkMax universe is all about rotations and RPM. Position is reported in rotations and velocity in RPM. There’s a unit conversion option, but I’m still not clear if that effects the input units for set position methods. My recommendations is to leave the conversion factor alone.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T05:53:26.078Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":181,\"readers_count\":180,\"score\":61.2,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"Bryn Dole - programming mentor FRC 2930\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":33397,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/2\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3021995,\"name\":\"ericjanofski\",\"username\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"created_at\":\"2022-03-13T13:58:16.637Z\",\"cooked\":\"\\u003cp\\u003eWe are using the wpilib Encoder class. The encoder is plugged into two dio ports as a quadrature encoder and read on the rio.\\u003c/p\\u003e\\n\\u003cp\\u003eWe call getRate() here:\\u003c/p\\u003e\\n\\u003caside class=\\\"onebox githubblob\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003ca href=\\\"https://github.com/team6637/FRC2022/blob/9340ed555b7b529109702ab8c7c835f9738fb826/src/main/java/frc/robot/subsystems/ShooterSubsystem.java#L159\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch4\\u003e\\u003ca href=\\\"https://github.com/team6637/FRC2022/blob/9340ed555b7b529109702ab8c7c835f9738fb826/src/main/java/frc/robot/subsystems/ShooterSubsystem.java#L159\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eteam6637/FRC2022/blob/9340ed555b7b529109702ab8c7c835f9738fb826/src/main/java/frc/robot/subsystems/ShooterSubsystem.java#L159\\u003c/a\\u003e\\u003c/h4\\u003e\\n\\u003cpre class=\\\"onebox\\\"\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003e\\u003col class=\\\"start lines\\\" start=\\\"149\\\" style=\\\"counter-reset: li-counter 148 ;\\\"\\u003e\\n\\u003cli\\u003e\\n\\u003cli\\u003e}\\u003c/li\\u003e\\n\\u003cli\\u003e\\n\\u003cli\\u003epublic void stop() {\\u003c/li\\u003e\\n\\u003cli\\u003e  motor1.set(0.0);\\u003c/li\\u003e\\n\\u003cli\\u003e  motor2.set(0.0);\\u003c/li\\u003e\\n\\u003cli\\u003e  hoodMotor.set(0.0);\\u003c/li\\u003e\\n\\u003cli\\u003e}\\u003c/li\\u003e\\n\\u003cli\\u003e\\n\\u003cli\\u003epublic double getSpeed() {\\u003c/li\\u003e\\n\\u003cli class=\\\"selected\\\"\\u003e  return velocityEncoder.getRate() / 2048.0 * 60.0;\\u003c/li\\u003e\\n\\u003cli\\u003e}\\u003c/li\\u003e\\n\\u003cli\\u003e\\n\\u003cli\\u003epublic void setSetpoints(double s, double h) {\\u003c/li\\u003e\\n\\u003cli\\u003e  SmartDashboard.putNumber(\\\"shooter target speed\\\", s);\\u003c/li\\u003e\\n\\u003cli\\u003e  SmartDashboard.putNumber(\\\"hood target\\\", h);\\u003c/li\\u003e\\n\\u003cli\\u003e  shooterSetpoint = s;\\u003c/li\\u003e\\n\\u003cli\\u003e  hoodSetpoint = h;\\u003c/li\\u003e\\n\\u003cli\\u003e}\\u003c/li\\u003e\\n\\u003cli\\u003e\\n\\u003cli\\u003epublic void calculateSetpointsFromDistance(double distance) {\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\",\"post_number\":3,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T13:58:16.637Z\",\"reply_count\":1,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":157,\"readers_count\":156,\"score\":56.4,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"ericjanofski\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/team6637/FRC2022/blob/9340ed555b7b529109702ab8c7c835f9738fb826/src/main/java/frc/robot/subsystems/ShooterSubsystem.java#L159\",\"internal\":false,\"reflection\":false,\"clicks\":12}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":33397,\"username\":\"randomstring\",\"name\":\"Bryn Dole - programming mentor FRC 2930\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/randomstring/{size}/170695_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30875,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor - 6637 - The BetaWolves\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/3\",\"custom_user_title\":\"Mentor - 6637 - The BetaWolves\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3021999,\"name\":\"Bryn Dole - programming mentor FRC 2930\",\"username\":\"randomstring\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/randomstring/{size}/170695_2.png\",\"created_at\":\"2022-03-13T14:08:03.802Z\",\"cooked\":\"\\u003cp\\u003eIf you’re using the Rev API everything is in rotations (position) and RPM (velocity) if you’re using the RIO and WPILib for reading the encoder I’m pretty sure that will be returning in ticks per second, but I haven’t read the docs on that. So I think you’re on the right track.\\u003c/p\\u003e\\n\\u003cp\\u003eFirst thing I do when I get confused about encoder ticks \\u0026lt;-\\u0026gt; speed/position is to put all those values on SmartDashboard in periodic() and then turn the mechanism manually and note the values. Always make a hypothesis first “I am going to turn the drive shaft 1 full rotation clockwise, I expect the output shaft to turn 2 full rations CCW and the encoder to change (2048 * -2) = -4092.” Then when you’re surprised by the output figure out where you are making a false assumption.\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T14:08:03.802Z\",\"reply_count\":0,\"reply_to_post_number\":3,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":129,\"readers_count\":128,\"score\":35.8,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"Bryn Dole - programming mentor FRC 2930\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":30875,\"username\":\"ericjanofski\",\"name\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":33397,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/4\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022001,\"name\":\"ericjanofski\",\"username\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"created_at\":\"2022-03-13T14:13:25.848Z\",\"cooked\":\"\\u003cp\\u003eExactly! That is what we did to come up with this conversation. So my question is what do I put in sysid to get ks, ka and kv values that will work with rpm set points?\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T14:13:45.086Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":126,\"readers_count\":125,\"score\":30.2,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"ericjanofski\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30875,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor - 6637 - The BetaWolves\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/5\",\"custom_user_title\":\"Mentor - 6637 - The BetaWolves\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022021,\"name\":\"Bryn Dole - programming mentor FRC 2930\",\"username\":\"randomstring\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/randomstring/{size}/170695_2.png\",\"created_at\":\"2022-03-13T15:20:36.653Z\",\"cooked\":\"\\u003cp\\u003eI can’t help you there. I managed to get sensible numbers out of SysID for our drivetrain, but only got nonsense numbers out of SysId on our Arm using NEO motors and a through bore encoder on the output shaft. (Our through bore encoder is directly attached to the Sparkmax.) We ended up tuning PID for the arm by trial and error. I couldn’t find any step-by-step documentation for using SysId with anything other than a drivetrain (and for swerve you have to augment that with reading CD). I spent some time looking at the source code trying to figure out what it was doing, but ran out of time.\\u003c/p\\u003e\\n\\u003cp\\u003eSysID expects you to know that the time lag is on measuring the encoder. Sometimes these numbers are provided in the tool tips. I’m at a loss for looking up or measuring these values when they are not.\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T15:20:36.653Z\",\"reply_count\":0,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":119,\"readers_count\":118,\"score\":78.8,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"Bryn Dole - programming mentor FRC 2930\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":30875,\"username\":\"ericjanofski\",\"name\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":33397,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/6\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022029,\"name\":\"Baran Marap\",\"username\":\"b_marap\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/b/7ea924/{size}.png\",\"created_at\":\"2022-03-13T15:36:35.403Z\",\"cooked\":\"\\u003cp\\u003eThis thread might help with the sysid stuff. Unfortunately still no step by step tutorial but we were able to get useful results in 2020. Only the threshold and error tolerance parameters are unit based so you can probably try the sysid routine a couple of times before you get the desired results.\\u003c/p\\u003e\\u003caside class=\\\"quote quote-modified\\\" data-post=\\\"12\\\" data-topic=\\\"376373\\\"\\u003e\\n  \\u003cdiv class=\\\"title\\\"\\u003e\\n    \\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n    \\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/prateek_m/48/148861_2.png\\\" class=\\\"avatar\\\"\\u003e\\n    \\u003ca href=\\\"https://www.chiefdelphi.com/t/flywheel-characterization/376373/12\\\"\\u003eFlywheel Characterization\\u003c/a\\u003e \\u003ca class=\\\"badge-category__wrapper \\\" href=\\\"/c/technical/control-system/72\\\"\\u003e\\u003cspan data-category-id=\\\"72\\\" style=\\\"--category-badge-color: #F1592A; --category-badge-text-color: #FFF; --parent-category-badge-color: #3AB54A;\\\" data-parent-category-id=\\\"9\\\" data-drop-close=\\\"true\\\" class=\\\"badge-category --has-parent\\\"\\u003e\\u003cspan class=\\\"badge-category__name\\\"\\u003eControl System\\u003c/span\\u003e\\u003c/span\\u003e\\u003c/a\\u003e\\n  \\u003c/div\\u003e\\n  \\u003cblockquote\\u003e\\n    It’s just a matter of converting the units. See my post here for more details: \\n \\n \\nYou will have to add in the Ks term via the arbitrary feedforward feature that most motor controllers support. The Ka term can be ignored for a shooter because the reference (setpoint) is constant.\\n  \\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\",\"post_number\":7,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T15:36:35.403Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":111,\"readers_count\":110,\"score\":27.2,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"Baran Marap\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/flywheel-characterization/376373/12\",\"internal\":true,\"reflection\":false,\"title\":\"Flywheel Characterization\",\"clicks\":0}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":45378,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"9020 Mentor - 6985 Alumni\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/7\",\"custom_user_title\":\"9020 Mentor - 6985 Alumni\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022030,\"name\":\"ericjanofski\",\"username\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"created_at\":\"2022-03-13T15:36:52.226Z\",\"cooked\":\"\\u003cp\\u003eOkay, so I ran the sysid with the attached outcome. My ks ended up negative. very strange!\\u003c/p\\u003e\\n\\u003cp\\u003eNo idea if this is rpm or rps.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003cdiv class=\\\"lightbox-wrapper\\\"\\u003e\\u003ca class=\\\"lightbox\\\" href=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/f/7/f7a28603ddfba23666fe8053475d5701a4a79c34.png\\\" data-download-href=\\\"https://www.chiefdelphi.com/uploads/default/f7a28603ddfba23666fe8053475d5701a4a79c34\\\" title=\\\"Screenshot (5)\\\"\\u003e\\u003cimg src=\\\"https://www.chiefdelphi.com/uploads/default/optimized/3X/f/7/f7a28603ddfba23666fe8053475d5701a4a79c34_2_690x393.png\\\" alt=\\\"Screenshot (5)\\\" data-base62-sha1=\\\"zkG8GSjz96DJZDyCiAU2XvTV3Q8\\\" width=\\\"690\\\" height=\\\"393\\\" srcset=\\\"https://www.chiefdelphi.com/uploads/default/optimized/3X/f/7/f7a28603ddfba23666fe8053475d5701a4a79c34_2_690x393.png, https://www.chiefdelphi.com/uploads/default/optimized/3X/f/7/f7a28603ddfba23666fe8053475d5701a4a79c34_2_1035x589.png 1.5x, https://www.chiefdelphi.com/uploads/default/optimized/3X/f/7/f7a28603ddfba23666fe8053475d5701a4a79c34_2_1380x786.png 2x\\\" data-dominant-color=\\\"2B2E33\\\"\\u003e\\u003cdiv class=\\\"meta\\\"\\u003e\\u003csvg class=\\\"fa d-icon d-icon-far-image svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#far-image\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003cspan class=\\\"filename\\\"\\u003eScreenshot (5)\\u003c/span\\u003e\\u003cspan class=\\\"informations\\\"\\u003e1896×1080 390 KB\\u003c/span\\u003e\\u003csvg class=\\\"fa d-icon d-icon-discourse-expand svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#discourse-expand\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003c/div\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T15:36:52.226Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":103,\"readers_count\":102,\"score\":45.6,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"ericjanofski\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/uploads/default/original/3X/f/7/f7a28603ddfba23666fe8053475d5701a4a79c34.png\",\"internal\":true,\"reflection\":false,\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30875,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor - 6637 - The BetaWolves\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/8\",\"custom_user_title\":\"Mentor - 6637 - The BetaWolves\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022041,\"name\":\"ericjanofski\",\"username\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"created_at\":\"2022-03-13T15:51:49.568Z\",\"cooked\":\"\\u003cp\\u003eThese are the feedforward gains returned from sysid shown in the screenshot above.\\u003c/p\\u003e\\n\\u003cp\\u003ekS: -14.2\\u003cbr\\u003e\\nkV: 2.2184\\u003cbr\\u003e\\nkA: 37.9\\u003c/p\\u003e\\n\\u003col\\u003e\\n\\u003cli\\u003ewhy would ks be negative?\\u003c/li\\u003e\\n\\u003cli\\u003eI’m guessing this is rps, would we just use these numbers and then calculate the feedforward setpoint with our rpm/60?\\u003c/li\\u003e\\n\\u003c/ol\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T15:51:49.568Z\",\"reply_count\":0,\"reply_to_post_number\":8,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":92,\"readers_count\":91,\"score\":33.4,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"ericjanofski\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":30875,\"username\":\"ericjanofski\",\"name\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30875,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor - 6637 - The BetaWolves\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/9\",\"custom_user_title\":\"Mentor - 6637 - The BetaWolves\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022049,\"name\":\"Jack\",\"username\":\"jackptx\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jackptx/{size}/157828_2.png\",\"created_at\":\"2022-03-13T15:58:36.532Z\",\"cooked\":\"\\u003cp\\u003eYour data graphs are all wrong. Check out the WPI \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/pathplanning/system-identification/analyzing-data.html\\\" rel=\\\"noopener nofollow ugc\\\"\\u003edocs image example\\u003c/a\\u003e.\\u003c/p\\u003e\\n\\u003cp\\u003eWithout further insight, I would say you have an encoder issue (everything properly installed? Encoder loose?)\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T15:59:05.475Z\",\"reply_count\":1,\"reply_to_post_number\":8,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":89,\"readers_count\":88,\"score\":22.8,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"Jack\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/pathplanning/system-identification/analyzing-data.html\",\"internal\":false,\"reflection\":false,\"title\":\"Analyzing Data — FIRST Robotics Competition documentation\",\"clicks\":16}],\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":30875,\"username\":\"ericjanofski\",\"name\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":49074,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/10\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022058,\"name\":\"ericjanofski\",\"username\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"created_at\":\"2022-03-13T16:08:51.962Z\",\"cooked\":\"\\u003cp\\u003eThe rev through bore is working on the bot with the a and b channels feeding into the rio dio ports 0 and 1. We’ve been working with it in our shooter for weeks. I see the illustration you linked and yeah, my graphs look pretty messed up compared to those.\\u003c/p\\u003e\\n\\u003cp\\u003eI’m not sure if this is a settings issue or not. I’ve left what I can to defaults.\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T16:08:51.962Z\",\"reply_count\":1,\"reply_to_post_number\":10,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":88,\"readers_count\":87,\"score\":22.6,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"ericjanofski\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":49074,\"username\":\"jackptx\",\"name\":\"Jack\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jackptx/{size}/157828_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30875,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor - 6637 - The BetaWolves\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/11\",\"custom_user_title\":\"Mentor - 6637 - The BetaWolves\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022109,\"name\":\"ericjanofski\",\"username\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"created_at\":\"2022-03-13T17:05:46.377Z\",\"cooked\":\"\\u003cp\\u003eHere’s a better attempt! I put a check next to “Reduce Encoding” and set the samples per average to 5.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003cdiv class=\\\"lightbox-wrapper\\\"\\u003e\\u003ca class=\\\"lightbox\\\" href=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/0/a/0ae997335b6b4deb887c829f5c167afb77137a6f.png\\\" data-download-href=\\\"https://www.chiefdelphi.com/uploads/default/0ae997335b6b4deb887c829f5c167afb77137a6f\\\" title=\\\"Screenshot (7)\\\"\\u003e\\u003cimg src=\\\"https://www.chiefdelphi.com/uploads/default/optimized/3X/0/a/0ae997335b6b4deb887c829f5c167afb77137a6f_2_690x388.png\\\" alt=\\\"Screenshot (7)\\\" data-base62-sha1=\\\"1yxeTLVyw1FTj5QvtrFABDzs6nl\\\" width=\\\"690\\\" height=\\\"388\\\" srcset=\\\"https://www.chiefdelphi.com/uploads/default/optimized/3X/0/a/0ae997335b6b4deb887c829f5c167afb77137a6f_2_690x388.png, https://www.chiefdelphi.com/uploads/default/optimized/3X/0/a/0ae997335b6b4deb887c829f5c167afb77137a6f_2_1035x582.png 1.5x, https://www.chiefdelphi.com/uploads/default/optimized/3X/0/a/0ae997335b6b4deb887c829f5c167afb77137a6f_2_1380x776.png 2x\\\" data-dominant-color=\\\"2B2F34\\\"\\u003e\\u003cdiv class=\\\"meta\\\"\\u003e\\u003csvg class=\\\"fa d-icon d-icon-far-image svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#far-image\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003cspan class=\\\"filename\\\"\\u003eScreenshot (7)\\u003c/span\\u003e\\u003cspan class=\\\"informations\\\"\\u003e1920×1080 396 KB\\u003c/span\\u003e\\u003csvg class=\\\"fa d-icon d-icon-discourse-expand svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#discourse-expand\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003c/div\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003ekS: 0.043173\\u003cbr\\u003e\\nkV: 1.0649\\u003cbr\\u003e\\nkA: 0.1734\\u003c/p\\u003e\\n\\u003cp\\u003eI entered these values into the feedforward controller and ran a feedforward calculation. I fed it a velocity setpoint of 33 rotations/second and the feedforward.calculate() method returned a value of 35. I was expecting a value in the range of 0-1, so there’s something up still.\\u003c/p\\u003e\\n\\u003cp\\u003eAnyone have any ideas? Since I checked “reduce encoding” and used a value of 5 with samples per average, should I be feeding the feedforward something different than rps?\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T17:05:46.377Z\",\"reply_count\":1,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":5,\"reads\":88,\"readers_count\":87,\"score\":47.6,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"ericjanofski\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/uploads/default/original/3X/0/a/0ae997335b6b4deb887c829f5c167afb77137a6f.png\",\"internal\":true,\"reflection\":false,\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":30875,\"username\":\"ericjanofski\",\"name\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30875,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor - 6637 - The BetaWolves\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/12\",\"custom_user_title\":\"Mentor - 6637 - The BetaWolves\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022116,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-03-13T17:11:54.196Z\",\"cooked\":\"\\u003cp\\u003eYou need to further increase the \\u003ccode\\u003esamplesPerAverage\\u003c/code\\u003e setting for the encoder.  The noise you’re seeing is probably from discretization error on the clock.\\u003c/p\\u003e\\n\\u003cp\\u003eIf you nab the most recent SysId from github it’ll estimate your sensor delay, too.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"ericjanofski\\\" data-post=\\\"12\\\" data-topic=\\\"405516\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/ericjanofski/48/73640_2.png\\\" class=\\\"avatar\\\"\\u003e ericjanofski:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eI was expecting a value in the range of 0-1, so there’s something up still.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThe feedforward constants are always going to be in units of volts; if you want unit scale you’ll have to divide.  35 volts is still unreasonable, though; look at your graph axes and you’ll see your max steady state speed is nowhere near 33 RPS (it caps out at around 7, looks like?).\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T17:14:40.371Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":1,\"incoming_link_count\":4,\"reads\":84,\"readers_count\":83,\"score\":41.8,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/13\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022148,\"name\":\"ericjanofski\",\"username\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"created_at\":\"2022-03-13T17:46:58.087Z\",\"cooked\":\"\\u003cp\\u003eThanks, i’ll have to dive into that.\\u003c/p\\u003e\\n\\u003cp\\u003eIn meantime I scaled the feedforward output and it’s giving me a consistent value where multiplied by 0.9 is holding the motors at 90% of the setpoint. So that’s great.\\u003c/p\\u003e\\n\\u003cp\\u003eProblem is, the bang bang takes over and keeps oscilating the power to full. I understand this is the expected behavior but if I target 1000 rpm, i get a range of 900-1300rpm depending on where it is in the oscilation cycle. We are getting very inconsistent shots and I think it’s because of this.\\u003c/p\\u003e\\n\\u003cp\\u003eAny ideas on how to better control the a shooter?\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T17:46:58.087Z\",\"reply_count\":2,\"reply_to_post_number\":13,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":74,\"readers_count\":73,\"score\":29.8,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"ericjanofski\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30875,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor - 6637 - The BetaWolves\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/14\",\"custom_user_title\":\"Mentor - 6637 - The BetaWolves\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022154,\"name\":\"ericjanofski\",\"username\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"created_at\":\"2022-03-13T17:55:43.799Z\",\"cooked\":\"\\u003cp\\u003eWith feed forward keeping the power so close to the setpoint would a PID controller be enough to bring it the rest of the way? I’ve read that bang bang is better for a shooter, but the RPMs range wildly! Any thoughts would be appreciated. Thank you.\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T17:55:43.799Z\",\"reply_count\":0,\"reply_to_post_number\":14,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":73,\"readers_count\":72,\"score\":19.6,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"ericjanofski\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":30875,\"username\":\"ericjanofski\",\"name\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30875,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor - 6637 - The BetaWolves\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/15\",\"custom_user_title\":\"Mentor - 6637 - The BetaWolves\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022155,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-03-13T17:55:57.221Z\",\"cooked\":\"\\u003cp\\u003eDepends on a lot of things.  If the oscillation is too large you probably need to increase the flywheel mass or decrease the measurement delay.\\u003c/p\\u003e\\n\\u003cp\\u003eA proportional controller will also work.\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T17:56:13.938Z\",\"reply_count\":1,\"reply_to_post_number\":14,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":75,\"readers_count\":74,\"score\":25.0,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":30875,\"username\":\"ericjanofski\",\"name\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/16\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022178,\"name\":\"ericjanofski\",\"username\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"created_at\":\"2022-03-13T18:26:14.020Z\",\"cooked\":\"\\u003cp\\u003eThanks Oblarg, thinking through it, a decreased measurement delay would mean less time that the bangbang is sending a full power signal to the motor controllers. Any suggestions on how to decrease that delay? Is that something in the encoder that I even have control over? I can do the research if you could be so kind as to point me to where in the system that delay is configured or occuring.\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T18:26:14.020Z\",\"reply_count\":1,\"reply_to_post_number\":16,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":78,\"readers_count\":77,\"score\":20.6,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"ericjanofski\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30875,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor - 6637 - The BetaWolves\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/17\",\"custom_user_title\":\"Mentor - 6637 - The BetaWolves\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022181,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-03-13T18:28:37.685Z\",\"cooked\":\"\\u003cp\\u003eDepends on your choice of motor controller and encoder; you’ll have to consult their documentation.  Note that the NEO integrated sensors have a hardcoded filter on their velocity measurements that adds about 110ms of signal delay.\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T18:28:37.685Z\",\"reply_count\":1,\"reply_to_post_number\":17,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":81,\"readers_count\":80,\"score\":21.2,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":30875,\"username\":\"ericjanofski\",\"name\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/18\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022185,\"name\":\"ericjanofski\",\"username\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"created_at\":\"2022-03-13T18:30:19.980Z\",\"cooked\":\"\\u003cp\\u003eI’m using a rev through bore plugged into dio ports on the rio with the Encoder class in wpilib.  I read that this is faster than using the spark max calculations with the neo integrated encoders. Was that wrong?\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T18:30:19.980Z\",\"reply_count\":1,\"reply_to_post_number\":18,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":77,\"readers_count\":76,\"score\":35.4,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"ericjanofski\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30875,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor - 6637 - The BetaWolves\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/19\",\"custom_user_title\":\"Mentor - 6637 - The BetaWolves\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3022188,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-03-13T18:31:40.333Z\",\"cooked\":\"\\u003cp\\u003eThat is correct; you might be seeing discretization noise from the rio clock in that case; try increasing the samplesToAverage setting on the Encoder class.\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":22,\"updated_at\":\"2022-03-13T18:31:40.333Z\",\"reply_count\":1,\"reply_to_post_number\":19,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":80,\"readers_count\":79,\"score\":41.0,\"yours\":false,\"topic_id\":405516,\"topic_slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":30875,\"username\":\"ericjanofski\",\"name\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/sysid-feedforward-for-velocity-rpm-control/405516/20\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3021933,3021947,3021995,3021999,3022001,3022021,3022029,3022030,3022041,3022049,3022058,3022109,3022116,3022148,3022154,3022155,3022178,3022181,3022185,3022188,3022234,3163800]},\"timeline_lookup\":[[1,1309],[12,1308],[22,943]],\"tags\":[],\"tags_descriptions\":{},\"fancy_title\":\"SYSID Feedforward for Velocity RPM control\",\"id\":405516,\"title\":\"SYSID Feedforward for Velocity RPM control\",\"posts_count\":22,\"created_at\":\"2022-03-13T05:00:44.057Z\",\"views\":1897,\"reply_count\":16,\"like_count\":6,\"last_posted_at\":\"2023-03-13T19:23:54.087Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"sysid-feedforward-for-velocity-rpm-control\",\"category_id\":25,\"word_count\":1569,\"deleted_at\":null,\"user_id\":30875,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_405516\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":22,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":5,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":30875,\"username\":\"ericjanofski\",\"name\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\",\"post_count\":12,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":33397,\"username\":\"randomstring\",\"name\":\"Bryn Dole - programming mentor FRC 2930\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/randomstring/{size}/170695_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":45378,\"username\":\"b_marap\",\"name\":\"Baran Marap\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/b/7ea924/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":49074,\"username\":\"jackptx\",\"name\":\"Jack\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jackptx/{size}/157828_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":30875,\"username\":\"ericjanofski\",\"name\":\"ericjanofski\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ericjanofski/{size}/73640_2.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/pathplanning/system-identification/analyzing-data.html\",\"title\":\"Analyzing Data — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":16,\"user_id\":49074,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.com/team6637/FRC2022/blob/9340ed555b7b529109702ab8c7c835f9738fb826/src/main/java/frc/robot/subsystems/ShooterSubsystem.java#L159\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":12,\"user_id\":30875,\"domain\":\"github.com\",\"root_domain\":\"github.com\"}]},\"bookmarks\":[]}"}
