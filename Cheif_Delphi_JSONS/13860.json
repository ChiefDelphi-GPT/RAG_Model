{
    "data": {
        "post_stream": {
            "posts": [
                {
                    "id": 3078995,
                    "name": "Vincent Yang",
                    "username": "vyang2968",
                    "avatar_template": "/letter_avatar_proxy/v4/letter/v/aeb1de/{size}.png",
                    "created_at": "2022-08-26T23:45:45.742Z",
                    "cooked": "I am a programmer, exploring the full capabilities of WPILib and implementing new things in our team’s code. I saw state-space models and I am trying to control systems like a flywheel and turret with it. However, I am not sure how to tune the model. With PID Controllers, there are 3-4 values to change and you can change it based on how it reaches your target on a graph. With state-space models, I am unsure on how to get a visualization of the Kalman filter’s predicted output so that I can compare it to the real output. This would allow me to tune the filter. I’m looking to create a chart similar to what’s on this page .\n\nI am also confused on how to tune the relms and qelms in the LinearSystemLoop . As stated in this page , changing the relms and qelms inversely can cause the same output. Therefore, how will I know which one to change based on the controller trying to reach the setpoint?\n\nAny help is greatly appreciated.",
                    "post_number": 1,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-08-26T23:45:45.742Z",
                    "reply_count": 1,
                    "reply_to_post_number": null,
                    "quote_count": 0,
                    "incoming_link_count": 172,
                    "reads": 305,
                    "readers_count": 304,
                    "score": 986.0,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Vincent Yang",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "link_counts": [
                        {
                            "url": "https://docs.wpilib.org/en/stable/docs/software/advanced-controls/state-space/state-space-observers.html",
                            "internal": false,
                            "reflection": false,
                            "title": "State Observers and Kalman Filters — FIRST Robotics Competition documentation",
                            "clicks": 21
                        },
                        {
                            "url": "https://docs.wpilib.org/en/stable/docs/software/advanced-controls/state-space/state-space-intro.html",
                            "internal": false,
                            "reflection": false,
                            "title": "Introduction to State-Space Control — FIRST Robotics Competition documentation",
                            "clicks": 6
                        }
                    ],
                    "read": true,
                    "user_title": null,
                    "bookmarked": false,
                    "actions_summary": [
                        {
                            "id": 2,
                            "count": 4
                        }
                    ],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 53733,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/1",
                    "custom_user_title": null,
                    "reactions": [
                        {
                            "id": "heart",
                            "type": "emoji",
                            "count": 4
                        }
                    ],
                    "current_user_reaction": null,
                    "reaction_users_count": 4,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null,
                    "can_vote": false
                },
                {
                    "id": 3079003,
                    "name": "Tyler Veness",
                    "username": "calcmogul",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png",
                    "created_at": "2022-08-27T01:16:10.705Z",
                    "cooked": "vyang2968:\n\nHowever, I am not sure how to tune the model. With PID Controllers, there are 3-4 values to change and you can change it based on how it reaches your target on a graph. With state-space models, I am unsure on how to get a visualization of the Kalman filter’s predicted output so that I can compare it to the real output. This would allow me to tune the filter.\n\nWhen I was mentoring 3512, we used state-space, and we logged basically everything ( #logallthethings ). In particular, we pushed the references, state estimates, measurements, and control inputs to NetworkTables and plotted them in real time on the Glass dashboard . We also logged everything to CSV for diagnostics in Python afterward.\n\nvyang2968:\n\nI am also confused on how to tune the relms and qelms in the LinearSystemLoop . As stated in this page , changing the relms and qelms inversely can cause the same output. Therefore, how will I know which one to change based on the controller trying to reach the setpoint?\n\nThat docs page is incorrect. Multiplying q by 10 does not have the same effect as dividing r by 10. I’ll submit a PR to fix it.\n\nThe way I recommend tuning the tolerances is setting r to your max voltage, then choosing a desired q tolerance as a starting point (e.g., 5 rad/s). If the controller oscillates, increase the tolerance until the oscillation stops. Measurement delay is the most common cause of oscillation with otherwise optimal gains. See Debugging State-Space Models and Controllers — FIRST Robotics Competition documentation for more about that.\n\nModel-based control requires very little tuning in general though as long as mechanical gave you a robot that has minimal mechanism backlash and clean, low-latency sensor readings. Now that I’ve used LQR, I’d never go back to tuning raw PID gains. LQR gains tend to be aggressive, but that’s because you really can get that kind of performance without overshoot if you engineer your electromechanical system well. You can always tune the tolerances to be less aggressive if you have to.\n\nBy the way, be on the lookout for the LTV controller classes in WPILib 2023. The LTV diff drive controller is a flat topology controller, and the LTV unicycle controller is a cascaded topology controller that’s a replacement for Ramsete with better tuning knobs:",
                    "post_number": 2,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-08-27T01:18:20.312Z",
                    "reply_count": 2,
                    "reply_to_post_number": null,
                    "quote_count": 1,
                    "incoming_link_count": 16,
                    "reads": 288,
                    "readers_count": 287,
                    "score": 192.6,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Tyler Veness",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "link_counts": [
                        {
                            "url": "https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/java/edu/wpi/first/math/controller/LTVDifferentialDriveController.java",
                            "internal": false,
                            "reflection": false,
                            "clicks": 21
                        },
                        {
                            "url": "https://docs.wpilib.org/en/stable/docs/software/advanced-controls/state-space/state-space-debugging.html#compensating-for-input-lag",
                            "internal": false,
                            "reflection": false,
                            "title": "Debugging State-Space Models and Controllers — FIRST Robotics Competition documentation",
                            "clicks": 15
                        },
                        {
                            "url": "https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/java/edu/wpi/first/math/controller/LTVUnicycleController.java",
                            "internal": false,
                            "reflection": false,
                            "clicks": 13
                        },
                        {
                            "url": "https://docs.wpilib.org/en/stable/docs/software/dashboards/glass/plots.html",
                            "internal": false,
                            "reflection": false,
                            "title": "Plots — FIRST Robotics Competition documentation",
                            "clicks": 8
                        },
                        {
                            "url": "https://github.com/frc3512/Robot-2020/blob/main/tools/plot_subsystems.py",
                            "internal": false,
                            "reflection": false,
                            "clicks": 8
                        }
                    ],
                    "read": true,
                    "user_title": "",
                    "bookmarked": false,
                    "actions_summary": [
                        {
                            "id": 2,
                            "count": 3
                        }
                    ],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 16846,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "user_custom_fields": {
                        "user_field_4": "WPILib controls | Choreo optimizer backend"
                    },
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/2",
                    "custom_user_title": "WPILib controls | Choreo optimizer backend",
                    "reactions": [
                        {
                            "id": "heart",
                            "type": "emoji",
                            "count": 3
                        }
                    ],
                    "current_user_reaction": null,
                    "reaction_users_count": 3,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3079234,
                    "name": "Sean W - 2421 Software Mentor",
                    "username": "seanw",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png",
                    "created_at": "2022-08-28T20:37:44.499Z",
                    "cooked": "calcmogul:\n\nBy the way, be on the lookout for the LTV controller classes in WPILib 2023. The LTV diff drive controller is a flat topology controller, and the LTV unicycle controller is a cascaded topology controller that’s a replacement for Ramsete with better tuning knobs:\n\nAfter I first saw you mention it, I tried LTVUnicycleController out on my Romi and wow, what a difference. So much easier to get right than Ramsete. Nice work!",
                    "post_number": 3,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-08-28T20:37:44.499Z",
                    "reply_count": 0,
                    "reply_to_post_number": 2,
                    "quote_count": 1,
                    "incoming_link_count": 9,
                    "reads": 216,
                    "readers_count": 215,
                    "score": 118.2,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Sean W - 2421 Software Mentor",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "read": true,
                    "user_title": "",
                    "bookmarked": false,
                    "actions_summary": [
                        {
                            "id": 2,
                            "count": 2
                        }
                    ],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 38977,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "user_custom_fields": {
                        "user_field_4": "2421 Software Mentor"
                    },
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/3",
                    "custom_user_title": "2421 Software Mentor",
                    "reactions": [
                        {
                            "id": "heart",
                            "type": "emoji",
                            "count": 2
                        }
                    ],
                    "current_user_reaction": null,
                    "reaction_users_count": 2,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3079301,
                    "name": "Vincent Yang",
                    "username": "vyang2968",
                    "avatar_template": "/letter_avatar_proxy/v4/letter/v/aeb1de/{size}.png",
                    "created_at": "2022-08-29T14:50:09.340Z",
                    "cooked": "When I was mentoring 3512, we used state-space, and we logged basically everything ( #logallthethings ). In particular, we pushed the references, state estimates, measurements, and control inputs to NetworkTables and plotted them in real time on the Glass dashboard . We also logged everything to CSV for diagnostics in Python afterward.\n\nThanks so much for your response. This really helped me understand LQR’s more. I’m still confused on the specific methods to get these values, however. For example, if we have a LinearSystem<N1, N1, N1> plant , KalmanFilter<N1, N1, N1> filter , LinearQuadraticRegulator<N1, N1, N1> controller , and LinearSystemLoop<N1, N1, N1> loop , how do I get references, state estimates, measurements, and control inputs? There’s methods like loop.getU(int row) , but I don’t know which row is what.",
                    "post_number": 4,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-08-29T14:53:48.173Z",
                    "reply_count": 1,
                    "reply_to_post_number": 2,
                    "quote_count": 0,
                    "incoming_link_count": 5,
                    "reads": 210,
                    "readers_count": 209,
                    "score": 72.0,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Vincent Yang",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "link_counts": [
                        {
                            "url": "https://docs.wpilib.org/en/stable/docs/software/dashboards/glass/plots.html",
                            "internal": false,
                            "reflection": false,
                            "title": "Plots — FIRST Robotics Competition documentation",
                            "clicks": 0
                        },
                        {
                            "url": "https://github.com/frc3512/Robot-2020/blob/main/tools/plot_subsystems.py",
                            "internal": false,
                            "reflection": false,
                            "clicks": 0
                        }
                    ],
                    "read": true,
                    "user_title": null,
                    "reply_to_user": {
                        "id": 16846,
                        "username": "calcmogul",
                        "name": "Tyler Veness",
                        "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 53733,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/4",
                    "custom_user_title": null,
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3079341,
                    "name": "Tyler Veness",
                    "username": "calcmogul",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png",
                    "created_at": "2022-08-29T16:54:58.486Z",
                    "cooked": "vyang2968:\n\nhow do I get references, state estimates, measurements, and control inputs?\n\nLinearSystemLoop has getU() for the input, getXhat() for the state estimate, and getNextR() for the next reference. The measurements would just come directly from your sensors. You can get the current reference by calling getController().getR().\n\nvyang2968:\n\nI don’t know which row is what\n\nThat depends on your model. A flywheel would have a voltage input, velocity state, and velocity measurement. Here’s an example where position is the first row of the state, velocity is the second row of the state, and voltage is the only input: allwpilib/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/statespaceelevator/Robot.java at main · wpilibsuite/allwpilib · GitHub .",
                    "post_number": 5,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-08-29T16:54:58.486Z",
                    "reply_count": 1,
                    "reply_to_post_number": 4,
                    "quote_count": 1,
                    "incoming_link_count": 2,
                    "reads": 189,
                    "readers_count": 188,
                    "score": 52.8,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Tyler Veness",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "link_counts": [
                        {
                            "url": "https://github.com/wpilibsuite/allwpilib/blob/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/statespaceelevator/Robot.java",
                            "internal": false,
                            "reflection": false,
                            "clicks": 4
                        }
                    ],
                    "read": true,
                    "user_title": "",
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 16846,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "user_custom_fields": {
                        "user_field_4": "WPILib controls | Choreo optimizer backend"
                    },
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/5",
                    "custom_user_title": "WPILib controls | Choreo optimizer backend",
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3079351,
                    "name": "Vincent Yang",
                    "username": "vyang2968",
                    "avatar_template": "/letter_avatar_proxy/v4/letter/v/aeb1de/{size}.png",
                    "created_at": "2022-08-29T17:53:19.705Z",
                    "cooked": "That clears it up a lot. Thank you so much. I’ll also try the LTV Controller when I can since it seems really cool. Again, thanks so much.",
                    "post_number": 6,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-08-29T17:53:19.705Z",
                    "reply_count": 0,
                    "reply_to_post_number": 5,
                    "quote_count": 0,
                    "incoming_link_count": 2,
                    "reads": 169,
                    "readers_count": 168,
                    "score": 58.8,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Vincent Yang",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "read": true,
                    "user_title": null,
                    "reply_to_user": {
                        "id": 16846,
                        "username": "calcmogul",
                        "name": "Tyler Veness",
                        "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [
                        {
                            "id": 2,
                            "count": 1
                        }
                    ],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 53733,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/6",
                    "custom_user_title": null,
                    "reactions": [
                        {
                            "id": "heart",
                            "type": "emoji",
                            "count": 1
                        }
                    ],
                    "current_user_reaction": null,
                    "reaction_users_count": 1,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3080551,
                    "name": "Vincent Yang",
                    "username": "vyang2968",
                    "avatar_template": "/letter_avatar_proxy/v4/letter/v/aeb1de/{size}.png",
                    "created_at": "2022-09-06T22:58:31.788Z",
                    "cooked": "Hello again, I have been able to try to implement state-space models with a flywheel, but unfortunately my attempt was not successful. The code and the sysid tool’s config are in this repository . The motor we are testing with is a Neo550 with a 10:1 gearbox on it. We were attempting to tune the Kalman filter to match the output velocity with an encoder. We first set velocity with the setVelocity(double velocity) method and compared the velocity graphs of getEstimatedVelocity() and getVelocity() on SmartDashboard. The graphs did not match and we were unable to tune the values to get them to match either. In addition, when we tried to set the velocity twice but with the same value, it did not stay the same velocity. Instead, the voltage to the motor switched between -12 and 12. The estimated velocity and encoder velocity changed in opposite directions. Mainly, I am unsure on how to tune the Kalman filter at this point. Any help would be greatly appreciated.",
                    "post_number": 7,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-06T22:58:31.788Z",
                    "reply_count": 1,
                    "reply_to_post_number": null,
                    "quote_count": 0,
                    "incoming_link_count": 3,
                    "reads": 166,
                    "readers_count": 165,
                    "score": 53.2,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Vincent Yang",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "link_counts": [
                        {
                            "url": "https://github.com/FRC4188/2022_Pyxis/blob/plybotsysidtesting/src/main/java/frc/robot/subsystems/Flywheel.java",
                            "internal": false,
                            "reflection": false,
                            "clicks": 1
                        }
                    ],
                    "read": true,
                    "user_title": null,
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 53733,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/7",
                    "custom_user_title": null,
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3080558,
                    "name": "Tyler Veness",
                    "username": "calcmogul",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png",
                    "created_at": "2022-09-07T00:12:25.274Z",
                    "cooked": "Your model could be really inaccurate, or you could be trusting your measurements nowhere near enough. Here’s what 3512 used for their state and measurement standard deviations:\n\nfrc::KalmanFilter<1, 1, 1> m_observer{\n\nm_plant,\n\n{200.0},\n\n{FlywheelController::kDpP / Constants::kControllerPeriod.value()},\n\nConstants::kControllerPeriod};\n\nThat’s an angular velocity process noise stddev of 200 rad/s and an angular velocity measurement noise stddev of 2*pi()/8/512/0.005 = 0.3 rad/s.\n\nWe chose a really high process noise because you have to include unmodeled disturbances like a ball going through the flywheel when determining the model uncertainty. Unless your measurements are really bad, the model shouldn’t be doing that much, and the state estimate should be tracking the measurements really closely.",
                    "post_number": 8,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-07T00:25:56.614Z",
                    "reply_count": 1,
                    "reply_to_post_number": 7,
                    "quote_count": 0,
                    "incoming_link_count": 2,
                    "reads": 158,
                    "readers_count": 157,
                    "score": 46.6,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Tyler Veness",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 2,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "link_counts": [
                        {
                            "url": "https://github.com/frc3512/Robot-2020/blob/main/src/main/include/subsystems/Flywheel.hpp#L178-L182",
                            "internal": false,
                            "reflection": false,
                            "clicks": 6
                        }
                    ],
                    "read": true,
                    "user_title": "",
                    "reply_to_user": {
                        "id": 53733,
                        "username": "vyang2968",
                        "name": "Vincent Yang",
                        "avatar_template": "/letter_avatar_proxy/v4/letter/v/aeb1de/{size}.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 16846,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "user_custom_fields": {
                        "user_field_4": "WPILib controls | Choreo optimizer backend"
                    },
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/8",
                    "custom_user_title": "WPILib controls | Choreo optimizer backend",
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3081277,
                    "name": "Raymond Yao",
                    "username": "Waymond",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/waymond/{size}/189617_2.png",
                    "created_at": "2022-09-10T18:04:59.287Z",
                    "cooked": "Hello, I am also working with vyang on this project. Since then, we have updated the gear ratio to a simple 1:1, as well as experimenting with new Kalman Filter and LQR values (in the repository vyang posted)\n\n(Thevalues came from the WPILib walkthrough). If all our values from the sysid are correct, then the problems were are having is still with the LQR and Kalman filter. Even trying the values from the 3512 repository, it doesn’t have much effect on the problems described earlier (the estimated and getVelocity do not match the input velocity, and the voltage switches from -12 to 12. About the measurements being off, are there specific conversion factors we are supposed to consider in our filters?",
                    "post_number": 10,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-10T18:23:56.551Z",
                    "reply_count": 1,
                    "reply_to_post_number": 8,
                    "quote_count": 0,
                    "incoming_link_count": 2,
                    "reads": 133,
                    "readers_count": 132,
                    "score": 41.6,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Raymond Yao",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 3,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "read": true,
                    "user_title": "",
                    "reply_to_user": {
                        "id": 16846,
                        "username": "calcmogul",
                        "name": "Tyler Veness",
                        "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 53830,
                    "hidden": false,
                    "trust_level": 1,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/10",
                    "custom_user_title": null,
                    "reactions": [
                        {
                            "id": "heart",
                            "type": "emoji",
                            "count": 1
                        }
                    ],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3081319,
                    "name": "Tyler Veness",
                    "username": "calcmogul",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png",
                    "created_at": "2022-09-11T00:21:37.823Z",
                    "cooked": "Waymond:\n\nit doesn’t have much effect on the problems described earlier (the estimated and getVelocity do not match the input velocity, and the voltage switches from -12 to 12.\n\nCould you post plots of your LQR reference and control input, and your Kalman filter measurements and state estimate?",
                    "post_number": 11,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-11T00:21:37.823Z",
                    "reply_count": 1,
                    "reply_to_post_number": 10,
                    "quote_count": 1,
                    "incoming_link_count": 2,
                    "reads": 125,
                    "readers_count": 124,
                    "score": 40.0,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Tyler Veness",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "read": true,
                    "user_title": "",
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 16846,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "user_custom_fields": {
                        "user_field_4": "WPILib controls | Choreo optimizer backend"
                    },
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/11",
                    "custom_user_title": "WPILib controls | Choreo optimizer backend",
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3081828,
                    "name": "Raymond Yao",
                    "username": "Waymond",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/waymond/{size}/189617_2.png",
                    "created_at": "2022-09-13T21:15:24.627Z",
                    "cooked": "calcmogul:\n\nKalman\n\n(Hopefully I did this right) I added the LQR reference, control input, state estimate, and the velocity of the flywheel. I wasn’t sure how to plot the Kalman filter measurements. Screenshot 2022-09-13 171147 1447×365 105 KB\n\nScreenshot 2022-09-13 171147 1447×365 105 KB\n\nScreenshot 2022-09-13 171147 1447×365 105 KB\n\nWhen the control input jumps from -12 to 12 and back it is when I click the instantCommand on shuffleBoard to set the velocity to 1. It seems that regardless of what I input as the velocity (even 0), it jumps to this maximum voltage.",
                    "post_number": 12,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-13T21:15:24.627Z",
                    "reply_count": 1,
                    "reply_to_post_number": 11,
                    "quote_count": 1,
                    "incoming_link_count": 3,
                    "reads": 113,
                    "readers_count": 112,
                    "score": 42.6,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Raymond Yao",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "link_counts": [
                        {
                            "url": "https://www.chiefdelphi.com/uploads/default/original/3X/f/d/fdeb461dfc3c82fb996e1e6d2bb92811eafe76b5.png",
                            "internal": true,
                            "reflection": false,
                            "clicks": 0
                        }
                    ],
                    "read": true,
                    "user_title": "",
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 53830,
                    "hidden": false,
                    "trust_level": 1,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/12",
                    "custom_user_title": null,
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3081832,
                    "name": "Tyler Veness",
                    "username": "calcmogul",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png",
                    "created_at": "2022-09-13T21:23:25.233Z",
                    "cooked": "Waymond:\n\nI wasn’t sure how to plot the Kalman filter measurements.\n\nThose are just the encoder measurements. I assume that’s what’s in the left-most plot.\n\nYour velocity state estimate and velocity measurements are doing opposite things at the same time, which implies your voltages are different signs for each (e.g., one is negated). Make sure a positive output of LQR (positive voltage) makes the velocity measurement become more positive, and make sure that positive input is being fed to the state estimator as is. You can invert the motor controllers (setInverted()) and/or the measurements to get the signs to match.",
                    "post_number": 13,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-13T21:26:55.300Z",
                    "reply_count": 1,
                    "reply_to_post_number": 12,
                    "quote_count": 1,
                    "incoming_link_count": 0,
                    "reads": 109,
                    "readers_count": 108,
                    "score": 26.8,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Tyler Veness",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "read": true,
                    "user_title": "",
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 16846,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "user_custom_fields": {
                        "user_field_4": "WPILib controls | Choreo optimizer backend"
                    },
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/13",
                    "custom_user_title": "WPILib controls | Choreo optimizer backend",
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3081867,
                    "name": "Raymond Yao",
                    "username": "Waymond",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/waymond/{size}/189617_2.png",
                    "created_at": "2022-09-13T22:49:59.565Z",
                    "cooked": "Screenshot 2022-09-13 184739 976×858 205 KB I added the line motor.setInverted(true); (motor is the SparkMAX) into the public FlyWheel() constructor, but its not having an effect. In the picture, pressing instantCommand (with an input velocity of 1) has the motor and estimate moving regardless of whether the motor was inverted.\n\nScreenshot 2022-09-13 184739 976×858 205 KB\n\nScreenshot 2022-09-13 184739 976×858 205 KB\n\nI did notice that in both situations (clearly highlighted by the first graphs in the setInverted(false) that when I first clicked InstantCommand only once, all four graphs moved together (but when it was clicked again, the inversion took place)\n\nIs there another way to invert the motors, or am I making a mistake?",
                    "post_number": 14,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-13T22:49:59.565Z",
                    "reply_count": 1,
                    "reply_to_post_number": 13,
                    "quote_count": 0,
                    "incoming_link_count": 2,
                    "reads": 105,
                    "readers_count": 104,
                    "score": 36.0,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Raymond Yao",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "link_counts": [
                        {
                            "url": "https://www.chiefdelphi.com/uploads/default/original/3X/1/0/105dd535c75b245515dd7df5e81d5fdccf830715.png",
                            "internal": true,
                            "reflection": false,
                            "clicks": 0
                        }
                    ],
                    "read": true,
                    "user_title": "",
                    "reply_to_user": {
                        "id": 16846,
                        "username": "calcmogul",
                        "name": "Tyler Veness",
                        "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 53830,
                    "hidden": false,
                    "trust_level": 1,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/14",
                    "custom_user_title": null,
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3081869,
                    "name": "Tyler Veness",
                    "username": "calcmogul",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png",
                    "created_at": "2022-09-13T23:01:08.837Z",
                    "cooked": "Assuming the motor wasn’t inverted before, setInverted(true) should be inverting it. If it’s a device setting rather than a flag in the motor controller class, maybe the setting isn’t making it across the CAN bus in a timely manner? You could work around it by negating what you pass to the motor’s set() function, although that’s not ideal.",
                    "post_number": 15,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-13T23:03:21.090Z",
                    "reply_count": 1,
                    "reply_to_post_number": 14,
                    "quote_count": 0,
                    "incoming_link_count": 0,
                    "reads": 95,
                    "readers_count": 94,
                    "score": 24.0,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Tyler Veness",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "read": true,
                    "user_title": "",
                    "reply_to_user": {
                        "id": 53830,
                        "username": "Waymond",
                        "name": "Raymond Yao",
                        "avatar_template": "/user_avatar/www.chiefdelphi.com/waymond/{size}/189617_2.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 16846,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "user_custom_fields": {
                        "user_field_4": "WPILib controls | Choreo optimizer backend"
                    },
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/15",
                    "custom_user_title": "WPILib controls | Choreo optimizer backend",
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3082517,
                    "name": "Raymond Yao",
                    "username": "Waymond",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/waymond/{size}/189617_2.png",
                    "created_at": "2022-09-16T18:10:47.613Z",
                    "cooked": "Thank you so much! We were able to fix the issue with inverted issue. By automatically updating the setVelocity() function to take place periodically rather than sending the instant command, it also solved the issue of the -12 to 12 fluctutation. Along with some tuning with the filter and LQR, we ended up getting  the input velocity to match the state estimates almost exactly. The only problem taking place now is likely an encoder ticks conversion rate. I wasn’t sure the exact conversion ratio to RPM, because telling the motor to spin at 60 RPM was visually innacurate (it was spinning much faster than 1 rotation per second). Do I need to divide the encoder.getVelocity() by 42 to keep it at 1 count per revolution, or should there be other conversions?",
                    "post_number": 16,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-16T18:10:47.613Z",
                    "reply_count": 1,
                    "reply_to_post_number": 15,
                    "quote_count": 0,
                    "incoming_link_count": 4,
                    "reads": 90,
                    "readers_count": 89,
                    "score": 43.0,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Raymond Yao",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "read": true,
                    "user_title": "",
                    "reply_to_user": {
                        "id": 16846,
                        "username": "calcmogul",
                        "name": "Tyler Veness",
                        "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 53830,
                    "hidden": false,
                    "trust_level": 1,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/16",
                    "custom_user_title": null,
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3082565,
                    "name": "Tyler Veness",
                    "username": "calcmogul",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png",
                    "created_at": "2022-09-16T20:23:23.138Z",
                    "cooked": "These docs say the built-in encoder returns RPM: https://codedocs.revrobotics.com/java/com/revrobotics/relativeencoder#getVelocity()\n\nYou said there’s a 10:1 gearbox (I assume 10:1 speed reduction?). The encoder value is from before the gearbox. If you want RPM of the flywheel, you’ll need to divide the encoder value by 10. That’ll also mean your model’s gear ratio needs to be changed. You can fix the model without rerunning SysId by doing what this does with new and old gear ratio.\n\n.getA()\n\n.times(\n\n(this.m_currentGearing * this.m_currentGearing)\n\n/ (this.m_originalGearing * this.m_originalGearing)));\n\nm_x.set(State.kHeading.value, 0, pose.getRotation().getRadians());\n\nm_x.set(State.kLeftPosition.value, 0, 0);\n\nm_x.set(State.kRightPosition.value, 0, 0);\n\n}\n\n@SuppressWarnings({\"DuplicatedCode\", \"LocalVariableName\", \"ParameterName\"}) protected Matrix<N7, N1> getDynamics(Matrix<N7, N1> x, Matrix<N2, N1> u) { // Because G can be factored out of B, we can divide by the old ratio and multiply // by the new ratio to get a new drivetrain model. var B = new Matrix<>(Nat.N4(), Nat.N2()); B.assignBlock(0, 0, m_plant.getB().times(this.m_currentGearing / this.m_originalGearing)); // Because G² can be factored out of A, we can divide by the old ratio squared and multiply // by the new ratio squared to get a new drivetrain model. var A = new Matrix<>(Nat.N4(), Nat.N4()); A.assignBlock( 0, 0, m_plant .getA() .times(\n\n@SuppressWarnings({\"DuplicatedCode\", \"LocalVariableName\", \"ParameterName\"})\n\nprotected Matrix<N7, N1> getDynamics(Matrix<N7, N1> x, Matrix<N2, N1> u) {\n\n// Because G can be factored out of B, we can divide by the old ratio and multiply\n\n// by the new ratio to get a new drivetrain model.\n\nvar B = new Matrix<>(Nat.N4(), Nat.N2());\n\nB.assignBlock(0, 0, m_plant.getB().times(this.m_currentGearing / this.m_originalGearing));\n\n// Because G² can be factored out of A, we can divide by the old ratio squared and multiply // by the new ratio squared to get a new drivetrain model. var A = new Matrix<>(Nat.N4(), Nat.N4()); A.assignBlock( 0, 0, m_plant .getA() .times(\n\n// Because G² can be factored out of A, we can divide by the old ratio squared and multiply\n\n// by the new ratio squared to get a new drivetrain model.\n\nvar A = new Matrix<>(Nat.N4(), Nat.N4());\n\nA.assignBlock(\n\n0,\n\n0,\n\nm_plant\n\n.getA()\n\n.times(",
                    "post_number": 17,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-16T20:28:22.509Z",
                    "reply_count": 1,
                    "reply_to_post_number": 16,
                    "quote_count": 0,
                    "incoming_link_count": 1,
                    "reads": 89,
                    "readers_count": 88,
                    "score": 27.8,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Tyler Veness",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "link_counts": [
                        {
                            "url": "https://github.com/wpilibsuite/allwpilib/blob/main/wpilibj/src/main/java/edu/wpi/first/wpilibj/simulation/DifferentialDrivetrainSim.java#L333-L336",
                            "internal": false,
                            "reflection": false,
                            "clicks": 1
                        },
                        {
                            "url": "https://codedocs.revrobotics.com/java/com/revrobotics/relativeencoder#getVelocity()",
                            "internal": false,
                            "reflection": false,
                            "title": "RelativeEncoder (FRC-REVLib API)",
                            "clicks": 0
                        },
                        {
                            "url": "https://github.com/wpilibsuite/allwpilib/blob/main/wpilibj/src/main/java/edu/wpi/first/wpilibj/simulation/DifferentialDrivetrainSim.java#L324",
                            "internal": false,
                            "reflection": false,
                            "clicks": 0
                        }
                    ],
                    "read": true,
                    "user_title": "",
                    "reply_to_user": {
                        "id": 53830,
                        "username": "Waymond",
                        "name": "Raymond Yao",
                        "avatar_template": "/user_avatar/www.chiefdelphi.com/waymond/{size}/189617_2.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 16846,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "user_custom_fields": {
                        "user_field_4": "WPILib controls | Choreo optimizer backend"
                    },
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/17",
                    "custom_user_title": "WPILib controls | Choreo optimizer backend",
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3082751,
                    "name": "Raymond Yao",
                    "username": "Waymond",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/waymond/{size}/189617_2.png",
                    "created_at": "2022-09-17T20:43:46.052Z",
                    "cooked": "I forgot to mention that we ended up removing the gearbox so the ratio is now 1:1. image 1864×561 59.3 KB Previously, we had the getVelocity() return encoder.getVelocity() / 42;, and that was what kept the estimated RPM and state estimate the same. However, we realized that the conversion rate was accounted for by REV, so it is now just encoder.getVelocity(); (since there is no gear ratio either).\n\nimage 1864×561 59.3 KB\n\nimage 1864×561 59.3 KB\n\nThe problem now is in the shuffleboard where by inputting an instant command of 20 RPM our velocity graphs are off. I think that there is still a conversion ratio problem, but I’m unsure, since the way we were able to get the graphs to match our input RPM was when we divided the encoder.getVelocity by some number (both 42 and 60 worked, but I don’t think that there should be any conversion ratio).",
                    "post_number": 18,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-17T20:43:46.052Z",
                    "reply_count": 1,
                    "reply_to_post_number": 17,
                    "quote_count": 0,
                    "incoming_link_count": 1,
                    "reads": 78,
                    "readers_count": 77,
                    "score": 25.6,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Raymond Yao",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "link_counts": [
                        {
                            "url": "https://www.chiefdelphi.com/uploads/default/original/3X/a/c/ac1d864c6f0dc71048cd309a90c9acb15a423780.png",
                            "internal": true,
                            "reflection": false,
                            "clicks": 0
                        }
                    ],
                    "read": true,
                    "user_title": "",
                    "reply_to_user": {
                        "id": 16846,
                        "username": "calcmogul",
                        "name": "Tyler Veness",
                        "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 53830,
                    "hidden": false,
                    "trust_level": 1,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/18",
                    "custom_user_title": null,
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3082752,
                    "name": "Tyler Veness",
                    "username": "calcmogul",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png",
                    "created_at": "2022-09-17T20:55:18.771Z",
                    "cooked": "Have you tried doing a factory reset of the spark max? Some leftover conversion settings might be messing with it.",
                    "post_number": 19,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-17T20:55:27.580Z",
                    "reply_count": 1,
                    "reply_to_post_number": 18,
                    "quote_count": 0,
                    "incoming_link_count": 1,
                    "reads": 74,
                    "readers_count": 73,
                    "score": 24.8,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Tyler Veness",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "read": true,
                    "user_title": "",
                    "reply_to_user": {
                        "id": 53830,
                        "username": "Waymond",
                        "name": "Raymond Yao",
                        "avatar_template": "/user_avatar/www.chiefdelphi.com/waymond/{size}/189617_2.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 16846,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "user_custom_fields": {
                        "user_field_4": "WPILib controls | Choreo optimizer backend"
                    },
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/19",
                    "custom_user_title": "WPILib controls | Choreo optimizer backend",
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3083258,
                    "name": "Raymond Yao",
                    "username": "Waymond",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/waymond/{size}/189617_2.png",
                    "created_at": "2022-09-20T21:25:05.345Z",
                    "cooked": "image 1893×741 57 KB\n\nimage 1893×741 57 KB\n\nimage 1893×741 57 KB\n\nAfter the factory reset I think we have something more reasonable. We have our getVelocity() not divided by a number (as it probably should have been). Our input flywheel velocity almost exactly matches the state estimate now, and by looking at the motor we have the Flywheel Velocity (RPM) graph matching the motor! Everything seems to match now, except our input velocity not matching the flywheel velocity (our input of 2 is different from the reading of around 140).",
                    "post_number": 20,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-20T21:25:05.345Z",
                    "reply_count": 1,
                    "reply_to_post_number": 19,
                    "quote_count": 0,
                    "incoming_link_count": 1,
                    "reads": 69,
                    "readers_count": 68,
                    "score": 23.8,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Raymond Yao",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "link_counts": [
                        {
                            "url": "https://www.chiefdelphi.com/uploads/default/original/3X/4/a/4a5876f5b79f45002073bb9e1e677d0d3bf84f9f.png",
                            "internal": true,
                            "reflection": false,
                            "clicks": 0
                        }
                    ],
                    "read": true,
                    "user_title": "",
                    "reply_to_user": {
                        "id": 16846,
                        "username": "calcmogul",
                        "name": "Tyler Veness",
                        "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 53830,
                    "hidden": false,
                    "trust_level": 1,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/20",
                    "custom_user_title": null,
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                },
                {
                    "id": 3083260,
                    "name": "Tyler Veness",
                    "username": "calcmogul",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png",
                    "created_at": "2022-09-20T21:43:53.214Z",
                    "cooked": "Make sure your feedforward is correct first, then add in LQR. Feedforward might be throwing it off.",
                    "post_number": 21,
                    "post_type": 1,
                    "posts_count": 25,
                    "updated_at": "2022-09-20T21:43:53.214Z",
                    "reply_count": 1,
                    "reply_to_post_number": 20,
                    "quote_count": 0,
                    "incoming_link_count": 2,
                    "reads": 69,
                    "readers_count": 68,
                    "score": 28.8,
                    "yours": false,
                    "topic_id": 414480,
                    "topic_slug": "questions-about-implementation-of-state-space-models-in-java",
                    "display_username": "Tyler Veness",
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_bg_color": null,
                    "flair_color": null,
                    "flair_group_id": null,
                    "badges_granted": [],
                    "version": 1,
                    "can_edit": false,
                    "can_delete": false,
                    "can_recover": false,
                    "can_see_hidden_post": true,
                    "can_wiki": false,
                    "read": true,
                    "user_title": "",
                    "reply_to_user": {
                        "id": 53830,
                        "username": "Waymond",
                        "name": "Raymond Yao",
                        "avatar_template": "/user_avatar/www.chiefdelphi.com/waymond/{size}/189617_2.png"
                    },
                    "bookmarked": false,
                    "actions_summary": [],
                    "moderator": false,
                    "admin": false,
                    "staff": false,
                    "user_id": 16846,
                    "hidden": false,
                    "trust_level": 2,
                    "deleted_at": null,
                    "user_deleted": false,
                    "edit_reason": null,
                    "can_view_edit_history": true,
                    "wiki": false,
                    "user_custom_fields": {
                        "user_field_4": "WPILib controls | Choreo optimizer backend"
                    },
                    "post_url": "/t/questions-about-implementation-of-state-space-models-in-java/414480/21",
                    "custom_user_title": "WPILib controls | Choreo optimizer backend",
                    "reactions": [],
                    "current_user_reaction": null,
                    "reaction_users_count": 0,
                    "current_user_used_main_reaction": false,
                    "can_accept_answer": false,
                    "can_unaccept_answer": false,
                    "accepted_answer": false,
                    "topic_accepted_answer": null
                }
            ],
            "stream": [
                3078995,
                3079003,
                3079234,
                3079301,
                3079341,
                3079351,
                3080551,
                3080558,
                3081277,
                3081319,
                3081828,
                3081832,
                3081867,
                3081869,
                3082517,
                3082565,
                3082751,
                3082752,
                3083258,
                3083260,
                3083750,
                3083753,
                3083762,
                3083795,
                3234421
            ]
        },
        "timeline_lookup": [
            [
                1,
                1142
            ],
            [
                3,
                1140
            ],
            [
                5,
                1139
            ],
            [
                7,
                1131
            ],
            [
                9,
                1127
            ],
            [
                11,
                1124
            ],
            [
                15,
                1121
            ],
            [
                17,
                1120
            ],
            [
                19,
                1117
            ],
            [
                21,
                1115
            ],
            [
                25,
                750
            ]
        ],
        "tags": [],
        "tags_descriptions": {},
        "fancy_title": "Questions about Implementation of State-Space Models in Java",
        "id": 414480,
        "title": "Questions about Implementation of State-Space Models in Java",
        "posts_count": 25,
        "created_at": "2022-08-26T23:45:45.687Z",
        "views": 2283,
        "reply_count": 22,
        "like_count": 10,
        "last_posted_at": "2023-09-22T23:14:45.298Z",
        "visible": true,
        "closed": true,
        "archived": false,
        "has_summary": false,
        "archetype": "regular",
        "slug": "questions-about-implementation-of-state-space-models-in-java",
        "category_id": 30,
        "word_count": 2690,
        "deleted_at": null,
        "user_id": 53733,
        "featured_link": null,
        "pinned_globally": false,
        "pinned_at": null,
        "pinned_until": null,
        "image_url": null,
        "slow_mode_seconds": 0,
        "draft": null,
        "draft_key": "topic_414480",
        "draft_sequence": null,
        "unpinned": null,
        "pinned": false,
        "current_post_number": 1,
        "highest_post_number": 26,
        "deleted_by": null,
        "actions_summary": [
            {
                "id": 4,
                "count": 0,
                "hidden": false,
                "can_act": false
            },
            {
                "id": 8,
                "count": 0,
                "hidden": false,
                "can_act": false
            },
            {
                "id": 10,
                "count": 0,
                "hidden": false,
                "can_act": false
            },
            {
                "id": 7,
                "count": 0,
                "hidden": false,
                "can_act": false
            }
        ],
        "chunk_size": 20,
        "bookmarked": false,
        "topic_timer": null,
        "message_bus_last_id": 0,
        "participant_count": 4,
        "show_read_indicator": false,
        "thumbnails": null,
        "slow_mode_enabled_until": null,
        "valid_reactions": [
            "heart",
            "laughing",
            "point_up",
            "+1",
            "-1",
            "100",
            "open_mouth",
            "cry",
            "question",
            "thinking",
            "call_me_hand",
            "hugs",
            "angry"
        ],
        "user_chosen_thumbnail_url": null,
        "sidecar_installed": true,
        "can_vote": false,
        "vote_count": 0,
        "user_voted": false,
        "discourse_zendesk_plugin_zendesk_id": null,
        "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
        "details": {
            "can_edit": false,
            "notification_level": 1,
            "participants": [
                {
                    "id": 16846,
                    "username": "calcmogul",
                    "name": "Tyler Veness",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/calcmogul/{size}/128045_2.png",
                    "post_count": 11,
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_color": null,
                    "flair_bg_color": null,
                    "flair_group_id": null,
                    "trust_level": 2
                },
                {
                    "id": 53830,
                    "username": "Waymond",
                    "name": "Raymond Yao",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/waymond/{size}/189617_2.png",
                    "post_count": 8,
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_color": null,
                    "flair_bg_color": null,
                    "flair_group_id": null,
                    "trust_level": 1
                },
                {
                    "id": 53733,
                    "username": "vyang2968",
                    "name": "Vincent Yang",
                    "avatar_template": "/letter_avatar_proxy/v4/letter/v/aeb1de/{size}.png",
                    "post_count": 4,
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_color": null,
                    "flair_bg_color": null,
                    "flair_group_id": null,
                    "trust_level": 2
                },
                {
                    "id": 38977,
                    "username": "seanw",
                    "name": "Sean W - 2421 Software Mentor",
                    "avatar_template": "/user_avatar/www.chiefdelphi.com/seanw/{size}/120003_2.png",
                    "post_count": 1,
                    "primary_group_name": null,
                    "flair_name": null,
                    "flair_url": null,
                    "flair_color": null,
                    "flair_bg_color": null,
                    "flair_group_id": null,
                    "trust_level": 2
                }
            ],
            "created_by": {
                "id": 53733,
                "username": "vyang2968",
                "name": "Vincent Yang",
                "avatar_template": "/letter_avatar_proxy/v4/letter/v/aeb1de/{size}.png"
            },
            "last_poster": {
                "id": -1,
                "username": "system",
                "name": "system",
                "avatar_template": "/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png"
            },
            "links": [
                {
                    "url": "https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/java/edu/wpi/first/math/controller/LTVDifferentialDriveController.java",
                    "title": null,
                    "internal": false,
                    "attachment": false,
                    "reflection": false,
                    "clicks": 21,
                    "user_id": 16846,
                    "domain": "github.com",
                    "root_domain": "github.com"
                },
                {
                    "url": "https://docs.wpilib.org/en/stable/docs/software/advanced-controls/state-space/state-space-observers.html",
                    "title": "State Observers and Kalman Filters — FIRST Robotics Competition documentation",
                    "internal": false,
                    "attachment": false,
                    "reflection": false,
                    "clicks": 21,
                    "user_id": 53733,
                    "domain": "docs.wpilib.org",
                    "root_domain": "wpilib.org"
                },
                {
                    "url": "https://docs.wpilib.org/en/stable/docs/software/advanced-controls/state-space/state-space-debugging.html#compensating-for-input-lag",
                    "title": "Debugging State-Space Models and Controllers — FIRST Robotics Competition documentation",
                    "internal": false,
                    "attachment": false,
                    "reflection": false,
                    "clicks": 15,
                    "user_id": 16846,
                    "domain": "docs.wpilib.org",
                    "root_domain": "wpilib.org"
                },
                {
                    "url": "https://github.com/wpilibsuite/allwpilib/blob/main/wpimath/src/main/java/edu/wpi/first/math/controller/LTVUnicycleController.java",
                    "title": null,
                    "internal": false,
                    "attachment": false,
                    "reflection": false,
                    "clicks": 13,
                    "user_id": 16846,
                    "domain": "github.com",
                    "root_domain": "github.com"
                },
                {
                    "url": "https://docs.wpilib.org/en/stable/docs/software/dashboards/glass/plots.html",
                    "title": "Plots — FIRST Robotics Competition documentation",
                    "internal": false,
                    "attachment": false,
                    "reflection": false,
                    "clicks": 8,
                    "user_id": 16846,
                    "domain": "docs.wpilib.org",
                    "root_domain": "wpilib.org"
                },
                {
                    "url": "https://github.com/frc3512/Robot-2020/blob/main/tools/plot_subsystems.py",
                    "title": null,
                    "internal": false,
                    "attachment": false,
                    "reflection": false,
                    "clicks": 8,
                    "user_id": 16846,
                    "domain": "github.com",
                    "root_domain": "github.com"
                },
                {
                    "url": "https://docs.wpilib.org/en/stable/docs/software/advanced-controls/state-space/state-space-intro.html",
                    "title": "Introduction to State-Space Control — FIRST Robotics Competition documentation",
                    "internal": false,
                    "attachment": false,
                    "reflection": false,
                    "clicks": 6,
                    "user_id": 53733,
                    "domain": "docs.wpilib.org",
                    "root_domain": "wpilib.org"
                },
                {
                    "url": "https://github.com/frc3512/Robot-2020/blob/main/src/main/include/subsystems/Flywheel.hpp#L178-L182",
                    "title": null,
                    "internal": false,
                    "attachment": false,
                    "reflection": false,
                    "clicks": 6,
                    "user_id": 16846,
                    "domain": "github.com",
                    "root_domain": "github.com"
                },
                {
                    "url": "https://github.com/wpilibsuite/allwpilib/blob/main/wpilibjExamples/src/main/java/edu/wpi/first/wpilibj/examples/statespaceelevator/Robot.java",
                    "title": null,
                    "internal": false,
                    "attachment": false,
                    "reflection": false,
                    "clicks": 4,
                    "user_id": 16846,
                    "domain": "github.com",
                    "root_domain": "github.com"
                },
                {
                    "url": "https://github.com/wpilibsuite/allwpilib/blob/main/wpilibj/src/main/java/edu/wpi/first/wpilibj/simulation/DifferentialDrivetrainSim.java#L333-L336",
                    "title": null,
                    "internal": false,
                    "attachment": false,
                    "reflection": false,
                    "clicks": 1,
                    "user_id": 16846,
                    "domain": "github.com",
                    "root_domain": "github.com"
                },
                {
                    "url": "https://github.com/FRC4188/2022_Pyxis/blob/plybotsysidtesting/src/main/java/frc/robot/subsystems/Flywheel.java",
                    "title": null,
                    "internal": false,
                    "attachment": false,
                    "reflection": false,
                    "clicks": 1,
                    "user_id": 53733,
                    "domain": "github.com",
                    "root_domain": "github.com"
                }
            ]
        },
        "bookmarks": []
    }
}