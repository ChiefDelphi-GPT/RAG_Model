{"data":"{\"post_stream\":{\"posts\":[{\"id\":2983812,\"name\":\"Brad\",\"username\":\"Bmongar\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bmongar/{size}/228654_2.png\",\"created_at\":\"2021-12-29T12:05:02.766Z\",\"cooked\":\"\\u003cp\\u003eNext hurdle.  I have Characterized my SDS MK4 chassis byt locking the wheels and using the sysid tool.\\u003cbr\\u003e\\n\\u003cdiv class=\\\"lightbox-wrapper\\\"\\u003e\\u003ca class=\\\"lightbox\\\" href=\\\"https://www.chiefdelphi.com/uploads/default/original/3X/6/3/63a26731a1879d73ff2e74c94ce5fc0b419ab5b4.png\\\" data-download-href=\\\"https://www.chiefdelphi.com/uploads/default/63a26731a1879d73ff2e74c94ce5fc0b419ab5b4\\\" title=\\\"image\\\"\\u003e\\u003cimg src=\\\"https://www.chiefdelphi.com/uploads/default/optimized/3X/6/3/63a26731a1879d73ff2e74c94ce5fc0b419ab5b4_2_690x409.png\\\" alt=\\\"image\\\" data-base62-sha1=\\\"edpdqF7H9xivR7uvjkI66k6K82E\\\" width=\\\"690\\\" height=\\\"409\\\" srcset=\\\"https://www.chiefdelphi.com/uploads/default/optimized/3X/6/3/63a26731a1879d73ff2e74c94ce5fc0b419ab5b4_2_690x409.png, https://www.chiefdelphi.com/uploads/default/optimized/3X/6/3/63a26731a1879d73ff2e74c94ce5fc0b419ab5b4_2_1035x613.png 1.5x, https://www.chiefdelphi.com/uploads/default/optimized/3X/6/3/63a26731a1879d73ff2e74c94ce5fc0b419ab5b4_2_1380x818.png 2x\\\" data-dominant-color=\\\"353B42\\\"\\u003e\\u003cdiv class=\\\"meta\\\"\\u003e\\u003csvg class=\\\"fa d-icon d-icon-far-image svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#far-image\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003cspan class=\\\"filename\\\"\\u003eimage\\u003c/span\\u003e\\u003cspan class=\\\"informations\\\"\\u003e1577×936 249 KB\\u003c/span\\u003e\\u003csvg class=\\\"fa d-icon d-icon-discourse-expand svg-icon\\\" aria-hidden=\\\"true\\\"\\u003e\\u003cuse href=\\\"#discourse-expand\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003c/div\\u003e\\u003c/a\\u003e\\u003c/div\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eI have code based on the SDS Swerve template.  I have added some code to make the drivetrain consume SwerveModuleState]\\u003cspan class=\\\"chcklst-box fa fa-square-o fa-fw\\\"\\u003e\\u003c/span\\u003e so it will be useable by the SwerveControllerCommand which produces such an array.\\u003c/p\\u003e\\n\\u003cp\\u003eSo if I set my gains as indicated in the tool\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003epublic static final class TranslationGains {\\n            public static final double kP = 2.2956;\\n            public static final double kI = 0;\\n            public static final double kD = 0;\\n            public static final double kA = 0.12872;\\n            public static final double kV = 2.3014;\\n            public static final double kS = 0.55493;\\n        }\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eCreate a SimpleMotorFeedForward\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003e    private SimpleMotorFeedforward m_feedForward = new SimpleMotorFeedforward(TranslationGains.kS, TranslationGains.kV, TranslationGains.kA);\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eTo apply the feed forward to my code\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003e    private void updateDriveStates(SwerveModuleState[] desiredStates) {\\n        if (desiredStates != null){\\n            SwerveModuleState frontLeftState = desiredStates[FrontLeftSwerveConstants.STATES_INDEX];\\n            SwerveModuleState frontRightState = desiredStates[FrontRightSwerveConstants.STATES_INDEX];\\n            SwerveModuleState backLeftState = desiredStates[BackLeftSwerveConstants.STATES_INDEX];\\n            SwerveModuleState backRightState = desiredStates[BackRightSwerveConstants.STATES_INDEX];\\n            SwerveDriveKinematics.normalizeWheelSpeeds(desiredStates, DrivetrainGeometry.MAX_VELOCITY_METERS_PER_SECOND);\\n            m_frontLeftModule.set(velocityToDriveVolts(frontLeftState.speedMetersPerSecond),\\n                    frontLeftState.angle.getRadians());\\n            m_frontRightModule.set(velocityToDriveVolts(frontRightState.speedMetersPerSecond),\\n                    frontRightState.angle.getRadians());\\n            m_backLeftModule.set(velocityToDriveVolts(backLeftState.speedMetersPerSecond),\\n                    backLeftState.angle.getRadians());\\n            m_backRightModule.set(velocityToDriveVolts(backRightState.speedMetersPerSecond),\\n                    backRightState.angle.getRadians());\\n        }\\n    }\\n\\n    private double velocityToDriveVolts(double speedMetersPerSecond){\\n        return speedMetersPerSecond / DrivetrainGeometry.MAX_VELOCITY_METERS_PER_SECOND * MAX_VOLTAGE;\\n    }\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eDo I just apply the m_feedForward.calculate to the speedMetersPerSecond in the velocityToDriveVolts or do I pass in the calculated volts first?   Or am I completely off track?\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2021-12-29T12:05:02.766Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":833,\"reads\":516,\"readers_count\":515,\"score\":4303.2,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Brad\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/uploads/default/original/3X/6/3/63a26731a1879d73ff2e74c94ce5fc0b419ab5b4.png\",\"internal\":true,\"reflection\":false,\"clicks\":0},{\"url\":\"https://www.chiefdelphi.com/t/sysid-gains-on-sds-mk4i-modules/400373/7\",\"internal\":true,\"reflection\":true,\"title\":\"SysId gains on SDS MK4i Modules\",\"clicks\":13},{\"url\":\"https://www.chiefdelphi.com/t/need-help-tuning-wpilib-based-swerve-autonomous/405517/3\",\"internal\":true,\"reflection\":true,\"title\":\"Need Help Tuning WPILib Based Swerve Autonomous\",\"clicks\":3},{\"url\":\"https://www.chiefdelphi.com/t/pathplanners-rotation-is-always-off/443272/6\",\"internal\":true,\"reflection\":true,\"title\":\"Pathplanner's rotation is always off\",\"clicks\":2}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38557,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/1\",\"custom_user_title\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":2983816,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2021-12-29T12:27:35.503Z\",\"cooked\":\"\\u003cp\\u003eThe feedforward will output in voltage; you add it to the result of your feedback controller and send the sum to the motors.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2021-12-29T12:27:35.503Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":446,\"readers_count\":445,\"score\":109.2,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/2\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2983818,\"name\":\"Brad\",\"username\":\"Bmongar\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bmongar/{size}/228654_2.png\",\"created_at\":\"2021-12-29T12:33:05.760Z\",\"cooked\":\"\\u003cp\\u003eUsing the SwerveControllerCommand the output is the SwerveModuleStates array.\\u003cbr\\u003e\\nSo I pass in the voltage I calculated as a parameter to ff or the speed.  I wouldn’t think I would add it in again since the calculate() seems to already add it, I would almost always end up over 12\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003e  public double calculate(double velocity, double acceleration) {\\n    return ks * Math.signum(velocity) + kv * velocity + ka * acceleration;\\n  }\\u003c/code\\u003e\\u003c/pre\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2021-12-29T12:33:05.760Z\",\"reply_count\":1,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":5,\"reads\":437,\"readers_count\":436,\"score\":147.4,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Brad\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38557,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/3\",\"custom_user_title\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2983819,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2021-12-29T12:33:33.096Z\",\"cooked\":\"\\u003cp\\u003eNo, you do not pass a voltage to the feedforward.  Look at the argument names.\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2021-12-29T12:33:33.096Z\",\"reply_count\":1,\"reply_to_post_number\":3,\"quote_count\":0,\"incoming_link_count\":8,\"reads\":412,\"readers_count\":411,\"score\":142.4,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":38557,\"username\":\"Bmongar\",\"name\":\"Brad\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bmongar/{size}/228654_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/4\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2983821,\"name\":\"Brad\",\"username\":\"Bmongar\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bmongar/{size}/228654_2.png\",\"created_at\":\"2021-12-29T12:42:36.484Z\",\"cooked\":\"\\u003cp\\u003eSo it looks like I just replace my voltage calculation with SimpleMotorFeedforwards calculate(speedMetersPerSecond)  and clamp it at 12,   Thanks\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2021-12-29T12:42:36.484Z\",\"reply_count\":1,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":6,\"reads\":397,\"readers_count\":396,\"score\":144.4,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Brad\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38557,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/5\",\"custom_user_title\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2983822,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2021-12-29T12:43:29.616Z\",\"cooked\":\"\\u003cp\\u003enote that you might also need to implement a deadband, because if your \\u003ccode\\u003ekS\\u003c/code\\u003e is slightly too large the system response will have a discontinuity at v=0 that will cause oscillation.\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2021-12-29T12:43:29.616Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":7,\"reads\":392,\"readers_count\":391,\"score\":118.4,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":38557,\"username\":\"Bmongar\",\"name\":\"Brad\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bmongar/{size}/228654_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/6\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2983832,\"name\":\"vargoose84\",\"username\":\"vargoose84\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/vargoose84/{size}/165453_2.png\",\"created_at\":\"2021-12-29T13:37:46.225Z\",\"cooked\":\"\\u003cp\\u003eI think you want to set voltage directly? This is the way we give those values… Using the set voltage command:\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003e ​public​ ​static​ ​SimpleMotorFeedforward​ driveMotorFeedforward ​=​ ​new​ ​SimpleMotorFeedforward​(​Constants​.​kS, ​Constants​.​kV);\\n    ​                mDriveMotor​.​setVoltage(driveMotorFeedforward​.​calculate(kState​.​speedMetersPerSecond));\\n\\u003c/code\\u003e\\u003c/pre\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2021-12-29T13:39:29.211Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":387,\"readers_count\":386,\"score\":107.4,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"vargoose84\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":30247,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"3630 Assistant Coach - Stampede Robotics\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/7\",\"custom_user_title\":\"3630 Assistant Coach - Stampede Robotics\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2983833,\"name\":\"Brad\",\"username\":\"Bmongar\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bmongar/{size}/228654_2.png\",\"created_at\":\"2021-12-29T13:39:10.199Z\",\"cooked\":\"\\u003cp\\u003eUsing the SDS code the motors are abstracted away from the developer.  The drive state set is an indirect voltage set of the motor but the best you have without altering their library to expose the motors.\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2021-12-29T13:40:34.801Z\",\"reply_count\":0,\"reply_to_post_number\":7,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":372,\"readers_count\":371,\"score\":124.4,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Brad\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":30247,\"username\":\"vargoose84\",\"name\":\"vargoose84\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/vargoose84/{size}/165453_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38557,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/8\",\"custom_user_title\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2984908,\"name\":\"Bryn Dole - programming mentor FRC 2930\",\"username\":\"randomstring\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/randomstring/{size}/170695_2.png\",\"created_at\":\"2022-01-03T21:49:39.519Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Bmongar\\\" data-post=\\\"1\\\" data-topic=\\\"398455\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/bmongar/48/133217_2.png\\\" class=\\\"avatar\\\"\\u003e Bmongar:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eSo if I set my gains as indicated in the tool\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003epublic static final class TranslationGains {\\n            public static final double kP = 2.2956;\\n            public static final double kI = 0;\\n            public static final double kD = 0;\\n            public static final double kA = 0.12872;\\n            public static final double kV = 2.3014;\\n            public static final double kS = 0.55493;\\n        }\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eJust finished profiling our \\u003cspan class=\\\"abbreviation\\\"\\u003eSDS\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Swerve Drive Specialties\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e Mk3 test chassis robot with the Fast gearbox ( 6.86:1 gear ratio) using Falcon 500s and got very similar numbers to your \\u003cspan class=\\\"abbreviation\\\"\\u003eSDS\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Swerve Drive Specialties\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e Mk4 numbers. kS within 4%, kV within 2%, and kP and kA withing 0.5%.\\u003c/p\\u003e\\n\\u003cp\\u003eI think you’re running 6.75:1 (L2) versions of the Mk4?  So not too different from the 6.86:1 ratio on our Mk3s. Curious if this is a full competition robot or a bare bones test bot like ours is.\\u003c/p\\u003e\\n\\u003cp\\u003eThis is a relief.  It seems like I managed to characterize our swerve bot correctly. Now to get autonomous working…\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-03T21:49:39.519Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":1,\"incoming_link_count\":13,\"reads\":363,\"readers_count\":362,\"score\":147.6,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Bryn Dole - programming mentor FRC 2930\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":33397,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/9\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2984911,\"name\":\"Brad\",\"username\":\"Bmongar\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bmongar/{size}/228654_2.png\",\"created_at\":\"2022-01-03T22:02:35.466Z\",\"cooked\":\"\\u003cp\\u003eYes I am running an l2 6.75:1. It is bare bones, 8 falcons, battery, radio, rio, pdb. Made our of 1x2 30 inches square.\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-03T22:02:35.466Z\",\"reply_count\":0,\"reply_to_post_number\":9,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":321,\"readers_count\":320,\"score\":109.2,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Brad\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":33397,\"username\":\"randomstring\",\"name\":\"Bryn Dole - programming mentor FRC 2930\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/randomstring/{size}/170695_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":38557,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/10\",\"custom_user_title\":\"5126 Codenator / Electrical, CSA, FTAA, Inspector \",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2984980,\"name\":\"\",\"username\":\"merelephant\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/merelephant/{size}/139917_2.png\",\"created_at\":\"2022-01-04T06:19:14.133Z\",\"cooked\":\"\\u003cp\\u003eCan you explain why this happens? I noticed something similar with our test swerve drive — oscillation and/or a slow creep in a specific direction without touching the controller. It was eliminated when I increased the controller non-scaled deadband from 0.05 to 0.08, but I’d like to know more in case it happens again. If it’s a case of small voltage inputs causing issues, a scaled deadband like the one in Wpilib MathUtil wouldn’t work, right?\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-04T06:19:39.198Z\",\"reply_count\":2,\"reply_to_post_number\":6,\"quote_count\":0,\"incoming_link_count\":10,\"reads\":313,\"readers_count\":312,\"score\":122.6,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":36775,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/11\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2984987,\"name\":\"Nolan\",\"username\":\"Quake\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/quake/{size}/236072_2.png\",\"created_at\":\"2022-01-04T08:24:40.190Z\",\"cooked\":\"\\u003cp\\u003eIt sounds like a controller issue, since changing your deadband fixed it. I’ve used xbox one controllers that don’t rest at 0 (actually a pretty sizeable gap) and 3rd party 360 controllers that start to randomly drift untouched after some use. It’s pretty spooky when the robot starts slowly spinning in circles while no one is touching the controller. I’m pretty sure the drift there was because the controllers were transported in the pocket of a case that pressed and damaged the sticks.\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-04T08:24:40.190Z\",\"reply_count\":1,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":307,\"readers_count\":306,\"score\":106.4,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Nolan\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":36775,\"username\":\"merelephant\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/merelephant/{size}/139917_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":37917,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"4512AM\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/12\",\"custom_user_title\":\"4512AM\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2985012,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-01-04T15:00:27.331Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"merelephant\\\" data-post=\\\"11\\\" data-topic=\\\"398455\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/merelephant/48/139917_2.png\\\" class=\\\"avatar\\\"\\u003e merelephant:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003ebut I’d like to know more in case it happens again.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eIf \\u003ccode\\u003ekS\\u003c/code\\u003e is large enough to move the robot on its own (if it is ideally-tuned it will be “just” large enough to cancel friction without moving the robot, but the world is not perfect) then you will see creep on small inputs.  A deadband causes the output to rigorously be zero (rather than \\u003ccode\\u003ekS\\u003c/code\\u003e or \\u003ccode\\u003e-kS\\u003c/code\\u003e), eliminating creep.\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-04T15:00:27.331Z\",\"reply_count\":1,\"reply_to_post_number\":11,\"quote_count\":1,\"incoming_link_count\":2,\"reads\":293,\"readers_count\":292,\"score\":103.6,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/13\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2985220,\"name\":\"\",\"username\":\"merelephant\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/merelephant/{size}/139917_2.png\",\"created_at\":\"2022-01-05T04:34:52.064Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Quake\\\" data-post=\\\"12\\\" data-topic=\\\"398455\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/quake/48/236072_2.png\\\" class=\\\"avatar\\\"\\u003e Quake:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eI’m pretty sure the drift there was because the controllers were transported in the pocket of a case that pressed and damaged the sticks.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eUh… that seems familiar, I’m going to want to pay a bit more attention to controller care from now on haha.\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Oblarg\\\" data-post=\\\"13\\\" data-topic=\\\"398455\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/oblarg/48/161674_2.png\\\" class=\\\"avatar\\\"\\u003e Oblarg:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eA deadband causes the output to rigorously be zero (rather than \\u003ccode\\u003ekS\\u003c/code\\u003e or \\u003ccode\\u003e-kS\\u003c/code\\u003e ), eliminating creep.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThanks for the explanation! Would it be right, then, to say that with a scaled deadband like the WPILib one (which outputs values from 0 to 1), the zero input doesn’t matter since you wouldn’t be inputting that unless you want the robot to move?\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-05T04:34:52.064Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":2,\"incoming_link_count\":3,\"reads\":278,\"readers_count\":277,\"score\":75.6,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":36775,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/14\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2985340,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-01-05T17:19:23.932Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"merelephant\\\" data-post=\\\"14\\\" data-topic=\\\"398455\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/merelephant/48/139917_2.png\\\" class=\\\"avatar\\\"\\u003e merelephant:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eWould it be right, then, to say that with a scaled deadband like the WPILib one (which outputs values from 0 to 1)\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI’m unsure what you mean by this.  A deadband doesn’t do any scaling; all it does is clamp values below some nominal magnitude to zero.\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-05T17:19:23.932Z\",\"reply_count\":1,\"reply_to_post_number\":14,\"quote_count\":1,\"incoming_link_count\":3,\"reads\":247,\"readers_count\":246,\"score\":69.4,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/15\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2985370,\"name\":\"\",\"username\":\"merelephant\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/merelephant/{size}/139917_2.png\",\"created_at\":\"2022-01-05T19:46:41.587Z\",\"cooked\":\"\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003e/**\\n * Returns 0.0 if the given value is within the specified range around zero. The remaining range\\n * between the deadband and 1.0 is scaled from 0.0 to 1.0.\\n *\\n * @param value Value to clip.\\n * @param deadband Range around zero.\\n * @return The value after the deadband is applied.\\n */\\npublic static double applyDeadband(double value, double deadband) {\\n  if (Math.abs(value) \\u0026gt; deadband) {\\n    if (value \\u0026gt; 0.0) {\\n      return (value - deadband) / (1.0 - deadband);\\n    } else {\\n      return (value + deadband) / (1.0 - deadband);\\n    }\\n  } else {\\n    return 0.0;\\n  }\\n}\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eThe MathUtil deadband function looks like it scales values above the deadband threshold from the range of (deadband, 1) to (0, 1).\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-05T19:46:41.587Z\",\"reply_count\":2,\"reply_to_post_number\":15,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":236,\"readers_count\":235,\"score\":72.2,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":36775,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/16\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2985371,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-01-05T19:47:55.217Z\",\"cooked\":\"\\u003cp\\u003eThat function probably ought to be renamed, split into two functions, or overloaded to take a scale param (the latter is probably the safest option…).  I would not advise using that if you do not actually want to scale your outputs; it looks like it is designed specifically for joysticks.\\u003c/p\\u003e\\n\\u003cp\\u003eWhat you want here is a deadband on the \\u003cem\\u003evelocity setpoint\\u003c/em\\u003e for the controller.\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-05T19:50:05.376Z\",\"reply_count\":1,\"reply_to_post_number\":16,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":224,\"readers_count\":223,\"score\":54.8,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":36775,\"username\":\"merelephant\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/merelephant/{size}/139917_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/17\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2985419,\"name\":\"\",\"username\":\"merelephant\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/merelephant/{size}/139917_2.png\",\"created_at\":\"2022-01-05T23:27:31.329Z\",\"cooked\":\"\\u003cp\\u003eOh ok … in effect though, a deadband on the Xbox stick inputs effectively indirectly does that, right? (I didn’t use a scaled deadband on it). It prevents smaller inputs from being given to the motors.\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-05T23:27:31.329Z\",\"reply_count\":1,\"reply_to_post_number\":17,\"quote_count\":0,\"incoming_link_count\":7,\"reads\":221,\"readers_count\":220,\"score\":99.2,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":36775,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/18\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2985435,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-01-06T00:29:26.366Z\",\"cooked\":\"\\u003cp\\u003eYes.\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-06T00:29:26.366Z\",\"reply_count\":0,\"reply_to_post_number\":18,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":220,\"readers_count\":219,\"score\":59.0,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":36775,\"username\":\"merelephant\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/merelephant/{size}/139917_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/19\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":2985589,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2022-01-06T16:50:22.698Z\",\"cooked\":\"\\u003cp\\u003eThere’s now a \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/pull/3865\\\"\\u003epull request\\u003c/a\\u003e open that will allow \\u003ccode\\u003eapplyDeadband\\u003c/code\\u003e to work with an arbitrary scale parameter.  The rescaling semantics remain the same, but you can set the rescaling range.\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2022-01-06T16:50:22.698Z\",\"reply_count\":0,\"reply_to_post_number\":16,\"quote_count\":0,\"incoming_link_count\":7,\"reads\":219,\"readers_count\":218,\"score\":93.8,\"yours\":false,\"topic_id\":398455,\"topic_slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/pull/3865\",\"internal\":false,\"reflection\":false,\"clicks\":10}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":36775,\"username\":\"merelephant\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/merelephant/{size}/139917_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/applying-sysid-feedforward-to-an-sds-swerve-mk4/398455/20\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[2983812,2983816,2983818,2983819,2983821,2983822,2983832,2983833,2984908,2984911,2984980,2984987,2985012,2985220,2985340,2985370,2985371,2985419,2985435,2985589,3016848,3065986,3211037]},\"timeline_lookup\":[[1,1383],[9,1377],[14,1376],[15,1375],[20,1374],[21,1317],[22,1233],[23,868]],\"tags\":[\"swerve\",\"pid\",\"sysid\",\"sds\",\"feedforward\"],\"tags_descriptions\":{},\"fancy_title\":\"Applying sysid feedforward to an SDS Swerve MK4\",\"id\":398455,\"title\":\"Applying sysid feedforward to an SDS Swerve MK4\",\"posts_count\":23,\"created_at\":\"2021-12-29T12:05:02.534Z\",\"views\":3842,\"reply_count\":18,\"like_count\":18,\"last_posted_at\":\"2023-05-27T19:39:23.925Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"applying-sysid-feedforward-to-an-sds-swerve-mk4\",\"category_id\":75,\"word_count\":1514,\"deleted_at\":null,\"user_id\":38557,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":\"https://www.chiefdelphi.com/uploads/default/optimized/3X/6/3/63a26731a1879d73ff2e74c94ce5fc0b419ab5b4_2_1024x607.png\",\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_398455\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":23,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":7,\"show_read_indicator\":false,\"thumbnails\":[{\"max_width\":null,\"max_height\":null,\"width\":1577,\"height\":936,\"url\":\"https://www.chiefdelphi.com/uploads/default/original/3X/6/3/63a26731a1879d73ff2e74c94ce5fc0b419ab5b4.png\"},{\"max_width\":1024,\"max_height\":1024,\"width\":1024,\"height\":607,\"url\":\"https://www.chiefdelphi.com/uploads/default/optimized/3X/6/3/63a26731a1879d73ff2e74c94ce5fc0b419ab5b4_2_1024x607.png\"}],\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"post_count\":8,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":38557,\"username\":\"Bmongar\",\"name\":\"Brad\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bmongar/{size}/228654_2.png\",\"post_count\":5,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":36775,\"username\":\"merelephant\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/merelephant/{size}/139917_2.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":33397,\"username\":\"randomstring\",\"name\":\"Bryn Dole - programming mentor FRC 2930\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/randomstring/{size}/170695_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":37917,\"username\":\"Quake\",\"name\":\"Nolan\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/quake/{size}/236072_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":30247,\"username\":\"vargoose84\",\"name\":\"vargoose84\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/vargoose84/{size}/165453_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":50897,\"username\":\"Gameknight\",\"name\":\"Jacob Schroeder\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/g/ecb155/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":38557,\"username\":\"Bmongar\",\"name\":\"Brad\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/bmongar/{size}/228654_2.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://github.com/Gameknight77YT/Swerve-Test\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":26,\"user_id\":50897,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://www.chiefdelphi.com/t/sysid-gains-on-sds-mk4i-modules/400373/7\",\"title\":\"SysId gains on SDS MK4i Modules\",\"internal\":true,\"attachment\":false,\"reflection\":true,\"clicks\":13,\"user_id\":33397,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/pull/3865\",\"title\":null,\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":10,\"user_id\":12381,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://www.chiefdelphi.com/t/need-help-tuning-wpilib-based-swerve-autonomous/405517/3\",\"title\":\"Need Help Tuning WPILib Based Swerve Autonomous\",\"internal\":true,\"attachment\":false,\"reflection\":true,\"clicks\":3,\"user_id\":33397,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://www.chiefdelphi.com/t/pathplanners-rotation-is-always-off/443272/6\",\"title\":\"Pathplanner's rotation is always off\",\"internal\":true,\"attachment\":false,\"reflection\":true,\"clicks\":2,\"user_id\":51954,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"}]},\"bookmarks\":[]}"}
