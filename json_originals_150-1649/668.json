{"data":"{\"post_stream\":{\"posts\":[{\"id\":3601464,\"name\":\"joel truher\",\"username\":\"truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"created_at\":\"2025-04-23T16:26:06.130Z\",\"cooked\":\"\\u003cp\\u003eLately I’ve been inspired to investigate the kind of trigger-driven state-machine control flow that \\u003ca class=\\\"mention\\\" href=\\\"/u/oblarg\\\"\\u003e@Oblarg\\u003c/a\\u003e has recommended, so that I can teach it to a few students this summer, and I’ve bumped into something that makes me wonder if I’m doing it right.\\u003c/p\\u003e\\n\\u003cp\\u003eThe essential issue seems to be that each trigger binding consists of both “evaluating the condition” \\u003cem\\u003eand\\u003c/em\\u003e “executing the action,” so that trigger behavior is insertion-order-dependent, in the case (common in the state machine) where many trigger actions modify their own conditions (e.g. states).\\u003c/p\\u003e\\n\\u003cp\\u003eThis wouldn’t happen if trigger evaluation used two stages: first evaluate all the conditions, and then execute all the necessary actions.\\u003c/p\\u003e\\n\\u003cp\\u003eSo I \\u003cem\\u003ethink\\u003c/em\\u003e the way I should approach this issue is to make the students aware of it, and guide them with examples that avoid it.  But maybe I’m just being dumb?\\u003c/p\\u003e\\n\\u003cp\\u003eHere’s an example of the bad thing, which chains the “exit foo” event in a way that it is never seen (i.e. the “B” never appears): [edited to show the parts \\u003ca class=\\\"mention\\\" href=\\\"/u/oblarg\\\"\\u003e@oblarg\\u003c/a\\u003e mentioned]\\u003c/p\\u003e\\n\\u003cpre data-code-wrap=\\\"java\\\"\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003eclass Bar {\\n    boolean foo; \\n    void bar() {\\n        new Trigger(() -\\u0026gt; foo).and(m_controller::getXButton)\\n                .onTrue(parallel(runOnce(() -\\u0026gt; {\\n                    foo = false;\\n                }), print(\\\"A\\\")))\\n                // onFalse never fires, because its 'previous' condition was false, and the\\n                // onTrue handler above resets it to false before onFalse handler sees the true\\n                // state.\\n                .onFalse(print(\\\"B\\\"));\\n        new Trigger(() -\\u0026gt; !foo).and(m_controller::getYButton)\\n                // here onFalse fires, because it sees the true transition\\n                .onFalse(print(\\\"D\\\"))\\n                .onTrue(parallel(runOnce(() -\\u0026gt; {\\n                    foo = true;\\n                }), print(\\\"C\\\")));\\n    }\\n}\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eHere’s an example that seems better, with “on enter” and “on exit” events separately bound.  Is this the right way to do it? [edited to show the parts \\u003ca class=\\\"mention\\\" href=\\\"/u/oblarg\\\"\\u003e@oblarg\\u003c/a\\u003e mentioned]\\u003c/p\\u003e\\n\\u003cpre data-code-wrap=\\\"java\\\"\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003eclass Bar {\\n    boolean foo; \\n    void bar() {\\n        // transition foo -\\u0026gt; not-foo\\n        new Trigger(() -\\u0026gt; foo).and(m_controller::getXButton).onTrue(runOnce(() -\\u0026gt; {\\n            foo = false;\\n        }));\\n        // enter foo\\n        new Trigger(() -\\u0026gt; foo).onTrue(print(\\\"A\\\"));\\n        // exit foo\\n        new Trigger(() -\\u0026gt; foo).onFalse(print(\\\"B\\\"));\\n        // transition not-foo -\\u0026gt; foo\\n        new Trigger(() -\\u0026gt; !foo).and(m_controller::getYButton).onTrue(runOnce(() -\\u0026gt; {\\n            foo = true;\\n        }));\\n        // enter not-foo\\n        new Trigger(() -\\u0026gt; !foo).onTrue(print(\\\"C\\\"));\\n        // exit not-foo\\n        new Trigger(() -\\u0026gt; !foo).onFalse(print(\\\"D\\\"));\\n    }\\n}\\n\\u003c/code\\u003e\\u003c/pre\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":10,\"updated_at\":\"2025-04-23T16:45:26.910Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":11,\"reads\":304,\"readers_count\":303,\"score\":175.8,\"yours\":false,\"topic_id\":500280,\"topic_slug\":\"trigger-condition-evaluation\",\"display_username\":\"joel truher\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":3,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53190,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/trigger-condition-evaluation/500280/1\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3601466,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2025-04-23T16:30:03.033Z\",\"cooked\":\"\\u003cp\\u003eYou can’t capture and reassign a primitive method local like you’ve done here in Java.  All captures are effectively final.\\u003c/p\\u003e\\n\\u003cp\\u003eYou need a mutable object to hold your boolean.  A length-1 array will work.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":10,\"updated_at\":\"2025-04-23T16:31:15.369Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":234,\"readers_count\":233,\"score\":51.8,\"yours\":false,\"topic_id\":500280,\"topic_slug\":\"trigger-condition-evaluation\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/trigger-condition-evaluation/500280/2\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3601474,\"name\":\"joel truher\",\"username\":\"truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"created_at\":\"2025-04-23T16:33:41.678Z\",\"cooked\":\"\\u003cp\\u003esorry for the confusion, i just elided the detail in the cut-and-paste; in truth the code is in a method, and foo is an instance variable, so it’s ok. [i edited the original post]\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":10,\"updated_at\":\"2025-04-23T16:51:54.334Z\",\"reply_count\":0,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":230,\"readers_count\":229,\"score\":61.0,\"yours\":false,\"topic_id\":500280,\"topic_slug\":\"trigger-condition-evaluation\",\"display_username\":\"joel truher\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53190,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/trigger-condition-evaluation/500280/3\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3601633,\"name\":\"joel truher\",\"username\":\"truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"created_at\":\"2025-04-23T18:30:53.622Z\",\"cooked\":\"\\u003cp\\u003e\\u003ca class=\\\"mention\\\" href=\\\"/u/oliver_stivers\\\"\\u003e@Oliver_stivers\\u003c/a\\u003e do you have any insight here?  the code you linked to in the other thread has a long comment in it about the motivation for “on false” triggering, which made me wonder if you’re seeing the same thing?\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":10,\"updated_at\":\"2025-04-23T18:30:53.622Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":194,\"readers_count\":193,\"score\":43.8,\"yours\":false,\"topic_id\":500280,\"topic_slug\":\"trigger-condition-evaluation\",\"display_username\":\"joel truher\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53190,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/trigger-condition-evaluation/500280/4\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3601675,\"name\":\"Paul Rensing\",\"username\":\"prensing\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/prensing/{size}/65820_2.png\",\"created_at\":\"2025-04-23T19:07:15.382Z\",\"cooked\":\"\\u003cp\\u003eI don’t think your “improved” code does the same thing as the original (even without the problem).\\u003c/p\\u003e\\n\\u003cp\\u003eAssuming it worked like you want, the original would print “A” when (foo → true AND X is pressed), and “B” when NOT(\\u0026lt;previous condition\\u0026gt;).\\u003c/p\\u003e\\n\\u003cp\\u003eThe 2nd block will print “A” any time (foo → true); button X is not relevant.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":10,\"updated_at\":\"2025-04-23T19:07:42.126Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":165,\"readers_count\":164,\"score\":38.0,\"yours\":false,\"topic_id\":500280,\"topic_slug\":\"trigger-condition-evaluation\",\"display_username\":\"Paul Rensing\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":25118,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"FRC 2877 LigerBots Mentor\"},\"post_url\":\"/t/trigger-condition-evaluation/500280/5\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3601802,\"name\":\"joel truher\",\"username\":\"truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"created_at\":\"2025-04-23T20:15:40.863Z\",\"cooked\":\"\\u003cp\\u003eyeah, sorry, the difference was indeed part of what i was trying to show.\\u003c/p\\u003e\\n\\u003cp\\u003ethe first case is order-dependent (so “B” never appears but “D” does).\\u003c/p\\u003e\\n\\u003cp\\u003ein general, it seems impossible to “fix” the ability of an action to modify a trigger condition, but also still trigger other actions on that very same condition in an insertion-order-independent way.\\u003c/p\\u003e\\n\\u003cp\\u003ethe second case is similar to the first, but not the same.  perhaps this is what is usually really desired: if an action causes a state transition, then you really just want to see the transition “exit” event.  maybe  this is the “convention” that i should be looking for?\\u003c/p\\u003e\\n\\u003cp\\u003ei guess what i’m really wondering is, this code has been around for awhile, so folks must have come up with ways to work around this issue, or maybe the conventions they use just don’t trigger it, so i’m wondering what those conventions are.\\u003c/p\\u003e\\n\\u003cp\\u003e… OR … maybe it’s a real bug and i can fix it?\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":10,\"updated_at\":\"2025-04-23T20:15:40.863Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":143,\"readers_count\":142,\"score\":33.6,\"yours\":false,\"topic_id\":500280,\"topic_slug\":\"trigger-condition-evaluation\",\"display_username\":\"joel truher\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":25118,\"username\":\"prensing\",\"name\":\"Paul Rensing\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/prensing/{size}/65820_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53190,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/trigger-condition-evaluation/500280/6\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3601893,\"name\":\"SLAB-Mr.Thomas\",\"username\":\"SLAB-Mr.Thomas\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/slab-mr.thomas/{size}/182153_2.png\",\"created_at\":\"2025-04-23T21:47:12.939Z\",\"cooked\":\"\\u003cp\\u003eI’d say:\\u003c/p\\u003e\\n\\u003caside class=\\\"quote no-group quote-modified\\\" data-username=\\\"truher\\\" data-post=\\\"6\\\" data-topic=\\\"500280\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/truher/48/172222_2.png\\\" class=\\\"avatar\\\"\\u003e truher:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eit’s a real bug and I can fix it\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eBut you also asked how others get around it and my team hasn’t run into a problem - we don’t code trigger actions that change events like this. About as close as we’d come is say a game piece passing by sensor \\u003cspan class=\\\"hashtag-raw\\\"\\u003e#1\\u003c/span\\u003e triggers a motor on and almost instantly the sensor doesn’t see the game piece but we don’t care because the motor is running and a subsequent trigger by a different sensor \\u003cspan class=\\\"hashtag-raw\\\"\\u003e#2\\u003c/span\\u003e turns it off.\\u003c/p\\u003e\\n\\u003cp\\u003eAt least in the good old days a process control room sees a single event fan-out to all alarms that depend on it and it happens instantly in parallel by wires thus a single value is processed.\\u003c/p\\u003e\\n\\u003cp\\u003eIt shouldn’t be too hard to add an evaluation \\u003ccode\\u003eboolean\\u003c/code\\u003e for the first pass through the event loop and then a second pass performs the triggered actions. Or alternatively use a cache for the conditions. WPILib has several instances of adding “caches” to prevent concurrent update.\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":10,\"updated_at\":\"2025-04-23T21:49:31.690Z\",\"reply_count\":0,\"reply_to_post_number\":6,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":117,\"readers_count\":116,\"score\":53.4,\"yours\":false,\"topic_id\":500280,\"topic_slug\":\"trigger-condition-evaluation\",\"display_username\":\"SLAB-Mr.Thomas\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24594,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/trigger-condition-evaluation/500280/7\",\"reactions\":[{\"id\":\"+1\",\"type\":\"emoji\",\"count\":1},{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3602052,\"name\":\"Oliver\",\"username\":\"Oliver_stivers\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/o/977dab/{size}.png\",\"created_at\":\"2025-04-24T00:57:14.619Z\",\"cooked\":\"\\u003cp\\u003ethe on false just forced the state to transition on button release, rather than on button press. it made sure we didn’t “jump over” a state due to most things being on the same button, where everything could be true at once for a frame\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":10,\"updated_at\":\"2025-04-24T00:57:14.619Z\",\"reply_count\":0,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":94,\"readers_count\":93,\"score\":33.8,\"yours\":false,\"topic_id\":500280,\"topic_slug\":\"trigger-condition-evaluation\",\"display_username\":\"Oliver\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":53190,\"username\":\"truher\",\"name\":\"joel truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":58314,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/trigger-condition-evaluation/500280/8\",\"reactions\":[{\"id\":\"+1\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3602223,\"name\":\"Sam Carlberg\",\"username\":\"SamCarlberg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/samcarlberg/{size}/207684_2.png\",\"created_at\":\"2025-04-24T12:07:20.254Z\",\"cooked\":\"\\u003cp\\u003eCopying my comment from the github issue:\\u003c/p\\u003e\\n\\u003cp\\u003eFundamentally, this happens because \\u003ccode\\u003erunOnce\\u003c/code\\u003e commands are evaluated immediately when the command is scheduled. A proper fix would be to add scheduled commands to a queue, then process that queue after the event loop is polled and triggers are evaluated, instead of eagerly initializing commands in \\u003ccode\\u003eschedule\\u003c/code\\u003e.  (fwiw, commands v3 serendipitously doesn’t have this problem because it uses this queueing approach)\\u003c/p\\u003e\\n\\u003cp\\u003eYou can work around this by using \\u003ccode\\u003erun(() -\\u0026gt; ...).until(() -\\u0026gt; true)\\u003c/code\\u003e to act like \\u003ccode\\u003erunOnce\\u003c/code\\u003e but execute after triggers are polled.\\u003c/p\\u003e\\n\\u003cpre data-code-wrap=\\\"java\\\"\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003enew Trigger(() -\\u0026gt; foo)\\n    .onTrue(Commands.run(() -\\u0026gt; {\\n      System.out.println(\\\"A\\\");\\n      foo = false;\\n    }).until(() -\\u0026gt; true))\\n    .onFalse(Commands.runOnce(() -\\u0026gt; {\\n      System.out.println(\\\"B\\\");\\n    }));\\n\\nfoo = true;\\nscheduler.run(); // prints \\\"A\\\"\\nscheduler.run(); // prints \\\"B\\\"\\n\\u003c/code\\u003e\\u003c/pre\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":10,\"updated_at\":\"2025-04-24T12:07:20.254Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":77,\"readers_count\":76,\"score\":75.4,\"yours\":false,\"topic_id\":500280,\"topic_slug\":\"trigger-condition-evaluation\",\"display_username\":\"Sam Carlberg\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":4}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":25916,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"2084 Lead Mentor | WPILib Developer\"},\"post_url\":\"/t/trigger-condition-evaluation/500280/9\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":4}],\"current_user_reaction\":null,\"reaction_users_count\":4,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3602352,\"name\":\"joel truher\",\"username\":\"truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"created_at\":\"2025-04-24T14:59:52.322Z\",\"cooked\":\"\\u003cp\\u003ethanks!  I hadn’t thought of run.until.\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":10,\"updated_at\":\"2025-04-24T14:59:52.322Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":48,\"readers_count\":47,\"score\":24.6,\"yours\":false,\"topic_id\":500280,\"topic_slug\":\"trigger-condition-evaluation\",\"display_username\":\"joel truher\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53190,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/trigger-condition-evaluation/500280/10\",\"reactions\":[{\"id\":\"call_me_hand\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3601464,3601466,3601474,3601633,3601675,3601802,3601893,3602052,3602223,3602352]},\"timeline_lookup\":[[1,102],[9,101]],\"suggested_topics\":[{\"id\":493348,\"title\":\"Camera positions\",\"fancy_title\":\"Camera positions\",\"slug\":\"camera-positions\",\"posts_count\":1,\"reply_count\":0,\"highest_post_number\":1,\"image_url\":null,\"created_at\":\"2025-02-26T17:22:30.155Z\",\"last_posted_at\":\"2025-02-26T17:22:30.229Z\",\"bumped\":true,\"bumped_at\":\"2025-02-26T17:22:30.229Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Hi everyone, recently we are thinking about how to position our limelights on our robot, we have the 3g, 3, and 4 limelights, we thought about making a loyoute with two cameras facing forward, the 3g …\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"robot\",\"limelight\",\"alignment\"],\"tags_descriptions\":{},\"like_count\":1,\"views\":114,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3541488,\"topic_post_liked\":false,\"topic_post_like_count\":1,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":64053,\"username\":\"Matheus\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/ecd19e/{size}.png\"},\"posters\":[{\"extras\":\"latest single\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":64053,\"username\":\"Matheus\",\"name\":\"\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/ecd19e/{size}.png\",\"trust_level\":1}}]},{\"id\":485408,\"title\":\"Pathplanner having issues with splines/curves\",\"fancy_title\":\"Pathplanner having issues with splines/curves\",\"slug\":\"pathplanner-having-issues-with-splines-curves\",\"posts_count\":5,\"reply_count\":2,\"highest_post_number\":5,\"image_url\":null,\"created_at\":\"2025-02-06T06:25:40.231Z\",\"last_posted_at\":\"2025-02-09T06:00:24.230Z\",\"bumped\":true,\"bumped_at\":\"2025-02-09T07:19:26.846Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Hello, Our team, 4537, have decided to use PathPlanner for our autonomous, and I, along with the rest of the programming team, and our mentors, have had some issue getting it to run spline/curve paths…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"pathplanner\"],\"tags_descriptions\":{},\"like_count\":0,\"views\":122,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3503843,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":64752,\"username\":\"genpop\",\"name\":\"Wil Jankovic\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/g/f0a364/{size}.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":64752,\"username\":\"genpop\",\"name\":\"Wil Jankovic\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/g/f0a364/{size}.png\",\"trust_level\":1}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":9105,\"username\":\"Fletch1373\",\"name\":\"Fletch\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/fletch1373/{size}/220073_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":63578,\"username\":\"isaacngkh\",\"name\":\"Isaac\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/i/e9a140/{size}.png\",\"trust_level\":2}}]},{\"id\":485607,\"title\":\"PathPlanner actual rotation doesn't match wanted rotation\",\"fancy_title\":\"PathPlanner actual rotation doesn\\u0026rsquo;t match wanted rotation\",\"slug\":\"pathplanner-actual-rotation-doesnt-match-wanted-rotation\",\"posts_count\":1,\"reply_count\":0,\"highest_post_number\":1,\"image_url\":null,\"created_at\":\"2025-02-07T21:57:01.799Z\",\"last_posted_at\":\"2025-02-07T21:57:01.844Z\",\"bumped\":true,\"bumped_at\":\"2025-02-07T21:57:01.844Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"For PathPlanner, we set up our PIDs with the help of the desired speeds and actual speeds in AdvantageScope. In TeleOp, all (front-back, left-right and rotation) the actual speeds graph match our desi…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":0,\"views\":29,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3505466,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":51978,\"username\":\"sun167\",\"name\":\"antoine schneider\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/b5e925/{size}.png\"},\"posters\":[{\"extras\":\"latest single\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":51978,\"username\":\"sun167\",\"name\":\"antoine schneider\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/s/b5e925/{size}.png\",\"trust_level\":2}}]},{\"id\":472762,\"title\":\"Issues Adding Custom Assets To Advantage Scope\",\"fancy_title\":\"Issues Adding Custom Assets To Advantage Scope\",\"slug\":\"issues-adding-custom-assets-to-advantage-scope\",\"posts_count\":8,\"reply_count\":3,\"highest_post_number\":8,\"image_url\":\"https://www.chiefdelphi.com/uploads/default/optimized/3X/a/1/a151b1cbd356ea2eefcbf6dfd55b648bb76bba37_2_1024x252.png\",\"created_at\":\"2024-10-10T19:07:28.583Z\",\"last_posted_at\":\"2025-03-23T03:03:45.322Z\",\"bumped\":true,\"bumped_at\":\"2025-03-23T03:03:45.322Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"I am currently trying to add a custom asset to advantage scope. The issue I am having is that the 3d model does not appear in the window but the listing of the custom model being available appears in …\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[\"simulation\"],\"tags_descriptions\":{},\"like_count\":2,\"views\":441,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3433358,\"topic_post_liked\":false,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":61162,\"username\":\"PanicLemming\",\"name\":null,\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/paniclemming/{size}/234749_2.png\"},\"posters\":[{\"extras\":null,\"description\":\"Original Poster\",\"user\":{\"id\":61162,\"username\":\"PanicLemming\",\"name\":null,\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/paniclemming/{size}/234749_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":28614,\"username\":\"legoguy1000\",\"name\":\"Alex\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/legoguy1000/{size}/256261_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":60033,\"username\":\"catrix\",\"name\":\"sam liu\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/c/dbc845/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":44471,\"username\":\"jonahb55\",\"name\":\"Jonah Bonner\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jonahb55/{size}/194474_2.png\",\"trust_level\":2}},{\"extras\":\"latest\",\"description\":\"Most Recent Poster\",\"user\":{\"id\":70393,\"username\":\"maxtan0626\",\"name\":\"Maxwell Tan\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/m/b5a626/{size}.png\",\"trust_level\":1}}]},{\"id\":494635,\"title\":\"PathPlanner going in random directions and speeds\",\"fancy_title\":\"PathPlanner going in random directions and speeds\",\"slug\":\"pathplanner-going-in-random-directions-and-speeds\",\"posts_count\":7,\"reply_count\":4,\"highest_post_number\":7,\"image_url\":\"https://www.chiefdelphi.com/uploads/default/original/3X/9/e/9e3d110195c4e67f6ca0e31bb3f5f993ab3b3268.gif\",\"created_at\":\"2025-03-07T14:25:33.398Z\",\"last_posted_at\":\"2025-03-07T20:15:48.029Z\",\"bumped\":true,\"bumped_at\":\"2025-03-07T20:15:48.029Z\",\"archetype\":\"regular\",\"unseen\":false,\"pinned\":false,\"unpinned\":null,\"excerpt\":\"Our robot has been seemingly ignoring PP autos whenever we run them, specifically the drivetrain (other commands in autos, like elevator scoring, etc.) Here is a video of it happening during a match,…\",\"visible\":true,\"closed\":false,\"archived\":false,\"bookmarked\":null,\"liked\":null,\"tags\":[],\"tags_descriptions\":{},\"like_count\":3,\"views\":113,\"category_id\":30,\"featured_link\":null,\"has_accepted_answer\":false,\"sidecar_installed\":true,\"include_dominant_colour\":false,\"topic_post_id\":3550358,\"topic_post_liked\":false,\"topic_post_like_count\":1,\"topic_post_can_like\":false,\"topic_post_can_unlike\":false,\"topic_post_bookmarked\":false,\"topic_post_is_current_users\":null,\"topic_post_number\":1,\"topic_post_user\":{\"id\":55065,\"username\":\"Xactlysharp\",\"name\":\"Anderson Hall\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/xactlysharp/{size}/186572_2.png\"},\"posters\":[{\"extras\":\"latest\",\"description\":\"Original Poster, Most Recent Poster\",\"user\":{\"id\":55065,\"username\":\"Xactlysharp\",\"name\":\"Anderson Hall\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/xactlysharp/{size}/186572_2.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":28240,\"username\":\"icemannie\",\"name\":\"icemannie\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/i/bc79bd/{size}.png\",\"trust_level\":2}},{\"extras\":null,\"description\":\"Frequent Poster\",\"user\":{\"id\":50762,\"username\":\"atsekhan\",\"name\":\"Alex Tsekhansky\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/0ea827/{size}.png\",\"trust_level\":2}}]}],\"tags\":[],\"tags_descriptions\":{},\"id\":500280,\"title\":\"Trigger condition evaluation\",\"fancy_title\":\"Trigger condition evaluation\",\"posts_count\":10,\"created_at\":\"2025-04-23T16:26:06.077Z\",\"views\":499,\"reply_count\":4,\"like_count\":11,\"last_posted_at\":\"2025-04-24T14:59:52.322Z\",\"visible\":true,\"closed\":false,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"trigger-condition-evaluation\",\"category_id\":30,\"word_count\":1060,\"deleted_at\":null,\"user_id\":53190,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_500280\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":10,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":{\"id\":47000,\"execute_at\":\"2026-04-24T14:59:52.322Z\",\"duration_minutes\":525600,\"based_on_last_post\":true,\"status_type\":\"close\",\"category_id\":null},\"message_bus_last_id\":0,\"participant_count\":6,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":53190,\"username\":\"truher\",\"name\":\"joel truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"post_count\":5,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":24594,\"username\":\"SLAB-Mr.Thomas\",\"name\":\"SLAB-Mr.Thomas\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/slab-mr.thomas/{size}/182153_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":25118,\"username\":\"prensing\",\"name\":\"Paul Rensing\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/prensing/{size}/65820_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":25916,\"username\":\"SamCarlberg\",\"name\":\"Sam Carlberg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/samcarlberg/{size}/207684_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":58314,\"username\":\"Oliver_stivers\",\"name\":\"Oliver\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/o/977dab/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":53190,\"username\":\"truher\",\"name\":\"joel truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\"},\"last_poster\":{\"id\":53190,\"username\":\"truher\",\"name\":\"joel truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\"}},\"bookmarks\":[]}"}
