{"data":"{\"post_stream\":{\"posts\":[{\"id\":3309309,\"name\":\"Emil Sriram\",\"username\":\"EmilTheMeal\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/85e7bf/{size}.png\",\"created_at\":\"2024-02-14T16:20:43.450Z\",\"cooked\":\"\\u003cp\\u003eI‚Äôm trying to implement \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e + feedforward control for an arm w gravity feedforward. I thought that there were a few ways to do this:\\u003c/p\\u003e\\n\\u003col\\u003e\\n\\u003cli\\u003e\\n\\u003cp\\u003eUse the ArmFeedforward class, and during periodic: update the voltage of the motor based on the angle (accounting for gravity feedforward) and the \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e.\\u003c/p\\u003e\\n\\u003c/li\\u003e\\n\\u003cli\\u003e\\n\\u003cp\\u003eUse the motor‚Äôs internal \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e and Feedforward, and each time I change the setpoint, I tell the motor its new setpoint.\\u003c/p\\u003e\\n\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cp\\u003eI feel like ideally, I would use \\u003ca class=\\\"hashtag-cooked\\\" href=\\\"/tag/2\\\" data-type=\\\"tag\\\" data-slug=\\\"2\\\" data-id=\\\"3496\\\"\\u003e\\u003cspan class=\\\"hashtag-icon-placeholder\\\"\\u003e\\u003csvg class=\\\"fa d-icon d-icon-square-full svg-icon svg-node\\\"\\u003e\\u003cuse href=\\\"#square-full\\\"\\u003e\\u003c/use\\u003e\\u003c/svg\\u003e\\u003c/span\\u003e\\u003cspan\\u003e2\\u003c/span\\u003e\\u003c/a\\u003e. But, I‚Äôm not sure how to implement the gravity feedforward for the motor. I know that SparkPIDController has a method to set the feedforward to a double value and not a lambda for the feedforward depending on the angle. So how does the motor update the feedforward voltage based on the angle if I set it to a constant value?\\u003c/p\\u003e\\n\\u003cp\\u003eLastly, does anyone recommend 1 over 2, or a third way of motion control?\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-14T16:20:43.450Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":378,\"reads\":356,\"readers_count\":355,\"score\":1961.2,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Emil Sriram\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"/tag/2\",\"internal\":true,\"reflection\":false,\"clicks\":0},{\"url\":\"https://www.chiefdelphi.com/t/feedforward-issue-with-a-sparkmax-controlled-arm-motor/469988/5\",\"internal\":true,\"reflection\":true,\"title\":\"Feedforward Issue with a SparkMAX-Controlled Arm Motor\",\"clicks\":0}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":61470,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/1\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true,\"can_vote\":false},{\"id\":3309322,\"name\":\"Nelson Green (1108 Mentor Coach Electrical Programming)\",\"username\":\"ngreen\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ngreen/{size}/264478_2.png\",\"created_at\":\"2024-02-14T16:32:57.011Z\",\"cooked\":\"\\u003cp\\u003eLast year, I was updating the ArmFeedforward with the angle setpoint to calculate a new feedforward each time it changed and then using that as the arbitrary feedforward in the setReference of the SparkMaxPIDController.\\u003c/p\\u003e\\n\\u003caside class=\\\"onebox githubblob\\\" data-onebox-src=\\\"https://github.com/frc1108/Robot2023/blob/12fe3c9d7fb5bbf415d46095e169d892660d4aa7/src/main/java/frc/robot/subsystems/ArmSubsystem.java#L111C1-L120C2\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://github.com/frc1108/Robot2023/blob/12fe3c9d7fb5bbf415d46095e169d892660d4aa7/src/main/java/frc/robot/subsystems/ArmSubsystem.java#L111C1-L120C2\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch4\\u003e\\u003ca href=\\\"https://github.com/frc1108/Robot2023/blob/12fe3c9d7fb5bbf415d46095e169d892660d4aa7/src/main/java/frc/robot/subsystems/ArmSubsystem.java#L111C1-L120C2\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003efrc1108/Robot2023/blob/12fe3c9d7fb5bbf415d46095e169d892660d4aa7/src/main/java/frc/robot/subsystems/ArmSubsystem.java#L111C1-L120C2\\u003c/a\\u003e\\u003c/h4\\u003e\\n\\n\\n\\n    \\u003cpre class=\\\"onebox\\\"\\u003e\\u003ccode class=\\\"lang-java\\\"\\u003e\\n      \\u003col class=\\\"start lines\\\" start=\\\"111\\\" style=\\\"counter-reset: li-counter 110 ;\\\"\\u003e\\n          \\u003cli\\u003e@Override\\u003c/li\\u003e\\n          \\u003cli\\u003epublic void useState(TrapezoidProfile.State setpoint) {\\u003c/li\\u003e\\n          \\u003cli\\u003e  // Calculate the feedforward from the sepoint\\u003c/li\\u003e\\n          \\u003cli\\u003e  double feedforward = m_feedforward.calculate(setpoint.position,\\u003c/li\\u003e\\n          \\u003cli\\u003e                                               setpoint.velocity);\\u003c/li\\u003e\\n          \\u003cli\\u003e  \\u003c/li\\u003e\\n          \\u003cli\\u003e  // Add the feedforward to the PID output to get the motor output\\u003c/li\\u003e\\n          \\u003cli\\u003e  m_pid.setReference(setpoint.position, // - ArmConstants.kArmOffsetRads,\\u003c/li\\u003e\\n          \\u003cli\\u003e                     ControlType.kPosition, 0, feedforward);\\u003c/li\\u003e\\n          \\u003cli\\u003e}\\u003c/li\\u003e\\n      \\u003c/ol\\u003e\\n    \\u003c/code\\u003e\\u003c/pre\\u003e\\n\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\",\"post_number\":2,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-14T16:32:57.011Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":10,\"reads\":324,\"readers_count\":323,\"score\":139.8,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Nelson Green (1108 Mentor Coach Electrical Programming)\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/frc1108/Robot2023/blob/12fe3c9d7fb5bbf415d46095e169d892660d4aa7/src/main/java/frc/robot/subsystems/ArmSubsystem.java#L111C1-L120C2\",\"internal\":false,\"reflection\":false,\"title\":\"Robot2023/src/main/java/frc/robot/subsystems/ArmSubsystem.java at 12fe3c9d7fb5bbf415d46095e169d892660d4aa7 ¬∑ frc1108/Robot2023 ¬∑ GitHub\",\"clicks\":48}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":2695,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/2\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3309330,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2024-02-14T16:38:38.827Z\",\"cooked\":\"\\u003cp\\u003eI agree with \\u003ca class=\\\"mention\\\" href=\\\"/u/ngreen\\\"\\u003e@ngreen\\u003c/a\\u003e. I just want to add context from the two options you presented. I think the best answer is \\u003cem\\u003eboth\\u003c/em\\u003e. As \\u003ca class=\\\"mention\\\" href=\\\"/u/ngreen\\\"\\u003e@ngreen\\u003c/a\\u003e pointed out, you can use the motor controller‚Äôs \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e with \\u003ccode\\u003eArmFeedforward\\u003c/code\\u003e. Use the feedforward calculated on the roboRIO, and pass it to the arbitrary feedforward parameter for \\u003ccode\\u003esetReference\\u003c/code\\u003e.\\u003c/p\\u003e\\n\\u003cp\\u003eThe only comment I have is that you said, ‚Äúinternal \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e and Feedforward‚Äù. SPARK Max doesn‚Äôt have built-in arm gravity feed forward (aside‚Ä¶ TalonFX does have an arm gravity feedback feature), but you can still use the internal \\u003cspan class=\\\"abbreviation\\\"\\u003ePID\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Proportional Integral Derivative\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e with feedforward from the rio.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-14T16:46:31.128Z\",\"reply_count\":2,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":5,\"reads\":283,\"readers_count\":282,\"score\":121.6,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":2695,\"username\":\"ngreen\",\"name\":\"Nelson Green (1108 Mentor Coach Electrical Programming)\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ngreen/{size}/264478_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/3\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":true,\"topic_accepted_answer\":true},{\"id\":3309333,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2024-02-14T16:40:18.495Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"gdefender\\\" data-post=\\\"3\\\" data-topic=\\\"454727\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/gdefender/48/168507_2.png\\\" class=\\\"avatar\\\"\\u003e gdefender:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eSPARK Max doesn‚Äôt have built-in arm gravity feed forward (aside‚Ä¶ TalonFX does)\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThe TalonFX has a built-in feed\\u003cem\\u003eback\\u003c/em\\u003e compensator for gravity on an arm.  The live measurement of the angle is used, not the setpoint.  The current \\u003cspan class=\\\"abbreviation\\\"\\u003eCTRE\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Cross The Road Electronics\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e docs describe it as a feedforward to avoid confusing users who are unfamiliar with feedback linearization.\\u003c/p\\u003e\\n\\u003cp\\u003eYou may want to consider doing the same with the \\u003ccode\\u003eArmFeedforward\\u003c/code\\u003e class, \\u003cem\\u003eespecially\\u003c/em\\u003e if you‚Äôre not using a motion profile.\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-14T16:43:36.869Z\",\"reply_count\":1,\"reply_to_post_number\":3,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":270,\"readers_count\":269,\"score\":59.0,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/4\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"+1\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3309340,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2024-02-14T16:46:44.303Z\",\"cooked\":\"\\u003cp\\u003eYes, that is technically correct. Post edited.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-14T16:46:44.303Z\",\"reply_count\":1,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":247,\"readers_count\":246,\"score\":69.4,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/5\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3309342,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2024-02-14T16:47:54.140Z\",\"cooked\":\"\\u003cp\\u003eNo need to edit the post - they do call it a feedforward in their docs atm - just wanted to call attention to the implementation difference because it‚Äôs relevant to use of \\u003ccode\\u003eArmFeedforward\\u003c/code\\u003e (nothing stops you from doing a feedback linearization instead by passing it the measurement instead of the setpoint).\\u003c/p\\u003e\\n\\u003cp\\u003eIf you‚Äôre not using a well-tuned motion planner, whether you do this can matter a whole lot more than whether the feedback loop is on the RIO or on the motor controller in terms of overall system performance.  Feedforward linearization can fail miserably if the setpoint is far from the current state.\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-14T16:51:01.882Z\",\"reply_count\":1,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":250,\"readers_count\":249,\"score\":80.0,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/6\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3309381,\"name\":\"Nelson Green (1108 Mentor Coach Electrical Programming)\",\"username\":\"ngreen\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ngreen/{size}/264478_2.png\",\"created_at\":\"2024-02-14T17:09:07.487Z\",\"cooked\":\"\\u003cp\\u003eAre there any updates to SmartMotion? \\u003ca href=\\\"https://www.chiefdelphi.com/t/understanding-and-tuning-smart-motion-for-an-arm/426639/45\\\" class=\\\"inline-onebox\\\"\\u003eUnderstanding and Tuning Smart Motion for an arm - #45 by nuclearnerd\\u003c/a\\u003e\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-14T17:09:07.487Z\",\"reply_count\":1,\"reply_to_post_number\":6,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":234,\"readers_count\":233,\"score\":71.8,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Nelson Green (1108 Mentor Coach Electrical Programming)\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/understanding-and-tuning-smart-motion-for-an-arm/426639/45\",\"internal\":true,\"reflection\":false,\"title\":\"Understanding and Tuning Smart Motion for an arm\",\"clicks\":23}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":2695,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/7\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3309388,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2024-02-14T17:14:53.263Z\",\"cooked\":\"\\u003cp\\u003eNone that I know of, but I don‚Äôt work for REV.  Their documentation around the feature (including the tuning instructions) remains as it was at the time of that post.\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-14T17:15:19.264Z\",\"reply_count\":0,\"reply_to_post_number\":7,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":220,\"readers_count\":219,\"score\":69.0,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":2695,\"username\":\"ngreen\",\"name\":\"Nelson Green (1108 Mentor Coach Electrical Programming)\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ngreen/{size}/264478_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/8\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3309400,\"name\":\"Amicus1\",\"username\":\"Amicus1\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/a9adbd/{size}.png\",\"created_at\":\"2024-02-14T17:23:37.174Z\",\"cooked\":\"\\u003cp\\u003eThe spark max onboard feedforward (kFF) is equivalent to a kV, but in different units.\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-14T17:23:37.174Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":214,\"readers_count\":213,\"score\":62.8,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Amicus1\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":33946,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"6995A/Choreo/Monologue\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/9\",\"custom_user_title\":\"6995A/Choreo/Monologue\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3310866,\"name\":\"Emil Sriram\",\"username\":\"EmilTheMeal\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/85e7bf/{size}.png\",\"created_at\":\"2024-02-16T12:48:09.594Z\",\"cooked\":\"\\u003cp\\u003eWait so I have to set the reference during each periodic call in order to update the feedforward?\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-16T12:48:09.594Z\",\"reply_count\":2,\"reply_to_post_number\":3,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":188,\"readers_count\":187,\"score\":57.6,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Emil Sriram\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":61470,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/10\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3310920,\"name\":\"Andy Gasser\",\"username\":\"gdefender\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"created_at\":\"2024-02-16T15:05:03.977Z\",\"cooked\":\"\\u003cp\\u003eIt depends what behavior you‚Äôre going for.\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003e\\u003ca class=\\\"mention\\\" href=\\\"/u/ngreen\\\"\\u003e@ngreen\\u003c/a\\u003e‚Äôs code is using a \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/trapezoidal-profiles.html\\\" rel=\\\"noopener nofollow ugc\\\"\\u003etrapezoidal motion profile\\u003c/a\\u003e so you have setpoints at every period that you can use for feed\\u003cem\\u003eforward\\u003c/em\\u003e. In this case you would set the arbitrary feedforward on each period, based on the desired state.\\u003c/li\\u003e\\n\\u003cli\\u003eIf you‚Äôre just using position control, depending where your end state is and the behavior you want, you could use the end state as a feed\\u003cem\\u003eforward\\u003c/em\\u003e value and set it only once. But as \\u003ca class=\\\"mention\\\" href=\\\"/u/oblarg\\\"\\u003e@Oblarg\\u003c/a\\u003e mentioned, ‚ÄúFeedforward linearization can fail miserably if the setpoint is far from the current state.‚Äù\\u003c/li\\u003e\\n\\u003cli\\u003eIf you‚Äôre just using position control, and you need the arm to hold itself throughout the motion, you could calculate the arbitrary feedforward value based on the arm‚Äôs current position (this is technically feed\\u003cem\\u003eback\\u003c/em\\u003e, as \\u003ca class=\\\"mention\\\" href=\\\"/u/oblarg\\\"\\u003e@Oblarg\\u003c/a\\u003e pointed out). This is what \\u003cspan class=\\\"abbreviation\\\"\\u003eCTRE\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Cross The Road Electronics\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e‚Äôs \\u003ca href=\\\"https://v5.docs.ctr-electronics.com/en/latest/ch16_ClosedLoop.html#gravity-offset-arm\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ephoenix 5 documentation describes\\u003c/a\\u003e.\\u003c/li\\u003e\\n\\u003c/ul\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-16T15:05:03.977Z\",\"reply_count\":1,\"reply_to_post_number\":10,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":171,\"readers_count\":170,\"score\":69.2,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Andy Gasser\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://v5.docs.ctr-electronics.com/en/latest/ch16_ClosedLoop.html#gravity-offset-arm\",\"internal\":false,\"reflection\":false,\"title\":\"Motor Controller Closed Loop ‚Äî Phoenix documentation\",\"clicks\":6},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/trapezoidal-profiles.html\",\"internal\":false,\"reflection\":false,\"title\":\"Trapezoidal Motion Profiles in WPILib ‚Äî FIRST Robotics Competition documentation\",\"clicks\":6}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":61470,\"username\":\"EmilTheMeal\",\"name\":\"Emil Sriram\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/85e7bf/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7028 - Java Programming Mentor\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/11\",\"custom_user_title\":\"7028 - Java Programming Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3310968,\"name\":\"Joshua J\",\"username\":\"thatnameistaken\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/t/57b2e6/{size}.png\",\"created_at\":\"2024-02-16T16:04:09.416Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"EmilTheMeal\\\" data-post=\\\"10\\\" data-topic=\\\"454727\\\" data-full=\\\"true\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/e/85e7bf/48.png\\\" class=\\\"avatar\\\"\\u003e EmilTheMeal:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eWait so I have to set the reference during each periodic call in order to update the feedforward?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThe arbitrary feed forward value is just a percent output or voltage, whichever you specify. It‚Äôll hold that value until you change it. If you want to more accurately compensate for gravity on a pivoting arm (useful if you‚Äôre just using position control with large setpoint differences), the reference must be set periodically.\\u003c/p\\u003e\\n\\u003cp\\u003eIf you don‚Äôt want to directly call \\u003ccode\\u003esetReference()\\u003c/code\\u003e  in \\u003ccode\\u003eperiodic()\\u003c/code\\u003e, consider ways of having a command continually run to handle it instead. A simple way to do that is to register a default command that just calls \\u003ccode\\u003esetReference()\\u003c/code\\u003e, recalculating the feedforward but reusing the current setpoint.\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-16T16:04:09.416Z\",\"reply_count\":0,\"reply_to_post_number\":10,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":155,\"readers_count\":154,\"score\":36.0,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Joshua J\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":19116,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"CSA | Drive Coach (2191)\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/12\",\"custom_user_title\":\"CSA | Drive Coach (2191)\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3312861,\"name\":\"\",\"username\":\"four\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/four/{size}/199902_2.png\",\"created_at\":\"2024-02-19T13:47:48.537Z\",\"cooked\":\"\\u003cp\\u003eHow did you obtain the constants for the ArmFeedforward?\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-19T13:47:48.537Z\",\"reply_count\":1,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":135,\"readers_count\":134,\"score\":37.0,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":2695,\"username\":\"ngreen\",\"name\":\"Nelson Green (1108 Mentor Coach Electrical Programming)\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ngreen/{size}/264478_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":60512,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Doubling the current limit does not make it work.\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/13\",\"custom_user_title\":\"Doubling the current limit does not make it work.\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3312879,\"name\":\"Rahul Yarlagadda\",\"username\":\"Knufire\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/knufire/{size}/67820_2.png\",\"created_at\":\"2024-02-19T14:15:32.076Z\",\"cooked\":\"\\u003cp\\u003eThis has an explanation of what the constants are: \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-feedforward.html\\\" class=\\\"inline-onebox\\\"\\u003eIntroduction to DC Motor Feedforward ‚Äî FIRST Robotics Competition documentation\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eYou can measure them by hand, or try to use the SysID tool to automatically calculate them.\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-19T14:15:32.076Z\",\"reply_count\":1,\"reply_to_post_number\":13,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":134,\"readers_count\":133,\"score\":76.8,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Rahul Yarlagadda\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-feedforward.html\",\"internal\":false,\"reflection\":false,\"title\":\"Introduction to DC Motor Feedforward ‚Äî FIRST Robotics Competition documentation\",\"clicks\":12}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":60512,\"username\":\"four\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/four/{size}/199902_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12760,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"7457 Mentor\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/14\",\"custom_user_title\":\"7457 Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3312898,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2024-02-19T14:49:44.330Z\",\"cooked\":\"\\u003cp\\u003eReCalc can also estimate your control gains.\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-19T14:49:44.330Z\",\"reply_count\":1,\"reply_to_post_number\":14,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":131,\"readers_count\":130,\"score\":61.2,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":12760,\"username\":\"Knufire\",\"name\":\"Rahul Yarlagadda\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/knufire/{size}/67820_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/15\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2},{\"id\":\"point_up\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3312937,\"name\":\"\",\"username\":\"four\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/four/{size}/199902_2.png\",\"created_at\":\"2024-02-19T16:17:15.924Z\",\"cooked\":\"\\u003cp\\u003eAny ideas on how to implement ngreen‚Äôs method? It takes TrapezoidProfile.State as an argument and I do not know how to get that.\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-19T16:17:15.924Z\",\"reply_count\":1,\"reply_to_post_number\":15,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":117,\"readers_count\":116,\"score\":28.4,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":60512,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Doubling the current limit does not make it work.\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/16\",\"custom_user_title\":\"Doubling the current limit does not make it work.\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3312965,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2024-02-19T16:49:16.197Z\",\"cooked\":\"\\u003cp\\u003eRead the docs for \\u003ccode\\u003eTrapezoidProfile\\u003c/code\\u003e.\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-19T16:49:16.197Z\",\"reply_count\":0,\"reply_to_post_number\":16,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":110,\"readers_count\":109,\"score\":22.0,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":60512,\"username\":\"four\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/four/{size}/199902_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/17\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3313570,\"name\":\"Emil Sriram\",\"username\":\"EmilTheMeal\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/85e7bf/{size}.png\",\"created_at\":\"2024-02-20T12:22:38.922Z\",\"cooked\":\"\\u003cp\\u003eDo we need a feedforward for the arm? I noticed that the NEO motors maintain their position in brake mode even with the maximum load that will be exerted‚Ä¶so what is the point of the kg if the motors will always counteract the weight of the arm?\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-20T12:22:38.922Z\",\"reply_count\":1,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":100,\"readers_count\":99,\"score\":25.0,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Emil Sriram\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":61470,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/18\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3313597,\"name\":\"Dan Katzuv\",\"username\":\"dan\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/d/eada6e/{size}.png\",\"created_at\":\"2024-02-20T12:47:20.319Z\",\"cooked\":\"\\u003cp\\u003eBrake mode only kicks into effect in ‚Äúneutral mode‚Äù. When you actively control the arm you should add a gravity-compensation feed-forward so the closed-loop control will be linear.\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-20T12:47:20.319Z\",\"reply_count\":2,\"reply_to_post_number\":18,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":93,\"readers_count\":92,\"score\":58.6,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Dan Katzuv\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":61470,\"username\":\"EmilTheMeal\",\"name\":\"Emil Sriram\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/85e7bf/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":32004,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5987 Software Mentor üáÆüá±\"},\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/19\",\"custom_user_title\":\"5987 Software Mentor üáÆüá±\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true},{\"id\":3313619,\"name\":\"Emil Sriram\",\"username\":\"EmilTheMeal\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/85e7bf/{size}.png\",\"created_at\":\"2024-02-20T13:32:08.280Z\",\"cooked\":\"\\u003cp\\u003eGot it, thanks!\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":23,\"updated_at\":\"2024-02-20T13:32:08.280Z\",\"reply_count\":0,\"reply_to_post_number\":19,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":83,\"readers_count\":82,\"score\":21.6,\"yours\":false,\"topic_id\":454727,\"topic_slug\":\"arm-gravity-feedforward-w-neo-motors\",\"display_username\":\"Emil Sriram\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":32004,\"username\":\"dan\",\"name\":\"Dan Katzuv\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/d/eada6e/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":61470,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/arm-gravity-feedforward-w-neo-motors/454727/20\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"hugs\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":true}],\"stream\":[3309309,3309322,3309330,3309333,3309340,3309342,3309381,3309388,3309400,3310866,3310920,3310968,3312861,3312879,3312898,3312937,3312965,3313570,3313597,3313619,3313662,3320392,3543300]},\"timeline_lookup\":[[1,605],[10,603],[13,600],[19,599],[22,591],[23,226]],\"tags\":[],\"tags_descriptions\":{},\"fancy_title\":\"Arm Gravity Feedforward w NEO motors\",\"id\":454727,\"title\":\"Arm Gravity Feedforward w NEO motors\",\"posts_count\":23,\"created_at\":\"2024-02-14T16:20:43.358Z\",\"views\":1357,\"reply_count\":18,\"like_count\":20,\"last_posted_at\":\"2025-02-28T06:38:29.052Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"arm-gravity-feedforward-w-neo-motors\",\"category_id\":30,\"word_count\":1175,\"deleted_at\":null,\"user_id\":61470,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_454727\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":23,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":9,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"accepted_answer\":{\"post_number\":3,\"username\":\"gdefender\",\"name\":null,\"excerpt\":\"I agree with \\u003ca class=\\\"mention\\\" href=\\\"/u/ngreen\\\"\\u003e@ngreen\\u003c/a\\u003e. I just want to add context from the two options you presented. I think the best answer is both. As \\u003ca class=\\\"mention\\\" href=\\\"/u/ngreen\\\"\\u003e@ngreen\\u003c/a\\u003e pointed out, you can use the motor controller‚Äôs PID with ArmFeedforward. Use the feedforward calculated on the roboRIO, and pass it to the arbitrary feedforward parameter \\u0026hellip;\",\"accepter_name\":null},\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":61470,\"username\":\"EmilTheMeal\",\"name\":\"Emil Sriram\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/85e7bf/{size}.png\",\"post_count\":6,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"post_count\":5,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":44380,\"username\":\"gdefender\",\"name\":\"Andy Gasser\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gdefender/{size}/168507_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":2695,\"username\":\"ngreen\",\"name\":\"Nelson Green (1108 Mentor Coach Electrical Programming)\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/ngreen/{size}/264478_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":60512,\"username\":\"four\",\"name\":\"\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/four/{size}/199902_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":33946,\"username\":\"Amicus1\",\"name\":\"Amicus1\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/a9adbd/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":19116,\"username\":\"thatnameistaken\",\"name\":\"Joshua J\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/t/57b2e6/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":12760,\"username\":\"Knufire\",\"name\":\"Rahul Yarlagadda\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/knufire/{size}/67820_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":32004,\"username\":\"dan\",\"name\":\"Dan Katzuv\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/d/eada6e/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":61470,\"username\":\"EmilTheMeal\",\"name\":\"Emil Sriram\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/85e7bf/{size}.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://github.com/frc1108/Robot2023/blob/12fe3c9d7fb5bbf415d46095e169d892660d4aa7/src/main/java/frc/robot/subsystems/ArmSubsystem.java#L111C1-L120C2\",\"title\":\"Robot2023/src/main/java/frc/robot/subsystems/ArmSubsystem.java at 12fe3c9d7fb5bbf415d46095e169d892660d4aa7 ¬∑ frc1108/Robot2023 ¬∑ GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":48,\"user_id\":2695,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://www.chiefdelphi.com/t/understanding-and-tuning-smart-motion-for-an-arm/426639/45\",\"title\":\"Understanding and Tuning Smart Motion for an arm\",\"internal\":true,\"attachment\":false,\"reflection\":false,\"clicks\":23,\"user_id\":2695,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-feedforward.html\",\"title\":\"Introduction to DC Motor Feedforward ‚Äî FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":12,\"user_id\":12760,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/advanced-controls/controllers/trapezoidal-profiles.html\",\"title\":\"Trapezoidal Motion Profiles in WPILib ‚Äî FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":6,\"user_id\":44380,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://v5.docs.ctr-electronics.com/en/latest/ch16_ClosedLoop.html#gravity-offset-arm\",\"title\":\"Motor Controller Closed Loop ‚Äî Phoenix documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":6,\"user_id\":44380,\"domain\":\"v5.docs.ctr-electronics.com\",\"root_domain\":\"ctr-electronics.com\"}]},\"bookmarks\":[]}"}
