{"data":"{\"post_stream\":{\"posts\":[{\"id\":3114075,\"name\":\"Aron Rubin\",\"username\":\"AronRubin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/aronrubin/{size}/180072_2.png\",\"created_at\":\"2022-12-27T17:53:16.305Z\",\"cooked\":\"\\u003cp\\u003eI would like to use the simulation facilities in WPILib to help my team develop largely without the use of the robot. The first goal is to allow code developed to go essentially unchanged onto the robot itself. I see many quick examples of simulation and read the docs. Either I am having trouble orienting myself or there is a misalignment with my intent and the present state of WPILib.\\u003c/p\\u003e\\n\\u003cp\\u003eI would expect some configuration to cause the HAL to direct calls to synthetic elements instead of actual device drivers. There would be some central simulated robot state so these synthetic elements could give coherent responses. It would be nice if the simulation state also captured physics and environment as well. I would anticipate this requiring explicit HAL use for device access. This would extend to team-developed drivers for devices through MXP and CAN.\\u003c/p\\u003e\\n\\u003cp\\u003eGoals (in order of increasing ambition):\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003eWhole system development without the robot\\u003c/li\\u003e\\n\\u003cli\\u003eExpectation unit testing where mock/simulated elements can be queried. e.g. The robot transitioned from State1 to State2, did the motors run?\\u003c/li\\u003e\\n\\u003cli\\u003eVision system development where the synthetic robot orientation drives the camera/viewport of a 3d model of the field.\\u003c/li\\u003e\\n\\u003cli\\u003ePre-integration collaboration where subteams exchange mocks of their system before developing the actual versions.\\u003c/li\\u003e\\n\\u003cli\\u003eAnalysis-of-alternatives investigation where different hardware can be evaluated in simulation\\u003c/li\\u003e\\n\\u003c/ul\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T17:53:58.947Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":2426,\"reads\":623,\"readers_count\":622,\"score\":12289.6,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Aron Rubin\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":51509,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Maker, Mild-Tempered Scientist, Overly Seasoned Engineer\"},\"post_url\":\"/t/simulation-for-development/420264/1\",\"custom_user_title\":\"Maker, Mild-Tempered Scientist, Overly Seasoned Engineer\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":3114079,\"name\":\"joel truher\",\"username\":\"truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"created_at\":\"2022-12-27T18:04:59.910Z\",\"cooked\":\"\\u003cp\\u003eI’m also interested in this topic, and like you, I expected that the HAL would be the key element: unmodified robot-domain code on one side, physics-domain simulations on the other side.  It seems like the most natural thing to do with WPILib is not that, though: instead both the “robot” and “physics” domains are mixed together on the “robot” side.  I found it most natural for simulation code to wind up \\u003cem\\u003eeverywhere\\u003c/em\\u003e (example: my \\u003ca href=\\\"https://github.com/truher/swerve-sim\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eswerve sim thing\\u003c/a\\u003e.\\u003c/p\\u003e\\n\\u003cp\\u003eI think there are good reasons why it works this way – beginner programmers have just one thing to learn, it works the same in java and c++ – but i think it could also work the way you and i expect.  If anyone is working in that direction, I’d be interested in learning more about it, maybe helping out if that would be useful.\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:04:59.910Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":17,\"reads\":564,\"readers_count\":563,\"score\":202.8,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"joel truher\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/truher/swerve-sim\",\"internal\":false,\"reflection\":false,\"title\":\"GitHub - truher/swerve-sim: Simple swerve drivetrain simulation intended for navigation\",\"clicks\":164}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53190,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/simulation-for-development/420264/2\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114081,\"name\":\"Aron Rubin\",\"username\":\"AronRubin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/aronrubin/{size}/180072_2.png\",\"created_at\":\"2022-12-27T18:08:36.327Z\",\"cooked\":\"\\u003cp\\u003eSplitting at the HAL is the approach I have taken in the past on professional robotics projects. I also noticed that is the approach in the Autodesk Synthesis code but I have not had the time to get that up and running yet.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:08:36.327Z\",\"reply_count\":0,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":13,\"reads\":503,\"readers_count\":502,\"score\":165.6,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Aron Rubin\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":53190,\"username\":\"truher\",\"name\":\"joel truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":51509,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Maker, Mild-Tempered Scientist, Overly Seasoned Engineer\"},\"post_url\":\"/t/simulation-for-development/420264/3\",\"custom_user_title\":\"Maker, Mild-Tempered Scientist, Overly Seasoned Engineer\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114083,\"name\":\"Peter Johnson\",\"username\":\"Peter_Johnson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/peter_johnson/{size}/10417_2.png\",\"created_at\":\"2022-12-27T18:13:39.774Z\",\"cooked\":\"\\u003cp\\u003eThe WPILib HAL comes in two forms: there’s a HAL for the RoboRIO that maps HAL function calls to RoboRIO hardware, and there’s a simulation HAL that has data structures for everything in the HAL and provides a complete set of simulator-facing functions.  The simulation HAL is used any time you run robot code on the desktop.\\u003c/p\\u003e\\n\\u003cp\\u003eIn addition to the RoboRIO actual hardware functions, the HAL also supports simulation-focused virtual devices (SimDevice) that provide a way to access higher level functionality in simulation–for example, rather than needing to mock the SPI layer of gyros, a Gyro class in WPILib creates a SimDevice in simulation that just provides direct access to the gyro rate and angle.\\u003c/p\\u003e\\n\\u003cp\\u003eThe simulation HAL also supports plugins, so e.g. the simulation GUI is a plugin that displays a GUI and uses the simulation HAL functions to change HAL values seen or set by the robot program.  There’s also a WebSockets plugin so you can use any language to talk to the simulated HAL.\\u003c/p\\u003e\\n\\u003cp\\u003eThe simulation HAL functionality is exposed via both the low level HAL functions and higher-level WPILib “Sim” classes.\\u003c/p\\u003e\\n\\u003cp\\u003eCode construction wise, yes, the typical approach is to write code into simulationPeriodic() functions that is the sim analogue of the “normal” robotPeriodic(), but that’s certainly not the only way to do it.  You could write separate classes, or even run a completely separate application and talk to the simulation HAL via websockets instead.\\u003c/p\\u003e\\n\\u003cp\\u003eYou can find more information in the WPILib docs under “Robot Simulation” regarding both physics simulation and unit testing.\\u003c/p\\u003e\\u003caside class=\\\"onebox allowlistedgeneric\\\" data-onebox-src=\\\"https://docs.wpilib.org/en/stable/docs/software/wpilib-tools/robot-simulation/index.html\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003cimg src=\\\"https://docs.wpilib.org/en/stable/_static/FIRSTicon_RGB_withTM.ico\\\" class=\\\"site-icon\\\" width=\\\"64\\\" height=\\\"64\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/wpilib-tools/robot-simulation/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003eFIRST Robotics Competition Documentation\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003cimg src=\\\"https://raw.githubusercontent.com/wpilibsuite/branding/main/png/wpilib-128.png\\\" class=\\\"thumbnail onebox-avatar\\\" width=\\\"128\\\" height=\\\"128\\\"\\u003e\\n\\n\\u003ch3\\u003e\\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/wpilib-tools/robot-simulation/index.html\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\"\\u003eRobot Simulation\\u003c/a\\u003e\\u003c/h3\\u003e\\n\\n  \\u003cp\\u003eIntroduction to Robot Simulation, Simulation Specific User Interface Elements, Glass Widgets, Widgets for the Command-Based Framework, The Field2d Widget, Plots, Physics Simulation with WPILib, Dev...\\u003c/p\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\",\"post_number\":4,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:16:36.040Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":37,\"reads\":484,\"readers_count\":483,\"score\":346.8,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Peter Johnson\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/wpilib-tools/robot-simulation/index.html\",\"internal\":false,\"reflection\":false,\"title\":\"Robot Simulation — FIRST Robotics Competition documentation\",\"clicks\":189}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":4}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":13575,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Volunteer WPILib Developer, CSA\"},\"post_url\":\"/t/simulation-for-development/420264/4\",\"custom_user_title\":\"Volunteer WPILib Developer, CSA\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":4}],\"current_user_reaction\":null,\"reaction_users_count\":4,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114084,\"name\":\"Ryan B. Harvey\",\"username\":\"CodeAndData\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/codeanddata/{size}/174352_2.png\",\"created_at\":\"2022-12-27T18:15:00.122Z\",\"cooked\":\"\\u003cp\\u003eI’m also interested in this. I’m new to mentoring FRC coding this year and less experienced with robotics-specific coding and with WPIlib, but this would be similar to other setups I’ve done on projects with third-party services that perform a portion of the work, and makes sense to me from a design perspective. Our team is working in Java, and I’d be happy to help with an effort in this direction if someone can provide support and review on the nuts and bolts in the robotics libraries.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:15:00.122Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":15,\"reads\":388,\"readers_count\":387,\"score\":167.6,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Ryan B. Harvey\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53753,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/simulation-for-development/420264/5\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114085,\"name\":null,\"username\":\"Starlight220\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/starlight220/{size}/150872_2.png\",\"created_at\":\"2022-12-27T18:19:31.537Z\",\"cooked\":\"\\u003cp\\u003eThe real hardware vs simulation distinction is done by what platform the code is being run on / compiled for. Hardware calls go to the real HAL on the RIO, and to the simulation HAL (ie HALSIM) on other platforms. The library handles all this under the hood, and exposes functions such as \\u003ccode\\u003eRobotBase.isSimulation()\\u003c/code\\u003e to check and methods that are run only in sim such as \\u003ccode\\u003esimulationPeriodic()\\u003c/code\\u003e for simulation-specific user code.\\u003c/p\\u003e\\n\\u003cp\\u003e\\u003ca href=\\\"https://docs.wpilib.org/en/latest/docs/software/wpilib-tools/robot-simulation/physics-sim.html\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ePhysics simulation classes\\u003c/a\\u003e such as \\u003ccode\\u003eElevatorSim\\u003c/code\\u003e use physical constants to simulate mechanism responses to applied voltage. These constants can be derived from CAD, determined using SysID (if the robot is already built), or set arbitrarily to reasonable values (the latter will require retuning of other constants once running on the real robot, as the simulation physics model wouldn’t be accurate).\\u003cbr\\u003e\\nThe responses from the physics simulation can be fed into \\u003ca href=\\\"https://docs.wpilib.org/en/latest/docs/software/wpilib-tools/robot-simulation/device-sim.html\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ehardware simulation classes\\u003c/a\\u003e that provide a way to set sensor values etc.\\u003cbr\\u003e\\nHardware simulation objects can also be used in \\u003ca href=\\\"https://docs.wpilib.org/en/latest/docs/software/wpilib-tools/robot-simulation/unit-testing.html\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eunit tests\\u003c/a\\u003e to query hardware state without adding a ton of getters to the tested code.\\u003c/p\\u003e\\n\\u003cp\\u003eThe rationale for having simulation-specific code in the same source set as “regular” code is that often said simulation-specific code needs access to subsystem internals and such.\\u003c/p\\u003e\",\"post_number\":6,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:19:31.537Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":8,\"reads\":372,\"readers_count\":371,\"score\":119.4,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":null,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.wpilib.org/en/latest/docs/software/wpilib-tools/robot-simulation/physics-sim.html\",\"internal\":false,\"reflection\":false,\"title\":\"Physics Simulation with WPILib — FIRST Robotics Competition documentation\",\"clicks\":21},{\"url\":\"https://docs.wpilib.org/en/latest/docs/software/wpilib-tools/robot-simulation/device-sim.html\",\"internal\":false,\"reflection\":false,\"title\":\"Device Simulation — FIRST Robotics Competition documentation\",\"clicks\":15},{\"url\":\"https://docs.wpilib.org/en/latest/docs/software/wpilib-tools/robot-simulation/unit-testing.html\",\"internal\":false,\"reflection\":false,\"title\":\"Unit Testing — FIRST Robotics Competition documentation\",\"clicks\":3}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":45763,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"6738a | ISR | WPILib\"},\"post_url\":\"/t/simulation-for-development/420264/6\",\"custom_user_title\":\"6738a | ISR | WPILib\",\"reactions\":[{\"id\":\"cry\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114086,\"name\":\"Thad House\",\"username\":\"Thad_House\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/t/a4c791/{size}.png\",\"created_at\":\"2022-12-27T18:19:57.552Z\",\"cooked\":\"\\u003cp\\u003eAs Peter said above, the simulation split is at the HAL layer. If you wanted to handle the HAL simulation layer completely separately, that is something that would work perfectly fine today. Its how the sim gui plugins work, but you don’t have to write it as a plugin to properly work. You could always just fire up another thread that only talks sim calls.\\u003c/p\\u003e\\n\\u003cp\\u003eIn general, the choice for the documentation and examples to combine the sim side and robot code side is out of convenience. Completely separating everything is complex, and while there are cases where it could be better, generally for most teams it seems like mixing the systems works well enough.\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:19:57.552Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":334,\"readers_count\":333,\"score\":81.8,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Thad House\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":16147,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"WPILib Dev | 2025 VOTY\"},\"post_url\":\"/t/simulation-for-development/420264/7\",\"custom_user_title\":\"WPILib Dev | 2025 VOTY\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114089,\"name\":\"joel truher\",\"username\":\"truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"created_at\":\"2022-12-27T18:27:30.611Z\",\"cooked\":\"\\u003cp\\u003eAh, Peter reminded me of another factor that I think dominates my thinking on this topic, which is that the students I work with are very much beginner programmers, so everything I do with them is optimized to be simple, making use of the plentiful examples in WPILib.  So the “typical approach” is good for that reason.\\u003c/p\\u003e\\n\\u003cp\\u003eSo I think if we were going to do anything else (e.g . the websockets approach), it would end up to be “mentor-ware”.  I’ve ruminated on that too: the field elements are mentor-built, so maybe the physics model could also be mentor-built, and deliver the value of simulation to the students without embroiling them in the complexities of supporting it.  But I dunno, I also really like the students to be able to understand \\u003cem\\u003eeverything\\u003c/em\\u003e that they touch, all the way to the metal.  And i think there are real issues there – how does closed-source CAN-based stuff work with the websockets approach?\\u003c/p\\u003e\\n\\u003cp\\u003eAnyway, still interested in exploring a more segmented approach, but i don’t think it’s easy. Maybe an off-season activity for summer 2023.\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:27:30.611Z\",\"reply_count\":1,\"reply_to_post_number\":4,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":310,\"readers_count\":309,\"score\":82.0,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"joel truher\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":13575,\"username\":\"Peter_Johnson\",\"name\":\"Peter Johnson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/peter_johnson/{size}/10417_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53190,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/simulation-for-development/420264/8\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114091,\"name\":\"Peter Johnson\",\"username\":\"Peter_Johnson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/peter_johnson/{size}/10417_2.png\",\"created_at\":\"2022-12-27T18:29:26.600Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"truher\\\" data-post=\\\"8\\\" data-topic=\\\"420264\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/truher/48/172222_2.png\\\" class=\\\"avatar\\\"\\u003e truher:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eAnd i think there are real issues there – how does closed-source \\u003cspan class=\\\"abbreviation\\\"\\u003eCAN\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Controller Area Network\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e-based stuff work with the websockets approach?\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003e\\u003cspan class=\\\"abbreviation\\\"\\u003eCAN\\u003ctemplate class=\\\"tooltiptext\\\" data-text=\\\"Controller Area Network\\\"\\u003e\\u003c/template\\u003e\\u003c/span\\u003e motor controllers use SimDevice to expose higher level functionality in simulation, and SimDevice is exposed via WebSockets as well.  Different motor controller vendors have different levels of simulation support, however.  You can easily see what’s exposed in SimDevice in the “Other Devices” window of the simulation GUI.\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:31:00.442Z\",\"reply_count\":0,\"reply_to_post_number\":8,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":264,\"readers_count\":263,\"score\":57.8,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Peter Johnson\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":13575,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Volunteer WPILib Developer, CSA\"},\"post_url\":\"/t/simulation-for-development/420264/9\",\"custom_user_title\":\"Volunteer WPILib Developer, CSA\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114095,\"name\":\"Aron Rubin\",\"username\":\"AronRubin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/aronrubin/{size}/180072_2.png\",\"created_at\":\"2022-12-27T18:38:47.876Z\",\"cooked\":\"\\u003cp\\u003eI think this is part of what has confused me so far. I entirely understand providing an escape hatch for the robot code to change function when running in simulation but the docs/examples would lead me to believe that it is the primary mode of operation.\\u003c/p\\u003e\\n\\u003cp\\u003eIt would help me a lot if there was a simple, but not empty, example that includes regular robot code that is largely unaware that it is running on real or simulated code and then a separate section of code that handles simulation. For my purposes, I would like that in C++ but I can handle Java as long as it aligns with the C++ calls. I appreciate that the examples are focused on single topics for when I am looking for a specific topic. However, it feels like there are no comprehensive examples that demonstrate making all these things work together.\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:38:47.876Z\",\"reply_count\":1,\"reply_to_post_number\":6,\"quote_count\":0,\"incoming_link_count\":12,\"reads\":264,\"readers_count\":263,\"score\":117.8,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Aron Rubin\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":45763,\"username\":\"Starlight220\",\"name\":null,\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/starlight220/{size}/150872_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":51509,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Maker, Mild-Tempered Scientist, Overly Seasoned Engineer\"},\"post_url\":\"/t/simulation-for-development/420264/10\",\"custom_user_title\":\"Maker, Mild-Tempered Scientist, Overly Seasoned Engineer\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114096,\"name\":\"Jonah Bonner\",\"username\":\"jonahb55\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jonahb55/{size}/194474_2.png\",\"created_at\":\"2022-12-27T18:42:09.561Z\",\"cooked\":\"\\u003cp\\u003eI’ll throw out another approach to simulation that 6328 has found to work well for us. We structure our subsystems to isolate hardware interaction to an “IO layer” with multiple implementations. This allows us to swap out real hardware for the WPILib physics sim classes while bypassing vendor libraries (or write multiple “real” implementations for robots with different hardware). The main control logic doesn’t need to know which IO implementation is being used. This structure also interfaces with our \\u003ca href=\\\"https://github.com/Mechanical-Advantage/AdvantageKit\\\"\\u003eAdvantageKit\\u003c/a\\u003e logging framework to enable more advanced features, but we started using IO layers for simulation before AdvantageKit existed. More details here:\\u003c/p\\u003e\\n\\u003caside class=\\\"quote quote-modified\\\" data-post=\\\"109\\\" data-topic=\\\"398645\\\"\\u003e\\n  \\u003cdiv class=\\\"title\\\"\\u003e\\n    \\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n    \\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/jonahb55/48/194474_2.png\\\" class=\\\"avatar\\\"\\u003e\\n    \\u003ca href=\\\"https://www.chiefdelphi.com/t/frc-6328-mechanical-advantage-2022-build-thread/398645/109\\\"\\u003eFRC 6328 Mechanical Advantage 2022 Build Thread\\u003c/a\\u003e \\u003ca class=\\\"badge-category__wrapper \\\" href=\\\"/c/first/open-alliance/89\\\"\\u003e\\u003cspan data-category-id=\\\"89\\\" style=\\\"--category-badge-color: #0088CC; --category-badge-text-color: #FFFFFF; --parent-category-badge-color: #F7941D;\\\" data-parent-category-id=\\\"7\\\" data-drop-close=\\\"true\\\" class=\\\"badge-category --has-parent\\\"\\u003e\\u003cspan class=\\\"badge-category__name\\\"\\u003eOpen Alliance\\u003c/span\\u003e\\u003c/span\\u003e\\u003c/a\\u003e\\n  \\u003c/div\\u003e\\n  \\u003cblockquote\\u003e\\n    There are two parts to our simulation system — the robot code (which runs the physics sim) and the visualizer (the field diagram and graphs). I’ll also include \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/wpilib-tools/robot-simulation/index.html\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ethis link\\u003c/a\\u003e to WPILib’s simulation tutorials. It’s a great resource for teams just looking to get started with simulation. With that said, here’s how we do things: \\nFor the robot code, we structure each of our subsystems such that all of the hardware interaction (the “IO layer”) is isolated from the main control logic. This is key in allowi…\\n  \\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\",\"post_number\":11,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:42:09.561Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":14,\"reads\":259,\"readers_count\":258,\"score\":266.8,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Jonah Bonner\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/Mechanical-Advantage/AdvantageKit\",\"internal\":false,\"reflection\":false,\"title\":\"GitHub - Mechanical-Advantage/AdvantageKit: Monorepo for robot framework and tools\",\"clicks\":17},{\"url\":\"https://www.chiefdelphi.com/t/frc-6328-mechanical-advantage-2022-build-thread/398645/109\",\"internal\":true,\"reflection\":false,\"title\":\"FRC 6328 Mechanical Advantage 2022 Build Thread\",\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":10}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44471,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"6328M/WPILib\"},\"post_url\":\"/t/simulation-for-development/420264/11\",\"custom_user_title\":\"6328M/WPILib\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":9},{\"id\":\"point_up\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":10,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114098,\"name\":null,\"username\":\"anon37142155\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/f08c70/{size}.png\",\"created_at\":\"2022-12-27T18:47:09.259Z\",\"cooked\":\"\\u003cp\\u003eI’ll also say that our team has also switched to AdvantageKit and found that it really does make setting up simulation a lot easier than before, since it’s as easy as just adding another IO layer. Another advantage of using AdvantageKit is that 6328 has made an amazing viewer application (Advantage Scope, although it doesn’t require the use of AdvantageKit).\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:47:28.169Z\",\"reply_count\":0,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":235,\"readers_count\":234,\"score\":87.0,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":null,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":44471,\"username\":\"jonahb55\",\"name\":\"Jonah Bonner\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jonahb55/{size}/194474_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":51083,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"post_url\":\"/t/simulation-for-development/420264/12\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114099,\"name\":\"Peter Johnson\",\"username\":\"Peter_Johnson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/peter_johnson/{size}/10417_2.png\",\"created_at\":\"2022-12-27T18:47:49.273Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"AronRubin\\\" data-post=\\\"10\\\" data-topic=\\\"420264\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/aronrubin/48/180072_2.png\\\" class=\\\"avatar\\\"\\u003e AronRubin:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eI appreciate that the examples are focused on single topics for when I am looking for a specific topic. However, it feels like there are no comprehensive examples that demonstrate making all these things work together.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eThis is an active area of discussion and we welcome contributions.  We currently have 2 or 3 “whole robot” programs, and far too many tiny examples.  See \\u003ca href=\\\"https://github.com/wpilibsuite/allwpilib/issues/4836\\\" class=\\\"inline-onebox\\\"\\u003eExamples consolidation · Issue #4836 · wpilibsuite/allwpilib · GitHub\\u003c/a\\u003e for some discussion on this.\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:47:49.273Z\",\"reply_count\":0,\"reply_to_post_number\":10,\"quote_count\":1,\"incoming_link_count\":3,\"reads\":232,\"readers_count\":231,\"score\":76.4,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Peter Johnson\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/wpilibsuite/allwpilib/issues/4836\",\"internal\":false,\"reflection\":false,\"title\":\"Examples consolidation · Issue #4836 · wpilibsuite/allwpilib · GitHub\",\"clicks\":11}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":13575,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Volunteer WPILib Developer, CSA\"},\"post_url\":\"/t/simulation-for-development/420264/13\",\"custom_user_title\":\"Volunteer WPILib Developer, CSA\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114101,\"name\":\"Aron Rubin\",\"username\":\"AronRubin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/aronrubin/{size}/180072_2.png\",\"created_at\":\"2022-12-27T18:48:52.595Z\",\"cooked\":\"\\u003cblockquote\\u003e\\n\\u003cp\\u003eWe structure our subsystems to isolate hardware interaction to an “IO layer” with multiple implementations.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eThat is great. However, it feels like a HAL on HAL approach should not be necessary.\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:48:52.595Z\",\"reply_count\":1,\"reply_to_post_number\":11,\"quote_count\":0,\"incoming_link_count\":5,\"reads\":221,\"readers_count\":220,\"score\":74.2,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Aron Rubin\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":44471,\"username\":\"jonahb55\",\"name\":\"Jonah Bonner\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jonahb55/{size}/194474_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":51509,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Maker, Mild-Tempered Scientist, Overly Seasoned Engineer\"},\"post_url\":\"/t/simulation-for-development/420264/14\",\"custom_user_title\":\"Maker, Mild-Tempered Scientist, Overly Seasoned Engineer\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114102,\"name\":\"Jonah Bonner\",\"username\":\"jonahb55\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jonahb55/{size}/194474_2.png\",\"created_at\":\"2022-12-27T18:56:25.305Z\",\"cooked\":\"\\u003cp\\u003eYes, fundamentally the HAL and our IO layers have similar goals. However, we’ve found it easier to deal with small interfaces for each subsystem that we have full control over, and it clearly enforces a separation in our code between control logic and “hardware” (though this isn’t impossible with the HAL approach). The IO layers are also more flexible when we need more than one “real” or “sim” implementation. Ultimately either approach is reasonable, so it mostly comes down to personal preference.\\u003c/p\\u003e\\n\\u003cp\\u003e(Also we prefer not relying on vendors to provide robust simulation support.)\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T18:57:55.896Z\",\"reply_count\":1,\"reply_to_post_number\":14,\"quote_count\":0,\"incoming_link_count\":3,\"reads\":205,\"readers_count\":204,\"score\":61.0,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Jonah Bonner\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":51509,\"username\":\"AronRubin\",\"name\":\"Aron Rubin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/aronrubin/{size}/180072_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44471,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"6328M/WPILib\"},\"post_url\":\"/t/simulation-for-development/420264/15\",\"custom_user_title\":\"6328M/WPILib\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114105,\"name\":\"Aron Rubin\",\"username\":\"AronRubin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/aronrubin/{size}/180072_2.png\",\"created_at\":\"2022-12-27T19:04:19.061Z\",\"cooked\":\"\\u003cp\\u003eI would encourage both to exist but not overlap.\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T19:04:19.061Z\",\"reply_count\":1,\"reply_to_post_number\":15,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":197,\"readers_count\":196,\"score\":54.4,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Aron Rubin\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":44471,\"username\":\"jonahb55\",\"name\":\"Jonah Bonner\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jonahb55/{size}/194474_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":51509,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Maker, Mild-Tempered Scientist, Overly Seasoned Engineer\"},\"post_url\":\"/t/simulation-for-development/420264/16\",\"custom_user_title\":\"Maker, Mild-Tempered Scientist, Overly Seasoned Engineer\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114106,\"name\":\"Jonah Bonner\",\"username\":\"jonahb55\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jonahb55/{size}/194474_2.png\",\"created_at\":\"2022-12-27T19:06:33.128Z\",\"cooked\":\"\\u003cp\\u003eThat is indeed the approach we take. We don’t use the simulated HAL for subsystems at all.\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-27T19:06:33.128Z\",\"reply_count\":0,\"reply_to_post_number\":16,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":195,\"readers_count\":194,\"score\":49.0,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Jonah Bonner\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":51509,\"username\":\"AronRubin\",\"name\":\"Aron Rubin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/aronrubin/{size}/180072_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":44471,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"6328M/WPILib\"},\"post_url\":\"/t/simulation-for-development/420264/17\",\"custom_user_title\":\"6328M/WPILib\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114235,\"name\":\"retrodaredevil\",\"username\":\"retrodaredevil\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/retrodaredevil/{size}/111923_2.png\",\"created_at\":\"2022-12-28T06:39:10.217Z\",\"cooked\":\"\\u003cp\\u003eI wanted to throw the solution that we used in 2019 and 2020, although the 2019-sim was a rewrite and the 2020 code never saw an actual field. \\u003ca href=\\\"https://github.com/frc1444/robot2019-sim\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eGitHub - frc1444/robot2019-sim: Our robot code from 2019 ported to robo-sim\\u003c/a\\u003e and \\u003ca href=\\\"https://github.com/frc1444/robot2020\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eGitHub - frc1444/robot2020: Our robot code for Infinite Recharge that utilizes robo-sim\\u003c/a\\u003e. Both used a library I developed called \\u003ca href=\\\"https://github.com/frc1444/robo-sim\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eGitHub - frc1444/robo-sim: A 2D simulation and abstraction of WPILib code for FRC\\u003c/a\\u003e.\\u003c/p\\u003e\\n\\u003cp\\u003eThe main idea is the same as \\u003ca class=\\\"mention\\\" href=\\\"/u/jonahb55\\\"\\u003e@jonahb55\\u003c/a\\u003e talked about in their post, although I think we did the implementation a bit different. We ended up using multiple gradle modules. One module had code that ONLY ran on the robot (\\u003cstrong\\u003ewpi\\u003c/strong\\u003e), which imported WPILib code, one module had the core of our code that ran in both the simulation and on the robot (\\u003cstrong\\u003ecore\\u003c/strong\\u003e), and one module was only for the simulation (\\u003cstrong\\u003egdx\\u003c/strong\\u003e). We used lots of dependency inversion since the \\u003cstrong\\u003ewpi\\u003c/strong\\u003e module imported the \\u003cstrong\\u003ecore\\u003c/strong\\u003e module and the \\u003cstrong\\u003egdx\\u003c/strong\\u003e module also imported the \\u003cstrong\\u003ecore\\u003c/strong\\u003e module.\\u003c/p\\u003e\\n\\u003cp\\u003eIn my opinion, the end result was a lot cleaner than global simulation state and none of the simulation code had references to things like MotorControllers. However, I was the only person on the team that understood what the code was doing and it’s really hard to teach new students to create an interface (inside \\u003cstrong\\u003ecore\\u003c/strong\\u003e), then create two separate implementations of said interface (in \\u003cstrong\\u003ewpi\\u003c/strong\\u003e and \\u003cstrong\\u003egdx\\u003c/strong\\u003e). It was an elegant design, but teaching it was difficult.\\u003c/p\\u003e\\n\\u003cp\\u003eI personally don’t really like the simulation approach that WPILib takes, because it seems to combine simulation code and non-simulation code side by side with if statements, but I don’t have a better solution to recommend that’s easy to teach. Since I couldn’t teach it and there wasn’t documentation for it, we didn’t use my simulation stuff in 2022 since college was keeping me busy.\\u003c/p\\u003e\\n\\u003cp\\u003eHere’s the thread from two years ago: \\u003ca href=\\\"https://www.chiefdelphi.com/t/robosim-a-libgdx-robot-code-simulator/368034\\\" class=\\\"inline-onebox\\\"\\u003eRoboSim: A LibGDX robot code simulator\\u003c/a\\u003e\\u003c/p\\u003e\\n\\u003cp\\u003eI think in 2020 our code hit on some of your points. We simulated vision data in a very similar manner that the robot reported data to us and since there wasn’t global state everywhere, many unit tests were possible.\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-28T06:40:39.083Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":9,\"reads\":189,\"readers_count\":188,\"score\":82.8,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"retrodaredevil\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/robosim-a-libgdx-robot-code-simulator/368034\",\"internal\":true,\"reflection\":false,\"title\":\"RoboSim: A LibGDX robot code simulator\",\"clicks\":6},{\"url\":\"https://github.com/frc1444/robo-sim\",\"internal\":false,\"reflection\":false,\"title\":\"GitHub - frc1444/robo-sim: A 2D simulation and abstraction of WPILib code for FRC\",\"clicks\":6},{\"url\":\"https://github.com/frc1444/robot2019-sim\",\"internal\":false,\"reflection\":false,\"title\":\"GitHub - frc1444/robot2019-sim: Our robot code from 2019 ported to robo-sim\",\"clicks\":5},{\"url\":\"https://github.com/frc1444/robot2020\",\"internal\":false,\"reflection\":false,\"title\":\"GitHub - frc1444/robot2020: Our robot code for Infinite Recharge that utilizes robo-sim\",\"clicks\":3}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":32957,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"1444 | Java Programmer \"},\"post_url\":\"/t/simulation-for-development/420264/18\",\"custom_user_title\":\"1444 | Java Programmer \",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114258,\"name\":\"Chris Gerth\",\"username\":\"gerthworm\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gerthworm/{size}/268658_2.png\",\"created_at\":\"2022-12-28T14:06:46.241Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group quote-modified\\\" data-username=\\\"AronRubin\\\" data-post=\\\"1\\\" data-topic=\\\"420264\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/aronrubin/48/180072_2.png\\\" class=\\\"avatar\\\"\\u003e AronRubin:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eGoals …\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eOne thing I find useful is to break down “Simulation Facilities” into its components. This should in turn help understand the best way to achieve the goals.\\u003c/p\\u003e\\n\\u003cp\\u003eStarting with the idea that “Simulation” equals “get robot-like functionality without a robot”, there’s a few steps involved:\\u003c/p\\u003e\\n\\u003ch2\\u003e\\u003ca name=\\\"cross-compiling-1\\\" class=\\\"anchor\\\" href=\\\"#cross-compiling-1\\\"\\u003e\\u003c/a\\u003eCross-compiling\\u003c/h2\\u003e\\n\\u003cp\\u003eSince the robot isn’t present, presumably, you need the code you wrote to be built so it can run on a different CPU architecture.\\u003c/p\\u003e\\n\\u003cp\\u003eWPILib fully supports this.\\u003c/p\\u003e\\n\\u003ch2\\u003e\\u003ca name=\\\"io-stubbing-2\\\" class=\\\"anchor\\\" href=\\\"#io-stubbing-2\\\"\\u003e\\u003c/a\\u003eIO Stubbing\\u003c/h2\\u003e\\n\\u003cp\\u003ePresumably, the robot-specific IO is not present. This means the code, at some point, will reference hardware which doesn’t exist, and break in one way or another.\\u003c/p\\u003e\\n\\u003cp\\u003eA minimum viable product involves “stubbing out” all IO related functionality, so it simply returns “0” or “happy”. This will allow the code to at least start to execute on the alternate target.\\u003c/p\\u003e\\n\\u003cp\\u003eThis step is often referred to as choosing your “boundary diagram” for simulation. That is to say - choosing what’s in scope to be “same code as robot”, and what’s “sim-specific functionality”. The end usage goals are the primary input to determining what the appropriate boundary diagram(s) are.\\u003c/p\\u003e\\n\\u003cp\\u003eWPILib supports this at the HAL layer, and at some other “engineering units” sim layers, as Peter mentioned. Other teams have picked slightly different layers. Again, the correct answer here is highly dependent on end use case.\\u003c/p\\u003e\\n\\u003ch2\\u003e\\u003ca name=\\\"io-simulation-open-loop-3\\\" class=\\\"anchor\\\" href=\\\"#io-simulation-open-loop-3\\\"\\u003e\\u003c/a\\u003eIO Simulation - Open Loop\\u003c/h2\\u003e\\n\\u003cp\\u003eRather than simply stubbing IO, the ones that you care about might need to be manipulated. This is purely for functionality checkout - IE, get certain lines of code to run. Inputs are manually set, outputs are manually checked.\\u003c/p\\u003e\\n\\u003cp\\u003eA simple unit test infrastructure could provide the input and check the outputs. However, all testcases would still be “hand-maintained” to ensure they represent realistic-enough IO to test the right lines of code. And, again, depending on the goals, this may be enough to achieve them.\\u003c/p\\u003e\\n\\u003cp\\u003eWPILib supports this through the same layers mentioned above, along with build infrastructure to define and run unit test cases.\\u003c/p\\u003e\\n\\u003ch2\\u003e\\u003ca name=\\\"io-simulation-representative-closed-loop-4\\\" class=\\\"anchor\\\" href=\\\"#io-simulation-representative-closed-loop-4\\\"\\u003e\\u003c/a\\u003eIO Simulation - “Representative” Closed Loop\\u003c/h2\\u003e\\n\\u003cp\\u003eRather than manually maintaining inputs and outputs which are just “good enough to hit the right line of code”, you could instead write down simple relationships between how you expect your inputs to change when your outputs have certain values. This isn’t yet modeling exact physics, but rather reducing the manual developer burden to maintain true “open-loop” test cases.\\u003c/p\\u003e\\n\\u003cp\\u003eIt could be as simple as “when voltage is \\u0026gt; 0, speed should increase”. Again, the goal here is simply to get the right lines of code activated, while minimizing the developer burden.\\u003c/p\\u003e\\n\\u003cp\\u003eWPILib supports sim-specific code entrypoints where you can write code to achieve this functionality. It also supports some device simulation classes that add in these behaviors.\\u003c/p\\u003e\\n\\u003ch2\\u003e\\u003ca name=\\\"physics-accurate-closed-loop-5\\\" class=\\\"anchor\\\" href=\\\"#physics-accurate-closed-loop-5\\\"\\u003e\\u003c/a\\u003ePhysics-Accurate Closed Loop\\u003c/h2\\u003e\\n\\u003cp\\u003eA further, orthogonal step is to make that sim-specific code not just “good enough to get the right lines of code activated”, but also to ensure the code output → code input relationships are \\u003cem\\u003ephysics accurate\\u003c/em\\u003e. That is to say - they accurately model your specific robot’s actual behavior.\\u003c/p\\u003e\\n\\u003cp\\u003eThis is a big step forward - it has very little to do with anything done previously, and is much more dependent on your ability to model a physical system accurately. It can add a lot in terms of checking alternatives in designs, but (in my experience) does fairly little for your ability to test your software well.\\u003c/p\\u003e\\n\\u003cp\\u003eWPILib’s mechanism simulation classes, when paired with proper data capture and analysis, can help achieve this.\\u003c/p\\u003e\\n\\u003ch1\\u003e\\u003ca name=\\\"my-punchline-6\\\" class=\\\"anchor\\\" href=\\\"#my-punchline-6\\\"\\u003e\\u003c/a\\u003eMy Punchline\\u003c/h1\\u003e\\n\\u003cp\\u003eWPILib “supports simulation” to the extent that most of the key building blocks to physically model a robot+software system in a desktop environment are present. However, the onus is still on end teams to stitch them together in a way that achieves their goals.\\u003c/p\\u003e\\n\\u003ch1\\u003e\\u003ca name=\\\"goals-analysis-7\\\" class=\\\"anchor\\\" href=\\\"#goals-analysis-7\\\"\\u003e\\u003c/a\\u003eGoals Analysis\\u003c/h1\\u003e\\n\\u003cp\\u003eHere’s some of my thoughts on the goals you provided, at least as I understand them:\\u003c/p\\u003e\\n\\u003cp\\u003e“Unit testing” is actually your easiest goal to achieve. Pre-integration collaboration would be the next easiest. They require cross-compiling and poking at certain IO points, but neither \\u003cem\\u003erequires\\u003c/em\\u003e closed-loop behavior to start.\\u003c/p\\u003e\\n\\u003cp\\u003eWhole-system development (implying robot+software) and vision system testing would be the next hardest. In addition to some potentially-custom bits for the vision side, both seem to need some level of closed-loop modeling of robot behavior.\\u003c/p\\u003e\\n\\u003cp\\u003eAnalysis-of-alternatives is the most challenging. Not only do you have to have closed-loop models, but you have to \\u003cem\\u003etrust\\u003c/em\\u003e their accuracy enough to drive design decisions.\\u003c/p\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-28T14:08:10.725Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":1,\"incoming_link_count\":9,\"reads\":194,\"readers_count\":193,\"score\":188.8,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Chris Gerth\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":7}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24617,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/simulation-for-development/420264/19\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":7}],\"current_user_reaction\":null,\"reaction_users_count\":7,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3114519,\"name\":\"Dustin Spicuzza\",\"username\":\"virtuald\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/virtuald/{size}/65268_2.png\",\"created_at\":\"2022-12-29T07:46:26.417Z\",\"cooked\":\"\\u003cp\\u003eRobotPy has supported robot simulation in some form since 2014, so it’s a topic I care about a lot.\\u003c/p\\u003e\\n\\u003cp\\u003eI think the way that HAL and SimDevices et al is implemented is a pretty reasonable approach, it’s just not documented very well. Once you figure it out, it makes a lot of sense.\\u003c/p\\u003e\\n\\u003cp\\u003eHowever, I really don’t like having \\u003ccode\\u003esimulationPeriodic\\u003c/code\\u003e and mixing your simulation/real code – and even after moving to wrapping WPILibC I’ve hidden it away from users. Instead, in RobotPy we have a \\u003ccode\\u003ephysics.py\\u003c/code\\u003e which is only loaded in simulation. A very simple example of this sort of thing is in our examples repo: \\u003ca href=\\\"https://github.com/robotpy/examples/tree/main/physics-4wheel/src\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eexamples/physics-4wheel/src at main · robotpy/examples · GitHub\\u003c/a\\u003e . A more involved example would be my team’s 2022 code (\\u003ca href=\\\"https://github.com/frc6367/2022-robot/tree/main/robot\\\" class=\\\"inline-onebox\\\" rel=\\\"noopener nofollow ugc\\\"\\u003e2022-robot/robot at main · frc6367/2022-robot · GitHub\\u003c/a\\u003e).\\u003c/p\\u003e\\n\\u003cp\\u003eI believe I advocated for this type of split instead when simulationPeriodic et al was introduced, but there’s a number of factors that make it a lot harder to do in C++/Java (particularly C++).\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":27,\"updated_at\":\"2022-12-29T07:49:03.900Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":4,\"reads\":169,\"readers_count\":168,\"score\":83.8,\"yours\":false,\"topic_id\":420264,\"topic_slug\":\"simulation-for-development\",\"display_username\":\"Dustin Spicuzza\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/robotpy/examples/tree/main/physics-4wheel/src\",\"internal\":false,\"reflection\":false,\"title\":\"examples/physics-4wheel/src at main · robotpy/examples · GitHub\",\"clicks\":5},{\"url\":\"https://github.com/frc6367/2022-robot/tree/main/robot\",\"internal\":false,\"reflection\":false,\"title\":\"2022-robot/robot at main · frc6367/2022-robot · GitHub\",\"clicks\":1}],\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":11063,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"RobotPy Guy, WPILib Developer\"},\"post_url\":\"/t/simulation-for-development/420264/20\",\"custom_user_title\":\"RobotPy Guy, WPILib Developer\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3114075,3114079,3114081,3114083,3114084,3114085,3114086,3114089,3114091,3114095,3114096,3114098,3114099,3114101,3114102,3114105,3114106,3114235,3114258,3114519,3114520,3114589,3114827,3114829,3114851,3114852,3270420]},\"timeline_lookup\":[[1,1019],[20,1018],[22,1017],[23,1016],[27,651]],\"tags\":[\"simulation\",\"simulator\"],\"tags_descriptions\":{},\"fancy_title\":\"Simulation for Development\",\"id\":420264,\"title\":\"Simulation for Development\",\"posts_count\":27,\"created_at\":\"2022-12-27T17:53:16.245Z\",\"views\":4365,\"reply_count\":14,\"like_count\":38,\"last_posted_at\":\"2023-12-30T22:47:43.646Z\",\"visible\":true,\"closed\":true,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"simulation-for-development\",\"category_id\":30,\"word_count\":4188,\"deleted_at\":null,\"user_id\":51509,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_420264\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":27,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":null,\"message_bus_last_id\":0,\"participant_count\":12,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":51509,\"username\":\"AronRubin\",\"name\":\"Aron Rubin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/aronrubin/{size}/180072_2.png\",\"post_count\":7,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":11063,\"username\":\"virtuald\",\"name\":\"Dustin Spicuzza\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/virtuald/{size}/65268_2.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":44471,\"username\":\"jonahb55\",\"name\":\"Jonah Bonner\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/jonahb55/{size}/194474_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":13575,\"username\":\"Peter_Johnson\",\"name\":\"Peter Johnson\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/peter_johnson/{size}/10417_2.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":53190,\"username\":\"truher\",\"name\":\"joel truher\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/truher/{size}/172222_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":32957,\"username\":\"retrodaredevil\",\"name\":\"retrodaredevil\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/retrodaredevil/{size}/111923_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":24617,\"username\":\"gerthworm\",\"name\":\"Chris Gerth\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/gerthworm/{size}/268658_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":45763,\"username\":\"Starlight220\",\"name\":null,\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/starlight220/{size}/150872_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":51083,\"username\":\"anon37142155\",\"name\":null,\"avatar_template\":\"/letter_avatar_proxy/v4/letter/a/f08c70/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":16147,\"username\":\"Thad_House\",\"name\":\"Thad House\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/t/a4c791/{size}.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":26269,\"username\":\"TytanRock\",\"name\":\"Cory\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/tytanrock/{size}/167849_2.png\",\"post_count\":1,\"primary_group_name\":\"CTRE\",\"flair_name\":\"CTRE\",\"flair_url\":\"/uploads/default/original/3X/1/b/1bd2b430e1bb6427d1c6504ff6abcd31de851a6d.png\",\"flair_color\":\"\",\"flair_bg_color\":\"\",\"flair_group_id\":57,\"trust_level\":2},{\"id\":53753,\"username\":\"CodeAndData\",\"name\":\"Ryan B. Harvey\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/codeanddata/{size}/174352_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":51509,\"username\":\"AronRubin\",\"name\":\"Aron Rubin\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/aronrubin/{size}/180072_2.png\"},\"last_poster\":{\"id\":-1,\"username\":\"system\",\"name\":\"system\",\"avatar_template\":\"/uploads/default/original/4X/9/3/2/93234578e69f55873c63fc00fe2d0d85f23bce55.png\"},\"links\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/wpilib-tools/robot-simulation/index.html\",\"title\":\"Robot Simulation — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":189,\"user_id\":13575,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.com/truher/swerve-sim\",\"title\":\"GitHub - truher/swerve-sim: Simple swerve drivetrain simulation intended for navigation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":164,\"user_id\":53190,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.wpilib.org/en/latest/docs/software/wpilib-tools/robot-simulation/physics-sim.html\",\"title\":\"Physics Simulation with WPILib — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":21,\"user_id\":45763,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.com/Mechanical-Advantage/AdvantageKit\",\"title\":\"GitHub - Mechanical-Advantage/AdvantageKit: Monorepo for robot framework and tools\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":17,\"user_id\":44471,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.wpilib.org/en/latest/docs/software/wpilib-tools/robot-simulation/device-sim.html\",\"title\":\"Device Simulation — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":15,\"user_id\":45763,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.com/wpilibsuite/allwpilib/issues/4836\",\"title\":\"Examples consolidation · Issue #4836 · wpilibsuite/allwpilib · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":11,\"user_id\":13575,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://www.chiefdelphi.com/t/robosim-a-libgdx-robot-code-simulator/368034\",\"title\":\"RoboSim: A LibGDX robot code simulator\",\"internal\":true,\"attachment\":false,\"reflection\":false,\"clicks\":6,\"user_id\":32957,\"domain\":\"www.chiefdelphi.com\",\"root_domain\":\"chiefdelphi.com\"},{\"url\":\"https://github.com/De-La-Salle-Robotics/Robot-2022/blob/ba1d24d0de74d80ffac1d9b2d25ff4b90c9d73c6/src/test/java/BallHandlingTests.java#L125\",\"title\":\"Robot-2022/BallHandlingTests.java at ba1d24d0de74d80ffac1d9b2d25ff4b90c9d73c6 · De-La-Salle-Robotics/Robot-2022 · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":6,\"user_id\":26269,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/frc1444/robo-sim\",\"title\":\"GitHub - frc1444/robo-sim: A 2D simulation and abstraction of WPILib code for FRC\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":6,\"user_id\":32957,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/frc1444/robot2019-sim\",\"title\":\"GitHub - frc1444/robot2019-sim: Our robot code from 2019 ported to robo-sim\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":5,\"user_id\":32957,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/robotpy/examples/tree/main/physics-4wheel/src\",\"title\":\"examples/physics-4wheel/src at main · robotpy/examples · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":5,\"user_id\":11063,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.wpilib.org/en/latest/docs/software/wpilib-tools/robot-simulation/unit-testing.html\",\"title\":\"Unit Testing — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":3,\"user_id\":45763,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.com/frc1444/robot2020\",\"title\":\"GitHub - frc1444/robot2020: Our robot code for Infinite Recharge that utilizes robo-sim\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":3,\"user_id\":32957,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/frc6367/2022-robot/tree/main/robot\",\"title\":\"2022-robot/robot at main · frc6367/2022-robot · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":11063,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://github.com/adafruit/Adafruit_BusIO\",\"title\":\"GitHub - adafruit/Adafruit_BusIO: Arduino library for I2C \\u0026 SPI abstractions\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":51509,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://robotpy.readthedocs.io/projects/hal/en/latest/hal/SimDevice.html\",\"title\":\"SimDevice — RobotPy HAL 2023.0.0b7 documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":1,\"user_id\":11063,\"domain\":\"robotpy.readthedocs.io\",\"root_domain\":\"robotpy.readthedocs.io\"}]},\"bookmarks\":[]}"}
