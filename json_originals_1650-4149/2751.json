{"data":"{\"post_stream\":{\"posts\":[{\"id\":3570093,\"name\":\"Ed Peters\",\"username\":\"epeters1111\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/epeters1111/{size}/182731_2.png\",\"created_at\":\"2025-03-27T15:10:20.851Z\",\"cooked\":\"\\u003cp\\u003eMy team has been learning more this year about CommandScheduler and the interplay initialize and execute methods. We suspect (without being 100% convinced) that we have had some “off by one” errors where a command’s execute method runs for one cycle more or less than it should.\\u003c/p\\u003e\\n\\u003cp\\u003eOur current approach is:\\u003c/p\\u003e\\n\\u003cp\\u003eInitialize is limited to setting up fields of the Command itself (reading current state, resetting timers, etc.); no commands to motors\\u003c/p\\u003e\\n\\u003cp\\u003eExecute “does the thing”: it computes new state for motors based on current sensor values and tells the subsystem what it should be\\u003c/p\\u003e\\n\\u003cp\\u003eEnd will put the relevant subsystem(s) in a safe state telling an elevator/arm to hold still where it’s landed, etc.\\u003c/p\\u003e\\n\\u003cp\\u003ePeriodic methods on subsystems take the state derived by commands and actually apply it to the motors\\u003c/p\\u003e\\n\\u003cp\\u003eSo, for example with our drive - an auto-navigation command would have:\\u003c/p\\u003e\\n\\u003cul\\u003e\\n\\u003cli\\u003e\\u003ccode\\u003eCommand.initialize\\u003c/code\\u003e - calculate target pose and start a timer running\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ccode\\u003eCommand.execute\\u003c/code\\u003e - calculate next chassis speeds and send to drive subsystem\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ccode\\u003eCommand.end\\u003c/code\\u003e - tell drive to stop\\u003c/li\\u003e\\n\\u003cli\\u003e\\u003ccode\\u003eSubsystem.periodic\\u003c/code\\u003e - convert chassis speeds to module states and apply motor updates\\u003c/li\\u003e\\n\\u003c/ul\\u003e\\n\\u003cp\\u003eDoes this seem reasonable? Is there any good guidance on what kinds of activity should be embedded in a Command’s initialize/execute/end methods, versus the subsystem’s periodic method?\\u003c/p\\u003e\",\"post_number\":1,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-27T15:10:20.851Z\",\"reply_count\":0,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":20,\"reads\":356,\"readers_count\":355,\"score\":171.2,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Ed Peters\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":56650,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/1\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null,\"can_vote\":false},{\"id\":3570104,\"name\":\"Elijah Beard\",\"username\":\"ebear11\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/439d5e/{size}.png\",\"created_at\":\"2025-03-27T15:15:03.734Z\",\"cooked\":\"\\u003cp\\u003eIdeally, you only want things like updating dashboard values in a subsystem’s periodic loop. At least, this is the approach our team has used. There are some exceptions we have made, but those are more of a “we ran out of time and need a fast way to do X” rather than a “Good Way to do X.”\\u003c/p\\u003e\",\"post_number\":2,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-27T15:15:03.734Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":306,\"readers_count\":305,\"score\":146.2,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Elijah Beard\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":56380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5402 Programming M̶e̶n̶t̶o̶r̶ Advisor\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/2\",\"custom_user_title\":\"5402 Programming M̶e̶n̶t̶o̶r̶ Advisor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":3}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3570110,\"name\":\"Ed Peters\",\"username\":\"epeters1111\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/epeters1111/{size}/182731_2.png\",\"created_at\":\"2025-03-27T15:19:10.157Z\",\"cooked\":\"\\u003cblockquote\\u003e\\n\\u003cp\\u003eyou only want things like updating dashboard values in a subsystem’s periodic loop\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eThis is what we’re realizing this year, and will have to change for next year. We went with the current approach when we ran into motor controller timeouts because we weren’t sending updates each frame. But we’re realizing it was a little misguided.\\u003c/p\\u003e\",\"post_number\":3,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-27T15:20:23.618Z\",\"reply_count\":0,\"reply_to_post_number\":2,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":287,\"readers_count\":286,\"score\":62.4,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Ed Peters\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":56380,\"username\":\"ebear11\",\"name\":\"Elijah Beard\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/439d5e/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":56650,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/3\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3570238,\"name\":\"Paul Rensing\",\"username\":\"prensing\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/prensing/{size}/65820_2.png\",\"created_at\":\"2025-03-27T17:23:26.242Z\",\"cooked\":\"\\u003cp\\u003eI am sorry, but “only want updating dashboard in periodic” is a design choice.\\u003c/p\\u003e\\n\\u003cp\\u003eIt is not incorrect to use periodic() to implement (for instance) a state machine which handles the motors etc, and only have commands which set the desired state of the subsystem. Both can work fine, and they have their strengths and weaknesses.  You do need to be consistent with a subsystem and the commands which touch it, but different subsystems can be programmed differently (as long as the people can remember the details \\u003cimg src=\\\"https://www.chiefdelphi.com/images/emoji/google/wink.png?v=12\\\" title=\\\":wink:\\\" class=\\\"emoji\\\" alt=\\\":wink:\\\" loading=\\\"lazy\\\" width=\\\"20\\\" height=\\\"20\\\"\\u003e .\\u003c/p\\u003e\",\"post_number\":4,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-27T17:23:26.242Z\",\"reply_count\":2,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":245,\"readers_count\":244,\"score\":184.0,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Paul Rensing\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":8}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":25118,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"FRC 2877 LigerBots Mentor\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/4\",\"custom_user_title\":\"FRC 2877 LigerBots Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":8}],\"current_user_reaction\":null,\"reaction_users_count\":8,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3570243,\"name\":\"Alex\",\"username\":\"legoguy1000\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/legoguy1000/{size}/256261_2.png\",\"created_at\":\"2025-03-27T17:28:32.482Z\",\"cooked\":\"\\u003cp\\u003eYou’re also missing the \\u003ccode\\u003eisFinished\\u003c/code\\u003e method to check if the command should end. Also u have to remember that if ur calling a command via button/trigger, it will not cancel th command until the next loop when it polls and sees that the button was let go, so its definitely possible that it runs an the execute once after u let go just based off timing.\\u003c/p\\u003e\",\"post_number\":5,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-27T17:28:32.482Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":223,\"readers_count\":222,\"score\":49.6,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Alex\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":28614,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor \\u0026 Alumnus\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/5\",\"custom_user_title\":\"Mentor \\u0026 Alumnus\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3570394,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2025-03-27T18:56:16.853Z\",\"cooked\":\"\\u003caside class=\\\"quote quote-modified\\\" data-post=\\\"1\\\" data-topic=\\\"465602\\\"\\u003e\\n  \\u003cdiv class=\\\"title\\\"\\u003e\\n    \\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n    \\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/oblarg/48/161674_2.png\\\" class=\\\"avatar\\\"\\u003e\\n    \\u003ca href=\\\"https://www.chiefdelphi.com/t/command-based-best-practices-for-2025-community-feedback/465602\\\"\\u003eCommand-based best practices for 2025: community feedback\\u003c/a\\u003e \\u003ca class=\\\"badge-category__wrapper \\\" href=\\\"/c/technical/programming/30\\\"\\u003e\\u003cspan data-category-id=\\\"30\\\" style=\\\"--category-badge-color: #F7941D; --category-badge-text-color: #FFF; --parent-category-badge-color: #3AB54A;\\\" data-parent-category-id=\\\"9\\\" data-drop-close=\\\"true\\\" class=\\\"badge-category --has-parent\\\" title=\\\"Discussion of any ideas, algorithms, etc.\\\"\\u003e\\u003cspan class=\\\"badge-category__name\\\"\\u003eProgramming\\u003c/span\\u003e\\u003c/span\\u003e\\u003c/a\\u003e\\n  \\u003c/div\\u003e\\n  \\u003cblockquote\\u003e\\n    I’m currently working on a “best practices” article around usage of the WPILib Command-based framework for frc-docs.  It’s been 5 years since the “v2” framework debuted, and both the library and its usage have evolved quite a bit in that time.  The documentation has changed, as well, but is starting to show some structural cracks as teams start doing things that require more flexibility than our basic examples demonstrate. \\nI don’t have time to write a full set of new documentation, but I do hav…\\n  \\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\",\"post_number\":6,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-27T18:56:16.853Z\",\"reply_count\":0,\"reply_to_post_number\":5,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":199,\"readers_count\":198,\"score\":79.8,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://www.chiefdelphi.com/t/command-based-best-practices-for-2025-community-feedback/465602\",\"internal\":true,\"reflection\":false,\"title\":\"Command-based best practices for 2025: community feedback\",\"clicks\":0}],\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":28614,\"username\":\"legoguy1000\",\"name\":\"Alex\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/legoguy1000/{size}/256261_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/6\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3570529,\"name\":\"Max Morehead\",\"username\":\"Max_Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\",\"created_at\":\"2025-03-27T20:58:55.003Z\",\"cooked\":\"\\u003caside class=\\\"onebox allowlistedgeneric\\\" data-onebox-src=\\\"https://docs.wpilib.org/en/stable/docs/software/commandbased/command-scheduler.html\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003cimg src=\\\"https://docs.wpilib.org/en/stable/_static/FIRSTicon_RGB_withTM.ico\\\" class=\\\"site-icon\\\" width=\\\"64\\\" height=\\\"64\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/commandbased/command-scheduler.html\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eFIRST Robotics Competition Documentation\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003cimg width=\\\"256\\\" height=\\\"256\\\" src=\\\"https://raw.githubusercontent.com/wpilibsuite/branding/main/export/png/wpilib-icon-256.png\\\" class=\\\"thumbnail onebox-avatar\\\"\\u003e\\n\\n\\u003ch3\\u003e\\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/commandbased/command-scheduler.html\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eThe Command Scheduler\\u003c/a\\u003e\\u003c/h3\\u003e\\n\\n  \\u003cp\\u003eThe CommandScheduler( Java, C++) is the class responsible for actually running commands. Each iteration (ordinarily once per 20ms), the scheduler polls all registered buttons, schedules commands fo...\\u003c/p\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eSo the \\u003ccode\\u003eperiodic\\u003c/code\\u003e will be called before \\u003ccode\\u003eexecute\\u003c/code\\u003e which is called before \\u003ccode\\u003eisFinished\\u003c/code\\u003e/\\u003ccode\\u003eend\\u003c/code\\u003e. So your current architecture introduces up to 20ms lag between execute/end and periodic. So whenever you switch commands, you’ll have a small period where the motor is commanded to stop.\\u003c/p\\u003e\\n\\u003cp\\u003eOblarg, who wrote the command system, linked his best practices. Looking at his team (449’s) code has been useful for our team this year, though it is Kotlin. In general, I would be careful with the “commands cause a change in a internal state machine only” pattern under the current framework, though there are ways to do it that will work.\\u003c/p\\u003e\\n\\u003cp\\u003eThe way I think of it, the simplest way to use the Command system is for the currently running command to be the thing that tracks the desired state of the subsystem (or as I like to think about it, the goal), and the execute function in that command be responsible for calling the subsystem functions to drive the robot to that goal.\\u003c/p\\u003e\\n\\u003cp\\u003eFor this reason, I don’t like to use end functions, because now you’ve introduced behavior that happens on the transition between different goals, rather than the having the logic in the execute function of each command be the only thing responsible for driving the robot to its goal. Not using end functions makes logic more local IMO. Caveat: If you don’t have end methods, you do have to be be a bit careful there aren’t cases where no command is running (especially in compositions).\\u003c/p\\u003e\\n\\u003cp\\u003eIf you use the factory function on class pattern this can make your code very clean, modifiable, and understandable.\\u003c/p\\u003e\\n\\u003caside class=\\\"onebox allowlistedgeneric\\\" data-onebox-src=\\\"https://docs.wpilib.org/en/stable/docs/software/commandbased/organizing-command-based.html\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003cimg src=\\\"https://docs.wpilib.org/en/stable/_static/FIRSTicon_RGB_withTM.ico\\\" class=\\\"site-icon\\\" width=\\\"64\\\" height=\\\"64\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/commandbased/organizing-command-based.html\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eFIRST Robotics Competition Documentation\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003cimg width=\\\"256\\\" height=\\\"256\\\" src=\\\"https://raw.githubusercontent.com/wpilibsuite/branding/main/export/png/wpilib-icon-256.png\\\" class=\\\"thumbnail onebox-avatar\\\"\\u003e\\n\\n\\u003ch3\\u003e\\u003ca href=\\\"https://docs.wpilib.org/en/stable/docs/software/commandbased/organizing-command-based.html\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eOrganizing Command-Based Robot Projects\\u003c/a\\u003e\\u003c/h3\\u003e\\n\\n  \\u003cp\\u003eAs robot code becomes more complicated, navigating, understanding, and maintaining the code takes up more and more time and energy. Making changes to the code often becomes more difficult, sometime...\\u003c/p\\u003e\\n\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003cp\\u003eThe other big piece of advice is use triggers liberally. Triggers are great for loosely coupling different subsystems.\\u003c/p\\u003e\\n\\u003cp\\u003eOne other hazard that’s related here is that state machines in robots have the complexity that moving between desired end goals have lots of intermediates physical robot states in the middle. Ideally, you want to smoothly handle changing your goal while your robot in an intermediate physical state. The way we’ve handled this is to write the logic so that that the robot can reach the goal from any valid intermediate state, but that can sometimes be tricky. I’d like to figure out if there’s a better way to do this going forward.\\u003c/p\\u003e\\n\\u003cp\\u003eYou can look at our code if it helps. It isn’t perfect (there’ll be considerable updates hitting main in the next day and half too), but a lot of it is well-considered based on my experience mentoring software for the past three years. I think the structure has been great for managing complexity as we are doing some complex things this year, and for allowing all of our four programming students to contribute.\\u003c/p\\u003e\\n\\u003caside class=\\\"onebox githubfolder\\\" data-onebox-src=\\\"https://github.com/missfits/Robot-Code-2025/tree/main\\\"\\u003e\\n  \\u003cheader class=\\\"source\\\"\\u003e\\n      \\u003cimg src=\\\"https://github.githubassets.com/favicons/favicon.svg\\\" class=\\\"site-icon\\\" width=\\\"32\\\" height=\\\"32\\\"\\u003e\\n\\n      \\u003ca href=\\\"https://github.com/missfits/Robot-Code-2025/tree/main\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003egithub.com\\u003c/a\\u003e\\n  \\u003c/header\\u003e\\n\\n  \\u003carticle class=\\\"onebox-body\\\"\\u003e\\n    \\u003ch3\\u003e\\u003ca href=\\\"https://github.com/missfits/Robot-Code-2025/tree/main\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003eGitHub - missfits/Robot-Code-2025\\u003c/a\\u003e\\u003c/h3\\u003e\\n\\n  \\u003cp\\u003e\\u003ca href=\\\"https://github.com/missfits/Robot-Code-2025/tree/main\\\" target=\\\"_blank\\\" rel=\\\"noopener nofollow ugc\\\"\\u003emain\\u003c/a\\u003e\\u003c/p\\u003e\\n\\n  \\u003cp\\u003e\\u003cspan class=\\\"label1\\\"\\u003eContribute to missfits/Robot-Code-2025 development by creating an account on GitHub.\\u003c/span\\u003e\\u003c/p\\u003e\\n\\n  \\u003c/article\\u003e\\n\\n  \\u003cdiv class=\\\"onebox-metadata\\\"\\u003e\\n    \\n    \\n  \\u003c/div\\u003e\\n\\n  \\u003cdiv style=\\\"clear: both\\\"\\u003e\\u003c/div\\u003e\\n\\u003c/aside\\u003e\\n\\n\\u003caside class=\\\"quote no-group\\\" data-username=\\\"prensing\\\" data-post=\\\"4\\\" data-topic=\\\"497126\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/prensing/48/65820_2.png\\\" class=\\\"avatar\\\"\\u003e prensing:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eIt is not incorrect to use periodic() to implement (for instance) a state machine which handles the motors etc, and only have commands which set the desired state of the subsystem.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eIn my opinion, it is suboptimal under the current framework, especially if you’re not careful. Though I’ve been thinking of ways to expand the framework to better support this pattern, and it’s possible you’ve written structure around this pattern.\\u003c/p\\u003e\\n\\u003cp\\u003eA quick fix that might improve OPs code: You could move all your periodic functions to “endLoopPeriodic” functions and call those manually in Robot.java.\\u003c/p\\u003e\\n\\u003cp\\u003eAnother problem with Op’s approach is that it won’t work correctly with default commands, because the default commands will be intialized, then the periodic function will run based on values set by the previous command’s execute, then the default command will be executed.\\u003c/p\\u003e\",\"post_number\":7,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-28T01:01:15.405Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":1,\"incoming_link_count\":1,\"reads\":173,\"readers_count\":172,\"score\":89.6,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Max Morehead\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":6,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/commandbased/command-scheduler.html\",\"internal\":false,\"reflection\":false,\"title\":\"The Command Scheduler — FIRST Robotics Competition documentation\",\"clicks\":4},{\"url\":\"https://github.com/missfits/Robot-Code-2025/tree/main\",\"internal\":false,\"reflection\":false,\"title\":\"GitHub - missfits/Robot-Code-2025\",\"clicks\":4},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/commandbased/organizing-command-based.html\",\"internal\":false,\"reflection\":false,\"title\":\"Organizing Command-Based Robot Projects — FIRST Robotics Competition documentation\",\"clicks\":3}],\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":3}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53784,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/7\",\"custom_user_title\":\"Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2},{\"id\":\"+1\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":3,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3570530,\"name\":\"Elijah Beard\",\"username\":\"ebear11\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/439d5e/{size}.png\",\"created_at\":\"2025-03-27T21:00:12.437Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"ebear11\\\" data-post=\\\"2\\\" data-topic=\\\"497126\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/letter_avatar_proxy/v4/letter/e/439d5e/48.png\\\" class=\\\"avatar\\\"\\u003e ebear11:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eAt least, this is the approach our team has used.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eHence why I added this. I know there are multiple ways to do one thing. We do states with periodic when we are not able to not do it that way due to time constraints or other random issues but we do not like mixing and matching, as you mentioned being consistent is more important.\\u003c/p\\u003e\",\"post_number\":8,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-27T21:00:12.437Z\",\"reply_count\":1,\"reply_to_post_number\":4,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":120,\"readers_count\":119,\"score\":29.0,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Elijah Beard\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":25118,\"username\":\"prensing\",\"name\":\"Paul Rensing\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/prensing/{size}/65820_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":56380,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"5402 Programming M̶e̶n̶t̶o̶r̶ Advisor\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/8\",\"custom_user_title\":\"5402 Programming M̶e̶n̶t̶o̶r̶ Advisor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3571273,\"name\":\"Ed Peters\",\"username\":\"epeters1111\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/epeters1111/{size}/182731_2.png\",\"created_at\":\"2025-03-28T15:42:31.810Z\",\"cooked\":\"\\u003cp\\u003eWow, thanks everyone for the thoughtful replies, and the links. This has been really educational for me. A couple of big takeaways for me. From \\u003ca class=\\\"mention\\\" href=\\\"/u/max_morehead\\\"\\u003e@Max_Morehead\\u003c/a\\u003e :\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eyour current architecture introduces up to 20ms lag between execute/end and periodic\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eThis is 100% true, and something we learned very late this season. We’re not going to refactor a bunch of mostly-working code that has take us to our best-ever season performance. But we’ll definitely keep it in mind for next year.\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003euse triggers liberally\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eThis is getting me to think differently for sure. I’ve coded up \\u003ca href=\\\"https://github.com/ed-peters/learning-wpilib-commands/tree/main/src/main/java/frc/robot/intake\\\" rel=\\\"noopener nofollow ugc\\\"\\u003ea multi-step walkthrough of my thought process\\u003c/a\\u003e here, going through three iterations.\\u003c/p\\u003e\\n\\u003cp\\u003eI’m not sure I’m getting it right, though. I’m still stuck with a problem at the end, where I have a multi-\\u003ccode\\u003eCommand\\u003c/code\\u003e sequence, and I want to know when it’s over. But I can’t see a clean way to create a \\u003ccode\\u003eTrigger\\u003c/code\\u003e for “do something when this specific \\u003ccode\\u003eCommand\\u003c/code\\u003e instance finishes”.\\u003c/p\\u003e\\n\\u003cp\\u003eSee comments on the V3 version of the intake subsystem in the project, if you’re willing to dig in.\\u003c/p\\u003e\\n\\u003cp\\u003eVery much appreciate the conversation!\\u003c/p\\u003e\",\"post_number\":9,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-28T15:42:31.810Z\",\"reply_count\":2,\"reply_to_post_number\":8,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":111,\"readers_count\":110,\"score\":32.2,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Ed Peters\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"link_counts\":[{\"url\":\"https://github.com/ed-peters/learning-wpilib-commands/tree/main/src/main/java/frc/robot/intake\",\"internal\":false,\"reflection\":false,\"title\":\"learning-wpilib-commands/src/main/java/frc/robot/intake at main · ed-peters/learning-wpilib-commands · GitHub\",\"clicks\":14}],\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":56380,\"username\":\"ebear11\",\"name\":\"Elijah Beard\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/439d5e/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":56650,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/9\",\"custom_user_title\":null,\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3571348,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2025-03-28T16:26:15.067Z\",\"cooked\":\"\\u003cp\\u003eVersion 2 looks like what I’d consider the simplest/most direct expression of what you’re trying to do.  A trigger that exists \\u003cem\\u003eonly\\u003c/em\\u003e for command sequencing and doesn’t represent any direct problem-space feature is a code smell; at that point, use proxies.\\u003c/p\\u003e\\n\\u003cp\\u003eYou can eliminate the 20ms delay by adding a single \\u003ccode\\u003erunOnce\\u003c/code\\u003e before the \\u003ccode\\u003erun()\\u003c/code\\u003e, if you wish.  For constant motor outputs, you can even get away with \\u003ccode\\u003erunOnce(...).andThen(idle())\\u003c/code\\u003e.\\u003c/p\\u003e\",\"post_number\":10,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-28T16:26:50.522Z\",\"reply_count\":0,\"reply_to_post_number\":9,\"quote_count\":0,\"incoming_link_count\":2,\"reads\":98,\"readers_count\":97,\"score\":29.6,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":56650,\"username\":\"epeters1111\",\"name\":\"Ed Peters\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/epeters1111/{size}/182731_2.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/10\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3571426,\"name\":\"Ed Peters\",\"username\":\"epeters1111\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/epeters1111/{size}/182731_2.png\",\"created_at\":\"2025-03-28T17:37:45.773Z\",\"cooked\":\"\\u003cblockquote\\u003e\\n\\u003cp\\u003eYou can eliminate the 20ms delay\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eBleargh! I just learned something else by reading the doc more carefully.\\u003c/p\\u003e\\n\\u003cp\\u003eI thought when I did \\u003ccode\\u003euntil(...)\\u003c/code\\u003e it was adding that as an \\u003ccode\\u003eifFinished\\u003c/code\\u003e condition. I stand corrected - my sensor actually will interrupt the “grab” command and immediately switch to the “choke up” command. So I think V2 actually doesn’t have an artificial delay in it.\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003e\\u003ccode\\u003erunOnce(...).andThen(idle())\\u003c/code\\u003e\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eLove this, will definitely adopt it.\\u003c/p\\u003e\\n\\u003cp\\u003eThanks again for the input!\\u003c/p\\u003e\",\"post_number\":11,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-28T17:37:45.773Z\",\"reply_count\":1,\"reply_to_post_number\":null,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":90,\"readers_count\":89,\"score\":38.0,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Ed Peters\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":56650,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/11\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3571506,\"name\":\"Bob Bell\",\"username\":\"rjbell4\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/8c91f0/{size}.png\",\"created_at\":\"2025-03-28T19:07:09.440Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"Max_Morehead\\\" data-post=\\\"7\\\" data-topic=\\\"497126\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/max_morehead/48/231937_2.png\\\" class=\\\"avatar\\\"\\u003e Max_Morehead:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eThe other big piece of advice is use triggers liberally. Triggers are great for loosely coupling different subsystems.\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eI get the feeling that we are underutilizing Triggers, mostly limiting them to button presses, etc.\\u003c/p\\u003e\\n\\u003cp\\u003eCan you give a couple of examples of good uses for Triggers?\\u003c/p\\u003e\",\"post_number\":12,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-28T19:07:09.440Z\",\"reply_count\":2,\"reply_to_post_number\":7,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":79,\"readers_count\":78,\"score\":25.8,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Bob Bell\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":37016,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"9496| Programming Mentor\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/12\",\"custom_user_title\":\"9496| Programming Mentor\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3571548,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2025-03-28T19:44:20.362Z\",\"cooked\":\"\\u003caside class=\\\"quote no-group\\\" data-username=\\\"epeters1111\\\" data-post=\\\"11\\\" data-topic=\\\"497126\\\"\\u003e\\n\\u003cdiv class=\\\"title\\\"\\u003e\\n\\u003cdiv class=\\\"quote-controls\\\"\\u003e\\u003c/div\\u003e\\n\\u003cimg loading=\\\"lazy\\\" alt=\\\"\\\" width=\\\"24\\\" height=\\\"24\\\" src=\\\"https://www.chiefdelphi.com/user_avatar/www.chiefdelphi.com/epeters1111/48/182731_2.png\\\" class=\\\"avatar\\\"\\u003e epeters1111:\\u003c/div\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eThanks again for the input!\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003c/aside\\u003e\\n\\u003cp\\u003eNo prob!  I am very impressed with the quality of your first-take code following the best practices.  Be sure to teach others the way!\\u003c/p\\u003e\",\"post_number\":13,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-28T19:44:20.362Z\",\"reply_count\":0,\"reply_to_post_number\":11,\"quote_count\":1,\"incoming_link_count\":0,\"reads\":73,\"readers_count\":72,\"score\":14.6,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/13\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3571554,\"name\":\"Max Morehead\",\"username\":\"Max_Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\",\"created_at\":\"2025-03-28T19:49:09.919Z\",\"cooked\":\"\\u003cp\\u003eHere’s an example of how we used triggers to coordinate between elevator and arm movement so that the arm doesn’t hit our ramp, and the arm stays inside the robot while the elevator is moving, but they move in parallel when possible (rewritten in the last few days).\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003epublic Command moveToCommand(RobotState targetRobotState) {\\n        if (targetRobotState == RobotState.L4_CORAL) {\\n            return Commands.parallel(\\n                Commands.sequence(\\n                    m_arm.moveToCommand(ArmConstants.MIN_POS_ELEVATOR_CLEAR, false)\\n                        .until(m_elevator.okToMoveArmBackTrigger()),\\n                    m_arm.moveToCommand(ArmConstants.UPPER_INSIDE_ROBOT_BOUND, false)\\n                        .until(m_elevator.isAtGoal(targetRobotState.getElevatorPos())),\\n                    m_arm.moveToCommand(targetRobotState.getArmPos(), true)\\n                ),\\n                Commands.sequence(\\n                    Commands.waitSeconds(3).until(m_arm.isArmInsideRobotTrigger()),\\n                    m_elevator.moveToCommand(targetRobotState.getElevatorPos(), true)\\n                )\\n            ).until(isLifterAtGoal(targetRobotState.getArmPos(), targetRobotState.getElevatorPos())).withName(\\\"moveToL4Command\\\");\\n        } else {\\n            // move arm to intermediate pos inside the robot before moving elevator\\n            double armIntermediatePosition = MathUtil.clamp(targetRobotState.getArmPos(), \\n                ArmConstants.MIN_POS_ELEVATOR_CLEAR, ArmConstants.LOWER_INSIDE_ROBOT_BOUND);\\n            // keep elevator at intermediate pos to let arm move past ramp\\n            double elevatorIntermediatePosition = Math.max(targetRobotState.getElevatorPos(), \\n                ElevatorConstants.MIN_POS_ARM_CLEAR);\\n            return Commands.parallel(\\n                Commands.sequence(\\n                    m_arm.moveToCommand(armIntermediatePosition, false)\\n                    .until(m_arm.isArmInsideRobotTrigger()\\n                        .and(m_elevator.isAtGoal(targetRobotState.getElevatorPos()))),\\n                    m_arm.moveToCommand(targetRobotState.getArmPos(), true)\\n                ), \\n                Commands.sequence(\\n                    Commands.waitSeconds(3).until(m_arm.isArmInsideRobotTrigger()),\\n                    m_elevator.moveToCommand(elevatorIntermediatePosition, false)\\n                        .until(m_arm.okToMoveElevatorDownTrigger()),\\n                    m_elevator.moveToCommand(targetRobotState.getElevatorPos(), true)\\n                )\\n            ).until(isLifterAtGoal(targetRobotState.getArmPos(), targetRobotState.getElevatorPos())).withName(\\\"moveToCommand\\\");\\n        }\\n    }\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eThis was a lot better than our our previous attempts where we tried to break down each step of the movement separately.\\u003c/p\\u003e\\n\\u003cp\\u003eI also think we learned that using event markers in pathplanner is more flexible than using sequential groups.\\u003c/p\\u003e\",\"post_number\":14,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-28T20:03:11.165Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":75,\"readers_count\":74,\"score\":50.0,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Max Morehead\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":37016,\"username\":\"rjbell4\",\"name\":\"Bob Bell\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/8c91f0/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":53784,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Mentor\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/14\",\"custom_user_title\":\"Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3571585,\"name\":\"SLAB-Mr.Thomas\",\"username\":\"SLAB-Mr.Thomas\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/slab-mr.thomas/{size}/182153_2.png\",\"created_at\":\"2025-03-28T20:11:40.524Z\",\"cooked\":\"\\u003cp\\u003eI hope I’m not being too contrary but your code (\\u003cspan class=\\\"hashtag-raw\\\"\\u003e#2\\u003c/span\\u003e) looks like the product of refactoring that typically doesn’t happen until summer if at all.\\u003c/p\\u003e\\n\\u003cp\\u003eThe students are in an experimental mode to get the robot to work and when an experiment ends successfully they move on without refactoring.\\u003c/p\\u003e\\n\\u003cp\\u003eTo perform the experiments quickly they need easy visibility into what’s happening - not the lowest level of code but not the highest abstraction, either.\\u003c/p\\u003e\\n\\u003cp\\u003eThis is closer to what I think the students typically produce to get done faster and move on:\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003e//defined on the button binding:\\n runIntake(GRAB_SPEED).until(gamePieceAcquired::get)\\n.andThen(runIntake(CHOKE_UP_SPEED).withTimeout(CHOKE_UP_SECS))\\n\\u003c/code\\u003e\\u003c/pre\\u003e\\n\\u003cp\\u003eThey had coded \\u003ccode\\u003erunIntake\\u003c/code\\u003e early on before the intake had been built.\\u003c/p\\u003e\",\"post_number\":15,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-28T20:11:40.524Z\",\"reply_count\":1,\"reply_to_post_number\":9,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":67,\"readers_count\":66,\"score\":33.4,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"SLAB-Mr.Thomas\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":56650,\"username\":\"epeters1111\",\"name\":\"Ed Peters\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/epeters1111/{size}/182731_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":24594,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/15\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3571629,\"name\":\"Ed Peters\",\"username\":\"epeters1111\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/epeters1111/{size}/182731_2.png\",\"created_at\":\"2025-03-28T20:54:39.026Z\",\"cooked\":\"\\u003cblockquote\\u003e\\n\\u003cp\\u003eyour code (\\u003cspan class=\\\"hashtag-raw\\\"\\u003e#2\\u003c/span\\u003e) looks like the product of refactoring that typically doesn’t happen until summer if at all\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eTotally agree. This is highly sanitized sample code meant to illustrate a question (and hopefully become a teaching tool for students in the off-season). In reality we build very small Commands, map them to buttons and test them individually, and then string them together. And refactoring doesn’t happen until summer (if then).\\u003c/p\\u003e\\n\\u003cp\\u003e(FWIW … the way I describe Commands to the kids is that we’re writing our own little language to talk to the robot with. We use Java to create the “words” and then we string together our own sentences to describe what we want to happen.)\\u003c/p\\u003e\\n\\u003cp\\u003eThis year our intake was even messier - we had a wiring problem in one of our sensors that would cause intermittent problems. We kept thinking it was a logic error so we tore it apart, rebuilt it and embedded more and more logging with increasing levels of frustration. Until we figured out there was a broken wire. \\u003cimg src=\\\"https://www.chiefdelphi.com/images/emoji/google/person_shrugging.png?v=12\\\" title=\\\":person_shrugging:\\\" class=\\\"emoji\\\" alt=\\\":person_shrugging:\\\" loading=\\\"lazy\\\" width=\\\"20\\\" height=\\\"20\\\"\\u003e\\u003c/p\\u003e\\n\\u003cblockquote\\u003e\\n\\u003cp\\u003eHere’s an example of how we used triggers …\\u003c/p\\u003e\\n\\u003c/blockquote\\u003e\\n\\u003cp\\u003eThis is great. Will definitely remember the technique of using “event markers”.\\u003c/p\\u003e\\n\\u003cp\\u003eWe tried to construct the sequence of commands to safely move parts of the system in parallel, but ran out of time to test. We broke one of our intakes during early testing and just decided to play it safe - move one part at a time. We could probably shave several seconds off cycle time being better at it, but we had bigger fish to fry.\\u003c/p\\u003e\",\"post_number\":16,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-28T20:54:39.026Z\",\"reply_count\":0,\"reply_to_post_number\":15,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":68,\"readers_count\":67,\"score\":28.6,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Ed Peters\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":null,\"reply_to_user\":{\"id\":24594,\"username\":\"SLAB-Mr.Thomas\",\"name\":\"SLAB-Mr.Thomas\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/slab-mr.thomas/{size}/182153_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":56650,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/16\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3571675,\"name\":\"Bob Bell\",\"username\":\"rjbell4\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/8c91f0/{size}.png\",\"created_at\":\"2025-03-28T21:27:59.146Z\",\"cooked\":\"\\u003cp\\u003eHmm, where you used at lot of \\u003ccode\\u003eCommand.until(subsystem.returnsTrigger())\\u003c/code\\u003e, we might use \\u003ccode\\u003eCommand.until(subsystem::returnsBoolean)\\u003c/code\\u003e.  From what I can tell, many/most of your \\u003ccode\\u003ereturnsTrigger\\u003c/code\\u003e implementation just wrap \\u003ccode\\u003enew Trigger()\\u003c/code\\u003e around a \\u003ccode\\u003ereturnsBoolean\\u003c/code\\u003e routine.\\u003c/p\\u003e\\n\\u003cp\\u003eIs there something about \\u003ccode\\u003eTrigger\\u003c/code\\u003es I’m missing that make them preferable to just supplying \\u003ccode\\u003ereturnsBoolean\\u003c/code\\u003e instead?\\u003c/p\\u003e\",\"post_number\":17,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-28T21:27:59.146Z\",\"reply_count\":1,\"reply_to_post_number\":14,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":64,\"readers_count\":63,\"score\":47.8,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Bob Bell\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":53784,\"username\":\"Max_Morehead\",\"name\":\"Max Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":37016,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"9496| Programming Mentor\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/17\",\"custom_user_title\":\"9496| Programming Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3571951,\"name\":\"Eli Barnett\",\"username\":\"Oblarg\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"created_at\":\"2025-03-29T02:07:42.371Z\",\"cooked\":\"\\u003cp\\u003eTriggers are Boolean suppliers, so if you have one for command binding and it’s named usefully there’s no reason not to use it in an until condition.\\u003c/p\\u003e\\n\\u003cp\\u003eYou don’t need a trigger for this, as you’ve observed.  It just comes “for free” with one.\\u003c/p\\u003e\",\"post_number\":18,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-29T17:17:42.254Z\",\"reply_count\":0,\"reply_to_post_number\":17,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":61,\"readers_count\":60,\"score\":12.2,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Eli Barnett\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":2,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":37016,\"username\":\"rjbell4\",\"name\":\"Bob Bell\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/8c91f0/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":12381,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"Robot apartments! invisible suburbs! skeleton treasuries!\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/18\",\"custom_user_title\":\"Robot apartments! invisible suburbs! skeleton treasuries!\",\"reactions\":[],\"current_user_reaction\":null,\"reaction_users_count\":0,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3572213,\"name\":\"Cooper Meitz\",\"username\":\"GarbanzoBeans\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/garbanzobeans/{size}/232609_2.png\",\"created_at\":\"2025-03-29T14:53:17.672Z\",\"cooked\":\"\\u003cp\\u003eMy favorite way we’ve used triggers this season is to automate actions during our auto-align sequence. These are mainly to help simplify things for the driver, so we do things like flash the LEDs when we’re close to the scoring target, prefire the elevator and shoulder automatically, and determine the elevator height when we’re de-algaeing the reef. We haven’t used it in a competition yet, so we’ll see how helpful it ends up being (and obviously good is subjective), but it’s by far the most creative way we’ve used triggers in the 3 years we’ve run a command-based architecture.\\u003c/p\\u003e\\n\\u003cpre\\u003e\\u003ccode class=\\\"lang-auto\\\"\\u003e// AutoAlign.java\\npublic Trigger createCheckpointTrigger(Double checkpointDistance, AutoAlignUtils.Mode mode) {\\n        return new Trigger(() -\\u0026gt; currentMode == mode \\u0026amp;\\u0026amp; targetPose != null\\n                \\u0026amp;\\u0026amp; swerve.getPose().getTranslation().getDistance(targetPose.getTranslation()) \\u0026lt;= checkpointDistance);\\n    }\\n\\n// Robot.java\\nautoAlign.createCheckpointTrigger(Units.inchesToMeters(40), AutoAlignUtils.Mode.Reef).onTrue(scoringUtil.getScoreCommand());\\nautoAlign.createCheckpointTrigger(Units.inchesToMeters(4), AutoAlignUtils.Mode.Reef).whileTrue(\\n\\t\\t\\tnew StartEndCommand(\\n\\t\\t\\t\\t\\t\\t\\t() -\\u0026gt; leds.setPattern(LEDConstants.kPreFire),\\n\\t\\t \\t\\t\\t\\t\\t() -\\u0026gt; leds.setPattern(LEDPattern.kOff)\\n\\t\\t \\t\\t\\t\\t)\\n\\t\\t);\\n// ...\\n\\u003c/code\\u003e\\u003c/pre\\u003e\",\"post_number\":19,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-29T14:53:17.672Z\",\"reply_count\":1,\"reply_to_post_number\":12,\"quote_count\":0,\"incoming_link_count\":0,\"reads\":45,\"readers_count\":44,\"score\":29.0,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Cooper Meitz\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":37016,\"username\":\"rjbell4\",\"name\":\"Bob Bell\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/8c91f0/{size}.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":1}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":28095,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/19\",\"custom_user_title\":null,\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":1}],\"current_user_reaction\":null,\"reaction_users_count\":1,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null},{\"id\":3572235,\"name\":\"Bob Bell\",\"username\":\"rjbell4\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/8c91f0/{size}.png\",\"created_at\":\"2025-03-29T15:21:19.788Z\",\"cooked\":\"\\u003cp\\u003eIs the main difference between a \\u003ccode\\u003eTrigger\\u003c/code\\u003e and a “regular” Boolean supplier that a \\u003ccode\\u003eTrigger\\u003c/code\\u003e gets checked automatically every period, and that can schedule commands?\\u003c/p\\u003e\\n\\u003cp\\u003ei.e., it seems when using \\u003ccode\\u003e.until()\\u003c/code\\u003e, there’s not much difference, because the invocation is tied to command execution.  But in \\u003ca class=\\\"mention\\\" href=\\\"/u/garbanzobeans\\\"\\u003e@GarbanzoBeans\\u003c/a\\u003e’s use case, it causes commands not currently scheduled to become scheduled and execute.\\u003c/p\\u003e\\n\\u003cp\\u003eI could see some application there.  For example, in our coral scoring procedure, we automatically move the robot into scoring position, and raise the elevator only when we are a certain distance from the reef.  We do that by running two commands (which themselves are compounds) in parallel – one that moves the robot, and another that waits for the robot to be within the desired range, and then raises the elevator.\\u003c/p\\u003e\\n\\u003cp\\u003eWith a \\u003ccode\\u003eTrigger\\u003c/code\\u003e, I could instead potentially say “when the robot is within range, raise the elevator”, and have that be scheduled independently, not as part of the larger compound command.\\u003c/p\\u003e\\n\\u003cp\\u003eI see two potential complications to that:\\u003c/p\\u003e\\n\\u003col\\u003e\\n\\u003cli\\u003eWe wouldn’t want the elevator raised \\u003cem\\u003ewhenever\\u003c/em\\u003e we are within range, only when we are within range \\u003cem\\u003eand\\u003c/em\\u003e scoring.  \\u003ca class=\\\"mention\\\" href=\\\"/u/garbanzobeans\\\"\\u003e@GarbanzoBeans\\u003c/a\\u003e seems to be handling that by checking a “mode”.  That mode is sort of implicit when it’s built into a compound command, since it only is executing in that context.\\u003c/li\\u003e\\n\\u003cli\\u003eYou’d want your \\u003ccode\\u003eTrigger\\u003c/code\\u003e check to be pretty lightweight, since it would be checked \\u003cem\\u003eevery\\u003c/em\\u003e robot period, not only when you are in the “mode” where you need it.\\u003c/li\\u003e\\n\\u003c/ol\\u003e\\n\\u003cp\\u003eJust checking to try to expand my understanding of available options so we can utilize them effectively!\\u003c/p\\u003e\",\"post_number\":20,\"post_type\":1,\"posts_count\":21,\"updated_at\":\"2025-03-29T15:21:19.788Z\",\"reply_count\":1,\"reply_to_post_number\":19,\"quote_count\":0,\"incoming_link_count\":1,\"reads\":43,\"readers_count\":42,\"score\":48.6,\"yours\":false,\"topic_id\":497126,\"topic_slug\":\"command-vs-subsystem-split\",\"display_username\":\"Bob Bell\",\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_bg_color\":null,\"flair_color\":null,\"flair_group_id\":null,\"badges_granted\":[],\"version\":1,\"can_edit\":false,\"can_delete\":false,\"can_recover\":false,\"can_see_hidden_post\":true,\"can_wiki\":false,\"read\":true,\"user_title\":\"\",\"reply_to_user\":{\"id\":28095,\"username\":\"GarbanzoBeans\",\"name\":\"Cooper Meitz\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/garbanzobeans/{size}/232609_2.png\"},\"bookmarked\":false,\"actions_summary\":[{\"id\":2,\"count\":2}],\"moderator\":false,\"admin\":false,\"staff\":false,\"user_id\":37016,\"hidden\":false,\"trust_level\":2,\"deleted_at\":null,\"user_deleted\":false,\"edit_reason\":null,\"can_view_edit_history\":true,\"wiki\":false,\"user_custom_fields\":{\"user_field_4\":\"9496| Programming Mentor\"},\"post_url\":\"/t/command-vs-subsystem-split/497126/20\",\"custom_user_title\":\"9496| Programming Mentor\",\"reactions\":[{\"id\":\"heart\",\"type\":\"emoji\",\"count\":2}],\"current_user_reaction\":null,\"reaction_users_count\":2,\"current_user_used_main_reaction\":false,\"can_accept_answer\":false,\"can_unaccept_answer\":false,\"accepted_answer\":false,\"topic_accepted_answer\":null}],\"stream\":[3570093,3570104,3570110,3570238,3570243,3570394,3570529,3570530,3571273,3571348,3571426,3571506,3571548,3571554,3571585,3571629,3571675,3571951,3572213,3572235,3572261]},\"timeline_lookup\":[[1,198],[9,197],[19,196]],\"tags\":[],\"tags_descriptions\":{},\"fancy_title\":\"Command vs Subsystem split\",\"id\":497126,\"title\":\"Command vs Subsystem split\",\"posts_count\":21,\"created_at\":\"2025-03-27T15:10:20.787Z\",\"views\":785,\"reply_count\":15,\"like_count\":26,\"last_posted_at\":\"2025-03-29T16:00:13.577Z\",\"visible\":true,\"closed\":false,\"archived\":false,\"has_summary\":false,\"archetype\":\"regular\",\"slug\":\"command-vs-subsystem-split\",\"category_id\":30,\"word_count\":3103,\"deleted_at\":null,\"user_id\":56650,\"featured_link\":null,\"pinned_globally\":false,\"pinned_at\":null,\"pinned_until\":null,\"image_url\":null,\"slow_mode_seconds\":0,\"draft\":null,\"draft_key\":\"topic_497126\",\"draft_sequence\":null,\"unpinned\":null,\"pinned\":false,\"current_post_number\":1,\"highest_post_number\":21,\"deleted_by\":null,\"actions_summary\":[{\"id\":4,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":8,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":10,\"count\":0,\"hidden\":false,\"can_act\":false},{\"id\":7,\"count\":0,\"hidden\":false,\"can_act\":false}],\"chunk_size\":20,\"bookmarked\":false,\"topic_timer\":{\"id\":46116,\"execute_at\":\"2026-03-29T16:00:13.577Z\",\"duration_minutes\":525600,\"based_on_last_post\":true,\"status_type\":\"close\",\"category_id\":null},\"message_bus_last_id\":0,\"participant_count\":9,\"show_read_indicator\":false,\"thumbnails\":null,\"slow_mode_enabled_until\":null,\"valid_reactions\":[\"heart\",\"laughing\",\"point_up\",\"+1\",\"-1\",\"100\",\"open_mouth\",\"cry\",\"question\",\"thinking\",\"call_me_hand\",\"hugs\",\"angry\"],\"user_chosen_thumbnail_url\":null,\"sidecar_installed\":true,\"can_vote\":false,\"vote_count\":0,\"user_voted\":false,\"discourse_zendesk_plugin_zendesk_id\":null,\"discourse_zendesk_plugin_zendesk_url\":\"https://your-url.zendesk.com/agent/tickets/\",\"details\":{\"can_edit\":false,\"notification_level\":1,\"participants\":[{\"id\":56650,\"username\":\"epeters1111\",\"name\":\"Ed Peters\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/epeters1111/{size}/182731_2.png\",\"post_count\":5,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":12381,\"username\":\"Oblarg\",\"name\":\"Eli Barnett\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/oblarg/{size}/161674_2.png\",\"post_count\":4,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":37016,\"username\":\"rjbell4\",\"name\":\"Bob Bell\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/r/8c91f0/{size}.png\",\"post_count\":3,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":28095,\"username\":\"GarbanzoBeans\",\"name\":\"Cooper Meitz\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/garbanzobeans/{size}/232609_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":53784,\"username\":\"Max_Morehead\",\"name\":\"Max Morehead\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/max_morehead/{size}/231937_2.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":56380,\"username\":\"ebear11\",\"name\":\"Elijah Beard\",\"avatar_template\":\"/letter_avatar_proxy/v4/letter/e/439d5e/{size}.png\",\"post_count\":2,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":28614,\"username\":\"legoguy1000\",\"name\":\"Alex\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/legoguy1000/{size}/256261_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":25118,\"username\":\"prensing\",\"name\":\"Paul Rensing\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/prensing/{size}/65820_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2},{\"id\":24594,\"username\":\"SLAB-Mr.Thomas\",\"name\":\"SLAB-Mr.Thomas\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/slab-mr.thomas/{size}/182153_2.png\",\"post_count\":1,\"primary_group_name\":null,\"flair_name\":null,\"flair_url\":null,\"flair_color\":null,\"flair_bg_color\":null,\"flair_group_id\":null,\"trust_level\":2}],\"created_by\":{\"id\":56650,\"username\":\"epeters1111\",\"name\":\"Ed Peters\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/epeters1111/{size}/182731_2.png\"},\"last_poster\":{\"id\":28095,\"username\":\"GarbanzoBeans\",\"name\":\"Cooper Meitz\",\"avatar_template\":\"/user_avatar/www.chiefdelphi.com/garbanzobeans/{size}/232609_2.png\"},\"links\":[{\"url\":\"https://github.com/ed-peters/learning-wpilib-commands/tree/main/src/main/java/frc/robot/intake\",\"title\":\"learning-wpilib-commands/src/main/java/frc/robot/intake at main · ed-peters/learning-wpilib-commands · GitHub\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":14,\"user_id\":56650,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/commandbased/command-scheduler.html\",\"title\":\"The Command Scheduler — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":4,\"user_id\":53784,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"},{\"url\":\"https://github.com/missfits/Robot-Code-2025/tree/main\",\"title\":\"GitHub - missfits/Robot-Code-2025\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":4,\"user_id\":53784,\"domain\":\"github.com\",\"root_domain\":\"github.com\"},{\"url\":\"https://docs.wpilib.org/en/stable/docs/software/commandbased/organizing-command-based.html\",\"title\":\"Organizing Command-Based Robot Projects — FIRST Robotics Competition documentation\",\"internal\":false,\"attachment\":false,\"reflection\":false,\"clicks\":3,\"user_id\":53784,\"domain\":\"docs.wpilib.org\",\"root_domain\":\"wpilib.org\"}]},\"bookmarks\":[]}"}
